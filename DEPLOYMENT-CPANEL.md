# ุฑุงูููุง ุงุณุชูุฑุงุฑ ุฑู cPanel (ูุงุณุช ูุฑูโูุฑฺฉ ุงุฑุงู)

ุงู ุฑุงูููุง ูุฎุตูุต ุงุณุชูุฑุงุฑ ูพุฑูฺู Next.js ุฑู cPanel ุจุง ูพุดุชุจุงู Node.js ุงุณุช.

## ๐ ูพุดโูุงุฒูุง ุฏุฑ cPanel

ุงุฒ ุชุตุงูุฑ cPanel ุดูุง ูุดุฎุต ุงุณุช ฺฉู:
- โ **PostgreSQL** ุฏุฑ ุฏุณุชุฑุณ ุงุณุช (PostgreSQL Disk Usage ุฏุฑ ุขูุงุฑูุง)
- โ **Setup Node.js App** ุฏุฑ ุจุฎุด Software ููุฌูุฏ ุงุณุช
- โ **File Manager** ุจุฑุง ุขูพููุฏ ูุงูโูุง
- โ **Terminal** ุจุฑุง ุงุฌุฑุง ุฏุณุชูุฑุงุช
- โ **Database Management** (phpMyAdmin, Manage My Databases)
- โ **Git Version Control** (ุงุฎุชุงุฑ)

## ๐ ูุฑุงุญู ุงุณุชูุฑุงุฑ ุฏุฑ cPanel

### ูุฑุญูู 1: ุขูุงุฏูโุณุงุฒ ูุงูโูุง ูุญุท

1. ูุงู `env.production.template` ุฑุง ฺฉูพ ฺฉูุฏ ู ุจู `.env.production` ุชุบุฑ ูุงู ุฏูุฏ
2. ููุงุฏุฑ ุฑุง ุจุง ุงุทูุงุนุงุช ูุงูุน ูุงุณุช ุฎูุฏ ุชูุธู ฺฉูุฏ:

```env
DB_HOST=localhost
DB_PORT=5432
DB_NAME=saded
DB_USER=your-cpanel-username_saded
DB_PASSWORD=your-db-password
NODE_ENV=production
NEXT_PUBLIC_URL=https://yourdomain.com
ZARINPAL_MERCHANT_ID=your-merchant-id
NEXTAUTH_URL=https://yourdomain.com
NEXTAUTH_SECRET=your-secret-key
```

**โ๏ธ ูฺฉุชู ููู:** ุฏุฑ cPanelุ ูุงู ฺฉุงุฑุจุฑ ุฏุชุงุจุณ ูุนูููุงู ุจู ุตูุฑุช `username_dbname` ุงุณุช.

### ูุฑุญูู 2: ุณุงุฎุช ูพุฑูฺู ุฏุฑ ูุญุท ูุญู

ูุจู ุงุฒ ุขูพููุฏุ ูพุฑูฺู ุฑุง build ฺฉูุฏ:

```bash
# ูุตุจ ูุงุจุณุชฺฏโูุง
pnpm install

# ุณุงุฎุช ูพุฑูฺู
pnpm build
```

### ูุฑุญูู 3: ุงุฌุงุฏ ุฏุชุงุจุณ PostgreSQL ุฏุฑ cPanel

1. ุจู cPanel ูุงุฑุฏ ุดูุฏ
2. ุจู ุจุฎุด **"Databases"** ุจุฑูุฏ
3. ุฑู **"Manage My Databases"** ฺฉูฺฉ ฺฉูุฏ
4. ุฏุชุงุจุณ ุฌุฏุฏ ุจุง ูุงู `saded` ุงุฌุงุฏ ฺฉูุฏ
5. ฺฉุงุฑุจุฑ ุฏุชุงุจุณ ุงุฌุงุฏ ฺฉูุฏ ู ุฑูุฒ ุนุจูุฑ ุชูุธู ฺฉูุฏ
6. ฺฉุงุฑุจุฑ ุฑุง ุจู ุฏุชุงุจุณ ุงุถุงูู ฺฉูุฏ ู ุชูุงู ุฏุณุชุฑุณโูุง ุฑุง ุจุฏูุฏ
7. ุงุทูุงุนุงุช ุงุชุตุงู ุฑุง ุงุฏุฏุงุดุช ฺฉูุฏ (ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ `.env.production`)

### ูุฑุญูู 4: ุขูพููุฏ ูุงูโูุง ุจู cPanel

#### ุฑูุด 1: ุงุณุชูุงุฏู ุงุฒ File Manager

1. ุจู cPanel ุจุฑูุฏ
2. ุฑู **"File Manager"** ฺฉูฺฉ ฺฉูุฏ
3. ุจู ูพูุดู `public_html` ุง ูพูุดู ุฏุงููู ุฎูุฏ ุจุฑูุฏ
4. ูุงูโูุง ู ูพูุดูโูุง ุฒุฑ ุฑุง ุขูพููุฏ ฺฉูุฏ:

```
๐ฆ ูุงูโูุง ููุฑุฏ ูุงุฒ:
โโโ .next/              # ูพูุดู build ุดุฏู (ูพุณ ุงุฒ pnpm build)
โโโ public/             # ูพูุดู ูุงูโูุง ุงุณุชุงุชฺฉ
โโโ package.json        # ูุงู ูุงุจุณุชฺฏโูุง
โโโ package-lock.json   # ุง pnpm-lock.yaml
โโโ next.config.ts      # ุชูุธูุงุช Next.js
โโโ tsconfig.json       # ุชูุธูุงุช TypeScript
โโโ .env.production     # ูุชุบุฑูุง ูุญุท (โ๏ธ ููู!)
โโโ ecosystem.config.js # ุชูุธูุงุช PM2 (ุงุฎุชุงุฑ)
```

**ูฺฉุงุช ููู:**
- ูพูุดู `.next` ุฑุง ุญุชูุงู ุขูพููุฏ ฺฉูุฏ
- ูุงู `.env.production` ุฑุง ุจู `.env` ุชุบุฑ ูุงู ุฏูุฏ
- ูพูุดู `node_modules` ุฑุง ุขูพููุฏ ูฺฉูุฏ (ุฏุฑ ูุงุณุช ูุตุจ ูโุดูุฏ)

#### ุฑูุด 2: ุงุณุชูุงุฏู ุงุฒ Git (ุชูุตู ูโุดูุฏ) โญ

ุงู ุฑูุด ุจุฑุง ุจูโุฑูุฒุฑุณุงูโูุง ุจุนุฏ ุฑุงุญุชโุชุฑ ุงุณุช.

**ูุฑุญูู 1: Push ูพุฑูฺู ุจู GitHub**

ุฏุฑ ูุญุท ูุญู ุฎูุฏ:

```bash
# ุงฺฏุฑ repository ุฌุฏุฏ ุงุณุช
git init
git add .
git commit -m "Initial commit"
git branch -M main
git remote add origin https://github.com/mohamadjavad200024/saded.git
git push -u origin main

# ุง ุงฺฏุฑ repository ุงุฒ ูุจู ูุฌูุฏ ุฏุงุฑุฏ
git remote add origin https://github.com/mohamadjavad200024/saded.git
git branch -M main
git push -u origin main
```

**โ๏ธ ููู:** ูุงู `.env.production` ุฑุง ุจู `.gitignore` ุงุถุงูู ฺฉูุฏ ุชุง ุฏุฑ Git commit ูุดูุฏ!

**ูุฑุญูู 2: Clone ุฏุฑ cPanel**

1. ุจู cPanel ุจุฑูุฏ
2. ุจู ุจุฎุด **"Files"** โ **"Gitโข Version Control"** ุจุฑูุฏ
3. ุฑู **"Create"** ฺฉูฺฉ ฺฉูุฏ
4. ุงุทูุงุนุงุช ุฒุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ:

```
Repository URL: https://github.com/mohamadjavad200024/saded.git
Repository Root: public_html/saded (ุง ูุณุฑ ุฏูุฎูุงู)
Repository Name: saded
Branch: main
```

5. ุฑู **"Create"** ฺฉูฺฉ ฺฉูุฏ

**ูุฑุญูู 3: ุชูุธู ูุงู ูุญุท**

1. ุฏุฑ Terminal cPanelุ ุจู ูพูุดู ูพุฑูฺู ุจุฑูุฏ:

```bash
cd ~/public_html/saded
```

2. ูุงู `.env` ุฑุง ุงุฌุงุฏ ฺฉูุฏ:

```bash
# ฺฉูพ ุงุฒ template
cp env.production.template .env

# ุง ุงุฌุงุฏ ุฏุณุช
nano .env
```

3. ููุงุฏุฑ ุฑุง ุจุง ุงุทูุงุนุงุช ูุงูุน ูุงุณุช ุชูุธู ฺฉูุฏ

**ูุฑุญูู 4: Build ู ูุตุจ ุฏุฑ ูุงุณุช**

ุฏุฑ Terminal cPanel:

```bash
cd ~/public_html/saded

# ูุตุจ ูุงุจุณุชฺฏโูุง
pnpm install --production
# ุง
npm install --production

# Build ูพุฑูฺู
pnpm build
# ุง
npm run build
```

**ูุฒุงุง ุงุณุชูุงุฏู ุงุฒ Git:**
- โ ุขูพููุฏ ุฏุณุช ูุงูโูุง ูุงุฒู ูุณุช
- โ ุจูโุฑูุฒุฑุณุงู ุฑุงุญุช: ููุท `git pull` ฺฉูุฏ
- โ ูุฏุฑุช ูุณุฎูโูุง ุจูุชุฑ ุงุณุช
- โ ููฺฉุงุฑ ุชู ุฑุงุญุชโุชุฑ ุงุณุช

**ุจุฑุง ุจูโุฑูุฒุฑุณุงูโูุง ุจุนุฏ:**

```bash
cd ~/public_html/saded
git pull origin main
pnpm install --production
pnpm build
# ุณูพุณ Node.js App ุฑุง restart ฺฉูุฏ
```

### ูุฑุญูู 5: ุฑุงูโุงูุฏุงุฒ Node.js App ุฏุฑ cPanel

1. ุจู cPanel ุจุฑูุฏ
2. ุจู ุจุฎุด **"Software"** ุจุฑูุฏ
3. ุฑู **"Setup Node.js App"** ฺฉูฺฉ ฺฉูุฏ
4. ุชูุธูุงุช ุฒุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ:

```
Node.js Version: 18.x ุง 20.x (ุขุฎุฑู ูุณุฎู)
Application Root: public_html (ุง ูุณุฑ ูพุฑูฺู ุดูุง)
Application URL: / (ุง ูุณุฑ ุฏูุฎูุงู)
Application Startup File: server.js (ุง ูุงู start)
```

5. ุฑู **"Create"** ฺฉูฺฉ ฺฉูุฏ

**โ๏ธ ูฺฉุชู:** ุงฺฏุฑ `Setup Node.js App` ูุฏุงุฑุฏุ ุงุฒ Terminal ุงุณุชูุงุฏู ฺฉูุฏ.

### ูุฑุญูู 6: ูุตุจ ูุงุจุณุชฺฏโูุง ู ุฑุงูโุงูุฏุงุฒ

#### ุงุณุชูุงุฏู ุงุฒ Terminal ุฏุฑ cPanel

1. ุจู cPanel ุจุฑูุฏ
2. ุจู ุจุฎุด **"Advanced"** ุจุฑูุฏ
3. ุฑู **"Terminal"** ฺฉูฺฉ ฺฉูุฏ
4. ุจู ูุณุฑ ูพุฑูฺู ุจุฑูุฏ:

```bash
cd ~/public_html
# ุง ูุณุฑ ูพุฑูฺู ุดูุง
```

5. ูุงุจุณุชฺฏโูุง ุฑุง ูุตุจ ฺฉูุฏ:

```bash
# ุงฺฏุฑ pnpm ุฏุฑ ุฏุณุชุฑุณ ุงุณุช
pnpm install --production

# ุง ุจุง npm
npm install --production
```

6. ุฑุงูโุงูุฏุงุฒ ุฏุชุงุจุณ:

```bash
node scripts/setup-db-production.js
```

7. ุจุฑุฑุณ ุขูุงุฏูโุณุงุฒ:

```bash
node scripts/check-deployment.js
```

### ูุฑุญูู 7: ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑ

#### ฺฏุฒูู 1: ุงุณุชูุงุฏู ุงุฒ Node.js App Manager ุฏุฑ cPanel

1. ุฏุฑ **"Setup Node.js App"**ุ ุฑู **"Manage"** ฺฉูฺฉ ฺฉูุฏ
2. ุฏุณุชูุฑ start ุฑุง ุชูุธู ฺฉูุฏ: `npm start` ุง `pnpm start`
3. ุฑู **"Run NPM Install"** ฺฉูฺฉ ฺฉูุฏ (ุงฺฏุฑ ูุงุฒ ุจุงุดุฏ)
4. ุฑู **"Restart App"** ฺฉูฺฉ ฺฉูุฏ

#### ฺฏุฒูู 2: ุงุณุชูุงุฏู ุงุฒ PM2 (ุงฺฏุฑ ุฏุฑ Terminal ุฏุณุชุฑุณ ุฏุงุฑุฏ)

```bash
# ูุตุจ PM2 (ุงฺฏุฑ ูุตุจ ูุณุช)
npm install -g pm2

# ุฑุงูโุงูุฏุงุฒ ุจุง PM2
pm2 start ecosystem.config.js
pm2 save
pm2 startup
```

#### ฺฏุฒูู 3: ุงุณุชูุงุฏู ุงุฒ nohup (ุณุงุฏูโุชุฑู ุฑูุด)

```bash
# ุฏุฑ Terminal
cd ~/public_html
nohup npm start > app.log 2>&1 &
```

### ูุฑุญูู 8: ุชูุธูุงุช ูุงูโูุง Upload

1. ุฏุฑ File Managerุ ุจู ูพูุดู `public/uploads` ุจุฑูุฏ
2. ุฑู ูพูุดู ฺฉูฺฉ ุฑุงุณุช ฺฉูุฏ
3. **"Change Permissions"** ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
4. ุฏุณุชุฑุณ ุฑุง `755` ุง `775` ุชูุธู ฺฉูุฏ

ุง ุฏุฑ Terminal:

```bash
chmod -R 755 public/uploads
```

### ูุฑุญูู 9: ุชูุธูุงุช Domain ู DNS

1. ุจู ุจุฎุด **"Domains"** ุฏุฑ cPanel ุจุฑูุฏ
2. ุฏุงููู ุฎูุฏ ุฑุง ุจุฑุฑุณ ฺฉูุฏ
3. ุงฺฏุฑ ูุงุฒ ุจู ุชูุธูุงุช DNS ุฏุงุฑุฏุ ุงุฒ **"Zone Editor"** ุงุณุชูุงุฏู ฺฉูุฏ

### ูุฑุญูู 10: ุชูุธูุงุช SSL (HTTPS)

1. ุจู ุจุฎุด **"Security"** ุจุฑูุฏ
2. ุฑู **"SSL/TLS Status"** ฺฉูฺฉ ฺฉูุฏ
3. ุฏุงููู ุฎูุฏ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
4. ุฑู **"Run AutoSSL"** ฺฉูฺฉ ฺฉูุฏ
5. ุง ุงุฒ **"Let's Encryptโข SSL"** ุงุณุชูุงุฏู ฺฉูุฏ

## ๐ ุจุฑุฑุณ ู ุชุณุช

### ุจุฑุฑุณ ุงุชุตุงู ุฏุชุงุจุณ

ุฏุฑ Terminal:

```bash
node scripts/health-check.js
```

### ุจุฑุฑุณ ูุงฺฏโูุง

ุฏุฑ Terminal:

```bash
# ุงฺฏุฑ ุงุฒ PM2 ุงุณุชูุงุฏู ูโฺฉูุฏ
pm2 logs saded

# ุง ูุงฺฏ ูุงู ุฑุง ุจุจูุฏ
tail -f app.log
```

### ุชุณุช ุฏุณุชุฑุณ

1. ุจู ุขุฏุฑุณ ุฏุงููู ุฎูุฏ ุจุฑูุฏ
2. ุจุฑุฑุณ ฺฉูุฏ ฺฉู ุตูุญุงุช ุจู ุฏุฑุณุช ููุฏ ูโุดููุฏ
3. ุชุณุช ฺฉูุฏ ฺฉู ุงุชุตุงู ุจู ุฏุชุงุจุณ ฺฉุงุฑ ูโฺฉูุฏ

## ๐๏ธ ุนุจโุงุจ ุฏุฑ cPanel

### ูุดฺฉู: Node.js App ุฑุงูโุงูุฏุงุฒ ููโุดูุฏ

**ุฑุงูโุญู:**
1. ุฏุฑ **"Setup Node.js App"**ุ ูุงฺฏโูุง ุฑุง ุจุฑุฑุณ ฺฉูุฏ
2. ูุทูุฆู ุดูุฏ ฺฉู Node.js version ุฏุฑุณุช ุงุณุช
3. ุจุฑุฑุณ ฺฉูุฏ ฺฉู `package.json` ู `next.config.ts` ุฏุฑุณุช ูุณุชูุฏ
4. ุจุฑุฑุณ ฺฉูุฏ ฺฉู ูุงู `.env` ููุฌูุฏ ุงุณุช

### ูุดฺฉู: ุฏุชุงุจุณ ูุชุตู ููโุดูุฏ

**ุฑุงูโุญู:**
1. ุฏุฑ cPanelุ ุจู **"Manage My Databases"** ุจุฑูุฏ
2. ุจุฑุฑุณ ฺฉูุฏ ฺฉู ุฏุชุงุจุณ ู ฺฉุงุฑุจุฑ ุงุฌุงุฏ ุดุฏูโุงูุฏ
3. ุจุฑุฑุณ ฺฉูุฏ ฺฉู ฺฉุงุฑุจุฑ ุจู ุฏุชุงุจุณ ุฏุณุชุฑุณ ุฏุงุฑุฏ
4. ุฏุฑ `.env`ุ ูุงู ฺฉุงุฑุจุฑ ุฑุง ุจู ูุฑูุช `username_dbname` ุชูุธู ฺฉูุฏ
5. Host ุฑุง `localhost` ูฺฏู ุฏุงุฑุฏ

### ูุดฺฉู: ุตูุญุงุช 404 ูโุฏููุฏ

**ุฑุงูโุญู:**
1. ุจุฑุฑุณ ฺฉูุฏ ฺฉู ูพูุดู `.next` ุขูพููุฏ ุดุฏู ุงุณุช
2. ุจุฑุฑุณ ฺฉูุฏ ฺฉู `next.config.ts` ุฏุฑุณุช ุงุณุช
3. ุจุฑุฑุณ ฺฉูุฏ ฺฉู Node.js App ุฏุฑุณุช ุฑุงูโุงูุฏุงุฒ ุดุฏู ุงุณุช

### ูุดฺฉู: ุชุตุงูุฑ ููุฏ ููโุดููุฏ

**ุฑุงูโุญู:**
1. ุจุฑุฑุณ ฺฉูุฏ ฺฉู ูพูุดู `public` ุขูพููุฏ ุดุฏู ุงุณุช
2. ุจุฑุฑุณ ฺฉูุฏ ฺฉู ุฏุณุชุฑุณ ูุงูโูุง ุฏุฑุณุช ุงุณุช (`chmod 755`)
3. ุจุฑุฑุณ ฺฉูุฏ ฺฉู `next.config.ts` ุชูุธูุงุช image ุฏุฑุณุช ุงุณุช

## ๐ ูฺฉุงุช ููู ุจุฑุง cPanel

1. **ูุงู ฺฉุงุฑุจุฑ ุฏุชุงุจุณ:** ุฏุฑ cPanelุ ูุงู ฺฉุงุฑุจุฑ ุฏุชุงุจุณ ูุนูููุงู ุจู ุตูุฑุช `cpanel_username_dbname` ุงุณุช
2. **ูุณุฑ ูุงูโูุง:** ูุงูโูุง ูุนูููุงู ุฏุฑ `~/public_html` ุง `~/domains/yourdomain.com/public_html` ูุณุชูุฏ
3. **Port:** Node.js App ุฏุฑ cPanel ูุนูููุงู ุฑู ูพูุฑุช ุฎุงุต ุงุฌุฑุง ูโุดูุฏ (ูู 3000)
4. **Environment Variables:** ูโุชูุงูุฏ ุฏุฑ **"Setup Node.js App"** ูุชุบุฑูุง ูุญุท ุฑุง ุชูุธู ฺฉูุฏ
5. **Restart:** ุจุนุฏ ุงุฒ ูุฑ ุชุบุฑ ุฏุฑ `.env` ุง ูุงูโูุง configุ App ุฑุง restart ฺฉูุฏ

## ๐ ุฏุณุชูุฑุงุช ููุฏ ุฏุฑ Terminal

```bash
# ุจุฑุฑุณ ูุณุฎู Node.js
node --version

# ุจุฑุฑุณ ูุณุฎู npm/pnpm
npm --version
pnpm --version

# ุจุฑุฑุณ ูุงูโูุง ููุฌูุฏ
ls -la

# ุจุฑุฑุณ ุงุณุชูุงุฏู ุงุฒ ุฏุณฺฉ
df -h

# ุจุฑุฑุณ process ูุง ุฏุฑ ุญุงู ุงุฌุฑุง
ps aux | grep node

# ุจุฑุฑุณ ูพูุฑุชโูุง ุจุงุฒ
netstat -tulpn
```

## ๐ ูพุดุชุจุงู

ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉู:
1. ูุงฺฏโูุง Node.js App ุฑุง ุฏุฑ cPanel ุจุฑุฑุณ ฺฉูุฏ
2. ูุงฺฏโูุง Terminal ุฑุง ุจุฑุฑุณ ฺฉูุฏ
3. ุจุง ูพุดุชุจุงู ูุงุณุช ุชูุงุณ ุจฺฏุฑุฏ

## ๐ฏ ฺฺฉโูุณุช ููุง

ูุจู ุงุฒ ุงุชูุงู ุงุณุชูุฑุงุฑุ ุงู ููุงุฑุฏ ุฑุง ุจุฑุฑุณ ฺฉูุฏ:

- [ ] ูุงู `.env` ุจุง ุงุทูุงุนุงุช ุฏุฑุณุช ุชูุธู ุดุฏู ุงุณุช
- [ ] ุฏุชุงุจุณ PostgreSQL ุงุฌุงุฏ ู ุฑุงูโุงูุฏุงุฒ ุดุฏู ุงุณุช
- [ ] ุฌุฏุงูู ุฏุชุงุจุณ ุงุฌุงุฏ ุดุฏูโุงูุฏ (`setup-db-production.js`)
- [ ] ูุงูโูุง ูพุฑูฺู ุขูพููุฏ ุดุฏูโุงูุฏ
- [ ] ูุงุจุณุชฺฏโูุง ูุตุจ ุดุฏูโุงูุฏ (`npm install --production`)
- [ ] Node.js App ุฑุงูโุงูุฏุงุฒ ุดุฏู ุงุณุช
- [ ] SSL certificate ูุนุงู ุงุณุช
- [ ] ูพูุดู `public/uploads` ูุงุจู ููุดุชู ุงุณุช
- [ ] ุณุงุช ุฏุฑ ุฏุณุชุฑุณ ุงุณุช ู ฺฉุงุฑ ูโฺฉูุฏ
- [ ] ุงุชุตุงู ุจู ุฏุชุงุจุณ ฺฉุงุฑ ูโฺฉูุฏ
- [ ] ุฏุฑฺฏุงู ูพุฑุฏุงุฎุช (ุฏุฑ ุตูุฑุช ุงุณุชูุงุฏู) ฺฉุงุฑ ูโฺฉูุฏ

---

**ูููู ุจุงุดุฏ! ๐**

ุจุฑุง ุฌุฒุฆุงุช ุจุดุชุฑุ ูุงู `DEPLOYMENT.md` ุฑุง ูุทุงูุนู ฺฉูุฏ.

