module.exports=[31068,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(3130),f=a.i(40695),g=a.i(5522),h=a.i(17171),i=a.i(77687),j=a.i(43108),k=a.i(96221),l=a.i(25173);function m(){let[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(!1),{toast:q}=(0,i.useToast)(),r=(0,d.useRouter)(),{user:s,isAuthenticated:t,hasCheckedAuth:u}=(0,l.useAuthStore)();(0,c.useEffect)(()=>{u&&t&&s?.role==="admin"&&r.push("/admin")},[u,t,s,r]);let v=async b=>{if(b.preventDefault(),!m.trim())return void q({title:"خطا",description:"لطفاً رمز عبور را وارد کنید",variant:"destructive"});p(!0);try{let b=await fetch("/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({password:m})}),c=await b.json();if(c.success){q({title:"موفق",description:"ورود با موفقیت انجام شد"});let{useAuthStore:b}=await a.A(46280);c.data?.user&&b.setState({user:{id:c.data.user.id,name:c.data.user.name,phone:c.data.user.phone||"",role:c.data.user.role||"admin",createdAt:c.data.user.createdAt||new Date().toISOString()},isAuthenticated:!0,hasCheckedAuth:!0}),r.push("/admin")}else q({title:"خطا",description:c.error||"رمز عبور اشتباه است",variant:"destructive"})}catch(a){q({title:"خطا",description:a.message||"خطا در اتصال به سرور",variant:"destructive"})}finally{p(!1)}};return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted p-4",children:(0,b.jsxs)(e.Card,{className:"w-full max-w-md",children:[(0,b.jsxs)(e.CardHeader,{className:"space-y-1 text-center",children:[(0,b.jsx)("div",{className:"flex justify-center mb-4",children:(0,b.jsx)("div",{className:"p-3 bg-primary/10 rounded-full",children:(0,b.jsx)(j.Lock,{className:"h-8 w-8 text-primary"})})}),(0,b.jsx)(e.CardTitle,{className:"text-2xl font-bold",children:"ورود ادمین"}),(0,b.jsx)(e.CardDescription,{children:"برای دسترسی به پنل مدیریت، رمز عبور ادمین را وارد کنید"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"password",children:"رمز عبور ادمین"}),(0,b.jsx)(g.Input,{id:"password",type:"password",placeholder:"رمز عبور را وارد کنید",value:m,onChange:a=>n(a.target.value),disabled:o,autoFocus:!0,className:"text-center"})]}),(0,b.jsx)(f.Button,{type:"submit",className:"w-full",disabled:o,children:o?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"در حال ورود..."]}):"ورود"})]})})]})})}a.s(["default",()=>m])},46280,a=>{a.v(a=>Promise.resolve().then(()=>a(25173)))}];

//# sourceMappingURL=_49259a7e._.js.map