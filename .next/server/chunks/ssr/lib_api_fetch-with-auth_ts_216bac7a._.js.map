{"version":3,"sources":["../../../../lib/api/fetch-with-auth.ts"],"sourcesContent":["/**\r\n * Helper function برای fetch با header های احراز هویت\r\n */\r\nexport async function fetchWithAuth(\r\n  url: string,\r\n  options: RequestInit = {}\r\n): Promise<Response> {\r\n  // دریافت userId و role از localStorage\r\n  let userId: string | null = null;\r\n  let userRole: string | null = null;\r\n\r\n  if (typeof window !== \"undefined\") {\r\n    userId = localStorage.getItem(\"saded_user_id\");\r\n    userRole = localStorage.getItem(\"saded_user_role\");\r\n  }\r\n\r\n  // اضافه کردن header ها\r\n  const headers = new Headers(options.headers);\r\n  \r\n  if (userId && userId !== \"guest\") {\r\n    headers.set(\"x-user-id\", userId);\r\n  }\r\n  \r\n  if (userRole) {\r\n    headers.set(\"x-user-role\", userRole);\r\n  }\r\n\r\n  // اگر Content-Type تنظیم نشده، اضافه کن\r\n  if (!headers.has(\"Content-Type\") && options.body) {\r\n    headers.set(\"Content-Type\", \"application/json\");\r\n  }\r\n\r\n  return fetch(url, {\r\n    ...options,\r\n    headers,\r\n  });\r\n}\r\n\r\n"],"names":[],"mappings":"uCAGO,eAAe,EACpB,CAAW,CACX,EAAuB,CAAC,CAAC,EAYzB,IAAM,EAAU,IAAI,QAAQ,EAAQ,OAAO,EAe3C,MAJI,CAAC,EAAQ,GAAG,CAAC,iBAAmB,EAAQ,IAAI,EAAE,AAChD,EAAQ,GAAG,CAAC,eAAgB,oBAGvB,MAAM,EAAK,CAChB,GAAG,CAAO,SACV,CACF,EACF"}