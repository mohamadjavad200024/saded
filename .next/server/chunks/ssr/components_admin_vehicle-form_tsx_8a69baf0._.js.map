{"version":3,"sources":["../../../../components/admin/vehicle-form.tsx","../../../../components/admin/single-image-upload.tsx"],"sourcesContent":["\"use client\";\n\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport * as z from \"zod\";\nimport { Vehicle } from \"@/types/vehicle\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useVehicleStore } from \"@/store/vehicle-store\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\nimport { Loader2, Car, Plus, X, Image as ImageIcon } from \"lucide-react\";\nimport { useQueryClient } from \"@tanstack/react-query\";\nimport { SingleImageUpload } from \"@/components/admin/single-image-upload\";\n\nconst vehicleSchema = z.object({\n  name: z.string().min(1, \"نام خودرو الزامی است\"),\n  logo: z.string().optional().nullable(),\n  models: z.array(z.string()).default([]),\n  enabled: z.boolean(),\n});\n\ntype VehicleFormData = z.infer<typeof vehicleSchema>;\n\ninterface VehicleFormProps {\n  vehicle?: Vehicle;\n  onSuccess?: () => void;\n}\n\nexport function VehicleForm({ vehicle, onSuccess }: VehicleFormProps) {\n  const router = useRouter();\n  const { addVehicle, updateVehicle, loadVehiclesFromDB } = useVehicleStore();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [modelInput, setModelInput] = useState(\"\");\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors, isSubmitting },\n    setValue,\n    watch,\n  } = useForm<VehicleFormData>({\n    resolver: zodResolver(vehicleSchema),\n    defaultValues: vehicle\n      ? {\n          name: vehicle.name,\n          logo: vehicle.logo || \"\",\n          models: vehicle.models || [],\n          enabled: vehicle.enabled,\n        }\n      : {\n          name: \"\",\n          logo: \"\",\n          models: [],\n          enabled: true,\n        },\n  });\n\n  const models = watch(\"models\") || [];\n  const enabled = watch(\"enabled\");\n  const logo = watch(\"logo\");\n\n  const addModel = () => {\n    if (modelInput.trim()) {\n      const currentModels = watch(\"models\") || [];\n      if (!currentModels.includes(modelInput.trim())) {\n        setValue(\"models\", [...currentModels, modelInput.trim()]);\n        setModelInput(\"\");\n      }\n    }\n  };\n\n  const removeModel = (index: number) => {\n    const currentModels = watch(\"models\") || [];\n    setValue(\"models\", currentModels.filter((_, i) => i !== index));\n  };\n\n  const compressBase64Image = (base64: string, maxSize: number = 1024 * 1024): Promise<string> => {\n    return new Promise((resolve, reject) => {\n      // If image is already small enough, return as-is\n      if (base64.length <= maxSize) {\n        resolve(base64);\n        return;\n      }\n\n      const img = new Image();\n      img.onload = () => {\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n        if (!ctx) {\n          reject(new Error('Could not get canvas context'));\n          return;\n        }\n\n        // Calculate new dimensions (max 800x800, maintain aspect ratio)\n        const maxDimension = 800;\n        let width = img.width;\n        let height = img.height;\n\n        if (width > maxDimension || height > maxDimension) {\n          if (width > height) {\n            height = (height / width) * maxDimension;\n            width = maxDimension;\n          } else {\n            width = (width / height) * maxDimension;\n            height = maxDimension;\n          }\n        }\n\n        canvas.width = width;\n        canvas.height = height;\n        ctx.drawImage(img, 0, 0, width, height);\n        \n        // Try different quality levels until we get under maxSize\n        const qualities = [0.85, 0.7, 0.6, 0.5];\n        for (const quality of qualities) {\n          const compressed = canvas.toDataURL('image/jpeg', quality);\n          if (compressed.length <= maxSize) {\n            resolve(compressed);\n            return;\n          }\n        }\n        \n        // If still too large, use lowest quality\n        resolve(canvas.toDataURL('image/jpeg', 0.4));\n      };\n      img.onerror = () => reject(new Error('Failed to load image'));\n      img.src = base64;\n    });\n  };\n\n  const onSubmit = async (data: VehicleFormData) => {\n    // #region agent log\n    fetch('http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'components/admin/vehicle-form.tsx:83',message:'onSubmit entry',data:{hasVehicle:!!vehicle,vehicleId:vehicle?.id,logoType:typeof data.logo,logoLength:data.logo?data.logo.length:0},timestamp:Date.now(),sessionId:'debug-session',runId:'run2',hypothesisId:'F'})}).catch(()=>{});\n    // #endregion\n    try {\n      // Compress logo if it's too large (>1MB)\n      let logo = data.logo && data.logo.trim() !== '' ? data.logo : null;\n      if (logo && logo.length > 1024 * 1024) {\n        // #region agent log\n        fetch('http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'components/admin/vehicle-form.tsx:120',message:'Logo too large, compressing',data:{originalLength:logo.length},timestamp:Date.now(),sessionId:'debug-session',runId:'run2',hypothesisId:'F'})}).catch(()=>{});\n        // #endregion\n        try {\n          logo = await compressBase64Image(logo, 1024 * 1024);\n          // #region agent log\n          fetch('http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'components/admin/vehicle-form.tsx:125',message:'Logo compressed',data:{compressedLength:logo.length},timestamp:Date.now(),sessionId:'debug-session',runId:'run2',hypothesisId:'F'})}).catch(()=>{});\n          // #endregion\n        } catch (compressError) {\n          // #region agent log\n          fetch('http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'components/admin/vehicle-form.tsx:128',message:'Compression failed',data:{error:compressError instanceof Error?compressError.message:String(compressError)},timestamp:Date.now(),sessionId:'debug-session',runId:'run2',hypothesisId:'F'})}).catch(()=>{});\n          // #endregion\n          // If compression fails, set logo to null to avoid database error\n          logo = null;\n        }\n      }\n      \n      // Ensure logo is properly formatted (null instead of empty string)\n      const payload = {\n        ...data,\n        logo: logo,\n      };\n      // #region agent log\n      fetch('http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'components/admin/vehicle-form.tsx:140',message:'Payload prepared',data:{payloadLogoType:typeof payload.logo,payloadLogoLength:payload.logo?payload.logo.length:0,payloadLogoIsNull:payload.logo===null},timestamp:Date.now(),sessionId:'debug-session',runId:'run2',hypothesisId:'F'})}).catch(()=>{});\n      // #endregion\n      \n      if (process.env.NODE_ENV === 'development') {\n        console.log('[VehicleForm] Submitting vehicle:', {\n          name: payload.name,\n          hasLogo: !!payload.logo,\n          logoType: payload.logo ? typeof payload.logo : 'none',\n          logoLength: payload.logo ? payload.logo.length : 0,\n          logoPreview: payload.logo ? payload.logo.substring(0, 50) : 'none',\n        });\n      }\n      \n      if (vehicle) {\n        // #region agent log\n        let jsonStringified;\n        try {\n          jsonStringified = JSON.stringify(payload);\n          fetch('http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'components/admin/vehicle-form.tsx:102',message:'Before fetch PUT',data:{jsonLength:jsonStringified.length,vehicleId:vehicle.id},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\n        } catch (stringifyError) {\n          fetch('http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'components/admin/vehicle-form.tsx:102',message:'JSON.stringify error',data:{error:stringifyError?.message},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\n          throw stringifyError;\n        }\n        // #endregion\n        const response = await fetch(`/api/vehicles/${vehicle.id}`, {\n          method: \"PUT\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: jsonStringified,\n        });\n        // #region agent log\n        fetch('http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'components/admin/vehicle-form.tsx:110',message:'After fetch PUT',data:{responseOk:response.ok,responseStatus:response.status,responseStatusText:response.statusText},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'})}).catch(()=>{});\n        // #endregion\n\n        if (!response.ok) {\n          // #region agent log\n          fetch('http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'components/admin/vehicle-form.tsx:110',message:'Response not OK',data:{status:response.status,statusText:response.statusText},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'})}).catch(()=>{});\n          // #endregion\n          const errorData = await response.json().catch((jsonError) => {\n            // #region agent log\n            fetch('http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'components/admin/vehicle-form.tsx:111',message:'Error response JSON parse failed',data:{error:jsonError?.message},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'})}).catch(()=>{});\n            // #endregion\n            return {};\n          });\n          // #region agent log\n          fetch('http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'components/admin/vehicle-form.tsx:112',message:'Error data parsed',data:{errorMessage:errorData.error||errorData.message},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'A'})}).catch(()=>{});\n          // #endregion\n          throw new Error(errorData.error || errorData.message || \"خطا در به‌روزرسانی خودرو\");\n        }\n\n        const updatedVehicle = await response.json();\n        updateVehicle(vehicle.id, updatedVehicle.data);\n        await loadVehiclesFromDB();\n        \n        toast({\n          title: \"موفق\",\n          description: \"خودرو با موفقیت به‌روزرسانی شد\",\n        });\n      } else {\n        const response = await fetch(\"/api/vehicles\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(payload),\n        });\n\n        if (!response.ok) {\n          const errorData = await response.json().catch(() => ({}));\n          throw new Error(errorData.error || errorData.message || \"خطا در ایجاد خودرو\");\n        }\n\n        const newVehicle = await response.json();\n        addVehicle(newVehicle.data);\n        await loadVehiclesFromDB();\n        \n        toast({\n          title: \"موفق\",\n          description: \"خودرو با موفقیت اضافه شد\",\n        });\n      }\n\n      queryClient.invalidateQueries({ queryKey: [\"vehicles\"] });\n      onSuccess?.();\n      router.push(\"/admin/vehicles\");\n    } catch (error) {\n      toast({\n        title: \"خطا\",\n        description: error instanceof Error ? error.message : \"خطایی رخ داد. لطفاً دوباره تلاش کنید.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\n      <Card className=\"shadow-sm\">\n        <CardHeader className=\"bg-gradient-to-r from-primary/5 to-transparent border-b\">\n          <CardTitle className=\"flex items-center gap-2\">\n            <Car className=\"h-5 w-5 text-primary\" />\n            اطلاعات خودرو\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-6 pt-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"name\">نام خودرو *</Label>\n              <Input\n                id=\"name\"\n                {...register(\"name\")}\n                placeholder=\"مثال: BMW\"\n                className=\"h-11\"\n              />\n              {errors.name && (\n                <p className=\"text-sm text-destructive\">{errors.name.message}</p>\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <SingleImageUpload\n                image={logo || null}\n                onChange={(newLogo) => setValue(\"logo\", newLogo || null)}\n                label=\"لوگو خودرو\"\n              />\n              {errors.logo && (\n                <p className=\"text-sm text-destructive\">{errors.logo.message}</p>\n              )}\n            </div>\n          </div>\n\n          <div className=\"space-y-3 pt-4 border-t border-border/30\">\n            <div className=\"flex items-center justify-between\">\n              <Label className=\"text-base font-semibold\">مدل‌های خودرو</Label>\n              <span className=\"text-sm text-muted-foreground\">\n                {models.length} مدل\n              </span>\n            </div>\n            <div className=\"flex gap-2\">\n              <Input\n                value={modelInput}\n                onChange={(e) => setModelInput(e.target.value)}\n                onKeyDown={(e) => {\n                  if (e.key === \"Enter\") {\n                    e.preventDefault();\n                    addModel();\n                  }\n                }}\n                placeholder=\"نام مدل (مثال: X5)\"\n                className=\"h-11\"\n              />\n              <Button \n                type=\"button\" \n                onClick={addModel} \n                variant=\"outline\"\n                className=\"h-11 px-4\"\n                disabled={!modelInput.trim()}\n              >\n                <Plus className=\"ml-2 h-4 w-4\" />\n                افزودن\n              </Button>\n            </div>\n            {models.length > 0 && (\n              <div className=\"flex flex-wrap gap-2 mt-3 p-4 bg-muted/30 rounded-lg border border-border/30\">\n                {models.map((model, index) => (\n                  <div\n                    key={index}\n                    className=\"flex items-center gap-2 bg-background border border-border px-3 py-2 rounded-md shadow-sm hover:shadow-md transition-shadow\"\n                  >\n                    <span className=\"text-sm font-medium\">{model}</span>\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      className=\"h-6 w-6 hover:bg-destructive/10 hover:text-destructive\"\n                      onClick={() => removeModel(index)}\n                    >\n                      <X className=\"h-3.5 w-3.5\" />\n                    </Button>\n                  </div>\n                ))}\n              </div>\n            )}\n            {models.length === 0 && (\n              <div className=\"text-center py-8 text-muted-foreground border border-dashed border-border/30 rounded-lg bg-muted/20\">\n                <Car className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n                <p className=\"text-sm\">هنوز مدلی اضافه نشده است</p>\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex items-center justify-between pt-4 border-t border-border/30\">\n            <div className=\"space-y-0.5\">\n              <Label>فعال</Label>\n              <p className=\"text-sm text-muted-foreground\">\n                خودرو فعال است و در لیست‌ها نمایش داده می‌شود\n              </p>\n            </div>\n            <Switch\n              checked={enabled}\n              onCheckedChange={(checked) => setValue(\"enabled\", checked)}\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      <div className=\"flex justify-end gap-4 pt-4 border-t border-border/30\">\n        <Button\n          type=\"button\"\n          variant=\"outline\"\n          onClick={() => router.back()}\n          size=\"lg\"\n        >\n          انصراف\n        </Button>\n        <Button type=\"submit\" disabled={isSubmitting} size=\"lg\" className=\"min-w-[140px]\">\n          {isSubmitting ? (\n            <>\n              <Loader2 className=\"ml-2 h-4 w-4 animate-spin\" />\n              در حال ذخیره...\n            </>\n          ) : vehicle ? (\n            \"ذخیره تغییرات\"\n          ) : (\n            \"افزودن خودرو\"\n          )}\n        </Button>\n      </div>\n    </form>\n  );\n}\n\n","\"use client\";\n\nimport { useState, useRef } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { X, Upload, Image as ImageIcon, Loader2 } from \"lucide-react\";\nimport { SafeImage } from \"@/components/ui/safe-image\";\nimport { cn } from \"@/lib/utils\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface SingleImageUploadProps {\n  image: string | null;\n  onChange: (image: string | null) => void;\n  className?: string;\n  label?: string;\n}\n\nexport function SingleImageUpload({\n  image,\n  onChange,\n  className,\n  label = \"لوگو\",\n}: SingleImageUploadProps) {\n  const [uploading, setUploading] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const { toast } = useToast();\n\n  const handleFileSelect = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    // #region agent log\n    fetch('http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'components/admin/single-image-upload.tsx:27',message:'File selected',data:{fileName:file.name,fileSize:file.size,fileType:file.type},timestamp:Date.now(),sessionId:'debug-session',runId:'run2',hypothesisId:'E'})}).catch(()=>{});\n    // #endregion\n\n    // Validate file type\n    if (!file.type.startsWith(\"image/\")) {\n      toast({\n        title: \"خطا\",\n        description: \"فقط فایل‌های تصویری مجاز هستند\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    // Validate file size (max 5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      toast({\n        title: \"خطا\",\n        description: \"حجم فایل نباید بیشتر از 5 مگابایت باشد\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setUploading(true);\n\n    try {\n      // Compress and resize image before converting to base64\n      const compressImage = (file: File): Promise<string> => {\n        return new Promise((resolve, reject) => {\n          const reader = new FileReader();\n          reader.onload = (e) => {\n            const img = new Image();\n            img.onload = () => {\n              // #region agent log\n              fetch('http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'components/admin/single-image-upload.tsx:60',message:'Image loaded for compression',data:{originalWidth:img.width,originalHeight:img.height},timestamp:Date.now(),sessionId:'debug-session',runId:'run2',hypothesisId:'E'})}).catch(()=>{});\n              // #endregion\n              const canvas = document.createElement('canvas');\n              const ctx = canvas.getContext('2d');\n              if (!ctx) {\n                reject(new Error('Could not get canvas context'));\n                return;\n              }\n\n              // Calculate new dimensions (max 800x800, maintain aspect ratio)\n              const maxDimension = 800;\n              let width = img.width;\n              let height = img.height;\n\n              if (width > maxDimension || height > maxDimension) {\n                if (width > height) {\n                  height = (height / width) * maxDimension;\n                  width = maxDimension;\n                } else {\n                  width = (width / height) * maxDimension;\n                  height = maxDimension;\n                }\n              }\n\n              canvas.width = width;\n              canvas.height = height;\n\n              // Draw and compress\n              ctx.drawImage(img, 0, 0, width, height);\n              \n              // Convert to base64 with compression (quality: 0.85 = 85%)\n              const base64String = canvas.toDataURL('image/jpeg', 0.85);\n              \n              // #region agent log\n              fetch('http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'components/admin/single-image-upload.tsx:90',message:'First compression done',data:{compressedWidth:width,compressedHeight:height,base64Length:base64String.length,isTooLarge:base64String.length>1024*1024},timestamp:Date.now(),sessionId:'debug-session',runId:'run2',hypothesisId:'E'})}).catch(()=>{});\n              // #endregion\n              \n              // If compressed image is still too large (>1MB), reduce quality further\n              if (base64String.length > 1024 * 1024) {\n                const compressedString = canvas.toDataURL('image/jpeg', 0.7);\n                // #region agent log\n                fetch('http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'components/admin/single-image-upload.tsx:94',message:'Second compression done',data:{finalBase64Length:compressedString.length},timestamp:Date.now(),sessionId:'debug-session',runId:'run2',hypothesisId:'E'})}).catch(()=>{});\n                // #endregion\n                resolve(compressedString);\n              } else {\n                resolve(base64String);\n              }\n            };\n            img.onerror = () => reject(new Error('Failed to load image'));\n            img.src = e.target?.result as string;\n          };\n          reader.onerror = () => reject(new Error('Failed to read file'));\n          reader.readAsDataURL(file);\n        });\n      };\n\n      const compressedBase64 = await compressImage(file);\n      // #region agent log\n      fetch('http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'components/admin/single-image-upload.tsx:108',message:'Compression complete, calling onChange',data:{finalLength:compressedBase64.length},timestamp:Date.now(),sessionId:'debug-session',runId:'run2',hypothesisId:'E'})}).catch(()=>{});\n      // #endregion\n      onChange(compressedBase64);\n      setUploading(false);\n      toast({\n        title: \"موفق\",\n        description: \"تصویر با موفقیت آپلود شد\",\n      });\n    } catch (error) {\n      // #region agent log\n      fetch('http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'components/admin/single-image-upload.tsx:115',message:'Compression error',data:{error:error instanceof Error?error.message:String(error)},timestamp:Date.now(),sessionId:'debug-session',runId:'run2',hypothesisId:'E'})}).catch(()=>{});\n      // #endregion\n      setUploading(false);\n      toast({\n        title: \"خطا\",\n        description: error instanceof Error ? error.message : \"خطا در آپلود تصویر\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleRemove = () => {\n    onChange(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = \"\";\n    }\n  };\n\n  return (\n    <div className={cn(\"space-y-2\", className)}>\n      <label className=\"text-sm font-medium\">{label}</label>\n      <div className=\"flex items-start gap-4\">\n        {image ? (\n          <div className=\"relative group\">\n            <div className=\"w-24 h-24 rounded-lg border-2 border-border overflow-hidden bg-muted flex items-center justify-center\">\n              <SafeImage\n                src={image}\n                alt={label}\n                className=\"w-full h-full object-contain\"\n                fallback={\n                  <ImageIcon className=\"h-8 w-8 text-muted-foreground\" />\n                }\n              />\n            </div>\n            <Button\n              type=\"button\"\n              variant=\"destructive\"\n              size=\"icon\"\n              className=\"absolute -top-2 -right-2 h-6 w-6 rounded-full opacity-0 group-hover:opacity-100 transition-opacity\"\n              onClick={handleRemove}\n            >\n              <X className=\"h-3 w-3\" />\n            </Button>\n          </div>\n        ) : (\n          <div className=\"w-24 h-24 rounded-lg border-2 border-dashed border-border flex items-center justify-center bg-muted/30\">\n            <ImageIcon className=\"h-8 w-8 text-muted-foreground\" />\n          </div>\n        )}\n        <div className=\"flex-1 space-y-2\">\n          <Button\n            type=\"button\"\n            variant=\"outline\"\n            onClick={() => fileInputRef.current?.click()}\n            disabled={uploading}\n            className=\"w-full\"\n          >\n            {uploading ? (\n              <>\n                <Loader2 className=\"ml-2 h-4 w-4 animate-spin\" />\n                در حال آپلود...\n              </>\n            ) : (\n              <>\n                <Upload className=\"ml-2 h-4 w-4\" />\n                {image ? \"تغییر لوگو\" : \"آپلود لوگو\"}\n              </>\n            )}\n          </Button>\n          <p className=\"text-xs text-muted-foreground\">\n            فرمت‌های مجاز: JPG, PNG, GIF (حداکثر 5MB)\n          </p>\n        </div>\n      </div>\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        accept=\"image/*\"\n        onChange={handleFileSelect}\n        className=\"hidden\"\n      />\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}