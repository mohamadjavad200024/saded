module.exports=[69520,a=>{"use strict";let b=(0,a.i(70106).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],69520)},42607,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(40695),f=a.i(96221);let g=(0,a.i(70106).default)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var h=a.i(69520),i=a.i(25173),j=a.i(50944);function k(){let[a,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(null),{user:p,isAuthenticated:q,hasCheckedAuth:r}=(0,i.useAuthStore)();(0,j.useRouter)(),(0,c.useEffect)(()=>{r&&s()},[r]);let s=async()=>{m(!0),o(null);try{let a=await fetch("/api/debug/database",{credentials:"include"}),b=await a.json();b.success?k(b.data):o(b.error||"خطا در بارگذاری داده‌ها")}catch(a){o(a.message||"خطا در اتصال به سرور")}finally{m(!1)}};return!r||l?(0,b.jsx)("div",{className:"container mx-auto px-4 py-12",children:(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,b.jsx)(f.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):n?(0,b.jsx)("div",{className:"container mx-auto px-4 py-12",children:(0,b.jsx)(d.Card,{children:(0,b.jsxs)(d.CardContent,{className:"pt-6",children:[(0,b.jsx)("div",{className:"text-center text-red-600",children:n}),(0,b.jsx)(e.Button,{onClick:s,className:"mt-4",children:"تلاش مجدد"})]})})}):(0,b.jsx)("div",{className:"container mx-auto px-4 py-6 sm:py-8 md:py-12",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[(0,b.jsx)(g,{className:"h-8 w-8"}),"مشاهده تمام داده‌های دیتابیس"]}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:a?.timestamp&&new Date(a.timestamp).toLocaleString("fa-IR")})]}),(0,b.jsxs)(e.Button,{onClick:s,variant:"outline",children:[(0,b.jsx)(h.RefreshCw,{className:"h-4 w-4 mr-2"}),"به‌روزرسانی"]})]}),a?.tables&&a.tables.length>0?(0,b.jsx)("div",{className:"space-y-6",children:a.tables.map(c=>{let e=a.summary[c];return e?(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)(d.CardTitle,{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{children:c}),(0,b.jsxs)("span",{className:"text-sm font-normal text-muted-foreground",children:[e.rowCount||0," ردیف"]})]})}),(0,b.jsx)(d.CardContent,{children:e.error?(0,b.jsxs)("div",{className:"text-red-600",children:["خطا: ",e.error]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h3",{className:"font-semibold mb-3",children:"ساختار جدول:"}),(0,b.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,b.jsxs)("table",{className:"w-full text-sm border-collapse",children:[(0,b.jsx)("thead",{className:"bg-muted/50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"p-3 text-right border-b border-r",children:"نام ستون"}),(0,b.jsx)("th",{className:"p-3 text-right border-b border-r",children:"نوع داده"}),(0,b.jsx)("th",{className:"p-3 text-right border-b border-r",children:"Nullable"}),(0,b.jsx)("th",{className:"p-3 text-right border-b",children:"Key"})]})}),(0,b.jsx)("tbody",{children:e.columns?.map((a,c)=>(0,b.jsxs)("tr",{className:"border-b even:bg-muted/10 hover:bg-muted/30",children:[(0,b.jsx)("td",{className:"p-3 border-r font-medium",children:a.name}),(0,b.jsx)("td",{className:"p-3 border-r text-muted-foreground",children:a.type}),(0,b.jsx)("td",{className:"p-3 border-r text-center",children:a.nullable?(0,b.jsx)("span",{className:"text-green-600",children:"✓"}):(0,b.jsx)("span",{className:"text-red-600",children:"✗"})}),(0,b.jsx)("td",{className:"p-3",children:a.key&&(0,b.jsx)("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded text-xs",children:a.key})})]},c))})]})})]}),e.sampleData&&e.sampleData.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-semibold mb-3",children:["داده‌ها ",e.hasMore&&`(نمایش ${e.sampleData.length} از ${e.rowCount})`,":"]}),(0,b.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,b.jsxs)("table",{className:"w-full text-sm border-collapse bg-background",children:[(0,b.jsx)("thead",{className:"bg-muted/50",children:(0,b.jsx)("tr",{children:Object.keys(e.sampleData[0]).map(a=>(0,b.jsx)("th",{className:"p-3 text-right font-semibold border-b border-r last:border-r-0 sticky top-0 bg-muted/50 z-10",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{children:a}),(0,b.jsx)("span",{className:"text-xs font-normal text-muted-foreground ml-2",children:e.columns?.find(b=>b.name===a)?.type||""})]})},a))})}),(0,b.jsx)("tbody",{children:e.sampleData.map((a,c)=>(0,b.jsx)("tr",{className:"border-b hover:bg-muted/30 transition-colors even:bg-muted/10",children:Object.entries(a).map(([a,c])=>{let d=e.columns?.find(b=>b.name===a),f=d?.type?.toLowerCase().includes("json");return(0,b.jsx)("td",{className:"p-3 border-r last:border-r-0 align-top",children:null==c?(0,b.jsx)("span",{className:"text-muted-foreground italic",children:"NULL"}):f||"object"==typeof c?(0,b.jsxs)("details",{className:"cursor-pointer",children:[(0,b.jsxs)("summary",{className:"text-primary hover:underline text-xs",children:["نمایش JSON (","object"==typeof c?"Object":"Array",")"]}),(0,b.jsx)("pre",{className:"mt-2 p-2 bg-muted rounded text-xs overflow-x-auto max-w-md",children:JSON.stringify(c,null,2)})]}):String(c).length>50?(0,b.jsxs)("div",{className:"max-w-xs",children:[(0,b.jsx)("span",{className:"text-muted-foreground break-words",children:String(c).substring(0,50)}),(0,b.jsxs)("details",{className:"mt-1",children:[(0,b.jsx)("summary",{className:"text-primary hover:underline text-xs cursor-pointer",children:"بیشتر..."}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-muted rounded text-xs break-words",children:String(c)})]})]}):(0,b.jsx)("span",{className:"break-words",children:String(c)})},a)})},c))})]})})]}),0===e.rowCount&&(0,b.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"(هیچ داده‌ای وجود ندارد)"})]})})]},c):null})}):(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"pt-6",children:(0,b.jsx)("div",{className:"text-center text-muted-foreground",children:"هیچ جدولی یافت نشد"})})})]})})}a.s(["default",()=>k],42607)}];

//# sourceMappingURL=_3cd0ee7f._.js.map