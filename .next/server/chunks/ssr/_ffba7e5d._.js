module.exports=[410,a=>{"use strict";var b=a.i(33915),c=a.i(54917);let d={},e=(0,b.create)((a,b)=>({orders:[],filters:d,isLoading:!1,setOrders:b=>a({orders:b}),addOrder:b=>a(a=>{let c=a.orders.findIndex(a=>a.id===b.id);if(c>=0){let d=[...a.orders];return d[c]=b,{orders:d}}return{orders:[...a.orders,b]}}),updateOrder:(b,c)=>a(a=>{let d=a.orders.findIndex(a=>a.id===b);if(d>=0){let b=[...a.orders];return b[d]={...b[d],...c},{orders:b}}return a}),updateOrderStatus:(b,c)=>a(a=>({orders:a.orders.map(a=>a.id===b?{...a,status:c,updatedAt:new Date}:a)})),updatePaymentStatus:(b,c)=>a(a=>({orders:a.orders.map(a=>a.id===b?{...a,paymentStatus:c,updatedAt:new Date}:a)})),deleteOrder:b=>a(a=>({orders:a.orders.filter(a=>a.id!==b)})),getOrder:a=>b().orders.find(b=>b.id===a),setFilters:b=>a(a=>({filters:{...a.filters,...b}})),clearFilters:()=>a({filters:d}),loadOrdersFromDB:async()=>{a({isLoading:!0});try{let b=new AbortController,d=setTimeout(()=>b.abort(),15e3),e=await fetch("/api/orders",{signal:b.signal});if(clearTimeout(d),e.ok){let b;try{b=await e.json()}catch(b){c.logger.error("Error parsing orders response:",b),a({orders:[],isLoading:!1});return}if(b.success&&b.data)try{let d=b.data.map(a=>{let b=[],d={};try{b=Array.isArray(a.items)?a.items:"string"==typeof a.items?JSON.parse(a.items):[]}catch(d){c.logger.warn("Error parsing items for order:",a.id,d),b=[]}try{d="object"==typeof a.shippingAddress&&null!==a.shippingAddress?a.shippingAddress:"string"==typeof a.shippingAddress?JSON.parse(a.shippingAddress):{}}catch(b){c.logger.warn("Error parsing shippingAddress for order:",a.id,b),d={}}return{...a,items:b,shippingAddress:d,total:Number(a.total)||0,shippingCost:Number(a.shippingCost)||0,createdAt:a.createdAt instanceof Date?a.createdAt:new Date(a.createdAt),updatedAt:a.updatedAt instanceof Date?a.updatedAt:new Date(a.updatedAt)}});a({orders:d,isLoading:!1})}catch(b){c.logger.error("Error parsing orders data:",b),a({orders:[],isLoading:!1})}else a({orders:[],isLoading:!1})}else c.logger.error("Failed to load orders:",e.status),a({orders:[],isLoading:!1})}catch(b){b instanceof Error&&"AbortError"!==b.name&&c.logger.error("Error loading orders from DB:",b),a({orders:[],isLoading:!1})}}}));a.s(["useOrderStore",0,e])},87532,a=>{"use strict";let b=(0,a.i(70106).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["Search",()=>b],87532)},10227,a=>{"use strict";let b=(0,a.i(70106).default)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);a.s(["Truck",()=>b],10227)},21161,a=>{"use strict";let b=(0,a.i(70106).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Settings",()=>b],21161)},72692,a=>{"use strict";let b=(0,a.i(70106).default)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);a.s(["Menu",()=>b],72692)},28094,a=>{"use strict";var b=a.i(72131),c=a.i(30553),d=a.i(87924),e=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),f=b.forwardRef((a,b)=>(0,d.jsx)(c.Primitive.span,{...a,ref:b,style:{...e,...a.style}}));f.displayName="VisuallyHidden",a.s(["VISUALLY_HIDDEN_STYLES",()=>e,"VisuallyHidden",()=>f])},60421,a=>{"use strict";var b=a.i(33915),c=a.i(54917);let d={},e=(0,b.create)((a,b)=>({products:[],filters:d,setProducts:b=>a({products:b}),addProduct:b=>a(a=>{let c=a.products.findIndex(a=>a.id===b.id);if(c>=0){let d=[...a.products];return d[c]=b,{products:d}}return{products:[...a.products,b]}}),updateProduct:b=>a(a=>{let c=a.products.findIndex(a=>a.id===b.id);if(c>=0){let d=[...a.products];return d[c]=b,{products:d}}return a}),removeProduct:b=>a(a=>({products:a.products.filter(a=>a.id!==b)})),getProduct:a=>b().products.find(b=>b.id===a),getEnabledProducts:()=>b().products.filter(a=>a.enabled),getFilteredProducts:()=>{let{products:a,filters:c}=b(),d=a.filter(a=>a.enabled);if(c.search){let a=c.search.toLowerCase();d=d.filter(b=>b.name.toLowerCase().includes(a)||b.description?.toLowerCase().includes(a)||b.brand?.toLowerCase().includes(a))}return void 0!==c.minPrice&&(d=d.filter(a=>a.price>=c.minPrice)),void 0!==c.maxPrice&&(d=d.filter(a=>a.price<=c.maxPrice)),c.brands&&c.brands.length>0&&(d=d.filter(a=>a.brand&&c.brands.includes(a.brand))),c.categories&&c.categories.length>0&&(d=d.filter(a=>a.category&&c.categories.includes(a.category))),void 0!==c.inStock&&(d=d.filter(a=>a.inStock===c.inStock)),d},setFilters:b=>a(a=>({filters:{...a.filters,...b}})),clearFilters:()=>a({filters:d}),createProduct:async a=>{let c=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!c.ok)throw Error((await c.json().catch(()=>({}))).message||"خطا در ایجاد محصول");let d=(await c.json()).data;return b().addProduct(d),d},updateProductInDB:async(a,c)=>{let d=await fetch(`/api/products/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!d.ok)throw Error((await d.json().catch(()=>({}))).message||"خطا در به‌روزرسانی محصول");let e=(await d.json()).data;return b().updateProduct(e),e},deleteProductFromDB:async a=>{let c=await fetch(`/api/products/${a}`,{method:"DELETE"});if(!c.ok)throw Error((await c.json().catch(()=>({}))).message||"خطا در حذف محصول");b().removeProduct(a)},loadProductsFromDB:async(a=!1)=>{try{let c=await fetch(a?"/api/products?limit=1000&all=true":"/api/products?limit=1000");if(!c.ok){let a=await c.json().catch(()=>({})),b=a.error||a.message||"خطا در بارگذاری محصولات";throw Error(b)}let d=((await c.json()).data||[]).map(a=>({...a,createdAt:a.createdAt instanceof Date?a.createdAt:new Date(a.createdAt),updatedAt:a.updatedAt instanceof Date?a.updatedAt:new Date(a.updatedAt)}));b().setProducts(d)}catch(a){c.logger.error("Error loading products from DB:",a)}},deleteProduct:async a=>{await b().deleteProductFromDB(a)},deleteProducts:async a=>{await Promise.all(a.map(a=>b().deleteProductFromDB(a)))},toggleProduct:async a=>{let c=b().getProduct(a);c&&await b().updateProductInDB(a,{enabled:!c.enabled})},toggleProducts:async(a,c)=>{await Promise.all(a.map(a=>b().updateProductInDB(a,{enabled:c})))}}));a.s(["useProductStore",0,e])},30656,a=>{"use strict";function b(a,[b,c]){return Math.min(c,Math.max(b,a))}a.s(["clamp",()=>b])},92776,a=>{"use strict";let b=(0,a.i(33915).create)((a,b)=>({suppliers:[],setSuppliers:b=>a({suppliers:b}),addSupplier:b=>{let c={id:`supplier-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...b,products:b.products||[],transactions:b.transactions||[]};a(a=>({suppliers:[...a.suppliers,c]}))},updateSupplier:(b,c)=>a(a=>{let d=a.suppliers.findIndex(a=>a.id===b);if(d>=0){let b=[...a.suppliers];return b[d]={...b[d],...c},{suppliers:b}}return a}),deleteSupplier:b=>a(a=>({suppliers:a.suppliers.filter(a=>a.id!==b)})),toggleSupplier:b=>a(a=>({suppliers:a.suppliers.map(a=>a.id===b?{...a,isActive:!a.isActive}:a)})),getSupplier:a=>b().suppliers.find(b=>b.id===a),addSupplierTransaction:(b,c)=>{let d={id:`transaction-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...c};a(a=>({suppliers:a.suppliers.map(a=>a.id===b?{...a,transactions:[...a.transactions||[],d]}:a)}))},updateSupplierTransaction:(b,c,d)=>a(a=>({suppliers:a.suppliers.map(a=>a.id===b?{...a,transactions:(a.transactions||[]).map(a=>a.id===c?{...a,...d}:a)}:a)})),deleteSupplierTransaction:(b,c)=>a(a=>({suppliers:a.suppliers.map(a=>a.id===b?{...a,transactions:(a.transactions||[]).filter(a=>a.id!==c)}:a)}))}));a.s(["useSupplierStore",0,b])},11156,a=>{"use strict";let b=(0,a.i(70106).default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);a.s(["CreditCard",()=>b],11156)},13749,a=>{"use strict";let b=(0,a.i(70106).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["ChevronLeft",()=>b],13749)},54624,a=>{"use strict";let b=(0,a.i(70106).default)("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);a.s(["FolderTree",()=>b],54624)},60246,a=>{"use strict";let b=(0,a.i(70106).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);a.s(["Users",()=>b],60246)},73570,a=>{"use strict";let b=(0,a.i(70106).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);a.s(["AlertTriangle",()=>b],73570)}];

//# sourceMappingURL=_ffba7e5d._.js.map