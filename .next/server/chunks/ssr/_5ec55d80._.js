module.exports=[99209,a=>{"use strict";var b=a.i(72131),c=a.i(33915),d=a.i(62435),e=a.i(54917);let f=(0,c.create)()((0,d.persist)((a,b)=>({notifications:[],addNotification:c=>{let d=c.metadata?.notificationId||`notif-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,f=b().notifications.find(a=>a.id===d);if(f&&!f.dismissed)return e.logger.debug(`[Notification Store] Updating existing notification ${d}`),a(a=>({notifications:a.notifications.map(a=>a.id===d?{...a,...c,timestamp:Date.now(),read:!1,dismissed:!1}:a)})),d;let g={...c,id:d,timestamp:Date.now(),read:!1,dismissed:!1};return e.logger.debug(`[Notification Store] Adding new notification ${d}`,{type:g.type,title:g.title,chatId:g.metadata?.chatId,isAdmin:g.metadata?.isAdmin}),a(a=>({notifications:[g,...a.notifications.filter(a=>a.id!==d)].slice(0,50)})),d},removeNotification:b=>{a(a=>({notifications:a.notifications.filter(a=>a.id!==b)}))},markAsRead:b=>{a(a=>({notifications:a.notifications.map(a=>a.id===b?{...a,read:!0}:a)}))},markAllAsRead:()=>{a(a=>({notifications:a.notifications.map(a=>({...a,read:!0}))}))},dismissNotification:c=>{let d=b().notifications.find(a=>a.id===c);d?.onDismiss&&d.onDismiss(),a(a=>({notifications:a.notifications.filter(a=>a.id!==c)}))},dismissAll:()=>{a(a=>({notifications:a.notifications.filter(a=>a.persistent)}))},getUnreadCount:()=>b().notifications.filter(a=>!a.read&&!a.dismissed).length,getUnreadCountExcludingChat:a=>a?b().notifications.filter(b=>!b.read&&!b.dismissed&&!(b.metadata?.chatId===a&&b.metadata?.isAdmin)).length:b().getUnreadCount(),getNotificationsExcludingChat:a=>a?b().notifications.filter(b=>!(b.metadata?.chatId===a&&b.metadata?.isAdmin)):b().notifications,clearAll:()=>{a({notifications:[]})}}),{name:"notification-storage",partialize:a=>({notifications:a.notifications.filter(a=>a.read).slice(0,20)})}));var g=a.i(80794);function h(){let{notifications:a,addNotification:c,removeNotification:d,markAsRead:h,markAllAsRead:i,dismissNotification:j,getUnreadCount:k}=f(),{showNotification:l}=(0,g.useNotifications)(),m=(0,b.useCallback)((a,b)=>{try{let a=new(window.AudioContext||window.webkitAudioContext),c=a.createOscillator(),d=a.createGain();c.connect(d),d.connect(a.destination),"urgent"===b||"high"===b?(c.frequency.setValueAtTime(1e3,a.currentTime),c.frequency.setValueAtTime(800,a.currentTime+.1),c.frequency.setValueAtTime(1e3,a.currentTime+.2),c.frequency.setValueAtTime(800,a.currentTime+.3),c.frequency.setValueAtTime(1e3,a.currentTime+.4),d.gain.setValueAtTime(.3,a.currentTime),d.gain.exponentialRampToValueAtTime(.01,a.currentTime+.5),c.start(a.currentTime),c.stop(a.currentTime+.5)):(c.frequency.setValueAtTime(800,a.currentTime),c.frequency.setValueAtTime(600,a.currentTime+.1),c.frequency.setValueAtTime(800,a.currentTime+.2),d.gain.setValueAtTime(.3,a.currentTime),d.gain.exponentialRampToValueAtTime(.01,a.currentTime+.3),c.start(a.currentTime),c.stop(a.currentTime+.3))}catch(a){e.logger.error("Error playing notification sound:",a)}},[]),n=(0,b.useCallback)(a=>{if("vibrate"in navigator)try{navigator.vibrate(a)}catch(a){e.logger.error("Error vibrating device:",a)}},[]),o=(0,b.useCallback)(a=>{let{type:b="message",priority:d="medium",title:e,message:f,sender:g,avatar:h,actions:i,onConfirm:j,onDismiss:k,metadata:o,persistent:p=!0,sound:q=!0,vibration:r=!1}=a;return q&&m(b,d),r&&"urgent"===d&&n([200,100,200]),l({title:e,body:f,tag:`persistent-${Date.now()}`,requireInteraction:p,sound:!1}).catch(()=>{}),c({type:b,priority:d,title:e,message:f,sender:g,avatar:h,actions:i,onConfirm:j,onDismiss:k,metadata:o,persistent:p,sound:q,vibration:r})},[c,m,n,l]),p=(0,b.useCallback)((a,b,c)=>{let{avatar:d,onOpen:e,chatId:f,metadata:g}=c||{},i=f?`msg-${f}`:void 0;return o({type:"message",priority:"high",title:`پیام جدید از ${a}`,message:b,sender:a,avatar:d,persistent:!0,sound:!0,actions:f?[{label:"مشاهده",action:()=>{let a=new CustomEvent("openChat",{detail:{chatId:f,isAdmin:g?.isAdmin!==!1}});window.dispatchEvent(a),e&&e(),i&&(h(i),j(i))},variant:"default"}]:e?[{label:"مشاهده",action:()=>{e&&e()},variant:"default"}]:void 0,onConfirm:e,metadata:{chatId:f,notificationId:i,...g}})},[o,h,j]);return{notifications:a.filter(a=>!a.dismissed),showNotification:o,showMessageNotification:p,removeNotification:d,markAsRead:h,markAllAsRead:i,dismissNotification:j,unreadCount:k()}}a.s(["usePersistentNotifications",()=>h],99209)},54161,a=>{"use strict";var b=a.i(87924),c=a.i(187),d=a.i(97895);let e=(0,c.cva)("inline-flex items-center rounded-full border-[0.25px] px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground border-border/30",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{className:(0,d.cn)(e({variant:c}),a),...f})}a.s(["Badge",()=>f])},83497,a=>{"use strict";let b=(0,a.i(70106).default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);a.s(["Package",()=>b],83497)},41997,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={BailoutToCSRError:function(){return g},isBailoutToCSRError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="BAILOUT_TO_CLIENT_SIDE_RENDERING";class g extends Error{constructor(a){super(`Bail out to client-side rendering: ${a}`),this.reason=a,this.digest=f}}function h(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===f}},54917,a=>{"use strict";let b=new class{isDevelopment=!1;shouldLog(a){return"error"===a||"warn"===a||this.isDevelopment}log(...a){this.shouldLog("log")&&console.log(...a)}error(...a){console.error(...a)}warn(...a){console.warn(...a)}info(...a){this.shouldLog("info")&&console.info(...a)}debug(...a){this.shouldLog("debug")&&console.debug(...a)}};a.s(["logger",0,b])},46058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},39118,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__"},54427,(a,b,c)=>{"use strict";function d(){let a,b,c=new Promise((c,d)=>{a=c,b=d});return{resolve:a,reject:b,promise:c}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createPromiseWithResolvers",{enumerable:!0,get:function(){return d}})},8591,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=a.r(72131);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},92434,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},41710,a=>{"use strict";let b=(0,a.i(70106).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],41710)},45222,a=>{"use strict";let b=(0,a.i(70106).default)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);a.s(["MessageCircle",()=>b],45222)},62036,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(86723),e=a.i(74290),f=a.i(14800),g=c,h=a.i(65802);class i extends g.Component{getSnapshotBeforeUpdate(a){let b=this.props.childRef.current;if(b&&a.isPresent&&!this.props.isPresent){let a=this.props.sizeRef.current;a.height=b.offsetHeight||0,a.width=b.offsetWidth||0,a.top=b.offsetTop,a.left=b.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function j({children:a,isPresent:c}){let d=(0,g.useId)(),e=(0,g.useRef)(null),f=(0,g.useRef)({width:0,height:0,top:0,left:0}),{nonce:j}=(0,g.useContext)(h.MotionConfigContext);return(0,g.useInsertionEffect)(()=>{let{width:a,height:b,top:g,left:h}=f.current;if(c||!e.current||!a||!b)return;e.current.dataset.motionPopId=d;let i=document.createElement("style");return j&&(i.nonce=j),document.head.appendChild(i),i.sheet&&i.sheet.insertRule(`
          [data-motion-pop-id="${d}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${b}px !important;
            top: ${g}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(i)}},[c]),(0,b.jsx)(i,{isPresent:c,childRef:e,sizeRef:f,children:g.cloneElement(a,{ref:e})})}let k=({children:a,initial:d,isPresent:g,onExitComplete:h,custom:i,presenceAffectsLayout:k,mode:m})=>{let n=(0,e.useConstant)(l),o=(0,c.useId)(),p=(0,c.useCallback)(a=>{for(let b of(n.set(a,!0),n.values()))if(!b)return;h&&h()},[n,h]),q=(0,c.useMemo)(()=>({id:o,initial:d,isPresent:g,custom:i,onExitComplete:p,register:a=>(n.set(a,!1),()=>n.delete(a))}),k?[Math.random(),p]:[g,p]);return(0,c.useMemo)(()=>{n.forEach((a,b)=>n.set(b,!1))},[g]),c.useEffect(()=>{g||n.size||!h||h()},[g]),"popLayout"===m&&(a=(0,b.jsx)(j,{isPresent:g,children:a})),(0,b.jsx)(f.PresenceContext.Provider,{value:q,children:a})};function l(){return new Map}var m=a.i(20410);let n=a=>a.key||"";function o(a){let b=[];return c.Children.forEach(a,a=>{(0,c.isValidElement)(a)&&b.push(a)}),b}var p=a.i(1703);let q=({children:a,custom:f,initial:g=!0,onExitComplete:h,presenceAffectsLayout:i=!0,mode:j="sync",propagate:l=!1})=>{let[q,r]=(0,m.usePresence)(l),s=(0,c.useMemo)(()=>o(a),[a]),t=l&&!q?[]:s.map(n),u=(0,c.useRef)(!0),v=(0,c.useRef)(s),w=(0,e.useConstant)(()=>new Map),[x,y]=(0,c.useState)(s),[z,A]=(0,c.useState)(s);(0,p.useIsomorphicLayoutEffect)(()=>{u.current=!1,v.current=s;for(let a=0;a<z.length;a++){let b=n(z[a]);t.includes(b)?w.delete(b):!0!==w.get(b)&&w.set(b,!1)}},[z,t.length,t.join("-")]);let B=[];if(s!==x){let a=[...s];for(let b=0;b<z.length;b++){let c=z[b],d=n(c);t.includes(d)||(a.splice(b,0,c),B.push(c))}"wait"===j&&B.length&&(a=B),A(o(a)),y(s);return}let{forceRender:C}=(0,c.useContext)(d.LayoutGroupContext);return(0,b.jsx)(b.Fragment,{children:z.map(a=>{let c=n(a),d=(!l||!!q)&&(s===z||t.includes(c));return(0,b.jsx)(k,{isPresent:d,initial:(!u.current||!!g)&&void 0,custom:d?void 0:f,presenceAffectsLayout:i,mode:j,onExitComplete:d?void 0:()=>{if(!w.has(c))return;w.set(c,!0);let a=!0;w.forEach(b=>{b||(a=!1)}),a&&(null==C||C(),A(v.current),l&&(null==r||r()),h&&h())},children:a},c)})})};a.s(["AnimatePresence",()=>q],62036)},80794,a=>{"use strict";var b=a.i(72131);function c(){let[a,c]=(0,b.useState)("default");return(0,b.useRef)(null),(0,b.useEffect)(()=>{},[]),{permission:a,requestPermission:async()=>!1,showNotification:async(a,b=!0)=>{},isSupported:!1}}a.i(54917),a.s(["useNotifications",()=>c])}];

//# sourceMappingURL=_5ec55d80._.js.map