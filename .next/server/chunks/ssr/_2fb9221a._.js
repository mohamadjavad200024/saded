module.exports=[15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},24569,a=>{"use strict";let b=(0,a.i(70106).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);a.s(["Edit",()=>b],24569)},88237,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97895);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{className:"relative w-full overflow-auto",children:(0,b.jsx)("table",{ref:e,className:(0,d.cn)("w-full caption-bottom text-sm",a),...c})}));e.displayName="Table";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("thead",{ref:e,className:(0,d.cn)("[&_tr]:border-b border-border/30",a),...c}));f.displayName="TableHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tbody",{ref:e,className:(0,d.cn)("[&_tr:last-child]:border-0",a),...c}));g.displayName="TableBody",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tfoot",{ref:e,className:(0,d.cn)("border-t border-border/30 bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...c})).displayName="TableFooter";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tr",{ref:e,className:(0,d.cn)("border-b border-border/30 transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...c}));h.displayName="TableRow";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("th",{ref:e,className:(0,d.cn)("h-12 px-4 text-right align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...c}));i.displayName="TableHead";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("td",{ref:e,className:(0,d.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...c}));j.displayName="TableCell",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("caption",{ref:e,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",a),...c})).displayName="TableCaption",a.s(["Table",()=>e,"TableBody",()=>g,"TableCell",()=>j,"TableHead",()=>i,"TableHeader",()=>f,"TableRow",()=>h])},17755,a=>{"use strict";let b=(0,a.i(70106).default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);a.s(["MoreHorizontal",()=>b],17755)},21366,a=>{"use strict";var b=a.i(33915),c=a.i(54917);let d={},e=(0,b.create)((a,b)=>({vehicles:[],filters:d,isLoading:!1,setVehicles:b=>a({vehicles:b}),addVehicle:b=>a(a=>{let c=a.vehicles.findIndex(a=>a.id===b.id);if(c>=0){let d=[...a.vehicles];return d[c]=b,{vehicles:d}}return{vehicles:[...a.vehicles,b]}}),updateVehicle:(b,c)=>a(a=>{let d=a.vehicles.findIndex(a=>a.id===b);if(d>=0){let b=[...a.vehicles];return b[d]={...b[d],...c,updatedAt:new Date},{vehicles:b}}return a}),deleteVehicle:b=>a(a=>({vehicles:a.vehicles.filter(a=>a.id!==b)})),getVehicle:a=>b().vehicles.find(b=>b.id===a),getEnabledVehicles:()=>b().vehicles.filter(a=>a.enabled),setFilters:b=>a(a=>({filters:{...a.filters,...b}})),clearFilters:()=>a({filters:d}),loadVehiclesFromDB:async()=>{a({isLoading:!0});try{let b=await fetch("/api/vehicles");if(!b.ok)throw Error("Failed to load vehicles");let c=await b.json();if(c.success&&c.data){let b=c.data.map(a=>({...a,models:Array.isArray(a.models)?a.models:a.models?JSON.parse(a.models):[],createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt)}));a({vehicles:b,isLoading:!1})}else throw Error(c.error||"Failed to load vehicles")}catch(b){throw c.logger.error("Error loading vehicles:",b),a({isLoading:!1}),b}}}));a.s(["useVehicleStore",0,e])},74355,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(48464),e=a.i(97895);let f={sm:"h-6 w-6",md:"h-8 w-8",lg:"h-12 w-12"};function g({logo:a,alt:g,className:h,size:i="md",fallbackIcon:j=!0}){let[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(!1);return!(a&&"string"==typeof a&&a.trim().length>0&&(a.startsWith("data:image")||a.startsWith("data:")||a.startsWith("/")||a.startsWith("http")))||k?j?(0,b.jsx)("div",{className:(0,e.cn)("flex items-center justify-center bg-muted rounded-full",f[i],h),children:(0,b.jsx)(d.Car,{className:(0,e.cn)("text-muted-foreground",f[i])})}):null:(0,b.jsxs)("div",{className:(0,e.cn)("relative flex items-center justify-center overflow-hidden rounded-full bg-background border border-border/30",f[i],h),children:[(0,b.jsx)("img",{src:a,alt:g,className:(0,e.cn)("object-contain w-full h-full rounded-full",!m&&"opacity-0"),onLoad:()=>{n(!0),l(!1)},onError:b=>{console.warn(`[VehicleLogo] Failed to load logo for ${g}:`,{logoLength:a?.length,logoStart:a?.substring(0,50)}),l(!0),n(!1)},style:{display:k?"none":"block"}}),!m&&!k&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-muted animate-pulse",children:(0,b.jsx)(d.Car,{className:(0,e.cn)("text-muted-foreground",f[i])})})]})}a.s(["VehicleLogo",()=>g])},49609,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(88237),e=a.i(40695),f=a.i(54161),g=a.i(76504),h=a.i(17755),i=a.i(24569),j=a.i(81560),k=a.i(21366),l=a.i(77687),m=a.i(38246),n=a.i(65733),o=a.i(74355);function p({vehicles:a,onRefresh:p}){let{deleteVehicle:q,loadVehiclesFromDB:r}=(0,k.useVehicleStore)(),{toast:s}=(0,l.useToast)(),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(null),x=async a=>{try{let b=await fetch(`/api/vehicles/${a}`,{method:"DELETE"});if(!b.ok){let a=await b.json().catch(()=>({}));throw Error(a.error||a.message||"خطا در حذف خودرو")}q(a),await r(),s({title:"موفق",description:"خودرو با موفقیت حذف شد"}),u(!1),w(null),p?.()}catch(a){s({title:"خطا",description:a instanceof Error?a.message:"خطا در حذف خودرو",variant:"destructive"})}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"rounded-lg border border-border/30 shadow-sm overflow-hidden",children:(0,b.jsxs)(d.Table,{children:[(0,b.jsx)(d.TableHeader,{className:"bg-muted/50",children:(0,b.jsxs)(d.TableRow,{children:[(0,b.jsx)(d.TableHead,{children:"لوگو"}),(0,b.jsx)(d.TableHead,{children:"نام"}),(0,b.jsx)(d.TableHead,{children:"مدل‌ها"}),(0,b.jsx)(d.TableHead,{children:"وضعیت"}),(0,b.jsx)(d.TableHead,{className:"text-left",children:"عملیات"})]})}),(0,b.jsx)(d.TableBody,{children:0===a.length?(0,b.jsx)(d.TableRow,{children:(0,b.jsx)(d.TableCell,{colSpan:5,className:"text-center py-8",children:"خودرویی یافت نشد"})},"empty-state"):a.map((a,c)=>(0,b.jsxs)(d.TableRow,{children:[(0,b.jsx)(d.TableCell,{children:(0,b.jsx)(o.VehicleLogo,{logo:a.logo,alt:a.name,size:"md"})}),(0,b.jsx)(d.TableCell,{className:"font-medium",children:a.name}),(0,b.jsx)(d.TableCell,{className:"text-muted-foreground",children:a.models&&a.models.length>0?(0,b.jsxs)("div",{className:"flex flex-wrap gap-1",children:[a.models.slice(0,3).map((a,c)=>(0,b.jsx)(f.Badge,{variant:"outline",className:"text-xs",children:a},c)),a.models.length>3&&(0,b.jsxs)(f.Badge,{variant:"outline",className:"text-xs",children:["+",a.models.length-3]})]}):"-"}),(0,b.jsx)(d.TableCell,{children:(0,b.jsx)(f.Badge,{variant:a.enabled?"default":"secondary",children:a.enabled?"فعال":"غیرفعال"})}),(0,b.jsx)(d.TableCell,{children:(0,b.jsxs)(g.DropdownMenu,{children:[(0,b.jsx)(g.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(h.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(g.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(g.DropdownMenuLabel,{children:"عملیات"}),(0,b.jsx)(g.DropdownMenuSeparator,{}),(0,b.jsx)(g.DropdownMenuItem,{asChild:!0,children:(0,b.jsxs)(m.default,{href:`/admin/vehicles/${a.id}`,children:[(0,b.jsx)(i.Edit,{className:"ml-2 h-4 w-4"}),"ویرایش"]})}),(0,b.jsx)(g.DropdownMenuSeparator,{}),(0,b.jsxs)(g.DropdownMenuItem,{className:"text-destructive",onClick:()=>{w(a.id),u(!0)},children:[(0,b.jsx)(j.Trash2,{className:"ml-2 h-4 w-4"}),"حذف"]})]})]})})]},a.id||`vehicle-${c}`))})]})}),(0,b.jsx)(n.Dialog,{open:t,onOpenChange:u,children:(0,b.jsxs)(n.DialogContent,{children:[(0,b.jsxs)(n.DialogHeader,{children:[(0,b.jsx)(n.DialogTitle,{children:"حذف خودرو"}),(0,b.jsx)(n.DialogDescription,{children:"آیا از حذف این خودرو اطمینان دارید؟ این عمل قابل بازگشت نیست."})]}),(0,b.jsxs)(n.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>u(!1),children:"انصراف"}),(0,b.jsx)(e.Button,{variant:"destructive",onClick:()=>{v&&x(v)},children:"حذف"})]})]})})]})}var q=a.i(3130),r=a.i(15618),s=a.i(48464),t=a.i(50944);function u(){let{vehicles:a,loadVehiclesFromDB:d}=(0,k.useVehicleStore)(),[f,g]=(0,c.useState)(!0),h=(0,t.usePathname)();return(0,c.useEffect)(()=>{(async()=>{g(!0);try{await d()}catch(a){console.error("Error loading vehicles:",a)}finally{g(!1)}})()},[d,h]),(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)(q.Card,{className:"shadow-sm",children:[(0,b.jsx)(q.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(q.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Car,{className:"h-5 w-5 text-primary"}),"خودروها (",a.length,")"]}),(0,b.jsx)(e.Button,{asChild:!0,size:"sm",children:(0,b.jsxs)(m.default,{href:"/admin/vehicles/new",children:[(0,b.jsx)(r.Plus,{className:"ml-2 h-4 w-4"}),"افزودن خودرو"]})})]})}),(0,b.jsx)(q.CardContent,{children:f?(0,b.jsx)("div",{className:"text-center py-8",children:"در حال بارگذاری..."}):(0,b.jsx)(p,{vehicles:a,onRefresh:()=>d()})})]})})}a.s(["default",()=>u],49609)}];

//# sourceMappingURL=_2fb9221a._.js.map