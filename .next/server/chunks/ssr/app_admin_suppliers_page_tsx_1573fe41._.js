module.exports=[62459,a=>{"use strict";var b=a.i(17163),c=a.i(84280),d=a.i(40695),e=a.i(54161),f=a.i(3130),g=a.i(76504),h=a.i(8220),i=a.i(98095),j=a.i(30411),k=a.i(55462),l=a.i(30239),m=a.i(45722),n=a.i(84053),o=a.i(49571),p=a.i(71268);let q=(0,a.i(60600).default)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);var r=a.i(48487),s=a.i(68551),t=a.i(79054),u=a.i(64964),v=a.i(84474),w=a.i(60421),x=a.i(29065);function y({supplier:a,onDelete:y,onToggle:z}){let A,{products:B}=(0,w.useProductStore)(),[C,D]=(0,c.useState)(!1),E=(A=a.lowStockThreshold||10,B.filter(b=>b.category&&a.categories.includes(b.category)&&b.stockCount<=A).length),F=a.transactions||[],G=F.length>0?F[F.length-1]:null,H=F.length,I=F.reduce((a,b)=>a+b.totalAmount,0),J=F.reduce((a,b)=>a+b.items.reduce((a,b)=>a+b.quantity,0),0),K=a.products?.length||0,L=a=>{try{return(0,u.format)(new Date(a),"yyyy/MM/dd",{locale:v.faIR})}catch{return"-"}};return(0,b.jsxs)(f.Card,{className:"hover:shadow-md transition-shadow border-border/30",children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsx)(e.Badge,{variant:a.isActive?"success":"secondary",className:"text-xs",children:a.isActive?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r.CheckCircle2,{className:"h-3 w-3 ml-1"}),"فعال"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s.XCircle,{className:"h-3 w-3 ml-1"}),"غیرفعال"]})}),E>0&&(0,b.jsxs)(e.Badge,{variant:"warning",className:"text-xs gap-1",children:[(0,b.jsx)(m.AlertTriangle,{className:"h-3 w-3"}),E," هشدار"]})]})]})}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[(0,b.jsxs)("a",{href:`tel:${a.phone}`,className:"flex items-center gap-1.5 hover:text-primary transition-colors",children:[(0,b.jsx)(k.Phone,{className:"h-4 w-4"}),a.phone]}),a.email&&(0,b.jsxs)("a",{href:`mailto:${a.email}`,className:"flex items-center gap-1.5 hover:text-primary transition-colors",children:[(0,b.jsx)(l.Mail,{className:"h-4 w-4"}),a.email]})]})]}),(0,b.jsxs)(g.DropdownMenu,{children:[(0,b.jsx)(g.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,b.jsx)(h.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(g.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(g.DropdownMenuLabel,{children:"عملیات"}),(0,b.jsx)(g.DropdownMenuSeparator,{}),(0,b.jsx)(g.DropdownMenuItem,{asChild:!0,children:(0,b.jsxs)(x.default,{href:`/admin/suppliers/${a.id}`,children:[(0,b.jsx)(i.Edit,{className:"ml-2 h-4 w-4"}),"ویرایش"]})}),E>0&&(0,b.jsx)(g.DropdownMenuItem,{asChild:!0,children:(0,b.jsxs)("a",{href:`tel:${a.phone}`,children:[(0,b.jsx)(k.Phone,{className:"ml-2 h-4 w-4"}),"تماس برای شارژ موجودی"]})}),(0,b.jsx)(g.DropdownMenuItem,{onClick:()=>z(a.id),children:a.isActive?"غیرفعال کردن":"فعال کردن"}),(0,b.jsx)(g.DropdownMenuSeparator,{}),(0,b.jsxs)(g.DropdownMenuItem,{className:"text-destructive",onClick:()=>y(a.id),children:[(0,b.jsx)(j.Trash2,{className:"ml-2 h-4 w-4"}),"حذف"]})]})]})]})}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(q,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"دسته‌بندی‌ها"})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1.5",children:a.categories.map(a=>(0,b.jsx)(e.Badge,{variant:"secondary",className:"text-xs",children:a},a))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-2 border-t border-border/30",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(n.Package,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"محصولات"})]}),(0,b.jsx)("div",{className:"text-lg font-semibold",children:K})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(t.TrendingUp,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"تراکنش‌ها"})]}),(0,b.jsx)("div",{className:"text-lg font-semibold",children:H})]})]}),G&&(0,b.jsxs)("div",{className:"pt-3 border-t border-border/30 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"آخرین تراکنش"}),(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>D(!C),children:C?"بستن":"جزئیات"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"روش پرداخت"}),(0,b.jsx)(e.Badge,{variant:"cash"===G.paymentMethod?"success":"warning",className:"text-xs",children:"cash"===G.paymentMethod?"نقدی":"چکی"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"مبلغ"}),(0,b.jsxs)("span",{className:"text-sm font-medium",children:[new Intl.NumberFormat("fa-IR").format(G.totalAmount)," تومان"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"تاریخ تحویل"}),(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,b.jsx)(o.Calendar,{className:"h-3 w-3"}),L(G.deliveryDate)]})]}),C&&(0,b.jsxs)("div",{className:"pt-2 space-y-2 border-t border-border/30 mt-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-xs font-medium text-muted-foreground block mb-1.5",children:"محصولات تحویل‌شده:"}),(0,b.jsxs)("div",{className:"space-y-1",children:[G.items.slice(0,3).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,b.jsx)(n.Package,{className:"h-3 w-3 text-muted-foreground"}),a.productName]}),(0,b.jsxs)(e.Badge,{variant:"outline",className:"text-xs",children:[new Intl.NumberFormat("fa-IR").format(a.quantity)," عدد"]})]},c)),G.items.length>3&&(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["+",G.items.length-3," محصول دیگر"]})]})]}),"check"===G.paymentMethod&&G.checkDetails&&(0,b.jsxs)("div",{className:"pt-2 border-t border-border/30",children:[(0,b.jsx)("span",{className:"text-xs font-medium text-muted-foreground block mb-1.5",children:"جزئیات چک:"}),(0,b.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"شماره چک:"}),(0,b.jsx)("span",{children:G.checkDetails.checkNumber})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"بانک:"}),(0,b.jsx)("span",{children:G.checkDetails.bankName})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"تاریخ سررسید:"}),(0,b.jsx)("span",{children:L(G.checkDetails.dueDate)})]})]})]}),G.paymentDate&&(0,b.jsx)("div",{className:"pt-2 border-t border-border/30",children:(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"تاریخ پرداخت:"}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(o.Calendar,{className:"h-3 w-3"}),L(G.paymentDate)]})]})}),(I>0||J>0)&&(0,b.jsxs)("div",{className:"pt-2 border-t border-border/30",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs mb-1",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"کل تحویل شده:"}),(0,b.jsxs)("span",{className:"font-medium",children:[new Intl.NumberFormat("fa-IR").format(J)," عدد"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"کل مبلغ:"}),(0,b.jsxs)("span",{className:"font-medium flex items-center gap-1",children:[(0,b.jsx)(p.DollarSign,{className:"h-3 w-3"}),new Intl.NumberFormat("fa-IR").format(I)," تومان"]})]})]})]})]})]}),(0,b.jsx)("div",{className:"pt-2 border-t border-border/30",children:(0,b.jsx)(d.Button,{variant:"outline",size:"sm",className:"w-full",asChild:!0,children:(0,b.jsx)(x.default,{href:`/admin/suppliers/${a.id}`,children:"مشاهده جزئیات کامل"})})})]})]})}var z=a.i(92776),A=a.i(77687),B=a.i(65733);function C({suppliers:a,onRefresh:e}){let{deleteSupplier:f,toggleSupplier:g}=(0,z.useSupplierStore)(),{toast:h}=(0,A.useToast)(),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),m=a=>{l(a),j(!0)},n=a=>{g(a),h({title:"موفق",description:"وضعیت تامین‌کننده تغییر کرد"}),e?.()};return(0,b.jsxs)(b.Fragment,{children:[0===a.length?(0,b.jsx)("div",{className:"text-center py-12 border border-dashed border-border/30 rounded-lg",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"تامین‌کننده‌ای یافت نشد"})}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(a=>(0,b.jsx)(y,{supplier:a,onDelete:m,onToggle:n},a.id))}),(0,b.jsx)(B.Dialog,{open:i,onOpenChange:j,children:(0,b.jsxs)(B.DialogContent,{children:[(0,b.jsxs)(B.DialogHeader,{children:[(0,b.jsx)(B.DialogTitle,{children:"حذف تامین‌کننده"}),(0,b.jsx)(B.DialogDescription,{children:"آیا از حذف این تامین‌کننده اطمینان دارید؟ این عمل قابل بازگشت نیست."})]}),(0,b.jsxs)(B.DialogFooter,{children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>j(!1),children:"انصراف"}),(0,b.jsx)(d.Button,{variant:"destructive",onClick:()=>{k&&(f(k),h({title:"موفق",description:"تامین‌کننده با موفقیت حذف شد"}),j(!1),l(null),e?.())},children:"حذف"})]})]})})]})}var D=a.i(5522),E=a.i(87682),F=a.i(37933),G=a.i(80585),H=a.i(52899),I=a.i(74942),J=a.i(14218);function K(){let{suppliers:a}=(0,z.useSupplierStore)(),[e,g]=(0,c.useState)(0),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)("all"),[n,o]=(0,c.useState)("all");(0,c.useEffect)(()=>{g(a=>a+1)},[a]);let p=(0,c.useMemo)(()=>Array.from(new Set(a.flatMap(a=>a.categories))),[a]),q=(0,c.useMemo)(()=>a.filter(a=>{if(j){let b=j.toLowerCase();if(!(a.name.toLowerCase().includes(b)||a.phone.includes(b)||a.email?.toLowerCase().includes(b)))return!1}return("active"!==l||!!a.isActive)&&("inactive"!==l||!a.isActive)&&("all"===n||!!a.categories.includes(n))}),[a,j,l,n]),r=a.filter(a=>a.isActive).length,s=a.filter(a=>!a.isActive).length;return(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)(f.Card,{className:"shadow-sm",children:[(0,b.jsxs)(f.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(f.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(G.Users,{className:"h-5 w-5 text-primary"}),"تامین‌کنندگان (",q.length,")"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(d.Button,{variant:h?"default":"outline",onClick:()=>i(!h),size:"sm",children:[(0,b.jsx)(I.Filter,{className:"ml-2 h-4 w-4"}),"فیلتر"]}),(0,b.jsx)(d.Button,{asChild:!0,size:"sm",children:(0,b.jsxs)(x.default,{href:"/admin/suppliers/new",children:[(0,b.jsx)(F.Plus,{className:"ml-2 h-4 w-4"}),"افزودن تامین‌کننده"]})})]})]}),h&&(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-border/20",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"جستجو"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(H.Search,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(D.Input,{placeholder:"جستجو بر اساس نام، شماره تماس یا ایمیل...",value:j,onChange:a=>k(a.target.value),className:"pr-10"}),j&&(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"absolute left-1 top-1/2 transform -translate-y-1/2 h-6 w-6",onClick:()=>k(""),children:(0,b.jsx)(J.X,{className:"h-3 w-3"})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"وضعیت"}),(0,b.jsxs)(E.Select,{value:l,onValueChange:m,children:[(0,b.jsx)(E.SelectTrigger,{children:(0,b.jsx)(E.SelectValue,{placeholder:"وضعیت"})}),(0,b.jsxs)(E.SelectContent,{children:[(0,b.jsx)(E.SelectItem,{value:"all",children:"همه وضعیت‌ها"}),(0,b.jsxs)(E.SelectItem,{value:"active",children:["فعال (",r,")"]}),(0,b.jsxs)(E.SelectItem,{value:"inactive",children:["غیرفعال (",s,")"]})]})]})]}),p.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"دسته‌بندی"}),(0,b.jsxs)(E.Select,{value:n,onValueChange:o,children:[(0,b.jsx)(E.SelectTrigger,{children:(0,b.jsx)(E.SelectValue,{placeholder:"دسته‌بندی"})}),(0,b.jsxs)(E.SelectContent,{children:[(0,b.jsx)(E.SelectItem,{value:"all",children:"همه دسته‌بندی‌ها"}),p.map(a=>(0,b.jsx)(E.SelectItem,{value:a,children:a},a))]})]})]})]}),(j||"all"!==l||"all"!==n)&&(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsxs)(d.Button,{variant:"ghost",size:"sm",onClick:()=>{k(""),m("all"),o("all")},children:[(0,b.jsx)(I.Filter,{className:"ml-2 h-4 w-4"}),"پاک کردن فیلترها"]})})]})]}),(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsx)(C,{suppliers:q,onRefresh:()=>g(a=>a+1)},e)})]})})}a.s(["default",()=>K],62459)}];

//# sourceMappingURL=app_admin_suppliers_page_tsx_1573fe41._.js.map