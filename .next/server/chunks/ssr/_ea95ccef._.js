module.exports=[3130,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97895);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border-[0.25px] border-border/3 bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},410,a=>{"use strict";var b=a.i(33915),c=a.i(54917);let d={},e=(0,b.create)((b,e)=>({orders:[],filters:d,isLoading:!1,setOrders:a=>b({orders:a}),addOrder:a=>b(b=>{let c=b.orders.findIndex(b=>b.id===a.id);if(c>=0){let d=[...b.orders];return d[c]=a,{orders:d}}return{orders:[...b.orders,a]}}),updateOrder:(a,c)=>b(b=>{let d=b.orders.findIndex(b=>b.id===a);if(d>=0){let a=[...b.orders];return a[d]={...a[d],...c},{orders:a}}return b}),updateOrderStatus:(a,c)=>b(b=>({orders:b.orders.map(b=>b.id===a?{...b,status:c,updatedAt:new Date}:b)})),updatePaymentStatus:(a,c)=>b(b=>({orders:b.orders.map(b=>b.id===a?{...b,paymentStatus:c,updatedAt:new Date}:b)})),deleteOrder:a=>b(b=>({orders:b.orders.filter(b=>b.id!==a)})),getOrder:a=>e().orders.find(b=>b.id===a),setFilters:a=>b(b=>({filters:{...b.filters,...a}})),clearFilters:()=>b({filters:d}),loadOrdersFromDB:async()=>{b({isLoading:!0});try{let d=new AbortController,e=setTimeout(()=>d.abort(),15e3),{fetchWithAuth:f}=await a.A(17056),g=await f("/api/orders",{signal:d.signal});if(clearTimeout(e),g.ok){let a;try{a=await g.json()}catch(a){c.logger.error("Error parsing orders response:",a),b({orders:[],isLoading:!1});return}if(a.success&&a.data)try{let d=a.data.map(a=>{let b=[],d={};try{b=Array.isArray(a.items)?a.items:"string"==typeof a.items?JSON.parse(a.items):[]}catch(d){c.logger.warn("Error parsing items for order:",a.id,d),b=[]}try{d="object"==typeof a.shippingAddress&&null!==a.shippingAddress?a.shippingAddress:"string"==typeof a.shippingAddress?JSON.parse(a.shippingAddress):{}}catch(b){c.logger.warn("Error parsing shippingAddress for order:",a.id,b),d={}}return{...a,items:b,shippingAddress:d,total:Number(a.total)||0,shippingCost:Number(a.shippingCost)||0,createdAt:a.createdAt instanceof Date?a.createdAt:new Date(a.createdAt),updatedAt:a.updatedAt instanceof Date?a.updatedAt:new Date(a.updatedAt)}});b({orders:d,isLoading:!1})}catch(a){c.logger.error("Error parsing orders data:",a),b({orders:[],isLoading:!1})}else b({orders:[],isLoading:!1})}else c.logger.error("Failed to load orders:",g.status),b({orders:[],isLoading:!1})}catch(a){a instanceof Error&&"AbortError"!==a.name&&c.logger.error("Error loading orders from DB:",a),b({orders:[],isLoading:!1})}}}));a.s(["useOrderStore",0,e])},67453,a=>{"use strict";let b=(0,a.i(70106).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],67453)},98071,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(3130),f=a.i(40695),g=a.i(67453),h=a.i(83497),i=a.i(38246),j=a.i(410);function k(){let a=(0,d.useSearchParams)();(0,d.useRouter)();let k=a.get("orderNumber"),{orders:l}=(0,j.useOrderStore)(),[m,n]=(0,c.useState)(null);return((0,c.useEffect)(()=>{if(k){let a=l.find(a=>a.orderNumber===k||a.id===k);a?n(a):l.length>0&&n(l[0])}else l.length>0&&n(l[0])},[k,l]),m)?(0,b.jsx)("div",{className:"container mx-auto px-4 py-12 sm:py-20",children:(0,b.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 sm:py-12",children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(g.CheckCircle2,{className:"h-20 w-20 text-green-600"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-green-600/20 rounded-full blur-xl"})]})}),(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold mb-2 text-center",children:"سفارش شما با موفقیت ثبت شد"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-6 text-center",children:"سفارش شما دریافت شد و در حال پردازش است"}),(0,b.jsxs)("div",{className:"w-full space-y-4 mb-8",children:[(0,b.jsxs)("div",{className:"bg-muted/50 rounded-lg p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"شماره سفارش:"}),(0,b.jsx)("span",{className:"font-mono font-bold text-lg",children:m.orderNumber})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"مبلغ کل:"}),(0,b.jsxs)("span",{className:"font-bold text-lg",children:[(m.total+m.shippingCost).toLocaleString("fa-IR")," تومان"]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"وضعیت سفارش:"}),(0,b.jsx)("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium",children:"در انتظار پردازش"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"وضعیت پرداخت:"}),(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${"paid"===m.paymentStatus?"bg-green-100 text-green-800":"pending"===m.paymentStatus?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:"paid"===m.paymentStatus?"پرداخت شده":"pending"===m.paymentStatus?"در انتظار پرداخت":"پرداخت ناموفق"})]})]}),(0,b.jsx)("div",{className:"bg-blue-50 dark:bg-blue-950/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:(0,b.jsxs)("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:[(0,b.jsx)("strong",{children:"نکته:"})," برای پیگیری سفارش خود، می‌توانید از شماره سفارش استفاده کنید."]})})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full",children:[(0,b.jsx)(i.default,{href:`/order/track?orderNumber=${m.orderNumber}`,className:"flex-1",children:(0,b.jsxs)(f.Button,{className:"w-full",size:"lg",children:[(0,b.jsx)(h.Package,{className:"ml-2 h-4 w-4"}),"پیگیری سفارش"]})}),(0,b.jsx)(i.default,{href:"/products",className:"flex-1",children:(0,b.jsx)(f.Button,{variant:"outline",className:"w-full",size:"lg",children:"ادامه خرید"})})]})]})})})})}):(0,b.jsx)("div",{className:"container mx-auto px-4 py-12 sm:py-20",children:(0,b.jsx)("div",{className:"max-w-md mx-auto",children:(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsx)("div",{className:"flex flex-col items-center justify-center py-12",children:(0,b.jsx)("p",{className:"text-muted-foreground text-center",children:"در حال بارگذاری اطلاعات سفارش..."})})})})})})}function l(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"container mx-auto px-4 py-6",children:"در حال بارگذاری..."}),children:(0,b.jsx)(k,{})})}a.s(["default",()=>l])},17056,a=>{a.v(b=>Promise.all(["server/chunks/ssr/lib_api_fetch-with-auth_ts_216bac7a._.js"].map(b=>a.l(b))).then(()=>b(77756)))}];

//# sourceMappingURL=_ea95ccef._.js.map