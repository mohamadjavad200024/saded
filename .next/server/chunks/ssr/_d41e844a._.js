module.exports=[17755,a=>{"use strict";let b=(0,a.i(70106).default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);a.s(["MoreHorizontal",()=>b],17755)},65733,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97942),e=a.i(33508),f=a.i(97895);let g=d.Root,h=d.Trigger,i=d.Portal;d.Close;let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)(d.Overlay,{ref:e,className:(0,f.cn)("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...c}));j.displayName=d.Overlay.displayName;let k=c.forwardRef(({className:a,children:c,...g},h)=>(0,b.jsxs)(i,{children:[(0,b.jsx)(j,{}),(0,b.jsxs)(d.Content,{ref:h,className:(0,f.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border-[0.25px] border-border/30 bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg",a),...g,children:[c,(0,b.jsxs)(d.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,b.jsx)(e.X,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"بستن"})]})]})]}));k.displayName=d.Content.displayName;let l=({className:a,...c})=>(0,b.jsx)("div",{className:(0,f.cn)("flex flex-col space-y-1.5 text-center sm:text-right",a),...c});l.displayName="DialogHeader";let m=({className:a,...c})=>(0,b.jsx)("div",{className:(0,f.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 sm:space-x-reverse",a),...c});m.displayName="DialogFooter";let n=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)(d.Title,{ref:e,className:(0,f.cn)("text-lg font-semibold leading-none tracking-tight",a),...c}));n.displayName=d.Title.displayName;let o=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)(d.Description,{ref:e,className:(0,f.cn)("text-sm text-muted-foreground",a),...c}));o.displayName=d.Description.displayName,a.s(["Dialog",()=>g,"DialogContent",()=>k,"DialogDescription",()=>o,"DialogFooter",()=>m,"DialogHeader",()=>l,"DialogTitle",()=>n,"DialogTrigger",()=>h])},88237,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97895);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{className:"relative w-full overflow-auto",children:(0,b.jsx)("table",{ref:e,className:(0,d.cn)("w-full caption-bottom text-sm",a),...c})}));e.displayName="Table";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("thead",{ref:e,className:(0,d.cn)("[&_tr]:border-b border-border/30",a),...c}));f.displayName="TableHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tbody",{ref:e,className:(0,d.cn)("[&_tr:last-child]:border-0",a),...c}));g.displayName="TableBody",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tfoot",{ref:e,className:(0,d.cn)("border-t border-border/30 bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...c})).displayName="TableFooter";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tr",{ref:e,className:(0,d.cn)("border-b border-border/30 transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...c}));h.displayName="TableRow";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("th",{ref:e,className:(0,d.cn)("h-12 px-4 text-right align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...c}));i.displayName="TableHead";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("td",{ref:e,className:(0,d.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...c}));j.displayName="TableCell",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("caption",{ref:e,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",a),...c})).displayName="TableCaption",a.s(["Table",()=>e,"TableBody",()=>g,"TableCell",()=>j,"TableHead",()=>i,"TableHeader",()=>f,"TableRow",()=>h])},3130,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97895);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border-[0.25px] border-border/3 bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},49814,a=>{"use strict";var b=a.i(33915),c=a.i(54917);let d=(0,b.create)((a,b)=>({categories:[],setCategories:b=>a({categories:b}),addCategory:b=>a(a=>{let c=a.categories.findIndex(a=>a.id===b.id);if(c>=0){let d=[...a.categories];return d[c]=b,{categories:d}}return{categories:[...a.categories,b]}}),updateCategory:b=>a(a=>{let c=a.categories.findIndex(a=>a.id===b.id);if(c>=0){let d=[...a.categories];return d[c]=b,{categories:d}}return a}),deleteCategory:b=>a(a=>({categories:a.categories.filter(a=>a.id!==b)})),toggleCategory:b=>a(a=>({categories:a.categories.map(a=>a.id===b?{...a,isActive:!a.isActive}:a)})),getCategory:a=>b().categories.find(b=>b.id===a),getActiveCategories:()=>b().categories.filter(a=>a.isActive&&a.enabled),getEnabledCategories:()=>b().categories.filter(a=>a.enabled),loadCategoriesFromDB:async(a=!1)=>{try{let c=await fetch(a?"/api/categories?all=true":"/api/categories");if(!c.ok)throw Error("خطا در بارگذاری دسته‌بندی‌ها");let d=(await c.json()).data||[];b().setCategories(d)}catch(a){c.logger.error("Error loading categories from DB:",a)}}}));a.s(["useCategoryStore",0,d])},15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},24569,a=>{"use strict";let b=(0,a.i(70106).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);a.s(["Edit",()=>b],24569)},5019,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(88237),e=a.i(40695),f=a.i(54161),g=a.i(76504),h=a.i(17755),i=a.i(24569),j=a.i(81560),k=a.i(83497),l=a.i(49814),m=a.i(77687),n=a.i(38246),o=a.i(65733);function p({categories:a,onRefresh:p}){let{deleteCategory:q,toggleCategory:r}=(0,l.useCategoryStore)(),{toast:s}=(0,m.useToast)(),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(null);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"rounded-lg border border-border/30 shadow-sm overflow-hidden",children:(0,b.jsxs)(d.Table,{children:[(0,b.jsx)(d.TableHeader,{className:"bg-muted/50",children:(0,b.jsxs)(d.TableRow,{children:[(0,b.jsx)(d.TableHead,{children:"نام"}),(0,b.jsx)(d.TableHead,{children:"توضیحات"}),(0,b.jsx)(d.TableHead,{children:"وضعیت"}),(0,b.jsx)(d.TableHead,{className:"text-left",children:"عملیات"})]})}),(0,b.jsx)(d.TableBody,{children:0===a.length?(0,b.jsx)(d.TableRow,{children:(0,b.jsx)(d.TableCell,{colSpan:4,className:"text-center py-8",children:"دسته‌بندی‌ای یافت نشد"})},"empty-state"):a.map((a,c)=>(0,b.jsxs)(d.TableRow,{children:[(0,b.jsxs)(d.TableCell,{className:"font-medium flex items-center gap-2",children:[(0,b.jsx)(k.Package,{className:"h-4 w-4 text-muted-foreground"}),a.name]}),(0,b.jsx)(d.TableCell,{className:"text-muted-foreground",children:a.description||"-"}),(0,b.jsx)(d.TableCell,{children:(0,b.jsx)(f.Badge,{variant:a.isActive?"success":"secondary",children:a.isActive?"فعال":"غیرفعال"})}),(0,b.jsx)(d.TableCell,{children:(0,b.jsxs)(g.DropdownMenu,{children:[(0,b.jsx)(g.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(h.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(g.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(g.DropdownMenuLabel,{children:"عملیات"}),(0,b.jsx)(g.DropdownMenuSeparator,{}),(0,b.jsx)(g.DropdownMenuItem,{asChild:!0,children:(0,b.jsxs)(n.default,{href:`/admin/categories/${a.id}`,children:[(0,b.jsx)(i.Edit,{className:"ml-2 h-4 w-4"}),"ویرایش"]})}),(0,b.jsx)(g.DropdownMenuItem,{onClick:()=>{r(a.id),s({title:"موفق",description:"وضعیت دسته‌بندی تغییر کرد"}),p?.()},children:a.isActive?"غیرفعال کردن":"فعال کردن"}),(0,b.jsx)(g.DropdownMenuSeparator,{}),(0,b.jsxs)(g.DropdownMenuItem,{className:"text-destructive",onClick:()=>{w(a.id),u(!0)},children:[(0,b.jsx)(j.Trash2,{className:"ml-2 h-4 w-4"}),"حذف"]})]})]})})]},a.id||`category-${c}`))})]})}),(0,b.jsx)(o.Dialog,{open:t,onOpenChange:u,children:(0,b.jsxs)(o.DialogContent,{children:[(0,b.jsxs)(o.DialogHeader,{children:[(0,b.jsx)(o.DialogTitle,{children:"حذف دسته‌بندی"}),(0,b.jsx)(o.DialogDescription,{children:"آیا از حذف این دسته‌بندی اطمینان دارید؟ این عمل قابل بازگشت نیست."})]}),(0,b.jsxs)(o.DialogFooter,{children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>u(!1),children:"انصراف"}),(0,b.jsx)(e.Button,{variant:"destructive",onClick:()=>{v&&(q(v),s({title:"موفق",description:"دسته‌بندی با موفقیت حذف شد"}),u(!1),w(null),p?.())},children:"حذف"})]})]})})]})}var q=a.i(3130),r=a.i(15618),s=a.i(54624),t=a.i(50944);function u(){let{categories:a,loadCategoriesFromDB:d}=(0,l.useCategoryStore)(),[f,g]=(0,c.useState)(!0),h=(0,t.usePathname)();return(0,c.useEffect)(()=>{(async()=>{g(!0);try{await d(!0)}catch(a){console.error("Error loading categories:",a)}finally{g(!1)}})()},[d,h]),(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)(q.Card,{className:"shadow-sm",children:[(0,b.jsx)(q.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(q.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(s.FolderTree,{className:"h-5 w-5 text-primary"}),"دسته‌بندی‌ها (",a.length,")"]}),(0,b.jsx)(e.Button,{asChild:!0,size:"sm",children:(0,b.jsxs)(n.default,{href:"/admin/categories/new",children:[(0,b.jsx)(r.Plus,{className:"ml-2 h-4 w-4"}),"افزودن دسته‌بندی"]})})]})}),(0,b.jsx)(q.CardContent,{children:(0,b.jsx)(p,{categories:a})})]})})}a.s(["default",()=>u],5019)}];

//# sourceMappingURL=_d41e844a._.js.map