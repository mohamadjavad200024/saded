module.exports=[96532,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(10836),f=a.i(92776),g=a.i(40695),h=a.i(54161),i=a.i(65733),j=a.i(95245),k=a.i(59501),l=a.i(99614),m=a.i(5522),n=a.i(17171),o=a.i(46893),p=a.i(87682),q=a.i(3130),r=a.i(60421),s=a.i(77687),t=a.i(15618),u=a.i(96221),v=a.i(83497),w=a.i(81560);let x=l.object({items:l.array(l.object({productId:l.string().min(1,"محصول الزامی است"),productName:l.string().min(1,"نام محصول الزامی است"),quantity:l.number().min(1,"تعداد باید بیشتر از صفر باشد"),unitPrice:l.number().min(0,"قیمت واحد باید مثبت باشد")})).min(1,"حداقل یک محصول الزامی است"),totalAmount:l.number().min(0,"مبلغ کل باید مثبت باشد"),paymentMethod:l.enum(["cash","check"]),checkDetails:l.object({checkNumber:l.string().min(1,"شماره چک الزامی است"),bankName:l.string().min(1,"نام بانک الزامی است"),dueDate:l.string().min(1,"تاریخ سررسید الزامی است")}).optional(),orderDate:l.string().min(1,"تاریخ سفارش الزامی است"),deliveryDate:l.string().min(1,"تاریخ تحویل الزامی است"),paymentDate:l.string().optional(),notes:l.string().optional()}).refine(a=>"check"!==a.paymentMethod||a.checkDetails?.checkNumber&&a.checkDetails?.bankName&&a.checkDetails?.dueDate,{message:"در صورت انتخاب پرداخت چکی، جزئیات چک الزامی است",path:["checkDetails"]});function y({supplierId:a,transaction:d,onSuccess:e,onCancel:f}){let{products:h}=(0,r.useProductStore)(),{toast:i}=(0,s.useToast)(),[l,y]=(0,c.useState)(!1),{register:z,handleSubmit:A,formState:{errors:B},control:C,watch:D,setValue:E}=(0,j.useForm)({resolver:(0,k.zodResolver)(x),defaultValues:d?{items:d.items.map(a=>({productId:a.productId,productName:a.productName,quantity:a.quantity,unitPrice:a.unitPrice})),totalAmount:d.totalAmount,paymentMethod:d.paymentMethod,checkDetails:d.checkDetails?{checkNumber:d.checkDetails.checkNumber,bankName:d.checkDetails.bankName,dueDate:"string"==typeof d.checkDetails.dueDate?d.checkDetails.dueDate.split("T")[0]:new Date(d.checkDetails.dueDate).toISOString().split("T")[0]}:void 0,orderDate:"string"==typeof d.orderDate?d.orderDate.split("T")[0]:new Date(d.orderDate).toISOString().split("T")[0],deliveryDate:"string"==typeof d.deliveryDate?d.deliveryDate.split("T")[0]:new Date(d.deliveryDate).toISOString().split("T")[0],paymentDate:d.paymentDate?"string"==typeof d.paymentDate?d.paymentDate.split("T")[0]:new Date(d.paymentDate).toISOString().split("T")[0]:"",notes:d.notes||""}:{items:[{productId:"",productName:"",quantity:1,unitPrice:0}],totalAmount:0,paymentMethod:"cash",orderDate:new Date().toISOString().split("T")[0],deliveryDate:new Date().toISOString().split("T")[0],notes:""}}),{fields:F,append:G,remove:H}=(0,j.useFieldArray)({control:C,name:"items"}),I=D("paymentMethod"),J=D("items"),K=()=>{let a=J.reduce((a,b)=>a+(b.quantity||0)*(b.unitPrice||0),0);return E("totalAmount",a),a},L=async a=>{y(!0);try{let b={items:a.items.map(a=>({productId:a.productId,productName:a.productName,quantity:a.quantity,unitPrice:a.unitPrice})),totalAmount:a.totalAmount,paymentMethod:a.paymentMethod,checkDetails:"check"===a.paymentMethod&&a.checkDetails?{checkNumber:a.checkDetails.checkNumber,bankName:a.checkDetails.bankName,dueDate:new Date(a.checkDetails.dueDate)}:void 0,orderDate:new Date(a.orderDate),deliveryDate:new Date(a.deliveryDate),paymentDate:a.paymentDate?new Date(a.paymentDate):void 0,notes:a.notes||void 0};e(b)}catch(a){i({title:"خطا",description:"خطایی در ذخیره تراکنش رخ داد",variant:"destructive"})}finally{y(!1)}};return(0,b.jsxs)("form",{onSubmit:A(L),className:"space-y-6",children:[(0,b.jsxs)(q.Card,{className:"shadow-sm",children:[(0,b.jsx)(q.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,b.jsxs)(q.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(v.Package,{className:"h-5 w-5 text-primary"}),"محصولات تحویل‌شده"]})}),(0,b.jsxs)(q.CardContent,{className:"pt-6 space-y-4",children:[F.map((a,c)=>(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-4 p-4 border border-border/30 rounded-lg",children:[(0,b.jsxs)("div",{className:"col-span-12 md:col-span-4 space-y-2",children:[(0,b.jsx)(n.Label,{children:"محصول *"}),(0,b.jsxs)(p.Select,{value:J[c]?.productId||"",onValueChange:a=>{let b;(b=h.find(b=>b.id===a))&&(E(`items.${c}.productId`,b.id),E(`items.${c}.productName`,b.name),E(`items.${c}.unitPrice`,b.price||0),K())},children:[(0,b.jsx)(p.SelectTrigger,{children:(0,b.jsx)(p.SelectValue,{placeholder:"انتخاب محصول"})}),(0,b.jsx)(p.SelectContent,{children:h.map(a=>(0,b.jsx)(p.SelectItem,{value:a.id,children:a.name},a.id))})]}),B.items?.[c]?.productId&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:B.items[c]?.productId?.message})]}),(0,b.jsxs)("div",{className:"col-span-6 md:col-span-3 space-y-2",children:[(0,b.jsx)(n.Label,{children:"تعداد *"}),(0,b.jsx)(m.Input,{type:"number",min:"1",...z(`items.${c}.quantity`,{valueAsNumber:!0,onChange:()=>K()})}),B.items?.[c]?.quantity&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:B.items[c]?.quantity?.message})]}),(0,b.jsxs)("div",{className:"col-span-6 md:col-span-3 space-y-2",children:[(0,b.jsx)(n.Label,{children:"قیمت واحد (تومان) *"}),(0,b.jsx)(m.Input,{type:"number",min:"0",step:"0.01",...z(`items.${c}.unitPrice`,{valueAsNumber:!0,onChange:()=>K()})}),B.items?.[c]?.unitPrice&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:B.items[c]?.unitPrice?.message})]}),(0,b.jsx)("div",{className:"col-span-12 md:col-span-2 flex items-end",children:F.length>1&&(0,b.jsx)(g.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>{H(c),K()},className:"text-destructive",children:(0,b.jsx)(w.Trash2,{className:"h-4 w-4"})})})]},a.id)),(0,b.jsxs)(g.Button,{type:"button",variant:"outline",onClick:()=>G({productId:"",productName:"",quantity:1,unitPrice:0}),className:"w-full",children:[(0,b.jsx)(t.Plus,{className:"ml-2 h-4 w-4"}),"افزودن محصول"]})]})]}),(0,b.jsxs)(q.Card,{className:"shadow-sm",children:[(0,b.jsx)(q.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,b.jsx)(q.CardTitle,{children:"مبلغ کل"})}),(0,b.jsx)(q.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"مبلغ کل (تومان) *"}),(0,b.jsx)(m.Input,{type:"number",min:"0",step:"0.01",...z("totalAmount",{valueAsNumber:!0}),readOnly:!0,className:"text-lg font-bold"}),B.totalAmount&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:B.totalAmount.message})]})})]}),(0,b.jsxs)(q.Card,{className:"shadow-sm",children:[(0,b.jsx)(q.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,b.jsx)(q.CardTitle,{children:"روش پرداخت"})}),(0,b.jsxs)(q.CardContent,{className:"pt-6 space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"نوع پرداخت *"}),(0,b.jsxs)(p.Select,{value:I,onValueChange:a=>E("paymentMethod",a),children:[(0,b.jsx)(p.SelectTrigger,{children:(0,b.jsx)(p.SelectValue,{})}),(0,b.jsxs)(p.SelectContent,{children:[(0,b.jsx)(p.SelectItem,{value:"cash",children:"نقدی"}),(0,b.jsx)(p.SelectItem,{value:"check",children:"چکی"})]})]}),B.paymentMethod&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:B.paymentMethod.message})]}),"check"===I&&(0,b.jsxs)("div",{className:"space-y-4 p-4 border border-border/30 rounded-lg bg-muted/30",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"شماره چک *"}),(0,b.jsx)(m.Input,{...z("checkDetails.checkNumber"),placeholder:"مثال: 123456"}),B.checkDetails?.checkNumber&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:B.checkDetails.checkNumber.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"نام بانک *"}),(0,b.jsx)(m.Input,{...z("checkDetails.bankName"),placeholder:"مثال: بانک ملی"}),B.checkDetails?.bankName&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:B.checkDetails.bankName.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"تاریخ سررسید چک *"}),(0,b.jsx)(m.Input,{type:"date",...z("checkDetails.dueDate")}),B.checkDetails?.dueDate&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:B.checkDetails.dueDate.message})]})]})]})]}),(0,b.jsxs)(q.Card,{className:"shadow-sm",children:[(0,b.jsx)(q.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,b.jsx)(q.CardTitle,{children:"تاریخ‌ها"})}),(0,b.jsx)(q.CardContent,{className:"pt-6 space-y-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"تاریخ سفارش *"}),(0,b.jsx)(m.Input,{type:"date",...z("orderDate")}),B.orderDate&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:B.orderDate.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"تاریخ تحویل *"}),(0,b.jsx)(m.Input,{type:"date",...z("deliveryDate")}),B.deliveryDate&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:B.deliveryDate.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"تاریخ پرداخت"}),(0,b.jsx)(m.Input,{type:"date",...z("paymentDate")}),B.paymentDate&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:B.paymentDate.message})]})]})})]}),(0,b.jsxs)(q.Card,{className:"shadow-sm",children:[(0,b.jsx)(q.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,b.jsx)(q.CardTitle,{children:"یادداشت‌ها"})}),(0,b.jsx)(q.CardContent,{className:"pt-6",children:(0,b.jsx)(o.Textarea,{...z("notes"),placeholder:"یادداشت‌های اضافی درباره این تراکنش...",rows:4})})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-4 pt-4 border-t border-border/30",children:[f&&(0,b.jsx)(g.Button,{type:"button",variant:"outline",onClick:f,size:"lg",children:"انصراف"}),(0,b.jsx)(g.Button,{type:"submit",disabled:l,size:"lg",className:"min-w-[140px]",children:l?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.Loader2,{className:"ml-2 h-4 w-4 animate-spin"}),"در حال ذخیره..."]}):d?"ذخیره تغییرات":"افزودن تراکنش"})]})]})}var z=a.i(76504),A=a.i(17755),B=a.i(24569),C=a.i(41675),D=a.i(90166),E=a.i(70106);let F=(0,E.default)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var G=a.i(11156);let H=(0,E.default)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);var I=a.i(72228),J=a.i(80666);function K({transaction:a,onEdit:d,onDelete:e}){let[f,i]=(0,c.useState)(!1),j=a=>{try{return(0,I.format)(new Date(a),"yyyy/MM/dd",{locale:J.faIR})}catch{return"-"}},k=a=>new Intl.NumberFormat("fa-IR").format(a),l=a.items.reduce((a,b)=>a+b.quantity,0);return(0,b.jsxs)(q.Card,{className:"hover:shadow-md transition-shadow border-border/30",children:[(0,b.jsx)(q.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsx)("div",{className:"flex-1 space-y-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,b.jsx)(F,{className:"h-5 w-5 text-primary"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("h3",{className:"font-semibold",children:["تراکنش #",a.id.slice(-8)]}),(0,b.jsx)(h.Badge,{variant:"cash"===a.paymentMethod?"success":"warning",className:"text-xs",children:"cash"===a.paymentMethod?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(H,{className:"h-3 w-3 ml-1"}),"نقدی"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(G.CreditCard,{className:"h-3 w-3 ml-1"}),"چکی"]})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-1 text-xs text-muted-foreground",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(C.Calendar,{className:"h-3 w-3"}),"تحویل: ",j(a.deliveryDate)]}),a.paymentDate&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(C.Calendar,{className:"h-3 w-3"}),"پرداخت: ",j(a.paymentDate)]})]})]})]})}),(0,b.jsxs)(z.DropdownMenu,{children:[(0,b.jsx)(z.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(g.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,b.jsx)(A.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(z.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(z.DropdownMenuLabel,{children:"عملیات"}),(0,b.jsx)(z.DropdownMenuSeparator,{}),(0,b.jsxs)(z.DropdownMenuItem,{onClick:()=>d(a),children:[(0,b.jsx)(B.Edit,{className:"ml-2 h-4 w-4"}),"ویرایش"]}),(0,b.jsx)(z.DropdownMenuSeparator,{}),(0,b.jsxs)(z.DropdownMenuItem,{className:"text-destructive",onClick:()=>e(a.id),children:[(0,b.jsx)(w.Trash2,{className:"ml-2 h-4 w-4"}),"حذف"]})]})]})]})}),(0,b.jsxs)(q.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(D.DollarSign,{className:"h-5 w-5 text-primary"}),(0,b.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"مبلغ کل"})]}),(0,b.jsxs)("span",{className:"text-xl font-bold",children:[k(a.totalAmount)," تومان"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(v.Package,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"تعداد محصولات"})]}),(0,b.jsx)("div",{className:"text-lg font-semibold",children:a.items.length})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(v.Package,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"تعداد کل"})]}),(0,b.jsxs)("div",{className:"text-lg font-semibold",children:[k(l)," عدد"]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"محصولات"}),a.items.length>3&&(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>i(!f),children:f?"بستن":"مشاهده همه"})]}),(0,b.jsx)("div",{className:"space-y-2",children:a.items.slice(0,f?a.items.length:3).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,b.jsx)(v.Package,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-sm",children:a.productName})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(h.Badge,{variant:"outline",className:"text-xs",children:[k(a.quantity)," عدد"]}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:[k(a.unitPrice)," تومان"]})]})]},c))})]}),"check"===a.paymentMethod&&a.checkDetails&&(0,b.jsxs)("div",{className:"pt-3 border-t border-border/30 space-y-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-muted-foreground block",children:"جزئیات چک:"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"شماره چک:"}),(0,b.jsx)("div",{className:"font-medium",children:a.checkDetails.checkNumber})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"بانک:"}),(0,b.jsx)("div",{className:"font-medium",children:a.checkDetails.bankName})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"تاریخ سررسید:"}),(0,b.jsxs)("div",{className:"flex items-center gap-1 font-medium",children:[(0,b.jsx)(C.Calendar,{className:"h-3 w-3"}),j(a.checkDetails.dueDate)]})]})]})]}),(0,b.jsx)("div",{className:"pt-3 border-t border-border/30",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground block mb-1",children:"تاریخ سفارش"}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(C.Calendar,{className:"h-3 w-3"}),j(a.orderDate)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground block mb-1",children:"تاریخ تحویل"}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(C.Calendar,{className:"h-3 w-3"}),j(a.deliveryDate)]})]})]})}),a.notes&&(0,b.jsxs)("div",{className:"pt-3 border-t border-border/30",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-muted-foreground block mb-1",children:"یادداشت:"}),(0,b.jsx)("p",{className:"text-sm",children:a.notes})]})]})]})}function L({supplier:a,onUpdate:d}){let{addSupplierTransaction:e,updateSupplierTransaction:j,deleteSupplierTransaction:k}=(0,f.useSupplierStore)(),{toast:l}=(0,s.useToast)(),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!1),[u,v]=(0,c.useState)(null),w=a.transactions||[],x=()=>{p(null),n(!0)},z=a=>{p(a),n(!0)},A=a=>{v(a),r(!0)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(F,{className:"h-5 w-5 text-primary"}),(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"تراکنش‌های تامین"}),w.length>0&&(0,b.jsx)(h.Badge,{variant:"secondary",className:"text-xs",children:w.length})]}),(0,b.jsxs)(g.Button,{onClick:x,size:"sm",children:[(0,b.jsx)(t.Plus,{className:"ml-2 h-4 w-4"}),"افزودن تراکنش"]})]}),0===w.length?(0,b.jsxs)("div",{className:"text-center py-12 border border-dashed border-border/30 rounded-lg",children:[(0,b.jsx)(F,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4 opacity-50"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"تراکنشی ثبت نشده است"}),(0,b.jsxs)(g.Button,{onClick:x,variant:"outline",size:"sm",className:"mt-4",children:[(0,b.jsx)(t.Plus,{className:"ml-2 h-4 w-4"}),"افزودن اولین تراکنش"]})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:w.sort((a,b)=>new Date(b.deliveryDate).getTime()-new Date(a.deliveryDate).getTime()).map(a=>(0,b.jsx)(K,{transaction:a,onEdit:z,onDelete:A},a.id))})]}),(0,b.jsx)(i.Dialog,{open:m,onOpenChange:n,children:(0,b.jsxs)(i.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:o?"ویرایش تراکنش":"افزودن تراکنش جدید"}),(0,b.jsx)(i.DialogDescription,{children:o?"اطلاعات تراکنش را ویرایش کنید":"اطلاعات تراکنش جدید را وارد کنید"})]}),(0,b.jsx)(y,{supplierId:a.id,transaction:o||void 0,onSuccess:b=>{o?j(a.id,o.id,b):e(a.id,b),o?l({title:"موفق",description:"تراکنش با موفقیت به‌روزرسانی شد"}):l({title:"موفق",description:"تراکنش با موفقیت افزوده شد"}),n(!1),p(null),d?.()},onCancel:()=>n(!1)})]})}),(0,b.jsx)(i.Dialog,{open:q,onOpenChange:r,children:(0,b.jsxs)(i.DialogContent,{children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"حذف تراکنش"}),(0,b.jsx)(i.DialogDescription,{children:"آیا از حذف این تراکنش اطمینان دارید؟ این عمل قابل بازگشت نیست."})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,b.jsx)(g.Button,{variant:"outline",onClick:()=>r(!1),children:"انصراف"}),(0,b.jsx)(g.Button,{variant:"destructive",onClick:()=>{u&&(k(a.id,u),l({title:"موفق",description:"تراکنش با موفقیت حذف شد"}),r(!1),v(null),d?.())},children:"حذف"})]})]})})]})}var M=a.i(21958),N=a.i(32860),O=a.i(46842),P=a.i(63519),Q=a.i(92258),R=a.i(38246);function S({params:a}){let{id:i}=(0,c.use)(a);(0,d.useRouter)();let j=(0,f.useSupplierStore)(a=>a.getSupplier(i)),[k,l]=(0,c.useState)(0);if(!j)return(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-4",children:[(0,b.jsx)(u.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"در حال بارگذاری..."})]});let m=j.transactions||[],n=m.length;m.reduce((a,b)=>a+b.totalAmount,0);let o=j.products?.length||0;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:j.name}),(0,b.jsx)(h.Badge,{variant:j.isActive?"success":"secondary",children:j.isActive?"فعال":"غیرفعال"})]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"مدیریت اطلاعات و تراکنش‌های تامین‌کننده"})]}),(0,b.jsx)(g.Button,{variant:"outline",asChild:!0,children:(0,b.jsxs)(R.default,{href:"/admin/suppliers",children:[(0,b.jsx)(N.ArrowRight,{className:"ml-2 h-4 w-4"}),"بازگشت به لیست"]})})]}),(0,b.jsxs)(q.Card,{children:[(0,b.jsx)(q.CardHeader,{children:(0,b.jsxs)(q.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(O.User,{className:"h-5 w-5 text-primary"}),"اطلاعات تامین‌کننده"]})}),(0,b.jsx)(q.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"تماس"}),(0,b.jsxs)("div",{className:"mt-1.5 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(P.Phone,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("a",{href:`tel:${j.phone}`,className:"text-sm hover:text-primary transition-colors",children:j.phone})]}),j.email&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(Q.Mail,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("a",{href:`mailto:${j.email}`,className:"text-sm hover:text-primary transition-colors",children:j.email})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"دسته‌بندی‌ها"}),(0,b.jsx)("div",{className:"mt-1.5 flex flex-wrap gap-1.5",children:j.categories.map(a=>(0,b.jsx)(h.Badge,{variant:"secondary",className:"text-xs",children:a},a))})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"محصولات"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(v.Package,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-lg font-semibold",children:o})]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"تراکنش‌ها"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(F,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-lg font-semibold",children:n})]})]})]}),j.notes&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"یادداشت‌ها"}),(0,b.jsx)("p",{className:"mt-1.5 text-sm text-foreground",children:j.notes})]})]})]})})]}),(0,b.jsx)(q.Card,{children:(0,b.jsx)(q.CardContent,{className:"pt-6",children:(0,b.jsxs)(M.Tabs,{defaultValue:"info",className:"w-full",children:[(0,b.jsxs)(M.TabsList,{className:"grid w-full grid-cols-2 lg:grid-cols-2",children:[(0,b.jsxs)(M.TabsTrigger,{value:"info",className:"flex items-center gap-2",children:[(0,b.jsx)(O.User,{className:"h-4 w-4"}),"اطلاعات پایه"]}),(0,b.jsxs)(M.TabsTrigger,{value:"transactions",className:"flex items-center gap-2",children:[(0,b.jsx)(F,{className:"h-4 w-4"}),"تراکنش‌ها",n>0&&(0,b.jsx)(h.Badge,{variant:"secondary",className:"text-xs",children:n})]})]}),(0,b.jsx)(M.TabsContent,{value:"info",className:"mt-6",children:(0,b.jsx)(e.SupplierForm,{supplier:j})}),(0,b.jsx)(M.TabsContent,{value:"transactions",className:"mt-6",children:(0,b.jsx)(L,{supplier:j,onUpdate:()=>{l(a=>a+1)}},k)})]})})})]})}a.s(["default",()=>S],96532)}];

//# sourceMappingURL=app_admin_suppliers_%5Bid%5D_page_tsx_bc6c8985._.js.map