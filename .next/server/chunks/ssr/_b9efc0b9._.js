module.exports=[35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},5522,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97895);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-10 w-full rounded-md border-[0.25px] border-input/30 bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},63519,a=>{"use strict";let b=(0,a.i(70106).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);a.s(["Phone",()=>b],63519)},77687,a=>{"use strict";var b=a.i(72131);let c=0,d=new Map,e=a=>{if(d.has(a))return;let b=setTimeout(()=>{d.delete(a),h({type:"REMOVE_TOAST",toastId:a})},1e6);d.set(a,b)},f=[],g={toasts:[]};function h(a){g=((a,b)=>{switch(b.type){case"ADD_TOAST":return{...a,toasts:[b.toast,...a.toasts].slice(0,1)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(a=>a.id===b.toast.id?{...a,...b.toast}:a)};case"DISMISS_TOAST":{let{toastId:c}=b;return c?e(c):a.toasts.forEach(a=>{e(a.id)}),{...a,toasts:a.toasts.map(a=>a.id===c||void 0===c?{...a,open:!1}:a)}}case"REMOVE_TOAST":if(void 0===b.toastId)return{...a,toasts:[]};return{...a,toasts:a.toasts.filter(a=>a.id!==b.toastId)}}})(g,a),f.forEach(a=>{a(g)})}function i({...a}){let b=(c=(c+1)%Number.MAX_SAFE_INTEGER).toString(),d=()=>h({type:"DISMISS_TOAST",toastId:b});return h({type:"ADD_TOAST",toast:{...a,id:b,open:!0,onOpenChange:a=>{a||d()}}}),{id:b,dismiss:d,update:a=>h({type:"UPDATE_TOAST",toast:{...a,id:b}})}}function j(){let[a,c]=b.useState(g);return b.useEffect(()=>(f.push(c),()=>{let a=f.indexOf(c);a>-1&&f.splice(a,1)}),[a]),{...a,toast:i,dismiss:a=>h({type:"DISMISS_TOAST",toastId:a})}}a.s(["useToast",()=>j])},17171,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(35112);var d=a.i(11011),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f=c.forwardRef((a,c)=>(0,b.jsx)(e.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));f.displayName="Label";var g=a.i(187),h=a.i(97895);let i=(0,g.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),j=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(f,{ref:d,className:(0,h.cn)(i(),a),...c}));j.displayName=f.displayName,a.s(["Label",()=>j],17171)},67453,a=>{"use strict";let b=(0,a.i(70106).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],67453)},32860,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["ArrowRight",()=>b],32860)},43108,a=>{"use strict";let b=(0,a.i(70106).default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>b],43108)},210,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},99084,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(40695),f=a.i(5522),g=a.i(17171),h=a.i(3130),i=a.i(25173),j=a.i(77687),k=a.i(46842),l=a.i(63519),m=a.i(43108),n=a.i(32860),o=a.i(210),p=a.i(67453),q=a.i(92e3),r=a.i(46271),s=a.i(38246),t=a.i(99614);function u(a){if(!a||"string"!=typeof a)return!1;try{let b=a.replace(/\s+/g,"").replace(/[^\d+]/g,"");if(!b||0===b.length)return!1;let c=b.replace(/^(\+98|0098)/,"");return c.startsWith("0")&&(c=c.substring(1)),/^9\d{9}$/.test(c)}catch{return!1}}function v(){let a=(0,d.useRouter)(),{toast:t}=(0,j.useToast)(),{register:v,login:w,isAuthenticated:x,checkAuth:y,hasCheckedAuth:z,isCheckingAuth:A,user:B}=(0,i.useAuthStore)(),[C,D]=(0,c.useState)("login"),[E,F]=(0,c.useState)(!1);(0,c.useEffect)(()=>{if(z&&B?.role==="admin")return void a.replace("/admin")},[z,B,a]);let[G,H]=(0,c.useState)({name:"",phone:"",password:"",confirmPassword:""}),[I,J]=(0,c.useState)({}),K=(a,b)=>{let c={...I};if("phone"===a&&(b.trim()?u(b)?delete c.phone:c.phone="شماره تماس معتبر نیست. فرمت صحیح: 09123456789":c.phone="شماره تماس الزامی است"),"password"===a){if(b){let a,d=(a=[],b.length<6?(a.push("رمز عبور باید حداقل 6 کاراکتر باشد"),{valid:!1,errors:a}):b.length>128?(a.push("رمز عبور نمی‌تواند بیشتر از 128 کاراکتر باشد"),{valid:!1,errors:a}):{valid:!0,errors:[]});d.valid?delete c.password:c.password=d.errors[0]||"رمز عبور ضعیف است"}else c.password="رمز عبور الزامی است";"register"===C&&G.confirmPassword&&(b!==G.confirmPassword?c.confirmPassword="رمز عبور و تکرار آن یکسان نیستند":delete c.confirmPassword)}"confirmPassword"===a&&"register"===C&&(b?b!==G.password?c.confirmPassword="رمز عبور و تکرار آن یکسان نیستند":delete c.confirmPassword:c.confirmPassword="تکرار رمز عبور الزامی است"),"name"===a&&"register"===C&&(b.trim()?b.trim().length<2?c.name="نام باید حداقل 2 کاراکتر باشد":/^[\u0600-\u06FFa-zA-Z\s]+$/.test(b.trim())?delete c.name:c.name="نام باید فقط شامل حروف فارسی یا انگلیسی باشد":c.name="نام الزامی است"),J(c)};(0,c.useEffect)(()=>{z||A||y()},[z,A,y]),(0,c.useEffect)(()=>{if(z&&x){let{user:b}=i.useAuthStore.getState();if(b?.role==="admin")return void a.replace("/admin");let c=new URLSearchParams(window.location.search).get("redirect")||"/";c!==window.location.pathname&&"/auth"!==c&&"/auth"===window.location.pathname&&a.replace(c)}},[z,x,a]);let L=async b=>{b.preventDefault(),F(!0);try{if("register"===C){if(!G.name.trim()){t({title:"خطا",description:"لطفاً نام خود را وارد کنید",variant:"destructive"}),F(!1);return}if(!G.phone.trim()||G.phone.length<10){t({title:"خطا",description:"لطفاً شماره تماس معتبر وارد کنید",variant:"destructive"}),F(!1);return}if(G.password.length<6){t({title:"خطا",description:"رمز عبور باید حداقل 6 کاراکتر باشد",variant:"destructive"}),F(!1);return}if(G.password!==G.confirmPassword){t({title:"خطا",description:"رمز عبور و تکرار آن یکسان نیستند",variant:"destructive"}),F(!1);return}try{await v(G.name,G.phone,G.password),t({title:"ثبت‌نام موفق",description:"حساب کاربری شما با موفقیت ایجاد شد"});let b=new URLSearchParams(window.location.search).get("redirect")||"/";a.replace(b)}catch(b){let a=b?.message||"خطا در ثبت‌نام. لطفاً دوباره تلاش کنید";t({title:"خطا در ثبت‌نام",description:a,variant:"destructive"}),console.error("Registration error:",b)}}else{if(!G.phone.trim()||!G.password.trim()){t({title:"خطا",description:"لطفاً شماره تماس و رمز عبور را وارد کنید",variant:"destructive"}),F(!1);return}if(await w(G.phone,G.password)){t({title:"ورود موفق",description:"به ساد خوش آمدید"});let b=new URLSearchParams(window.location.search).get("redirect")||"/";a.replace(b)}else t({title:"خطا",description:"شماره تماس یا رمز عبور اشتباه است",variant:"destructive"})}}catch(a){t({title:"خطا",description:a.message||"خطایی رخ داد. لطفاً دوباره تلاش کنید",variant:"destructive"})}finally{F(!1)}};return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-background via-background to-muted/20",children:(0,b.jsx)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:(0,b.jsxs)(h.Card,{className:"border-border/30 shadow-lg",children:[(0,b.jsxs)(h.CardHeader,{className:"space-y-1 text-center",children:[(0,b.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,b.jsx)("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:(0,b.jsx)(k.User,{className:"h-8 w-8 text-primary"})})}),(0,b.jsx)(h.CardTitle,{className:"text-2xl font-bold",children:"login"===C?"ورود به حساب کاربری":"ثبت‌نام"}),(0,b.jsx)(h.CardDescription,{children:"login"===C?"برای ادامه وارد حساب کاربری خود شوید":"حساب کاربری جدید ایجاد کنید"})]}),(0,b.jsxs)(h.CardContent,{children:[(0,b.jsxs)("form",{onSubmit:L,className:"space-y-4",children:["register"===C&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(g.Label,{htmlFor:"name",className:"flex items-center gap-2",children:[(0,b.jsx)(k.User,{className:"h-4 w-4"}),"نام و نام خانوادگی"]}),(0,b.jsx)(f.Input,{id:"name",type:"text",placeholder:"مثال: علی احمدی",value:G.name,onChange:a=>{H({...G,name:a.target.value}),K("name",a.target.value)},onBlur:a=>K("name",a.target.value),required:"register"===C,className:`h-11 ${I.name?"border-destructive":""}`}),I.name&&(0,b.jsxs)("p",{className:"text-sm text-destructive flex items-center gap-1 mt-1",children:[(0,b.jsx)(q.AlertCircle,{className:"h-3 w-3"}),I.name]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(g.Label,{htmlFor:"phone",className:"flex items-center gap-2",children:[(0,b.jsx)(l.Phone,{className:"h-4 w-4"}),"شماره تماس"]}),(0,b.jsx)(f.Input,{id:"phone",type:"tel",placeholder:"09123456789",value:G.phone,onChange:a=>{H({...G,phone:a.target.value}),K("phone",a.target.value)},onBlur:a=>K("phone",a.target.value),required:!0,className:`h-11 ${I.phone?"border-destructive":""}`}),I.phone&&(0,b.jsxs)("p",{className:"text-sm text-destructive flex items-center gap-1 mt-1",children:[(0,b.jsx)(q.AlertCircle,{className:"h-3 w-3"}),I.phone]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(g.Label,{htmlFor:"password",className:"flex items-center gap-2",children:[(0,b.jsx)(m.Lock,{className:"h-4 w-4"}),"رمز عبور"]}),(0,b.jsx)(f.Input,{id:"password",type:"password",placeholder:"register"===C?"حداقل 6 کاراکتر":"رمز عبور خود را وارد کنید",value:G.password,onChange:a=>{H({...G,password:a.target.value}),K("password",a.target.value)},onBlur:a=>K("password",a.target.value),required:!0,minLength:"register"===C?6:void 0,className:`h-11 ${I.password?"border-destructive":""}`}),I.password&&(0,b.jsxs)("p",{className:"text-sm text-destructive flex items-center gap-1 mt-1",children:[(0,b.jsx)(q.AlertCircle,{className:"h-3 w-3"}),I.password]}),"register"===C&&G.password&&!I.password&&(0,b.jsxs)("p",{className:"text-sm text-green-600 flex items-center gap-1 mt-1",children:[(0,b.jsx)(p.CheckCircle2,{className:"h-3 w-3"}),"رمز عبور معتبر است"]})]}),"register"===C&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(g.Label,{htmlFor:"confirmPassword",className:"flex items-center gap-2",children:[(0,b.jsx)(m.Lock,{className:"h-4 w-4"}),"تکرار رمز عبور"]}),(0,b.jsx)(f.Input,{id:"confirmPassword",type:"password",placeholder:"رمز عبور را دوباره وارد کنید",value:G.confirmPassword,onChange:a=>{H({...G,confirmPassword:a.target.value}),K("confirmPassword",a.target.value)},onBlur:a=>K("confirmPassword",a.target.value),required:!0,className:`h-11 ${I.confirmPassword?"border-destructive":""}`}),I.confirmPassword&&(0,b.jsxs)("p",{className:"text-sm text-destructive flex items-center gap-1 mt-1",children:[(0,b.jsx)(q.AlertCircle,{className:"h-3 w-3"}),I.confirmPassword]}),G.confirmPassword&&!I.confirmPassword&&G.password===G.confirmPassword&&(0,b.jsxs)("p",{className:"text-sm text-green-600 flex items-center gap-1 mt-1",children:[(0,b.jsx)(p.CheckCircle2,{className:"h-3 w-3"}),"رمز عبورها یکسان هستند"]})]}),(0,b.jsx)(e.Button,{type:"submit",className:"w-full h-11 text-base font-semibold",disabled:E,children:E?"در حال پردازش...":"login"===C?(0,b.jsxs)(b.Fragment,{children:["ورود",(0,b.jsx)(o.ArrowLeft,{className:"h-4 w-4 mr-2"})]}):(0,b.jsxs)(b.Fragment,{children:["ثبت‌نام",(0,b.jsx)(n.ArrowRight,{className:"h-4 w-4 mr-2"})]})})]}),(0,b.jsx)("div",{className:"mt-6 text-center",children:(0,b.jsx)("button",{type:"button",onClick:()=>{D("login"===C?"register":"login"),H({name:"",phone:"",password:"",confirmPassword:""}),J({})},className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:"login"===C?(0,b.jsxs)(b.Fragment,{children:["حساب کاربری ندارید؟"," ",(0,b.jsx)("span",{className:"text-primary font-semibold",children:"ثبت‌نام کنید"})]}):(0,b.jsxs)(b.Fragment,{children:["قبلاً ثبت‌نام کرده‌اید؟"," ",(0,b.jsx)("span",{className:"text-primary font-semibold",children:"وارد شوید"})]})})}),(0,b.jsx)("div",{className:"mt-4 text-center",children:(0,b.jsxs)(s.default,{href:"/",className:"text-sm text-muted-foreground hover:text-foreground transition-colors flex items-center justify-center gap-2",children:[(0,b.jsx)(n.ArrowRight,{className:"h-4 w-4"}),"بازگشت به صفحه اصلی"]})})]})]})})})}t.object({name:t.string().min(2,"نام باید حداقل 2 کاراکتر باشد").max(100,"نام نمی‌تواند بیشتر از 100 کاراکتر باشد").regex(/^[\u0600-\u06FFa-zA-Z\s]+$/,"نام باید فقط شامل حروف فارسی یا انگلیسی باشد"),phone:t.string().min(1,"شماره تماس الزامی است").refine(a=>{try{return u(a)}catch{return!1}},{message:"شماره تماس معتبر نیست. فرمت صحیح: 09123456789"}),password:t.string().min(6,"رمز عبور باید حداقل 6 کاراکتر باشد").max(128,"رمز عبور نمی‌تواند بیشتر از 128 کاراکتر باشد")}),t.object({phone:t.string().min(1,"شماره تماس الزامی است").refine(a=>{try{return u(a)}catch{return!1}},{message:"شماره تماس معتبر نیست. فرمت صحیح: 09123456789"}),password:t.string().min(1,"رمز عبور الزامی است").max(128,"رمز عبور نمی‌تواند بیشتر از 128 کاراکتر باشد")}),a.s(["default",()=>v],99084)}];

//# sourceMappingURL=_b9efc0b9._.js.map