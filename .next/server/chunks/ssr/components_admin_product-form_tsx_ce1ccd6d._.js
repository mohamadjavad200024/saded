module.exports=[14468,a=>{"use strict";var b=a.i(17163),c=a.i(35115),d=a.i(89754),e=a.i(3703),f=a.i(40695),g=a.i(5522),h=a.i(17171),i=a.i(46893),j=a.i(87682),k=a.i(80281),l=a.i(3130),m=a.i(60421),n=a.i(49814),o=a.i(77687),p=a.i(10278),q=a.i(84280),r=a.i(14218),s=a.i(37933),t=a.i(84053),u=a.i(13296),v=a.i(35126),w=a.i(60600);let x=(0,w.default)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var y=a.i(92920),z=a.i(66732),A=a.i(77575),B=a.i(34284);let C=(0,w.default)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);var D=a.i(71268),E=a.i(54161),F=a.i(45897),G=a.i(97895);function H({images:a,onChange:c,maxImages:d=5,className:e}){let[g,h]=(0,q.useState)(null),i=(0,q.useRef)(null),{toast:j}=(0,o.useToast)(),k=async b=>{let e=b.target.files;if(!e||0===e.length)return;let f=d-a.length;if(f<=0)return void j({title:"خطا",description:`حداکثر ${d} تصویر می‌توانید آپلود کنید`,variant:"destructive"});let g=Array.from(e).slice(0,f);for(let b=0;b<g.length;b++){let d=g[b];if(!d.type.startsWith("image/")){j({title:"خطا",description:"فقط فایل‌های تصویری مجاز هستند",variant:"destructive"});continue}if(d.size>5242880){j({title:"خطا",description:"حجم فایل باید کمتر از 5 مگابایت باشد",variant:"destructive"});continue}h(b);try{let b=await l(d),e=[...a,b];c(e),j({title:"موفق",description:"تصویر با موفقیت آپلود شد"})}catch(a){j({title:"خطا",description:"خطا در آپلود تصویر",variant:"destructive"})}finally{h(null)}}i.current&&(i.current.value="")},l=async a=>{if(a.type.startsWith("image/"))try{return await ((a,b=1920,c=.9)=>new Promise((d,e)=>{let f=new FileReader;f.readAsDataURL(a),f.onload=a=>{let f=new Image;f.onload=()=>{let a=document.createElement("canvas"),g=f.width,h=f.height;g>b&&(h=h*b/g,g=b),a.width=g,a.height=h;let i=a.getContext("2d");i?(i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",i.drawImage(f,0,0,g,h),d(a.toDataURL("image/jpeg",c))):e(Error("Failed to get canvas context"))},f.onerror=()=>e(Error("Failed to load image")),f.src=a.target?.result},f.onerror=a=>e(a)}))(a,1920,.92)}catch(a){console.warn("Image compression failed, using original:",a)}return new Promise((b,c)=>{let d=new FileReader;d.readAsDataURL(a),d.onload=()=>b(d.result),d.onerror=a=>c(a)})},m=()=>{i.current?.click()};return(0,b.jsxs)("div",{className:(0,G.cn)("space-y-4",e),children:[(0,b.jsxs)("div",{onClick:m,className:(0,G.cn)("relative border-2 border-dashed rounded-lg transition-all cursor-pointer","hover:border-primary/50 hover:bg-primary/5",null!==g?"border-muted-foreground/30 bg-muted/30 cursor-not-allowed":"border-border/30 bg-muted/20",a.length>0&&"border-primary/30 bg-primary/5"),children:[(0,b.jsx)("input",{ref:i,type:"file",accept:"image/*",multiple:!0,onChange:k,className:"hidden"}),0===a.length?(0,b.jsx)("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:null!==g?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(z.Loader2,{className:"h-12 w-12 animate-spin text-primary mb-4"}),(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:"در حال آپلود..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"relative mb-4",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-primary/10 rounded-full blur-xl"}),(0,b.jsx)("div",{className:"relative bg-primary/10 rounded-full p-4",children:(0,b.jsx)(F.Upload,{className:"h-10 w-10 text-primary"})})]}),(0,b.jsx)("p",{className:"text-base font-semibold text-foreground mb-1",children:"آپلود تصاویر محصول"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center mb-4",children:"تصاویر را اینجا بکشید یا کلیک کنید"}),(0,b.jsxs)(f.Button,{type:"button",variant:"default",size:"lg",className:"gap-2",children:[(0,b.jsx)(v.Image,{className:"h-4 w-4"}),"انتخاب تصاویر"]})]})}):(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 mb-4",children:[a.map((d,e)=>(0,b.jsxs)("div",{className:"relative group aspect-square rounded-lg border-2 border-border/30 overflow-hidden bg-muted shadow-sm hover:shadow-md transition-all",children:[(0,b.jsx)("img",{src:d,alt:`تصویر ${e+1}`,className:"w-full h-full object-cover"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/50 transition-colors flex items-center justify-center",children:(0,b.jsx)(f.Button,{type:"button",variant:"destructive",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity h-8 w-8",onClick:b=>{b.stopPropagation(),c(a.filter((a,b)=>b!==e))},children:(0,b.jsx)(r.X,{className:"h-4 w-4"})})}),0===e&&(0,b.jsx)("div",{className:"absolute top-2 right-2",children:(0,b.jsx)("span",{className:"px-2 py-0.5 text-[10px] font-bold rounded-md bg-primary text-primary-foreground shadow-sm",children:"اصلی"})})]},e)),a.length<d&&(0,b.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),m()},disabled:null!==g,className:(0,G.cn)("aspect-square rounded-lg border-2 border-dashed border-border/30 bg-muted/50 hover:bg-muted hover:border-primary/30 transition-all flex flex-col items-center justify-center gap-2 group",null!==g&&"opacity-50 cursor-not-allowed"),children:null!==g?(0,b.jsx)(z.Loader2,{className:"h-5 w-5 animate-spin text-muted-foreground"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(F.Upload,{className:"h-5 w-5 text-muted-foreground group-hover:text-primary transition-colors"}),(0,b.jsx)("span",{className:"text-[10px] text-muted-foreground group-hover:text-primary transition-colors",children:"افزودن"})]})})]}),a.length<d&&(0,b.jsx)("div",{className:"flex items-center justify-center pt-2 border-t border-border/20",children:(0,b.jsxs)(f.Button,{type:"button",variant:"outline",onClick:a=>{a.stopPropagation(),m()},disabled:null!==g,className:"gap-2",children:[(0,b.jsx)(F.Upload,{className:"h-4 w-4"}),"افزودن تصویر بیشتر (",a.length,"/",d,")"]})})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-2 text-xs text-muted-foreground bg-muted/30 p-3 rounded-lg",children:[(0,b.jsx)(v.Image,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium mb-1",children:"راهنمای آپلود:"}),(0,b.jsxs)("ul",{className:"list-disc list-inside space-y-0.5 text-[11px]",children:[(0,b.jsxs)("li",{children:["می‌توانید تا ",d," تصویر آپلود کنید"]}),(0,b.jsx)("li",{children:"فرمت‌های مجاز: JPG, PNG, WebP"}),(0,b.jsx)("li",{children:"حداکثر حجم هر فایل: 5 مگابایت"}),(0,b.jsx)("li",{children:"اولین تصویر به عنوان تصویر اصلی نمایش داده می‌شود"})]})]})]})]})}let I=e.object({name:e.string().min(1,"نام محصول الزامی است"),description:e.string().min(1,"توضیحات الزامی است"),price:e.number().min(0,"قیمت باید مثبت باشد"),originalPrice:e.number().optional(),brand:e.string().min(1,"برند الزامی است"),category:e.string().min(1,"دسته‌بندی الزامی است"),vin:e.string().optional(),vinEnabled:e.boolean(),airShippingEnabled:e.boolean(),seaShippingEnabled:e.boolean(),airShippingCost:e.number().min(0,"هزینه ارسال باید مثبت باشد").nullable().optional(),seaShippingCost:e.number().min(0,"هزینه ارسال باید مثبت باشد").nullable().optional(),stockCount:e.number().min(0,"موجودی باید مثبت باشد"),inStock:e.boolean(),enabled:e.boolean(),images:e.array(e.string()).min(1,"حداقل یک تصویر الزامی است"),tags:e.array(e.string()).optional(),specifications:e.record(e.string()).optional()}).refine(a=>(!a.vinEnabled||!!a.vin&&0!==a.vin.length&&17===a.vin.length&&!!/^[A-HJ-NPR-Z0-9]{17}$/.test(a.vin))&&!0,{message:"VIN باید دقیقاً 17 کاراکتر (حروف بزرگ انگلیسی و اعداد، بدون I, O, Q) باشد",path:["vin"]});function J({product:a,onSuccess:e}){let w=(0,p.useRouter)(),{addProduct:F,updateProduct:G,loadProductsFromDB:J}=(0,m.useProductStore)(),{getActiveCategories:K,loadCategoriesFromDB:L}=(0,n.useCategoryStore)(),{toast:M}=(0,o.useToast)(),N=K(),[O,P]=(0,q.useState)(a?.images||[]);(0,q.useEffect)(()=>{(async()=>{try{await L()}catch(a){console.error("Error loading categories:",a)}})()},[L]);let[Q,R]=(0,q.useState)(a?.tags||[]),[S,T]=(0,q.useState)(""),[U,V]=(0,q.useState)(()=>{let b=a?.specifications||{},c={};for(let[a,d]of Object.entries(b))c[a]="string"==typeof d?d:String(d);return c}),[W,X]=(0,q.useState)(""),[Y,Z]=(0,q.useState)(""),[$,_]=(0,q.useState)(!1),[aa,ab]=(0,q.useState)(a?.vinEnabled??!1),{register:ac,handleSubmit:ad,formState:{errors:ae,isSubmitting:af},setValue:ag,watch:ah}=(0,c.useForm)({resolver:(0,d.zodResolver)(I),defaultValues:a?{name:a.name,description:a.description??"",price:a.price,originalPrice:a.originalPrice??void 0,brand:a.brand??"",category:a.category??"",vin:a.vin??"",vinEnabled:a.vinEnabled??!1,airShippingEnabled:a.airShippingEnabled??!0,seaShippingEnabled:a.seaShippingEnabled??!0,airShippingCost:a.airShippingCost??null,seaShippingCost:a.seaShippingCost??null,stockCount:a.stockCount,inStock:a.inStock,enabled:a.enabled,images:a.images||[],tags:a.tags,specifications:(()=>{let b=a.specifications||{},c={};for(let[a,d]of Object.entries(b))c[a]="string"==typeof d?d:String(d);return c})()}:{name:"",description:"",price:0,originalPrice:void 0,brand:"",category:"",vin:"",vinEnabled:!1,airShippingEnabled:!0,seaShippingEnabled:!0,airShippingCost:null,seaShippingCost:null,stockCount:0,inStock:!0,enabled:!0,images:[],tags:[],specifications:{}}}),ai=ah("inStock"),aj=ah("enabled"),ak=ah("airShippingEnabled"),al=ah("seaShippingEnabled"),am=ah("airShippingCost"),an=ah("seaShippingCost"),ao=()=>{if(S.trim()&&!Q.includes(S.trim())){let a=[...Q,S.trim()];R(a),ag("tags",a),T("")}},ap=async b=>{try{if(0===O.length)return void M({title:"خطا",description:"حداقل یک تصویر الزامی است",variant:"destructive"});let c={...b,images:O,tags:Q,specifications:U,vin:aa?b.vin:void 0,vinEnabled:aa};if(a){let b=await fetch(`/api/products/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!b.ok){let a=await b.json().catch(()=>({}));throw Error(a.message||"خطا در به‌روزرسانی محصول")}let d=await b.json();G(d.data),M({title:"موفق",description:"محصول با موفقیت به‌روزرسانی شد"})}else{let a=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!a.ok){let b=await a.json().catch(()=>({})),c=b.error||b.message||"خطا در ایجاد محصول";throw console.error("Error creating product:",b),Error(c)}let b=await a.json();console.log("Product created successfully:",b);let d=b.data||b;d&&F(d),await J(!0),M({title:"موفق",description:"محصول با موفقیت اضافه شد"})}e?.(),w.push("/admin/products")}catch(a){M({title:"خطا",description:a instanceof Error?a.message:"خطایی رخ داد. لطفاً دوباره تلاش کنید.",variant:"destructive"})}};return(0,b.jsxs)("form",{onSubmit:ad(ap),className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsxs)(l.Card,{className:"shadow-sm",children:[(0,b.jsx)(l.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,b.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(t.Package,{className:"h-5 w-5 text-primary"}),"اطلاعات پایه"]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"name",children:"نام محصول *"}),(0,b.jsx)(g.Input,{id:"name",...ac("name"),placeholder:"نام محصول"}),ae.name&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:ae.name.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"description",children:"توضیحات *"}),(0,b.jsx)(i.Textarea,{id:"description",...ac("description"),placeholder:"توضیحات محصول",rows:4}),ae.description&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:ae.description.message})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"price",children:"قیمت (تومان) *"}),(0,b.jsx)(g.Input,{id:"price",type:"number",...ac("price",{valueAsNumber:!0}),placeholder:"0"}),ae.price&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:ae.price.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"originalPrice",children:"قیمت اصلی (تومان)"}),(0,b.jsx)(g.Input,{id:"originalPrice",type:"number",...ac("originalPrice",{valueAsNumber:!0}),placeholder:"0"})]})]})]})]}),(0,b.jsxs)(l.Card,{className:"shadow-sm",children:[(0,b.jsx)(l.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,b.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(u.Settings,{className:"h-5 w-5 text-primary"}),"دسته‌بندی و برند"]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"category",children:"دسته‌بندی *"}),(0,b.jsxs)(j.Select,{value:ah("category"),onValueChange:a=>ag("category",a),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"انتخاب دسته‌بندی"})}),(0,b.jsx)(j.SelectContent,{children:N.map(a=>(0,b.jsx)(j.SelectItem,{value:a.name,children:a.name},a.id))})]}),ae.category&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:ae.category.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"brand",children:"برند *"}),(0,b.jsx)(g.Input,{id:"brand",...ac("brand"),placeholder:"نام برند"}),ae.brand&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:ae.brand.message})]}),(0,b.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2 sm:gap-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5 flex-1 min-w-0",children:[(0,b.jsx)(h.Label,{className:"text-[10px] sm:text-xs md:text-sm",children:"فعال‌سازی VIN"}),(0,b.jsx)("p",{className:"text-[9px] sm:text-[10px] md:text-xs text-muted-foreground leading-tight",children:"نمایش VIN برای این محصول"})]}),(0,b.jsx)(k.Switch,{checked:aa,onCheckedChange:a=>{ab(a),ag("vinEnabled",a),a||ag("vin","")},className:"flex-shrink-0"})]}),(0,b.jsxs)("div",{className:"space-y-1.5 sm:space-y-2",children:[(0,b.jsxs)(h.Label,{htmlFor:"vin",className:"text-[10px] sm:text-xs md:text-sm",children:["VIN ",aa&&"*"]}),(0,b.jsx)(g.Input,{id:"vin",...ac("vin",{onChange:a=>{let b=a.target.value.toUpperCase();a.target.value=b,ag("vin",b)}}),placeholder:"17 کاراکتر (مثال: 1HGBH41JXMN109186)",maxLength:17,className:"font-mono text-[10px] sm:text-xs md:text-sm h-8 sm:h-9 md:h-10 px-2 sm:px-3"}),ae.vin&&(0,b.jsx)("p",{className:"text-[9px] sm:text-[10px] md:text-xs text-destructive leading-tight",children:ae.vin.message}),!aa&&(0,b.jsx)("p",{className:"text-[9px] sm:text-[10px] md:text-xs text-muted-foreground leading-tight",children:'برای اعتبارسنجی VIN، ابتدا "فعال‌سازی VIN" را فعال کنید'})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"stockCount",children:"موجودی *"}),(0,b.jsx)(g.Input,{id:"stockCount",type:"number",...ac("stockCount",{valueAsNumber:!0}),placeholder:"0"}),ae.stockCount&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:ae.stockCount.message})]})]})]})]}),(0,b.jsxs)(l.Card,{className:"shadow-sm",children:[(0,b.jsx)(l.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,b.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(v.Image,{className:"h-5 w-5 text-primary"}),"تصاویر محصول"]})}),(0,b.jsxs)(l.CardContent,{children:[(0,b.jsx)(H,{images:O,onChange:a=>{P(a),ag("images",a)},maxImages:5}),ae.images&&(0,b.jsx)("p",{className:"text-sm text-destructive mt-2",children:ae.images.message})]})]}),(0,b.jsxs)(l.Card,{className:"shadow-sm",children:[(0,b.jsx)(l.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,b.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(x,{className:"h-5 w-5 text-primary"}),"تگ‌ها"]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Input,{value:S,onChange:a=>T(a.target.value),onKeyPress:a=>{"Enter"===a.key&&(a.preventDefault(),ao())},placeholder:"افزودن تگ"}),(0,b.jsx)(f.Button,{type:"button",onClick:ao,children:"افزودن"})]}),Q.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:Q.map(a=>(0,b.jsxs)(E.Badge,{variant:"secondary",className:"gap-1",children:[a,(0,b.jsx)("button",{type:"button",onClick:()=>{let b;R(b=Q.filter(b=>b!==a)),ag("tags",b)},className:"ml-1 hover:text-destructive",children:(0,b.jsx)(r.X,{className:"h-3 w-3"})})]},a))})]})]}),(0,b.jsxs)(l.Card,{className:"shadow-sm",children:[(0,b.jsx)(l.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(y.FileText,{className:"h-5 w-5 text-primary"}),"مشخصات"]}),(0,b.jsxs)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>_(!$),children:[(0,b.jsx)(s.Plus,{className:"ml-2 h-4 w-4"}),$?"انصراف":"افزودن مشخصه"]})]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-4",children:[$&&(0,b.jsxs)("div",{className:"p-4 border border-border/30 rounded-lg bg-muted/30 space-y-3",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"specKey",children:"کلید مشخصه"}),(0,b.jsx)(g.Input,{id:"specKey",value:W,onChange:a=>X(a.target.value),placeholder:"مثال: گارانتی"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"specValue",children:"مقدار"}),(0,b.jsx)(g.Input,{id:"specValue",value:Y,onChange:a=>Z(a.target.value),placeholder:"مثال: 12 ماه"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{type:"button",onClick:()=>{W.trim()&&Y.trim()&&(V({...U,[W.trim()]:Y.trim()}),X(""),Z(""),_(!1))},size:"sm",children:"افزودن"}),(0,b.jsx)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{_(!1),X(""),Z("")},children:"انصراف"})]})]}),Object.keys(U).length>0?(0,b.jsx)("div",{className:"space-y-2",children:Object.entries(U).map(([a,c])=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border border-border/30 rounded-lg hover:bg-muted/50 transition-colors group",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("span",{className:"text-sm font-medium text-foreground",children:[a,":"]}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground mr-2",children:c})]}),(0,b.jsx)(f.Button,{type:"button",variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{let b;return b={...U},void(delete b[a],V(b))},children:(0,b.jsx)(r.X,{className:"h-4 w-4"})})]},a))}):!$&&(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,b.jsx)(y.FileText,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),(0,b.jsx)("p",{className:"text-sm",children:"هیچ مشخصه‌ای اضافه نشده است"})]})]})]}),(0,b.jsxs)(l.Card,{className:"shadow-sm",children:[(0,b.jsx)(l.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,b.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(u.Settings,{className:"h-5 w-5 text-primary"}),"وضعیت"]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(h.Label,{children:"موجود در انبار"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"محصول در انبار موجود است"})]}),(0,b.jsx)(k.Switch,{checked:ai,onCheckedChange:a=>ag("inStock",a)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(h.Label,{children:"فعال"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"محصول در سایت نمایش داده می‌شود"})]}),(0,b.jsx)(k.Switch,{checked:aj,onCheckedChange:a=>ag("enabled",a)})]})]})]}),(0,b.jsxs)(l.Card,{className:"shadow-sm",children:[(0,b.jsx)(l.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,b.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(u.Settings,{className:"h-5 w-5 text-primary"}),"روش‌های ارسال"]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-3 sm:space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2 sm:gap-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5 flex-1 min-w-0",children:[(0,b.jsxs)(h.Label,{className:"text-[10px] sm:text-xs md:text-sm flex items-center gap-1.5",children:[(0,b.jsx)(A.Plane,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5"}),"ارسال هوایی"]}),(0,b.jsx)("p",{className:"text-[9px] sm:text-[10px] md:text-xs text-muted-foreground leading-tight",children:"امکان ارسال هوایی برای این محصول"})]}),(0,b.jsx)(k.Switch,{checked:ak,onCheckedChange:a=>{ag("airShippingEnabled",a),a||ag("airShippingCost",null)},className:"flex-shrink-0"})]}),ak&&(0,b.jsxs)("div",{className:"space-y-3 pr-4 sm:pr-6 pt-3 border-t border-border/30",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,b.jsxs)(h.Label,{htmlFor:"airShippingCost",className:"text-[10px] sm:text-xs md:text-sm font-medium flex items-center gap-1.5",children:[(0,b.jsx)(D.DollarSign,{className:"h-3.5 w-3.5 text-muted-foreground"}),"هزینه ارسال هوایی"]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(E.Badge,{variant:null===am||0===am?"success":"default",className:"flex items-center gap-1.5 px-3 py-1.5 text-[10px] sm:text-xs font-semibold shadow-sm",children:null===am||0===am?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(C,{className:"h-3.5 w-3.5"}),(0,b.jsx)("span",{children:"رایگان"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(D.DollarSign,{className:"h-3.5 w-3.5"}),(0,b.jsx)("span",{children:"پولی"})]})}),(0,b.jsx)(k.Switch,{checked:null!==am&&0!==am,onCheckedChange:a=>{a?ag("airShippingCost",am&&am>0?am:5e4):ag("airShippingCost",null)},className:"flex-shrink-0"})]})]}),null!==am&&0!==am&&(0,b.jsxs)("div",{className:"space-y-2 bg-muted/30 p-3 rounded-lg border border-border/20",children:[(0,b.jsx)(g.Input,{id:"airShippingCost",type:"number",...ac("airShippingCost",{valueAsNumber:!0}),placeholder:"مثال: 50000",min:1,className:"text-[11px] sm:text-xs md:text-sm bg-background"}),(0,b.jsxs)("p",{className:"text-[9px] sm:text-[10px] md:text-xs text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(D.DollarSign,{className:"h-3 w-3"}),"هزینه ارسال به تومان"]})]}),ae.airShippingCost&&(0,b.jsx)("p",{className:"text-[9px] sm:text-[10px] md:text-xs text-destructive flex items-center gap-1",children:ae.airShippingCost.message})]})]}),(0,b.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2 sm:gap-4",children:[(0,b.jsxs)("div",{className:"space-y-0.5 flex-1 min-w-0",children:[(0,b.jsxs)(h.Label,{className:"text-[10px] sm:text-xs md:text-sm flex items-center gap-1.5",children:[(0,b.jsx)(B.Ship,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5"}),"ارسال دریایی"]}),(0,b.jsx)("p",{className:"text-[9px] sm:text-[10px] md:text-xs text-muted-foreground leading-tight",children:"امکان ارسال دریایی برای این محصول"})]}),(0,b.jsx)(k.Switch,{checked:al,onCheckedChange:a=>{ag("seaShippingEnabled",a),a||ag("seaShippingCost",null)},className:"flex-shrink-0"})]}),al&&(0,b.jsxs)("div",{className:"space-y-3 pr-4 sm:pr-6 pt-3 border-t border-border/30",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,b.jsxs)(h.Label,{htmlFor:"seaShippingCost",className:"text-[10px] sm:text-xs md:text-sm font-medium flex items-center gap-1.5",children:[(0,b.jsx)(D.DollarSign,{className:"h-3.5 w-3.5 text-muted-foreground"}),"هزینه ارسال دریایی"]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(E.Badge,{variant:null===an||0===an?"success":"default",className:"flex items-center gap-1.5 px-3 py-1.5 text-[10px] sm:text-xs font-semibold shadow-sm",children:null===an||0===an?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(C,{className:"h-3.5 w-3.5"}),(0,b.jsx)("span",{children:"رایگان"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(D.DollarSign,{className:"h-3.5 w-3.5"}),(0,b.jsx)("span",{children:"پولی"})]})}),(0,b.jsx)(k.Switch,{checked:null!==an&&0!==an,onCheckedChange:a=>{a?ag("seaShippingCost",an&&an>0?an:5e4):ag("seaShippingCost",null)},className:"flex-shrink-0"})]})]}),null!==an&&0!==an&&(0,b.jsxs)("div",{className:"space-y-2 bg-muted/30 p-3 rounded-lg border border-border/20",children:[(0,b.jsx)(g.Input,{id:"seaShippingCost",type:"number",...ac("seaShippingCost",{valueAsNumber:!0}),placeholder:"مثال: 50000",min:1,className:"text-[11px] sm:text-xs md:text-sm bg-background"}),(0,b.jsxs)("p",{className:"text-[9px] sm:text-[10px] md:text-xs text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(D.DollarSign,{className:"h-3 w-3"}),"هزینه ارسال به تومان"]})]}),ae.seaShippingCost&&(0,b.jsx)("p",{className:"text-[9px] sm:text-[10px] md:text-xs text-destructive flex items-center gap-1",children:ae.seaShippingCost.message})]})]}),ae.airShippingEnabled&&(0,b.jsx)("p",{className:"text-[9px] sm:text-[10px] md:text-xs text-destructive leading-tight",children:ae.airShippingEnabled.message})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-4 pt-4 border-t border-border/30",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>w.back(),size:"lg",children:"انصراف"}),(0,b.jsx)(f.Button,{type:"submit",disabled:af,size:"lg",className:"min-w-[140px]",children:af?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(z.Loader2,{className:"ml-2 h-4 w-4 animate-spin"}),"در حال ذخیره..."]}):a?"ذخیره تغییرات":"افزودن محصول"})]})]})}a.s(["ProductForm",()=>J],14468)}];

//# sourceMappingURL=components_admin_product-form_tsx_ce1ccd6d._.js.map