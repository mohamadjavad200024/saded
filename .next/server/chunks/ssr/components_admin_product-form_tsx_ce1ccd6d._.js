module.exports=[14468,a=>{"use strict";var b=a.i(87924),c=a.i(95245),d=a.i(59501),e=a.i(99614),f=a.i(40695),g=a.i(5522),h=a.i(17171),i=a.i(46893),j=a.i(87682),k=a.i(80281),l=a.i(3130),m=a.i(60421),n=a.i(49814),o=a.i(21366),p=a.i(77687),q=a.i(50944),r=a.i(72131),s=a.i(33508),t=a.i(15618),u=a.i(83497),v=a.i(21161),w=a.i(38632),x=a.i(70106);let y=(0,x.default)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var z=a.i(4720),A=a.i(96221),B=a.i(50180),C=a.i(71081);let D=(0,x.default)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);var E=a.i(90166),F=a.i(54161),G=a.i(73320),H=a.i(32336),I=a.i(97895);function J({images:a,onChange:c,maxImages:d=5,className:e}){let[g,h]=(0,r.useState)(null),i=(0,r.useRef)(null),{toast:j}=(0,p.useToast)(),k=async b=>{let e=b.target.files;if(!e||0===e.length)return;let f=d-a.length;if(f<=0)return void j({title:"خطا",description:`حداکثر ${d} تصویر می‌توانید آپلود کنید`,variant:"destructive"});let g=Array.from(e).slice(0,f);for(let b=0;b<g.length;b++){let d=g[b];if(!d.type.startsWith("image/")){j({title:"خطا",description:"فقط فایل‌های تصویری مجاز هستند",variant:"destructive"});continue}if(d.size>5242880){j({title:"خطا",description:"حجم فایل باید کمتر از 5 مگابایت باشد",variant:"destructive"});continue}h(b);try{let b=await l(d),e=[...a,b];c(e),j({title:"موفق",description:"تصویر با موفقیت آپلود شد"})}catch(a){j({title:"خطا",description:"خطا در آپلود تصویر",variant:"destructive"})}finally{h(null)}}i.current&&(i.current.value="")},l=async a=>{if(a.type.startsWith("image/"))try{return await ((a,b=1920,c=.9)=>new Promise((d,e)=>{let f=new FileReader;f.readAsDataURL(a),f.onload=a=>{let f=new Image;f.onload=()=>{let a=document.createElement("canvas"),g=f.width,h=f.height;g>b&&(h=h*b/g,g=b),a.width=g,a.height=h;let i=a.getContext("2d");i?(i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",i.drawImage(f,0,0,g,h),d(a.toDataURL("image/jpeg",c))):e(Error("Failed to get canvas context"))},f.onerror=()=>e(Error("Failed to load image")),f.src=a.target?.result},f.onerror=a=>e(a)}))(a,1920,.92)}catch(a){console.warn("Image compression failed, using original:",a)}return new Promise((b,c)=>{let d=new FileReader;d.readAsDataURL(a),d.onload=()=>b(d.result),d.onerror=a=>c(a)})},m=()=>{i.current?.click()};return(0,b.jsxs)("div",{className:(0,I.cn)("space-y-4",e),children:[(0,b.jsxs)("div",{onClick:m,className:(0,I.cn)("relative border-2 border-dashed rounded-lg transition-all cursor-pointer","hover:border-primary/50 hover:bg-primary/5",null!==g?"border-muted-foreground/30 bg-muted/30 cursor-not-allowed":"border-border/30 bg-muted/20",a.length>0&&"border-primary/30 bg-primary/5"),children:[(0,b.jsx)("input",{ref:i,type:"file",accept:"image/*",multiple:!0,onChange:k,className:"hidden"}),0===a.length?(0,b.jsx)("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:null!==g?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(A.Loader2,{className:"h-12 w-12 animate-spin text-primary mb-4"}),(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:"در حال آپلود..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"relative mb-4",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-primary/10 rounded-full blur-xl"}),(0,b.jsx)("div",{className:"relative bg-primary/10 rounded-full p-4",children:(0,b.jsx)(G.Upload,{className:"h-10 w-10 text-primary"})})]}),(0,b.jsx)("p",{className:"text-base font-semibold text-foreground mb-1",children:"آپلود تصاویر محصول"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center mb-4",children:"تصاویر را اینجا بکشید یا کلیک کنید"}),(0,b.jsxs)(f.Button,{type:"button",variant:"default",size:"lg",className:"gap-2",children:[(0,b.jsx)(w.Image,{className:"h-4 w-4"}),"انتخاب تصاویر"]})]})}):(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 mb-4",children:[a.map((d,e)=>(0,b.jsxs)("div",{className:"relative group aspect-square rounded-lg border-2 border-border/30 overflow-hidden bg-muted shadow-sm hover:shadow-md transition-all",children:[(0,b.jsx)(H.SafeImage,{src:d,alt:`تصویر ${e+1}`,fill:!0,className:"object-cover",priority:!0,loading:"eager"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/50 transition-colors flex items-center justify-center",children:(0,b.jsx)(f.Button,{type:"button",variant:"destructive",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity h-8 w-8",onClick:b=>{b.stopPropagation(),c(a.filter((a,b)=>b!==e))},children:(0,b.jsx)(s.X,{className:"h-4 w-4"})})}),0===e&&(0,b.jsx)("div",{className:"absolute top-2 right-2",children:(0,b.jsx)("span",{className:"px-2 py-0.5 text-[10px] font-bold rounded-md bg-primary text-primary-foreground shadow-sm",children:"اصلی"})})]},e)),a.length<d&&(0,b.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),m()},disabled:null!==g,className:(0,I.cn)("aspect-square rounded-lg border-2 border-dashed border-border/30 bg-muted/50 hover:bg-muted hover:border-primary/30 transition-all flex flex-col items-center justify-center gap-2 group",null!==g&&"opacity-50 cursor-not-allowed"),children:null!==g?(0,b.jsx)(A.Loader2,{className:"h-5 w-5 animate-spin text-muted-foreground"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(G.Upload,{className:"h-5 w-5 text-muted-foreground group-hover:text-primary transition-colors"}),(0,b.jsx)("span",{className:"text-[10px] text-muted-foreground group-hover:text-primary transition-colors",children:"افزودن"})]})})]}),a.length<d&&(0,b.jsx)("div",{className:"flex items-center justify-center pt-2 border-t border-border/20",children:(0,b.jsxs)(f.Button,{type:"button",variant:"outline",onClick:a=>{a.stopPropagation(),m()},disabled:null!==g,className:"gap-2",children:[(0,b.jsx)(G.Upload,{className:"h-4 w-4"}),"افزودن تصویر بیشتر (",a.length,"/",d,")"]})})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-2 text-xs text-muted-foreground bg-muted/30 p-3 rounded-lg",children:[(0,b.jsx)(w.Image,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium mb-1",children:"راهنمای آپلود:"}),(0,b.jsxs)("ul",{className:"list-disc list-inside space-y-0.5 text-[11px]",children:[(0,b.jsxs)("li",{children:["می‌توانید تا ",d," تصویر آپلود کنید"]}),(0,b.jsx)("li",{children:"فرمت‌های مجاز: JPG, PNG, WebP"}),(0,b.jsx)("li",{children:"حداکثر حجم هر فایل: 5 مگابایت"}),(0,b.jsx)("li",{children:"اولین تصویر به عنوان تصویر اصلی نمایش داده می‌شود"})]})]})]})]})}var K=a.i(37020);let L=e.object({name:e.string().min(1,"نام محصول الزامی است"),description:e.string().min(1,"توضیحات الزامی است"),price:e.number().min(0,"قیمت باید مثبت باشد"),originalPrice:e.number().optional().nullable(),brand:e.string().min(1,"برند الزامی است"),category:e.string().min(1,"دسته‌بندی الزامی است"),vehicle:e.string().optional().nullable(),model:e.string().optional().nullable(),vin:e.string().optional(),vinEnabled:e.boolean(),airShippingEnabled:e.boolean(),seaShippingEnabled:e.boolean(),airShippingCost:e.preprocess(a=>{if(""===a||null==a||"boolean"==typeof a||"number"==typeof a&&isNaN(a))return null;if("string"==typeof a){let b=parseFloat(a);return isNaN(b)?null:b}return"number"==typeof a?a:null},e.union([e.number().min(0,"هزینه ارسال باید مثبت باشد"),e.null()]).optional()),seaShippingCost:e.preprocess(a=>{if(""===a||null==a||"boolean"==typeof a||"number"==typeof a&&isNaN(a))return null;if("string"==typeof a){let b=parseFloat(a);return isNaN(b)?null:b}return"number"==typeof a?a:null},e.union([e.number().min(0,"هزینه ارسال باید مثبت باشد"),e.null()]).optional()),stockCount:e.number().min(0,"موجودی باید مثبت باشد"),inStock:e.boolean(),enabled:e.boolean(),images:e.array(e.string()).min(1,"حداقل یک تصویر الزامی است"),tags:e.array(e.string()).optional(),specifications:e.record(e.string()).optional()}).refine(a=>(!a.vinEnabled||!!a.vin&&0!==a.vin.length&&17===a.vin.length&&!!/^[A-HJ-NPR-Z0-9]{17}$/.test(a.vin))&&!0,{message:"VIN باید دقیقاً 17 کاراکتر (حروف بزرگ انگلیسی و اعداد، بدون I, O, Q) باشد",path:["vin"]});function M({product:a,onSuccess:e}){let x=(0,q.useRouter)(),{addProduct:G,updateProduct:H,loadProductsFromDB:I}=(0,m.useProductStore)(),{getActiveCategories:M,loadCategoriesFromDB:N}=(0,n.useCategoryStore)(),{getEnabledVehicles:O,loadVehiclesFromDB:P}=(0,o.useVehicleStore)(),{toast:Q}=(0,p.useToast)(),R=M(),S=O(),[T,U]=(0,r.useState)(a?.images||[]);(0,r.useEffect)(()=>{(async()=>{try{await Promise.all([N(),P()])}catch(a){console.error("Error loading form data:",a)}})()},[N,P]);let[V,W]=(0,r.useState)(()=>{if(!a?.tags)return[];if(Array.isArray(a.tags))return a.tags;if("string"==typeof a.tags)try{let b=JSON.parse(a.tags);return Array.isArray(b)?b:[]}catch{}return[]}),[X,Y]=(0,r.useState)(""),[Z,$]=(0,r.useState)(()=>{let b=(0,K.normalizeSpecifications)(a?.specifications),c={};for(let[a,d]of Object.entries(b))c[a]="string"==typeof d?d:String(d);return c}),[_,aa]=(0,r.useState)(""),[ab,ac]=(0,r.useState)(""),[ad,ae]=(0,r.useState)(!1),[af,ag]=(0,r.useState)(a?.vinEnabled??!1),{register:ah,handleSubmit:ai,formState:{errors:aj,isSubmitting:ak},setValue:al,watch:am}=(0,c.useForm)({resolver:(0,d.zodResolver)(L),mode:"onChange",shouldUnregister:!1,defaultValues:(()=>{if(!a)return{name:"",description:"",price:0,originalPrice:void 0,brand:"",category:"",vehicle:"",model:"",vin:"",vinEnabled:!1,airShippingEnabled:!0,seaShippingEnabled:!0,airShippingCost:null,seaShippingCost:null,stockCount:0,inStock:!0,enabled:!0,images:[],tags:[],specifications:{}};let b=void 0===a.airShippingEnabled||!!a.airShippingEnabled,c=void 0===a.seaShippingEnabled||!!a.seaShippingEnabled,d=void 0===a.inStock||!!a.inStock,e=void 0===a.enabled||!!a.enabled;return fetch("http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"product-form.tsx:193",message:"Setting defaultValues from product",data:{airShippingEnabledRaw:a.airShippingEnabled,airShippingEnabledType:typeof a.airShippingEnabled,airShippingEnabledConverted:b,airShippingEnabledConvertedType:typeof b,seaShippingEnabledRaw:a.seaShippingEnabled,seaShippingEnabledType:typeof a.seaShippingEnabled,seaShippingEnabledConverted:c,seaShippingEnabledConvertedType:typeof c,inStockRaw:a.inStock,inStockType:typeof a.inStock,inStockConverted:d,inStockConvertedType:typeof d,enabledRaw:a.enabled,enabledType:typeof a.enabled,enabledConverted:e,enabledConvertedType:typeof e},timestamp:Date.now(),sessionId:"debug-session",runId:"post-fix",hypothesisId:"C"})}).catch(()=>{}),{name:a.name,description:a.description??"",price:a.price,originalPrice:a.originalPrice??void 0,brand:a.brand??"",category:a.category??"",vehicle:a.vehicle??"",model:a.model??"",vin:a.vin??"",vinEnabled:void 0!==a.vinEnabled&&!!a.vinEnabled,airShippingEnabled:b,seaShippingEnabled:c,airShippingCost:a.airShippingCost??null,seaShippingCost:a.seaShippingCost??null,stockCount:a.stockCount,inStock:d,enabled:e,images:a.images||[],tags:(()=>{if(!a.tags)return[];if(Array.isArray(a.tags))return a.tags;if("string"==typeof a.tags)try{let b=JSON.parse(a.tags);return Array.isArray(b)?b:[]}catch{}return[]})(),specifications:(()=>{let b=(0,K.normalizeSpecifications)(a.specifications),c={};for(let[a,d]of Object.entries(b))c[a]="string"==typeof d?d:String(d);return c})()}})()}),an=am("inStock"),ao=am("enabled"),ap=am("airShippingEnabled"),aq=am("seaShippingEnabled"),ar=am("airShippingCost"),as=am("seaShippingCost"),at=am("vehicle"),au=(0,r.useMemo)(()=>{if(at&&S&&0!==S.length)return S.find(a=>a.id===at)},[at,S]),av=()=>{if(X.trim()&&!V.includes(X.trim())){let a=[...V,X.trim()];W(a),al("tags",a),Y("")}},aw=async b=>{fetch("http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"product-form.tsx:313",message:"onSubmit entry",data:{hasProduct:!!a,productId:a?.id,formDataKeys:Object.keys(b),imagesCount:T.length,tagsCount:V.length,specsCount:Object.keys(Z).length,vinEnabled:af},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"})}).catch(()=>{});try{if(0===T.length)return void Q({title:"خطا",description:"حداقل یک تصویر الزامی است",variant:"destructive"});let c=null===b.airShippingCost||void 0===b.airShippingCost||"number"==typeof b.airShippingCost&&isNaN(b.airShippingCost)||0===b.airShippingCost?null:Number(b.airShippingCost),d=null===b.seaShippingCost||void 0===b.seaShippingCost||"number"==typeof b.seaShippingCost&&isNaN(b.seaShippingCost)||0===b.seaShippingCost?null:Number(b.seaShippingCost),f={...b,images:T,tags:V,specifications:Z,vin:af?b.vin:void 0,vinEnabled:af,airShippingCost:c,seaShippingCost:d};if(fetch("http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"product-form.tsx:350",message:"Before API call",data:{productId:a?.id,productDataKeys:Object.keys(f),airShippingCost:f.airShippingCost,seaShippingCost:f.seaShippingCost,airShippingCostType:typeof f.airShippingCost,seaShippingCostType:typeof f.seaShippingCost,specsType:typeof f.specifications,tagsType:typeof f.tags},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{}),a){let b=await fetch(`/api/products/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});if(fetch("http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"product-form.tsx:362",message:"API response received",data:{status:b.status,statusText:b.statusText,ok:b.ok},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{}),!b.ok){let a=await b.json().catch(()=>({}));throw fetch("http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"product-form.tsx:363",message:"API error response",data:{errorData:a,status:b.status},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"})}).catch(()=>{}),Error(a.message||"خطا در به‌روزرسانی محصول")}let c=await b.json();H(c.data),await I(!0),Q({title:"موفق",description:"محصول با موفقیت به‌روزرسانی شد"})}else{let a=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});if(!a.ok){let b=await a.json().catch(()=>({})),c=b.error||b.message||"خطا در ایجاد محصول";throw console.error("Error creating product:",b),Error(c)}let b=await a.json();console.log("Product created successfully:",b);let c=b.data||b;c&&G(c),await I(!0),Q({title:"موفق",description:"محصول با موفقیت اضافه شد"})}e?.(),x.push("/admin/products")}catch(a){Q({title:"خطا",description:a instanceof Error?a.message:"خطایی رخ داد. لطفاً دوباره تلاش کنید.",variant:"destructive"})}};return(0,b.jsxs)("form",{onSubmit:ai(aw),className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsxs)(l.Card,{className:"shadow-sm",children:[(0,b.jsx)(l.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,b.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(u.Package,{className:"h-5 w-5 text-primary"}),"اطلاعات پایه"]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"name",children:"نام محصول *"}),(0,b.jsx)(g.Input,{id:"name",...ah("name"),placeholder:"نام محصول"}),aj.name&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:aj.name.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"description",children:"توضیحات *"}),(0,b.jsx)(i.Textarea,{id:"description",...ah("description"),placeholder:"توضیحات محصول",rows:4}),aj.description&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:aj.description.message})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"price",children:"قیمت (تومان) *"}),(0,b.jsx)(g.Input,{id:"price",type:"number",...ah("price",{valueAsNumber:!0}),placeholder:"0"}),aj.price&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:aj.price.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"originalPrice",children:"قیمت اصلی (تومان)"}),(0,b.jsx)(g.Input,{id:"originalPrice",type:"number",...ah("originalPrice",{valueAsNumber:!0}),placeholder:"0"})]})]})]})]}),(0,b.jsxs)(l.Card,{className:"shadow-sm",children:[(0,b.jsx)(l.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,b.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(v.Settings,{className:"h-5 w-5 text-primary"}),"دسته‌بندی و برند"]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"category",children:"دسته‌بندی *"}),(0,b.jsxs)(j.Select,{value:am("category"),onValueChange:a=>al("category",a),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"انتخاب دسته‌بندی"})}),(0,b.jsx)(j.SelectContent,{children:R.map(a=>(0,b.jsx)(j.SelectItem,{value:a.name,children:a.name},a.id))})]}),aj.category&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:aj.category.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"brand",children:"برند *"}),(0,b.jsx)(g.Input,{id:"brand",...ah("brand"),placeholder:"نام برند"}),aj.brand&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:aj.brand.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"vehicle",children:"خودرو"}),(0,b.jsxs)(j.Select,{value:am("vehicle")||void 0,onValueChange:a=>{al("vehicle",a||null),al("model",null)},children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"انتخاب خودرو (اختیاری)"})}),(0,b.jsx)(j.SelectContent,{children:S.map(a=>(0,b.jsx)(j.SelectItem,{value:a.id,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a.logo&&(0,b.jsx)("img",{src:a.logo,alt:a.name,className:"h-4 w-4 object-contain"}),(0,b.jsx)("span",{children:a.name})]})},a.id))})]}),am("vehicle")&&(0,b.jsx)(f.Button,{type:"button",variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>{al("vehicle",null),al("model",null)},children:"حذف انتخاب"})]}),au&&au.models&&au.models.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"model",children:"مدل"}),(0,b.jsxs)(j.Select,{value:am("model")||void 0,onValueChange:a=>al("model",a||null),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"انتخاب مدل (اختیاری)"})}),(0,b.jsx)(j.SelectContent,{children:au.models.map(a=>(0,b.jsx)(j.SelectItem,{value:a,children:a},a))})]}),am("model")&&(0,b.jsx)(f.Button,{type:"button",variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>al("model",null),children:"حذف انتخاب"})]}),(0,b.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(h.Label,{htmlFor:"vinEnabled",children:"فعال‌سازی VIN"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"نمایش VIN برای این محصول"})]}),(0,b.jsx)(k.Switch,{id:"vinEnabled",checked:af,onCheckedChange:a=>{ag(a),al("vinEnabled",a),a||al("vin","")}})]}),(0,b.jsxs)("div",{className:"space-y-1.5 sm:space-y-2",children:[(0,b.jsxs)(h.Label,{htmlFor:"vin",className:"text-[10px] sm:text-xs md:text-sm",children:["VIN ",af&&"*"]}),(0,b.jsx)(g.Input,{id:"vin",...ah("vin",{onChange:a=>{let b=a.target.value.toUpperCase();a.target.value=b,al("vin",b)}}),placeholder:"17 کاراکتر (مثال: 1HGBH41JXMN109186)",maxLength:17,className:"font-mono text-[10px] sm:text-xs md:text-sm h-8 sm:h-9 md:h-10 px-2 sm:px-3"}),aj.vin&&(0,b.jsx)("p",{className:"text-[9px] sm:text-[10px] md:text-xs text-destructive leading-tight",children:aj.vin.message}),!af&&(0,b.jsx)("p",{className:"text-[9px] sm:text-[10px] md:text-xs text-muted-foreground leading-tight",children:'برای اعتبارسنجی VIN، ابتدا "فعال‌سازی VIN" را فعال کنید'})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"stockCount",children:"موجودی *"}),(0,b.jsx)(g.Input,{id:"stockCount",type:"number",...ah("stockCount",{valueAsNumber:!0}),placeholder:"0"}),aj.stockCount&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:aj.stockCount.message})]})]})]})]}),(0,b.jsxs)(l.Card,{className:"shadow-sm",children:[(0,b.jsx)(l.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,b.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(w.Image,{className:"h-5 w-5 text-primary"}),"تصاویر محصول"]})}),(0,b.jsxs)(l.CardContent,{children:[(0,b.jsx)(J,{images:T,onChange:a=>{U(a),al("images",a)},maxImages:5}),aj.images&&(0,b.jsx)("p",{className:"text-sm text-destructive mt-2",children:aj.images.message})]})]}),(0,b.jsxs)(l.Card,{className:"shadow-sm",children:[(0,b.jsx)(l.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,b.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(y,{className:"h-5 w-5 text-primary"}),"تگ‌ها"]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Input,{value:X,onChange:a=>Y(a.target.value),onKeyPress:a=>{"Enter"===a.key&&(a.preventDefault(),av())},placeholder:"افزودن تگ"}),(0,b.jsx)(f.Button,{type:"button",onClick:av,children:"افزودن"})]}),V.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-2 w-full",children:V.map(a=>(0,b.jsxs)(F.Badge,{variant:"secondary",className:"inline-flex items-center gap-1 max-w-full px-2 py-1",children:[(0,b.jsx)("span",{className:"truncate max-w-[200px]",children:a}),(0,b.jsx)("button",{type:"button",onClick:()=>{let b;W(b=V.filter(b=>b!==a)),al("tags",b)},className:"hover:text-destructive flex-shrink-0 ml-1","aria-label":"حذف تگ",children:(0,b.jsx)(s.X,{className:"h-3 w-3"})})]},a))})]})]}),(0,b.jsxs)(l.Card,{className:"shadow-sm",children:[(0,b.jsx)(l.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(z.FileText,{className:"h-5 w-5 text-primary"}),"مشخصات"]}),(0,b.jsxs)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>ae(!ad),children:[(0,b.jsx)(t.Plus,{className:"ml-2 h-4 w-4"}),ad?"انصراف":"افزودن مشخصه"]})]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-4",children:[ad&&(0,b.jsxs)("div",{className:"p-4 border border-border/30 rounded-lg bg-muted/30 space-y-3",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"specKey",children:"کلید مشخصه"}),(0,b.jsx)(g.Input,{id:"specKey",value:_,onChange:a=>aa(a.target.value),placeholder:"مثال: گارانتی"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"specValue",children:"مقدار"}),(0,b.jsx)(g.Input,{id:"specValue",value:ab,onChange:a=>ac(a.target.value),placeholder:"مثال: 12 ماه"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{type:"button",onClick:()=>{_.trim()&&ab.trim()&&($({...Z,[_.trim()]:ab.trim()}),aa(""),ac(""),ae(!1))},size:"sm",children:"افزودن"}),(0,b.jsx)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{ae(!1),aa(""),ac("")},children:"انصراف"})]})]}),Object.keys(Z).length>0?(0,b.jsx)("div",{className:"space-y-2 w-full",children:Object.entries(Z).map(([a,c])=>(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3 p-3 border border-border/30 rounded-lg hover:bg-muted/50 transition-colors group w-full",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0 flex flex-col gap-1",children:[(0,b.jsxs)("span",{className:"text-sm font-medium text-foreground break-words",children:[a,":"]}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground break-words",children:c})]}),(0,b.jsx)(f.Button,{type:"button",variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0 h-8 w-8",onClick:()=>{let b;return b={...Z},void(delete b[a],$(b))},"aria-label":"حذف مشخصه",children:(0,b.jsx)(s.X,{className:"h-4 w-4"})})]},a))}):!ad&&(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,b.jsx)(z.FileText,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),(0,b.jsx)("p",{className:"text-sm",children:"هیچ مشخصه‌ای اضافه نشده است"})]})]})]}),(0,b.jsxs)(l.Card,{className:"shadow-sm",children:[(0,b.jsx)(l.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,b.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(v.Settings,{className:"h-5 w-5 text-primary"}),"وضعیت"]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(h.Label,{children:"موجود در انبار"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"محصول در انبار موجود است"})]}),(0,b.jsx)(k.Switch,{id:"inStock",checked:an,onCheckedChange:a=>al("inStock",a)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(h.Label,{children:"فعال"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"محصول در سایت نمایش داده می‌شود"})]}),(0,b.jsx)(k.Switch,{id:"enabled",checked:ao,onCheckedChange:a=>al("enabled",a)})]})]})]}),(0,b.jsxs)(l.Card,{className:"shadow-sm",children:[(0,b.jsx)(l.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,b.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(v.Settings,{className:"h-5 w-5 text-primary"}),"روش‌های ارسال"]})}),(0,b.jsxs)(l.CardContent,{className:"space-y-3 sm:space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsxs)(h.Label,{htmlFor:"airShippingEnabled",className:"flex items-center gap-1.5",children:[(0,b.jsx)(B.Plane,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5"}),"ارسال هوایی"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"امکان ارسال هوایی برای این محصول"})]}),(0,b.jsx)(k.Switch,{id:"airShippingEnabled",checked:ap,onCheckedChange:a=>{al("airShippingEnabled",a),a||al("airShippingCost",null)}})]}),ap&&(0,b.jsxs)("div",{className:"space-y-3 pr-4 sm:pr-6 pt-3 border-t border-border/30",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,b.jsxs)(h.Label,{htmlFor:"airShippingCost",className:"text-[10px] sm:text-xs md:text-sm font-medium flex items-center gap-1.5",children:[(0,b.jsx)(E.DollarSign,{className:"h-3.5 w-3.5 text-muted-foreground"}),"هزینه ارسال هوایی"]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(F.Badge,{variant:null===ar||0===ar?"success":"default",className:"flex items-center gap-1.5 px-3 py-1.5 text-[10px] sm:text-xs font-semibold shadow-sm",children:null===ar||0===ar?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(D,{className:"h-3.5 w-3.5"}),(0,b.jsx)("span",{children:"رایگان"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(E.DollarSign,{className:"h-3.5 w-3.5"}),(0,b.jsx)("span",{children:"پولی"})]})}),(0,b.jsx)(k.Switch,{id:"airShippingCostToggle",checked:null!==ar&&0!==ar,onCheckedChange:a=>{a?al("airShippingCost",ar&&ar>0?ar:5e4):al("airShippingCost",null)}})]})]}),null!==ar&&0!==ar&&(0,b.jsxs)("div",{className:"space-y-2 bg-muted/30 p-3 rounded-lg border border-border/20",children:[(0,b.jsx)(g.Input,{id:"airShippingCost",type:"number",...ah("airShippingCost",{valueAsNumber:!0,setValueAs:a=>{if(""===a||null==a)return null;let b="string"==typeof a?parseFloat(a):Number(a);return isNaN(b)?null:b}}),placeholder:"مثال: 50000",min:1,className:"text-[11px] sm:text-xs md:text-sm bg-background"}),(0,b.jsxs)("p",{className:"text-[9px] sm:text-[10px] md:text-xs text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(E.DollarSign,{className:"h-3 w-3"}),"هزینه ارسال به تومان"]})]}),aj.airShippingCost&&(0,b.jsx)("p",{className:"text-[9px] sm:text-[10px] md:text-xs text-destructive flex items-center gap-1",children:aj.airShippingCost.message})]})]}),(0,b.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsxs)(h.Label,{htmlFor:"seaShippingEnabled",className:"flex items-center gap-1.5",children:[(0,b.jsx)(C.Ship,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5"}),"ارسال دریایی"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"امکان ارسال دریایی برای این محصول"})]}),(0,b.jsx)(k.Switch,{id:"seaShippingEnabled",checked:aq,onCheckedChange:a=>{al("seaShippingEnabled",a),a||al("seaShippingCost",null)}})]}),aq&&(0,b.jsxs)("div",{className:"space-y-3 pr-4 sm:pr-6 pt-3 border-t border-border/30",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,b.jsxs)(h.Label,{htmlFor:"seaShippingCost",className:"text-[10px] sm:text-xs md:text-sm font-medium flex items-center gap-1.5",children:[(0,b.jsx)(E.DollarSign,{className:"h-3.5 w-3.5 text-muted-foreground"}),"هزینه ارسال دریایی"]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(F.Badge,{variant:null===as||0===as?"success":"default",className:"flex items-center gap-1.5 px-3 py-1.5 text-[10px] sm:text-xs font-semibold shadow-sm",children:null===as||0===as?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(D,{className:"h-3.5 w-3.5"}),(0,b.jsx)("span",{children:"رایگان"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(E.DollarSign,{className:"h-3.5 w-3.5"}),(0,b.jsx)("span",{children:"پولی"})]})}),(0,b.jsx)(k.Switch,{id:"seaShippingCostToggle",checked:null!==as&&0!==as,onCheckedChange:a=>{a?al("seaShippingCost",as&&as>0?as:5e4):al("seaShippingCost",null)}})]})]}),null!==as&&0!==as&&(0,b.jsxs)("div",{className:"space-y-2 bg-muted/30 p-3 rounded-lg border border-border/20",children:[(0,b.jsx)(g.Input,{id:"seaShippingCost",type:"number",...ah("seaShippingCost",{valueAsNumber:!0,setValueAs:a=>{if(""===a||null==a)return null;let b="string"==typeof a?parseFloat(a):Number(a);return isNaN(b)?null:b}}),placeholder:"مثال: 50000",min:1,className:"text-[11px] sm:text-xs md:text-sm bg-background"}),(0,b.jsxs)("p",{className:"text-[9px] sm:text-[10px] md:text-xs text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(E.DollarSign,{className:"h-3 w-3"}),"هزینه ارسال به تومان"]})]}),aj.seaShippingCost&&(0,b.jsx)("p",{className:"text-[9px] sm:text-[10px] md:text-xs text-destructive flex items-center gap-1",children:aj.seaShippingCost.message})]})]}),aj.airShippingEnabled&&(0,b.jsx)("p",{className:"text-[9px] sm:text-[10px] md:text-xs text-destructive leading-tight",children:aj.airShippingEnabled.message})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-4 pt-4 border-t border-border/30",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>x.back(),size:"lg",children:"انصراف"}),(0,b.jsx)(f.Button,{type:"submit",disabled:ak,size:"lg",className:"min-w-[140px]",children:ak?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(A.Loader2,{className:"ml-2 h-4 w-4 animate-spin"}),"در حال ذخیره..."]}):a?"ذخیره تغییرات":"افزودن محصول"})]})]})}a.s(["ProductForm",()=>M],14468)}];

//# sourceMappingURL=components_admin_product-form_tsx_ce1ccd6d._.js.map