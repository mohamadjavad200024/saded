module.exports=[48315,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(40695),f=a.i(21958),g=a.i(38784);let h=(0,a.i(70106).default)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var i=a.i(21374),j=a.i(33441),k=a.i(50180),l=a.i(71081),m=a.i(92e3),n=a.i(32336),o=a.i(74355),p=a.i(38246),q=a.i(82329),r=a.i(60421),s=a.i(21366),t=a.i(98687),u=a.i(77687);function v({productId:a}){let[v,w]=(0,c.useState)(0),[x,y]=(0,c.useState)(1),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(!0),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(!1),{toast:J}=(0,u.useToast)(),K=(0,q.useCartStore)(a=>a.addItem),L=(0,r.useProductStore)(a=>a.getProduct),M=(0,r.useProductStore)(a=>a.addProduct),{getVehicle:N,loadVehiclesFromDB:O}=(0,s.useVehicleStore)();(0,c.useEffect)(()=>{G(!0);let b=L(a);if(b){C(b),E(!1);return}(async()=>{try{E(!0);let b=await fetch(`/api/products/${a}`);if(b.ok){let a=await b.json();if(a.success&&a.data){let b=a.data;M(b),C(b)}else C(null)}else C(null)}catch(a){console.error("Error fetching product:",a),C(null)}finally{E(!1)}})()},[a,L,M]);let P=(0,q.useCartStore)(a=>a.setShippingMethod);if((0,c.useEffect)(()=>{O().catch(console.error)},[O]),(0,c.useEffect)(()=>{if(H){let a=setTimeout(()=>{I(!1)},2500);return()=>clearTimeout(a)}},[H]),!F||D)return(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 sm:py-16 md:py-20 px-4",suppressHydrationWarning:!0,children:[(0,b.jsx)("div",{className:"h-12 w-12 sm:h-16 sm:w-16 border-4 border-primary border-t-transparent rounded-full animate-spin mb-4"}),(0,b.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold mb-2",children:"در حال بارگذاری..."})]});if(!B)return(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 sm:py-16 md:py-20 px-4",children:[(0,b.jsx)(m.AlertCircle,{className:"h-12 w-12 sm:h-16 sm:w-16 text-muted-foreground mb-4"}),(0,b.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold mb-2",children:"محصول یافت نشد"}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground text-center mb-6",children:"متأسفانه محصول مورد نظر شما یافت نشد"}),(0,b.jsx)(p.default,{href:"/products",children:(0,b.jsx)(e.Button,{variant:"default",children:"بازگشت به لیست محصولات"})})]});let Q=async()=>{let a=`http://localhost:3000/products/${B.id}`;if(navigator.share)try{await navigator.share({title:B.name,text:B.description||B.name,url:a})}catch(b){R(a)}else R(a)},R=a=>{navigator.clipboard?navigator.clipboard.writeText(a).then(()=>{J({title:"کپی شد",description:"لینک محصول در کلیپ‌بورد کپی شد"})}).catch(()=>{S(a)}):S(a)},S=a=>{let b=document.createElement("textarea");b.value=a,b.style.position="fixed",b.style.left="-999999px",document.body.appendChild(b),b.focus(),b.select();try{document.execCommand("copy"),J({title:"کپی شد",description:"لینک محصول در کلیپ‌بورد کپی شد"})}catch(a){console.error("Failed to copy:",a)}document.body.removeChild(b)},T=`http://localhost:3000/products/${B.id}`,U=Array.isArray(B.images)?B.images:[],V=U[0]||(0,t.getPlaceholderImage)(600,600);B.price;let W=B.inStock?"https://schema.org/InStock":"https://schema.org/OutOfStock",X={"@context":"https://schema.org","@type":"Product",name:B.name,description:B.description||`${B.name} - قطعه خودرو ${B.brand||""}`,image:U.length>0?U:[V],brand:{"@type":"Brand",name:B.brand||"نامشخص"},category:B.category,sku:B.id,offers:{"@type":"Offer",url:T,priceCurrency:"IRR",price:B.price.toString(),priceValidUntil:new Date(Date.now()+31536e6).toISOString().split("T")[0],availability:W,itemCondition:"https://schema.org/NewCondition",seller:{"@type":"Organization",name:"ساد"}}};B.rating&&(X.aggregateRating={"@type":"AggregateRating",ratingValue:B.rating.toString(),reviewCount:(B.reviews||0).toString()});let Y=B.vehicle?N(B.vehicle):null,Z=Y&&Y.logo&&"string"==typeof Y.logo&&""!==Y.logo.trim()&&(Y.logo.startsWith("data:image")||Y.logo.startsWith("http")||Y.logo.startsWith("/"));return(0,b.jsxs)("div",{className:"relative space-y-4 sm:space-y-6 md:space-y-8 px-2 sm:px-0",children:[(0,b.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(X)}}),(0,b.jsxs)("div",{className:"absolute top-0 left-0 z-10 flex items-center gap-2 sm:gap-3",dir:"ltr",children:[(0,b.jsx)("div",{className:"relative w-16 h-16 sm:w-20 sm:h-20 bg-muted rounded-full overflow-hidden border-2 border-green-500 flex items-center justify-center p-2 sm:p-3 flex-shrink-0",children:Y&&Z?(0,b.jsx)("img",{src:Y.logo,alt:Y.name,className:"w-full h-full object-contain rounded-full",onError:a=>{a.currentTarget.style.display="none";let b=a.currentTarget.parentElement;if(b){let a=document.createElement("span");a.className="text-green-500 text-[10px] sm:text-xs font-medium",a.textContent="لوگو",b.appendChild(a)}}}):Y?(0,b.jsx)(o.VehicleLogo,{logo:Y.logo,alt:Y.name,size:"md",className:"w-full h-full rounded-full"}):(0,b.jsx)("span",{className:"text-green-500 text-[10px] sm:text-xs font-medium",children:"لوگو"})}),Y&&(0,b.jsx)("span",{className:"text-sm sm:text-base md:text-lg font-bold text-foreground whitespace-nowrap",children:Y.name})]}),(0,b.jsxs)("nav",{className:"text-[10px] sm:text-xs text-muted-foreground overflow-x-auto mb-2",children:[(0,b.jsx)("span",{children:"خانه"})," / ",(0,b.jsx)("span",{children:"محصولات"})," / ",(0,b.jsx)("span",{children:B.category})," /"," ",(0,b.jsx)("span",{className:"text-foreground truncate",children:B.name})]}),(0,b.jsx)("div",{children:(0,b.jsx)("span",{className:"text-xs sm:text-sm text-muted-foreground",children:B.category})}),(B.airShippingEnabled||B.seaShippingEnabled)&&(0,b.jsxs)("div",{className:"hidden lg:block space-y-2 sm:space-y-3 lg:max-w-lg lg:mr-auto",children:[(0,b.jsx)("label",{className:"text-xs sm:text-sm font-medium block",children:"روش ارسال:"}),(0,b.jsxs)("div",{className:`grid gap-2 sm:gap-3 ${B.airShippingEnabled&&B.seaShippingEnabled?"grid-cols-2":"grid-cols-1"}`,children:[B.airShippingEnabled&&(0,b.jsxs)("button",{onClick:()=>A("air"),className:`flex flex-col items-center justify-center gap-2 p-3 sm:p-4 rounded-lg border-[0.25px] transition-all ${"air"===z?"border-primary/30 bg-primary/5":"border-border/30 hover:border-primary/20"}`,children:[(0,b.jsx)(k.Plane,{className:`h-5 w-5 sm:h-6 sm:w-6 ${"air"===z?"text-primary":"text-muted-foreground"}`}),(0,b.jsx)("span",{className:`text-xs sm:text-sm font-medium ${"air"===z?"text-primary":"text-foreground"}`,children:"ارسال هوایی"})]}),B.seaShippingEnabled&&(0,b.jsxs)("button",{onClick:()=>A("sea"),className:`flex flex-col items-center justify-center gap-2 p-3 sm:p-4 rounded-lg border-[0.25px] transition-all ${"sea"===z?"border-primary/30 bg-primary/5":"border-border/30 hover:border-primary/20"}`,children:[(0,b.jsx)(l.Ship,{className:`h-5 w-5 sm:h-6 sm:w-6 ${"sea"===z?"text-primary":"text-muted-foreground"}`}),(0,b.jsx)("span",{className:`text-xs sm:text-sm font-medium ${"sea"===z?"text-primary":"text-foreground"}`,children:"ارسال دریایی"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 md:gap-8",children:[(0,b.jsxs)("div",{className:"space-y-2 sm:space-y-3 lg:-mt-32",children:[(0,b.jsx)("div",{className:"relative aspect-square w-full bg-muted rounded-lg overflow-hidden",children:(0,b.jsx)(n.SafeImage,{src:Array.isArray(B.images)&&B.images.length>0?B.images[v]:null,alt:B.name,fill:!0,className:"w-full h-full",priority:!0,loading:"eager",productId:B.id})}),(0,b.jsx)("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:(Array.isArray(B.images)&&B.images.length>0?B.images:[(0,t.getPlaceholderImage)(600,600)]).map((a,c)=>(0,b.jsx)("button",{onClick:()=>w(c),className:`relative aspect-square rounded-lg overflow-hidden border-[0.25px] transition-all ${v===c?"border-primary/30":"border-transparent hover:border-muted-foreground/30"}`,children:(0,b.jsx)(n.SafeImage,{src:a,alt:`${B.name} - تصویر ${c+1} از ${Array.isArray(B.images)?B.images.length:1}`,fill:!0,className:"w-full h-full",priority:!0,loading:"eager",sizes:"(max-width: 640px) 25vw, 20vw",productId:B.id})},c))}),(B.airShippingEnabled||B.seaShippingEnabled)&&(0,b.jsxs)("div",{className:"block lg:hidden space-y-2 sm:space-y-3 pt-2 sm:pt-3",children:[(0,b.jsx)("label",{className:"text-xs sm:text-sm font-medium block",children:"روش ارسال:"}),(0,b.jsxs)("div",{className:`grid gap-2 sm:gap-3 ${B.airShippingEnabled&&B.seaShippingEnabled?"grid-cols-2":"grid-cols-1"}`,children:[B.airShippingEnabled&&(0,b.jsxs)("button",{onClick:()=>A("air"),className:`flex flex-col items-center justify-center gap-2 p-3 sm:p-4 rounded-lg border-[0.25px] transition-all ${"air"===z?"border-primary/30 bg-primary/5":"border-border/30 hover:border-primary/20"}`,children:[(0,b.jsx)(k.Plane,{className:`h-5 w-5 sm:h-6 sm:w-6 ${"air"===z?"text-primary":"text-muted-foreground"}`}),(0,b.jsx)("span",{className:`text-xs sm:text-sm font-medium ${"air"===z?"text-primary":"text-foreground"}`,children:"ارسال هوایی"})]}),B.seaShippingEnabled&&(0,b.jsxs)("button",{onClick:()=>A("sea"),className:`flex flex-col items-center justify-center gap-2 p-3 sm:p-4 rounded-lg border-[0.25px] transition-all ${"sea"===z?"border-primary/30 bg-primary/5":"border-border/30 hover:border-primary/20"}`,children:[(0,b.jsx)(l.Ship,{className:`h-5 w-5 sm:h-6 sm:w-6 ${"sea"===z?"text-primary":"text-muted-foreground"}`}),(0,b.jsx)("span",{className:`text-xs sm:text-sm font-medium ${"sea"===z?"text-primary":"text-foreground"}`,children:"ارسال دریایی"})]})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 sm:gap-6 md:gap-8",children:[(0,b.jsx)("div",{className:"flex-shrink-0 space-y-3 sm:space-y-4",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 mb-2 flex-wrap",children:[(0,b.jsx)("span",{className:"text-[10px] sm:text-xs text-muted-foreground",children:B.brand}),(0,b.jsx)("span",{className:"text-muted-foreground hidden sm:inline text-xs",children:"•"}),(0,b.jsx)("span",{className:"text-[10px] sm:text-xs text-muted-foreground",children:B.category})]}),(0,b.jsx)("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold mb-2 sm:mb-3 leading-tight",children:B.name}),(0,b.jsx)("div",{className:"flex items-center gap-2 sm:gap-3",children:B.rating&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(i.Star,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 fill-accent text-accent"}),(0,b.jsx)("span",{className:"text-sm sm:text-base font-semibold mr-1",children:B.rating})]}),B.reviews&&(0,b.jsxs)("span",{className:"text-xs sm:text-sm text-muted-foreground",children:["(",B.reviews," نظر)"]})]})})]})}),(0,b.jsxs)("div",{className:"flex-1 space-y-4 sm:space-y-5 md:space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[(0,b.jsxs)("span",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-primary",children:[B.price.toLocaleString("fa-IR")," تومان"]}),B.originalPrice&&B.originalPrice>B.price&&(0,b.jsx)("span",{className:"text-sm sm:text-base text-muted-foreground line-through",children:B.originalPrice.toLocaleString("fa-IR")})]}),B.originalPrice&&B.originalPrice>B.price&&(0,b.jsxs)("div",{className:"text-[10px] sm:text-xs text-secondary font-semibold",children:[Math.round((B.originalPrice-B.price)/B.originalPrice*100),"% تخفیف"]})]}),(0,b.jsx)("div",{className:"flex items-center gap-1.5",children:B.inStock?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Check,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 text-green-600 flex-shrink-0"}),(0,b.jsxs)("span",{className:"text-xs sm:text-sm text-green-600 font-semibold",children:["موجود در انبار",B.stockCount?` (${B.stockCount} عدد)`:""]})]}):(0,b.jsx)("span",{className:"text-xs sm:text-sm text-secondary font-semibold",children:"ناموجود"})}),(0,b.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,b.jsx)("label",{className:"text-xs sm:text-sm font-medium",children:"تعداد:"}),(0,b.jsxs)("div",{className:"flex items-center border-[0.25px] border-border/30 rounded-md",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9",onClick:()=>y(Math.max(1,x-1)),children:(0,b.jsx)("span",{className:"text-sm",children:"-"})}),(0,b.jsx)("span",{className:"w-8 sm:w-10 text-center text-xs sm:text-sm",children:x}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9",onClick:()=>y(x+1),children:(0,b.jsx)("span",{className:"text-sm",children:"+"})})]})]}),(0,b.jsxs)("div",{className:"flex gap-1.5 sm:gap-2",children:[(0,b.jsx)(e.Button,{size:"default",className:`flex-1 h-9 sm:h-10 text-xs sm:text-sm transition-all ${H?"bg-green-600 hover:bg-green-700":""}`,disabled:!B.inStock,onClick:()=>{H&&I(!1),K({id:B.id,name:B.name,price:B.price,image:Array.isArray(B.images)&&B.images[0]||(0,t.getPlaceholderImage)(300,300),quantity:x}),z&&("air"===z&&B.airShippingEnabled||"sea"===z&&B.seaShippingEnabled)?P(z):B.airShippingEnabled?P("air"):B.seaShippingEnabled&&P("sea"),J({title:"افزوده شد",description:`${B.name} به سبد خرید اضافه شد`}),I(!0)},children:H?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Check,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 ml-1.5 sm:ml-2"}),(0,b.jsx)("span",{children:"افزوده شد"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.ShoppingCart,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 ml-1.5 sm:ml-2"}),(0,b.jsx)("span",{children:"افزودن به سبد"})]})}),(0,b.jsx)(e.Button,{variant:"outline",size:"icon",className:"h-9 w-9 sm:h-10 sm:w-10 flex-shrink-0",onClick:Q,children:(0,b.jsx)(h,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})]})]})]})]})]}),(0,b.jsxs)(f.Tabs,{defaultValue:"description",className:"w-full",children:[(0,b.jsxs)(f.TabsList,{className:"w-full grid grid-cols-2 h-auto",children:[(0,b.jsx)(f.TabsTrigger,{value:"description",className:"text-[10px] sm:text-xs py-1.5 sm:py-2",children:"توضیحات"}),(0,b.jsx)(f.TabsTrigger,{value:"specifications",className:"text-[10px] sm:text-xs py-1.5 sm:py-2",children:"مشخصات"})]}),(0,b.jsx)(f.TabsContent,{value:"description",className:"mt-4 sm:mt-6",children:(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"p-4 sm:p-5",children:(0,b.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground leading-relaxed",children:B.description||"توضیحات محصول در دسترس نیست"})})})}),(0,b.jsx)(f.TabsContent,{value:"specifications",className:"mt-4 sm:mt-6",children:(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"p-4 sm:p-5",children:B.specifications&&Object.keys(B.specifications).length>0?(0,b.jsx)("dl",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:Object.entries(B.specifications).map(([a,c])=>(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between py-2 border-b-[0.25px] border-border/30 gap-1 sm:gap-0",children:[(0,b.jsxs)("dt",{className:"font-medium text-xs sm:text-sm",children:[a,":"]}),(0,b.jsx)("dd",{className:"text-xs sm:text-sm text-muted-foreground",children:"string"==typeof c||"number"==typeof c||"boolean"==typeof c?String(c):JSON.stringify(c)})]},a))}):(0,b.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"مشخصات محصول در دسترس نیست"})})})})]})]})}a.s(["ProductDetail",()=>v],48315)}];

//# sourceMappingURL=components_product_product-detail_tsx_da3958be._.js.map