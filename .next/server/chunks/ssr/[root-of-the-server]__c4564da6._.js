module.exports=[19977,(a,b,c)=>{"use strict";b.exports=a.r(38027).vendored["react-ssr"].ReactServerDOMTurbopackClient},19197,(a,b,c)=>{"use strict";b.exports=a.r(38027).vendored["react-ssr"].ReactDOM},90536,(a,b,c)=>{"use strict";b.exports=a.r(38027).vendored.contexts.HooksClientContext},91390,(a,b,c)=>{"use strict";b.exports=a.r(38027).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},46632,(a,b,c)=>{"use strict";b.exports=a.r(38027).vendored.contexts.AppRouterContext},17171,50891,a=>{"use strict";var b=a.i(17163),c=a.i(84280);a.i(19197);var d=a.i(14745),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{});a.s(["Primitive",()=>e],50891);var f=c.forwardRef((a,c)=>(0,b.jsx)(e.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));f.displayName="Label";var g=a.i(42261),h=a.i(97895);let i=(0,g.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),j=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(f,{ref:d,className:(0,h.cn)(i(),a),...c}));j.displayName=f.displayName,a.s(["Label",()=>j],17171)},60421,a=>{"use strict";var b=a.i(62998),c=a.i(54917);let d={},e=(0,b.create)((a,b)=>({products:[],filters:d,setProducts:b=>a({products:b}),addProduct:b=>a(a=>{let c=a.products.findIndex(a=>a.id===b.id);if(c>=0){let d=[...a.products];return d[c]=b,{products:d}}return{products:[...a.products,b]}}),updateProduct:b=>a(a=>{let c=a.products.findIndex(a=>a.id===b.id);if(c>=0){let d=[...a.products];return d[c]=b,{products:d}}return a}),removeProduct:b=>a(a=>({products:a.products.filter(a=>a.id!==b)})),getProduct:a=>b().products.find(b=>b.id===a),getEnabledProducts:()=>b().products.filter(a=>a.enabled),getFilteredProducts:()=>{let{products:a,filters:c}=b(),d=a.filter(a=>a.enabled);if(c.search){let a=c.search.toLowerCase();d=d.filter(b=>b.name.toLowerCase().includes(a)||b.description?.toLowerCase().includes(a)||b.brand?.toLowerCase().includes(a))}return void 0!==c.minPrice&&(d=d.filter(a=>a.price>=c.minPrice)),void 0!==c.maxPrice&&(d=d.filter(a=>a.price<=c.maxPrice)),c.brands&&c.brands.length>0&&(d=d.filter(a=>a.brand&&c.brands.includes(a.brand))),c.categories&&c.categories.length>0&&(d=d.filter(a=>a.category&&c.categories.includes(a.category))),void 0!==c.inStock&&(d=d.filter(a=>a.inStock===c.inStock)),d},setFilters:b=>a(a=>({filters:{...a.filters,...b}})),clearFilters:()=>a({filters:d}),createProduct:async a=>{let c=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!c.ok)throw Error((await c.json().catch(()=>({}))).message||"خطا در ایجاد محصول");let d=(await c.json()).data;return b().addProduct(d),d},updateProductInDB:async(a,c)=>{let d=await fetch(`/api/products/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!d.ok)throw Error((await d.json().catch(()=>({}))).message||"خطا در به‌روزرسانی محصول");let e=(await d.json()).data;return b().updateProduct(e),e},deleteProductFromDB:async a=>{let c=await fetch(`/api/products/${a}`,{method:"DELETE"});if(!c.ok)throw Error((await c.json().catch(()=>({}))).message||"خطا در حذف محصول");b().removeProduct(a)},loadProductsFromDB:async(a=!1)=>{try{let c=await fetch(a?"/api/products?limit=1000&all=true":"/api/products?limit=1000");if(!c.ok){let a=await c.json().catch(()=>({})),b=a.error||a.message||"خطا در بارگذاری محصولات";throw Error(b)}let d=((await c.json()).data||[]).map(a=>({...a,createdAt:a.createdAt instanceof Date?a.createdAt:new Date(a.createdAt),updatedAt:a.updatedAt instanceof Date?a.updatedAt:new Date(a.updatedAt)}));b().setProducts(d)}catch(a){c.logger.error("Error loading products from DB:",a)}},deleteProduct:async a=>{await b().deleteProductFromDB(a)},deleteProducts:async a=>{await Promise.all(a.map(a=>b().deleteProductFromDB(a)))},toggleProduct:async a=>{let c=b().getProduct(a);c&&await b().updateProductInDB(a,{enabled:!c.enabled})},toggleProducts:async(a,c)=>{await Promise.all(a.map(a=>b().updateProductInDB(a,{enabled:c})))}}));a.s(["useProductStore",0,e])},77687,a=>{"use strict";var b=a.i(84280);let c=0,d=new Map,e=a=>{if(d.has(a))return;let b=setTimeout(()=>{d.delete(a),h({type:"REMOVE_TOAST",toastId:a})},1e6);d.set(a,b)},f=[],g={toasts:[]};function h(a){g=((a,b)=>{switch(b.type){case"ADD_TOAST":return{...a,toasts:[b.toast,...a.toasts].slice(0,1)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(a=>a.id===b.toast.id?{...a,...b.toast}:a)};case"DISMISS_TOAST":{let{toastId:c}=b;return c?e(c):a.toasts.forEach(a=>{e(a.id)}),{...a,toasts:a.toasts.map(a=>a.id===c||void 0===c?{...a,open:!1}:a)}}case"REMOVE_TOAST":if(void 0===b.toastId)return{...a,toasts:[]};return{...a,toasts:a.toasts.filter(a=>a.id!==b.toastId)}}})(g,a),f.forEach(a=>{a(g)})}function i({...a}){let b=(c=(c+1)%Number.MAX_SAFE_INTEGER).toString(),d=()=>h({type:"DISMISS_TOAST",toastId:b});return h({type:"ADD_TOAST",toast:{...a,id:b,open:!0,onOpenChange:a=>{a||d()}}}),{id:b,dismiss:d,update:a=>h({type:"UPDATE_TOAST",toast:{...a,id:b}})}}function j(){let[a,c]=b.useState(g);return b.useEffect(()=>(f.push(c),()=>{let a=f.indexOf(c);a>-1&&f.splice(a,1)}),[a]),{...a,toast:i,dismiss:a=>h({type:"DISMISS_TOAST",toastId:a})}}a.s(["useToast",()=>j])},5522,a=>{"use strict";var b=a.i(17163),c=a.i(84280),d=a.i(97895);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-10 w-full rounded-md border-[0.25px] border-input/30 bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},66732,a=>{"use strict";let b=(0,a.i(60600).default)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],66732)},46893,a=>{"use strict";var b=a.i(17163),c=a.i(84280),d=a.i(97895);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border-[0.25px] border-input/30 bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},84053,a=>{"use strict";let b=(0,a.i(60600).default)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);a.s(["Package",()=>b],84053)},22394,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={BailoutToCSRError:function(){return g},isBailoutToCSRError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="BAILOUT_TO_CLIENT_SIDE_RENDERING";class g extends Error{constructor(a){super(`Bail out to client-side rendering: ${a}`),this.reason=a,this.digest=f}}function h(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===f}},3130,a=>{"use strict";var b=a.i(17163),c=a.i(84280),d=a.i(97895);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border-[0.25px] border-border/3 bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},3988,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},99271,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__"},55619,(a,b,c)=>{"use strict";function d(){let a,b,c=new Promise((c,d)=>{a=c,b=d});return{resolve:a,reject:b,promise:c}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createPromiseWithResolvers",{enumerable:!0,get:function(){return d}})},71720,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},38379,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=a.r(84280);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},410,a=>{"use strict";var b=a.i(62998),c=a.i(54917);let d={},e=(0,b.create)((a,b)=>({orders:[],filters:d,isLoading:!1,setOrders:b=>a({orders:b}),addOrder:b=>a(a=>{let c=a.orders.findIndex(a=>a.id===b.id);if(c>=0){let d=[...a.orders];return d[c]=b,{orders:d}}return{orders:[...a.orders,b]}}),updateOrder:(b,c)=>a(a=>{let d=a.orders.findIndex(a=>a.id===b);if(d>=0){let b=[...a.orders];return b[d]={...b[d],...c},{orders:b}}return a}),updateOrderStatus:(b,c)=>a(a=>({orders:a.orders.map(a=>a.id===b?{...a,status:c,updatedAt:new Date}:a)})),updatePaymentStatus:(b,c)=>a(a=>({orders:a.orders.map(a=>a.id===b?{...a,paymentStatus:c,updatedAt:new Date}:a)})),deleteOrder:b=>a(a=>({orders:a.orders.filter(a=>a.id!==b)})),getOrder:a=>b().orders.find(b=>b.id===a),setFilters:b=>a(a=>({filters:{...a.filters,...b}})),clearFilters:()=>a({filters:d}),loadOrdersFromDB:async()=>{a({isLoading:!0});try{let b=new AbortController,d=setTimeout(()=>b.abort(),15e3),e=await fetch("/api/orders",{signal:b.signal});if(clearTimeout(d),e.ok){let b;try{b=await e.json()}catch(b){c.logger.error("Error parsing orders response:",b),a({orders:[],isLoading:!1});return}if(b.success&&b.data)try{let d=b.data.map(a=>{let b=[],d={};try{b=Array.isArray(a.items)?a.items:"string"==typeof a.items?JSON.parse(a.items):[]}catch(d){c.logger.warn("Error parsing items for order:",a.id,d),b=[]}try{d="object"==typeof a.shippingAddress&&null!==a.shippingAddress?a.shippingAddress:"string"==typeof a.shippingAddress?JSON.parse(a.shippingAddress):{}}catch(b){c.logger.warn("Error parsing shippingAddress for order:",a.id,b),d={}}return{...a,items:b,shippingAddress:d,total:Number(a.total)||0,shippingCost:Number(a.shippingCost)||0,createdAt:a.createdAt instanceof Date?a.createdAt:new Date(a.createdAt),updatedAt:a.updatedAt instanceof Date?a.updatedAt:new Date(a.updatedAt)}});a({orders:d,isLoading:!1})}catch(b){c.logger.error("Error parsing orders data:",b),a({orders:[],isLoading:!1})}else a({orders:[],isLoading:!1})}else c.logger.error("Failed to load orders:",e.status),a({orders:[],isLoading:!1})}catch(b){b instanceof Error&&"AbortError"!==b.name&&c.logger.error("Error loading orders from DB:",b),a({orders:[],isLoading:!1})}}}));a.s(["useOrderStore",0,e])},16149,a=>{"use strict";let b=(0,a.i(60600).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["ArrowRight",()=>b],16149)},63652,(a,b,c)=>{"use strict";c._=function(a){return a&&a.__esModule?a:{default:a}}},82329,a=>{"use strict";var b=a.i(62998),c=a.i(32686),d=a.i(54917);let e=(0,c.createJSONStorage)(()=>({getItem:a=>null,setItem:(a,b)=>{},removeItem:a=>{}})),f=(0,b.create)()((0,c.persist)((a,b)=>({items:[],shippingMethod:null,sessionId:null,initializeSession:()=>{},syncToDatabase:async()=>{try{let a=b(),c=a.sessionId||"";if(!c)return void d.logger.warn("No session ID, skipping database sync");let e=a.items.map(a=>(d.logger.debug("Syncing item to DB:",{id:a.id,name:a.name,hasImage:!!a.image,imageLength:a.image?.length||0,imageType:a.image?.startsWith("data:")?"base64":"url"}),{...a})),f=await fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e,shippingMethod:a.shippingMethod,sessionId:c})});if(f.ok)try{let a=await f.json();a&&a.success}catch(a){}else{let a=`HTTP ${f.status}: ${f.statusText}`;try{let b=await f.json();b&&"object"==typeof b&&(a=b.error||b.message||a)}catch(c){let b=await f.text().catch(()=>"");b&&(a=`${a} - ${b.substring(0,100)}`)}f.status>=400&&d.logger.error("Failed to sync cart to database:",{status:f.status,statusText:f.statusText,error:a,sessionId:c,itemCount:e.length})}}catch(a){a instanceof Error?a.message.includes("fetch")||a.message.includes("network")||d.logger.error("Error syncing cart to database:",{message:a.message,name:a.name,sessionId:b().sessionId||""}):d.logger.error("Error syncing cart to database:",a)}},loadFromDatabase:async()=>{try{return}catch(a){a instanceof Error?a.message.includes("fetch")||a.message.includes("network")||d.logger.error("Error loading cart from database:",{message:a.message,name:a.name,sessionId:""}):d.logger.error("Error loading cart from database:",a)}},addItem:c=>{try{a(a=>{if(a.items.length>=100)return d.logger.warn("Cart limit reached (100 items). Please remove some items."),a;if(a.items.find(a=>a.id===c.id))return{items:a.items.map(a=>a.id===c.id?{...a,quantity:a.quantity+(c.quantity||1)}:a)};let e={items:[...a.items,{...c,image:c.image||"",quantity:c.quantity||1}]};return setTimeout(()=>{b().syncToDatabase()},100),e})}catch(a){throw a?.name==="QuotaExceededError"&&d.logger.error("Storage quota exceeded. Please clear your cart."),a}},updateQuantity:(c,e)=>{try{a(a=>{if(e<=0)return{items:a.items.filter(a=>a.id!==c)};let d={items:a.items.map(a=>a.id===c?{...a,quantity:e}:a)};return setTimeout(()=>{b().syncToDatabase()},100),d})}catch(a){throw a?.name==="QuotaExceededError"&&d.logger.error("Storage quota exceeded. Please clear your cart."),a}},removeItem:c=>{a(a=>{let d={items:a.items.filter(a=>a.id!==c)};return setTimeout(()=>{b().syncToDatabase()},100),d})},clearCart:()=>{a({items:[],shippingMethod:null}),setTimeout(()=>{b().syncToDatabase()},100)},getTotal:()=>b().items.reduce((a,b)=>a+b.price*b.quantity,0),getItemCount:()=>b().items.reduce((a,b)=>a+b.quantity,0),setShippingMethod:c=>{a({shippingMethod:c}),setTimeout(()=>{b().syncToDatabase()},100)}}),{name:"cart-storage",storage:e,partialize:a=>({items:a.items.slice(0,100).map(a=>{var b;return{...a,image:(b=a.image)&&"string"==typeof b?b.startsWith("data:image")?b.length<5e4?b:"":b.length>2e3?(d.logger.warn("Very long image URL detected, truncating:",b.substring(0,100)),b.substring(0,2e3)):b:""}}),shippingMethod:a.shippingMethod,sessionId:a.sessionId})}));a.s(["useCartStore",0,f])},53831,a=>{"use strict";let b=(0,a.i(60600).default)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);a.s(["ShoppingBag",()=>b],53831)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__c4564da6._.js.map