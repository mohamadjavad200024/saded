module.exports=[81502,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(3130),f=a.i(40695),g=a.i(5522),h=a.i(17171),i=a.i(46893),j=a.i(77687),k=a.i(96221),l=a.i(21161),m=a.i(70106);let n=(0,m.default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),o=(0,m.default)("PanelBottom",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 15h18",key:"5xshup"}]]);var p=a.i(4720);let q=(0,m.default)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var r=a.i(73320),s=a.i(33508),t=a.i(38632),u=a.i(25173),v=a.i(89078),w=a.i(21958);let x=(0,m.default)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);var y=a.i(69520),z=a.i(69292),A=a.i(74830),B=a.i(12857),C=a.i(69472),D=a.i(85911),E=a.i(45222),F=a.i(92759),G=a.i(80281),H=a.i(7379);let I={footer:{about:{title:"درباره ساد",description:"فروشگاه آنلاین قطعات خودرو وارداتی با بهترین کیفیت و قیمت. ما متعهد به ارائه بهترین خدمات به مشتریان خود هستیم.",socialLinks:{instagram:{url:"#",enabled:!1},facebook:{url:"#",enabled:!1},twitter:{url:"#",enabled:!1},whatsapp:{url:"#",enabled:!1},telegram:{url:"#",enabled:!1},youtube:{url:"#",enabled:!1},linkedin:{url:"#",enabled:!1},tiktok:{url:"#",enabled:!1}}},contact:{title:"تماس با ما",phone:"021-12345678",email:"info@saded.ir"},copyright:`\xa9 ${new Date().getFullYear()} ساد. تمامی حقوق محفوظ است.`}};function J(){let{toast:a}=(0,j.useToast)(),[d,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(!1),[o,p]=(0,c.useState)(I);(0,c.useEffect)(()=>{q()},[]);let q=async()=>{try{let a=await fetch("/api/settings/site-content");if(a.ok){let b=await a.json();b.data?.footer?p({footer:{...I.footer,...b.data.footer,about:{...I.footer.about,...b.data.footer.about,socialLinks:(()=>{let a=b.data.footer.about?.socialLinks;if(!a)return I.footer.about.socialLinks;let c=(a,b)=>"string"==typeof a?{url:a,enabled:"#"!==a&&""!==a}:a&&"object"==typeof a?{url:a.url||"#",enabled:a.enabled??!1}:b;return{instagram:c(a.instagram,I.footer.about.socialLinks.instagram),facebook:c(a.facebook,I.footer.about.socialLinks.facebook),twitter:c(a.twitter,I.footer.about.socialLinks.twitter),whatsapp:c(a.whatsapp,I.footer.about.socialLinks.whatsapp),telegram:c(a.telegram,I.footer.about.socialLinks.telegram),youtube:c(a.youtube,I.footer.about.socialLinks.youtube),linkedin:c(a.linkedin,I.footer.about.socialLinks.linkedin),tiktok:c(a.tiktok,I.footer.about.socialLinks.tiktok)}})()},contact:{...I.footer.contact,...b.data.footer.contact}}}):p(I)}else p(I)}catch(a){console.error("Error loading content:",a),p(I)}finally{k(!1)}},r=async()=>{let b=(()=>{if(!o.footer.about.title.trim())return"عنوان بخش درباره ساد الزامی است";if(!o.footer.contact.title.trim())return"عنوان بخش تماس با ما الزامی است";if(o.footer.contact.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.footer.contact.email))return"ایمیل وارد شده معتبر نیست";let a=o.footer.about.socialLinks;for(let b of[{key:"instagram",name:"اینستاگرام"},{key:"facebook",name:"فیسبوک"},{key:"twitter",name:"توییتر"},{key:"whatsapp",name:"واتساپ"},{key:"telegram",name:"تلگرام"},{key:"youtube",name:"یوتیوب"},{key:"linkedin",name:"لینکدین"},{key:"tiktok",name:"تیک‌تاک"}]){let c=a[b.key];if(c&&c.enabled&&c.url&&"#"!==c.url){let a=c.url;if("string"==typeof a&&""!==a.trim()&&!a.startsWith("http")&&!a.startsWith("https")&&!a.startsWith("wa.me")&&!a.startsWith("t.me"))return`لینک ${b.name} باید با http، https، wa.me یا t.me شروع شود`}}return null})();if(b)return void a({title:"خطا در اعتبارسنجی",description:b,variant:"destructive"});m(!0);try{let b=await fetch("/api/settings/site-content",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:o})});if(b.ok)a({title:"موفق",description:"محتوای Footer با موفقیت ذخیره شد"});else{let c=await b.json();a({title:"خطا",description:c.error||"خطا در ذخیره محتوا",variant:"destructive"})}}catch(b){a({title:"خطا",description:"خطا در ذخیره محتوا",variant:"destructive"})}finally{m(!1)}};return d?(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"py-8",children:(0,b.jsx)("div",{className:"flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-6 h-6 border-3 border-primary border-t-transparent rounded-full animate-spin"})})})}):(0,b.jsxs)(e.Card,{className:"shadow-sm",children:[(0,b.jsxs)(e.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:[(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(x,{className:"h-5 w-5 text-primary"}),"محتوای Footer"]}),(0,b.jsx)(e.CardDescription,{children:"ویرایش تمام بخش‌های Footer سایت. تغییرات پس از ذخیره در سایت نمایش داده می‌شوند."})]}),(0,b.jsxs)(e.CardContent,{className:"space-y-6 pt-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"font-semibold text-lg",children:"درباره ساد"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"aboutTitle",children:"عنوان"}),(0,b.jsx)(g.Input,{id:"aboutTitle",value:o.footer.about.title,onChange:a=>p(b=>({...b,footer:{...b.footer,about:{...b.footer.about,title:a.target.value}}}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"aboutDescription",children:"توضیحات"}),(0,b.jsx)(i.Textarea,{id:"aboutDescription",value:o.footer.about.description,onChange:a=>p(b=>({...b,footer:{...b.footer,about:{...b.footer.about,description:a.target.value}}})),rows:3,placeholder:"توضیحات کوتاه درباره فروشگاه..."}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"این متن در بخش درباره ساد در Footer نمایش داده می‌شود"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(h.Label,{children:"لینک‌های شبکه‌های اجتماعی"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-3",children:"آدرس کامل شبکه‌های اجتماعی را وارد کنید و با Switch آن‌ها را فعال/غیرفعال کنید"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2 p-4 border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(z.Instagram,{className:"h-5 w-5 text-pink-500"}),(0,b.jsx)(h.Label,{children:"Instagram"})]}),(0,b.jsx)(G.Switch,{checked:o.footer.about.socialLinks.instagram.enabled,onCheckedChange:a=>p(b=>({...b,footer:{...b.footer,about:{...b.footer.about,socialLinks:{...b.footer.about.socialLinks,instagram:{...b.footer.about.socialLinks.instagram,enabled:a}}}}}))})]}),(0,b.jsx)(g.Input,{value:o.footer.about.socialLinks.instagram.url,onChange:a=>p(b=>({...b,footer:{...b.footer,about:{...b.footer.about,socialLinks:{...b.footer.about.socialLinks,instagram:{...b.footer.about.socialLinks.instagram,url:a.target.value}}}}})),placeholder:"https://instagram.com/...",disabled:!o.footer.about.socialLinks.instagram.enabled})]}),(0,b.jsxs)("div",{className:"space-y-2 p-4 border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(A.Facebook,{className:"h-5 w-5 text-blue-600"}),(0,b.jsx)(h.Label,{children:"Facebook"})]}),(0,b.jsx)(G.Switch,{checked:o.footer.about.socialLinks.facebook.enabled,onCheckedChange:a=>p(b=>({...b,footer:{...b.footer,about:{...b.footer.about,socialLinks:{...b.footer.about.socialLinks,facebook:{...b.footer.about.socialLinks.facebook,enabled:a}}}}}))})]}),(0,b.jsx)(g.Input,{value:o.footer.about.socialLinks.facebook.url,onChange:a=>p(b=>({...b,footer:{...b.footer,about:{...b.footer.about,socialLinks:{...b.footer.about.socialLinks,facebook:{...b.footer.about.socialLinks.facebook,url:a.target.value}}}}})),placeholder:"https://facebook.com/...",disabled:!o.footer.about.socialLinks.facebook.enabled})]}),(0,b.jsxs)("div",{className:"space-y-2 p-4 border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(B.Twitter,{className:"h-5 w-5 text-blue-400"}),(0,b.jsx)(h.Label,{children:"Twitter/X"})]}),(0,b.jsx)(G.Switch,{checked:o.footer.about.socialLinks.twitter.enabled,onCheckedChange:a=>p(b=>({...b,footer:{...b.footer,about:{...b.footer.about,socialLinks:{...b.footer.about.socialLinks,twitter:{...b.footer.about.socialLinks.twitter,enabled:a}}}}}))})]}),(0,b.jsx)(g.Input,{value:o.footer.about.socialLinks.twitter.url,onChange:a=>p(b=>({...b,footer:{...b.footer,about:{...b.footer.about,socialLinks:{...b.footer.about.socialLinks,twitter:{...b.footer.about.socialLinks.twitter,url:a.target.value}}}}})),placeholder:"https://twitter.com/... یا https://x.com/...",disabled:!o.footer.about.socialLinks.twitter.enabled})]}),(0,b.jsxs)("div",{className:"space-y-2 p-4 border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(E.MessageCircle,{className:"h-5 w-5 text-green-500"}),(0,b.jsx)(h.Label,{children:"WhatsApp"})]}),(0,b.jsx)(G.Switch,{checked:o.footer.about.socialLinks.whatsapp.enabled,onCheckedChange:a=>p(b=>({...b,footer:{...b.footer,about:{...b.footer.about,socialLinks:{...b.footer.about.socialLinks,whatsapp:{...b.footer.about.socialLinks.whatsapp,enabled:a}}}}}))})]}),(0,b.jsx)(g.Input,{value:o.footer.about.socialLinks.whatsapp.url,onChange:a=>p(b=>({...b,footer:{...b.footer,about:{...b.footer.about,socialLinks:{...b.footer.about.socialLinks,whatsapp:{...b.footer.about.socialLinks.whatsapp,url:a.target.value}}}}})),placeholder:"https://wa.me/...",disabled:!o.footer.about.socialLinks.whatsapp.enabled})]}),(0,b.jsxs)("div",{className:"space-y-2 p-4 border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(F.Send,{className:"h-5 w-5 text-blue-400"}),(0,b.jsx)(h.Label,{children:"Telegram"})]}),(0,b.jsx)(G.Switch,{checked:o.footer.about.socialLinks.telegram.enabled,onCheckedChange:a=>p(b=>({...b,footer:{...b.footer,about:{...b.footer.about,socialLinks:{...b.footer.about.socialLinks,telegram:{...b.footer.about.socialLinks.telegram,enabled:a}}}}}))})]}),(0,b.jsx)(g.Input,{value:o.footer.about.socialLinks.telegram.url,onChange:a=>p(b=>({...b,footer:{...b.footer,about:{...b.footer.about,socialLinks:{...b.footer.about.socialLinks,telegram:{...b.footer.about.socialLinks.telegram,url:a.target.value}}}}})),placeholder:"https://t.me/...",disabled:!o.footer.about.socialLinks.telegram.enabled})]}),(0,b.jsxs)("div",{className:"space-y-2 p-4 border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(C.Youtube,{className:"h-5 w-5 text-red-600"}),(0,b.jsx)(h.Label,{children:"YouTube"})]}),(0,b.jsx)(G.Switch,{checked:o.footer.about.socialLinks.youtube.enabled,onCheckedChange:a=>p(b=>({...b,footer:{...b.footer,about:{...b.footer.about,socialLinks:{...b.footer.about.socialLinks,youtube:{...b.footer.about.socialLinks.youtube,enabled:a}}}}}))})]}),(0,b.jsx)(g.Input,{value:o.footer.about.socialLinks.youtube.url,onChange:a=>p(b=>({...b,footer:{...b.footer,about:{...b.footer.about,socialLinks:{...b.footer.about.socialLinks,youtube:{...b.footer.about.socialLinks.youtube,url:a.target.value}}}}})),placeholder:"https://youtube.com/...",disabled:!o.footer.about.socialLinks.youtube.enabled})]}),(0,b.jsxs)("div",{className:"space-y-2 p-4 border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(D.Linkedin,{className:"h-5 w-5 text-blue-700"}),(0,b.jsx)(h.Label,{children:"LinkedIn"})]}),(0,b.jsx)(G.Switch,{checked:o.footer.about.socialLinks.linkedin.enabled,onCheckedChange:a=>p(b=>({...b,footer:{...b.footer,about:{...b.footer.about,socialLinks:{...b.footer.about.socialLinks,linkedin:{...b.footer.about.socialLinks.linkedin,enabled:a}}}}}))})]}),(0,b.jsx)(g.Input,{value:o.footer.about.socialLinks.linkedin.url,onChange:a=>p(b=>({...b,footer:{...b.footer,about:{...b.footer.about,socialLinks:{...b.footer.about.socialLinks,linkedin:{...b.footer.about.socialLinks.linkedin,url:a.target.value}}}}})),placeholder:"https://linkedin.com/...",disabled:!o.footer.about.socialLinks.linkedin.enabled})]}),(0,b.jsxs)("div",{className:"space-y-2 p-4 border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(E.MessageCircle,{className:"h-5 w-5 text-black dark:text-white"}),(0,b.jsx)(h.Label,{children:"TikTok"})]}),(0,b.jsx)(G.Switch,{checked:o.footer.about.socialLinks.tiktok.enabled,onCheckedChange:a=>p(b=>({...b,footer:{...b.footer,about:{...b.footer.about,socialLinks:{...b.footer.about.socialLinks,tiktok:{...b.footer.about.socialLinks.tiktok,enabled:a}}}}}))})]}),(0,b.jsx)(g.Input,{value:o.footer.about.socialLinks.tiktok.url,onChange:a=>p(b=>({...b,footer:{...b.footer,about:{...b.footer.about,socialLinks:{...b.footer.about.socialLinks,tiktok:{...b.footer.about.socialLinks.tiktok,url:a.target.value}}}}})),placeholder:"https://tiktok.com/...",disabled:!o.footer.about.socialLinks.tiktok.enabled})]})]})]})]}),(0,b.jsx)(H.Separator,{}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"font-semibold text-lg",children:"تماس با ما"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"عنوان"}),(0,b.jsx)(g.Input,{value:o.footer.contact.title,onChange:a=>p(b=>({...b,footer:{...b.footer,contact:{...b.footer.contact,title:a.target.value}}}))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"شماره تلفن"}),(0,b.jsx)(g.Input,{value:o.footer.contact.phone,onChange:a=>p(b=>({...b,footer:{...b.footer,contact:{...b.footer.contact,phone:a.target.value}}})),placeholder:"021-12345678"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"ایمیل"}),(0,b.jsx)(g.Input,{type:"email",value:o.footer.contact.email,onChange:a=>p(b=>({...b,footer:{...b.footer,contact:{...b.footer.contact,email:a.target.value}}})),placeholder:"info@saded.ir"})]})]})]}),(0,b.jsx)(H.Separator,{}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"copyright",children:"متن Copyright"}),(0,b.jsx)(g.Input,{id:"copyright",value:o.footer.copyright,onChange:a=>p(b=>({...b,footer:{...b.footer,copyright:a.target.value}})),placeholder:`\xa9 ${new Date().getFullYear()} ساد. تمامی حقوق محفوظ است.`}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["این متن در پایین Footer نمایش داده می‌شود. می‌توانید از متغیر ","{","YEAR","}"," برای سال جاری استفاده کنید."]})]}),(0,b.jsx)("div",{className:"flex justify-end pt-4",children:(0,b.jsx)(f.Button,{onClick:r,disabled:l,size:"lg",children:l?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.RefreshCw,{className:"ml-2 h-4 w-4 animate-spin"}),"در حال ذخیره..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n,{className:"ml-2 h-4 w-4"}),"ذخیره محتوای Footer"]})})})]})]})}var K=a.i(15618),L=a.i(81560),M=a.i(92e3),N=a.i(5784),O=a.i(67552),P=a.i(63519),Q=a.i(92258);let R=[{key:"about",title:"درباره ما",description:"ویرایش محتوای صفحه درباره ما",icon:(0,b.jsx)(p.FileText,{className:"h-4 w-4"})},{key:"faq",title:"سوالات متداول",description:"مدیریت سوالات و پاسخ‌های متداول",icon:(0,b.jsx)(p.FileText,{className:"h-4 w-4"})},{key:"shipping",title:"ارسال و تحویل",description:"ویرایش محتوای صفحه ارسال و تحویل",icon:(0,b.jsx)(p.FileText,{className:"h-4 w-4"})},{key:"returns",title:"بازگشت کالا",description:"ویرایش محتوای صفحه بازگشت کالا",icon:(0,b.jsx)(p.FileText,{className:"h-4 w-4"})},{key:"warranty",title:"گارانتی",description:"ویرایش محتوای صفحه گارانتی",icon:(0,b.jsx)(p.FileText,{className:"h-4 w-4"})},{key:"contact",title:"تماس با ما",description:"ویرایش اطلاعات تماس",icon:(0,b.jsx)(p.FileText,{className:"h-4 w-4"})},{key:"footer",title:"Footer",description:"ویرایش محتوای فوتر",icon:(0,b.jsx)(x,{className:"h-4 w-4"})}],S={footer:{about:{title:"درباره ساد",description:"فروشگاه آنلاین قطعات خودرو وارداتی با بهترین کیفیت و قیمت. ما متعهد به ارائه بهترین خدمات به مشتریان خود هستیم.",socialLinks:{instagram:"#",facebook:"#",twitter:"#"}},quickLinks:{title:"دسترسی سریع",links:[{label:"محصولات",href:"/products"},{label:"درباره ما",href:"/about"},{label:"تماس با ما",href:"/contact"},{label:"وبلاگ",href:"/blog"}]},support:{title:"پشتیبانی",links:[{label:"سوالات متداول",href:"/faq"},{label:"ارسال و تحویل",href:"/shipping"},{label:"بازگشت کالا",href:"/returns"},{label:"گارانتی",href:"/warranty"}]},contact:{title:"تماس با ما",phone:"021-12345678",email:"info@saded.ir"},copyright:`\xa9 ${new Date().getFullYear()} ساد. تمامی حقوق محفوظ است.`}},T={about:`فروشگاه آنلاین ساد، ارائه‌دهنده قطعات خودرو وارداتی با بهترین کیفیت و قیمت است.

ما متعهد به ارائه بهترین خدمات به مشتریان خود هستیم و تمام تلاش خود را می‌کنیم تا رضایت شما را جلب کنیم.`,faq:[{question:"چگونه می‌توانم سفارش بدهم؟",answer:"شما می‌توانید با مراجعه به صفحه محصولات، محصول مورد نظر خود را انتخاب کرده و به سبد خرید اضافه کنید."},{question:"روش‌های پرداخت چیست؟",answer:"پرداخت از طریق درگاه پرداخت آنلاین انجام می‌شود."},{question:"زمان تحویل چقدر است؟",answer:"زمان تحویل بسته به روش ارسال انتخابی شما متفاوت است."}],shipping:`ما دو روش ارسال هوایی و دریایی را برای شما فراهم کرده‌ایم.

هزینه ارسال بر اساس محصول و روش انتخابی شما محاسبه می‌شود.`,returns:`در صورت وجود مشکل در محصول، می‌توانید درخواست بازگشت کالا را ثبت کنید.

لطفاً قبل از ثبت درخواست، با پشتیبانی تماس بگیرید.`,warranty:`تمام محصولات ما دارای گارانتی اصالت و کیفیت هستند.

در صورت وجود مشکل در محصول، می‌توانید از خدمات گارانتی استفاده کنید.`,contact:{phone:"021-12345678",email:"info@saded.ir",address:"تهران، ایران"}};function U(){let{toast:a}=(0,j.useToast)(),[d,k]=(0,c.useState)("about"),[l,m]=(0,c.useState)(!0),[o,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)([]),[v,C]=(0,c.useState)({phone:"",email:"",address:""}),[D,E]=(0,c.useState)(S),[F,G]=(0,c.useState)({footerAbout:!0,footerQuickLinks:!1,footerSupport:!1,footerContact:!1,footerCopyright:!1});(0,c.useEffect)(()=>{"footer"===d?J():I(d)},[d]);let I=async b=>{m(!0);try{let a=await fetch(`/api/settings/page-content?page=${b}`);if(a.ok){let c=await a.json(),d=c.data?.content;if(d&&""!==d&&null!==d||(d=T[b]),"faq"===b){let a="string"==typeof d?JSON.parse(d):d;u(Array.isArray(a)&&a.length>0?a:T.faq||[])}else if("contact"===b){let a="string"==typeof d?JSON.parse(d):d;C(a&&Object.keys(a).length>0?a:T.contact||{phone:"",email:"",address:""})}else{let a="string"==typeof d?d:"";s(a||T[b]||"")}}else"faq"===b?u(T.faq||[]):"contact"===b?C(T.contact||{phone:"",email:"",address:""}):s(T[b]||"")}catch(c){console.error("Error loading content:",c),"faq"===b?u(T.faq||[]):"contact"===b?C(T.contact||{phone:"",email:"",address:""}):s(T[b]||""),a({title:"خطا",description:"خطا در بارگذاری محتوا. از محتوای پیش‌فرض استفاده می‌شود.",variant:"destructive"})}finally{m(!1)}},J=async()=>{m(!0);try{let a=await fetch("/api/settings/site-content");if(a.ok){let b=await a.json();b.data?.footer?E({footer:{...S.footer,...b.data.footer,about:{...S.footer.about,...b.data.footer.about,socialLinks:{...S.footer.about.socialLinks,...b.data.footer.about?.socialLinks}},quickLinks:{...S.footer.quickLinks,...b.data.footer.quickLinks,links:b.data.footer.quickLinks?.links?.length>0?b.data.footer.quickLinks.links:S.footer.quickLinks.links},support:{...S.footer.support,...b.data.footer.support,links:b.data.footer.support?.links?.length>0?b.data.footer.support.links:S.footer.support.links},contact:{...S.footer.contact,...b.data.footer.contact}}}):E(S)}else E(S)}catch(b){console.error("Error loading footer content:",b),E(S),a({title:"خطا",description:"خطا در بارگذاری محتوای فوتر. از محتوای پیش‌فرض استفاده می‌شود.",variant:"destructive"})}finally{m(!1)}},U=async()=>{q(!0);try{if("footer"===d){let b=await fetch("/api/settings/site-content",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:D})});if(b.ok)a({title:"موفق",description:"محتوای Footer با موفقیت ذخیره شد"});else{let c=await b.json();a({title:"خطا",description:c.error||"خطا در ذخیره محتوا",variant:"destructive"})}}else{let b;b="faq"===d?t:"contact"===d?v:r;let c=await fetch(`/api/settings/page-content?page=${d}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:b})});if(c.ok)a({title:"موفق",description:`محتوای ${R.find(a=>a.key===d)?.title} با موفقیت ذخیره شد`});else{let b=await c.json();a({title:"خطا",description:b.error||"خطا در ذخیره محتوا",variant:"destructive"})}}}catch(b){a({title:"خطا",description:"خطا در ذخیره محتوا",variant:"destructive"})}finally{q(!1)}},V=(a,b,c)=>{u(t.map((d,e)=>e===a?{...d,[b]:c}:d))},W=a=>{E(b=>({...b,footer:{...b.footer,[a]:{...b.footer[a],links:[...b.footer[a].links,{label:"",href:""}]}}}))},X=(a,b)=>{E(c=>({...c,footer:{...c.footer,[a]:{...c.footer[a],links:c.footer[a].links.filter((a,c)=>c!==b)}}}))},Y=(a,b,c,d)=>{E(e=>({...e,footer:{...e.footer,[a]:{...e.footer[a],links:e.footer[a].links.map((a,e)=>e===b?{...a,[c]:d}:a)}}}))};return l?(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"py-8",children:(0,b.jsx)("div",{className:"flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-6 h-6 border-3 border-primary border-t-transparent rounded-full animate-spin"})})})}):(0,b.jsxs)(e.Card,{className:"shadow-sm",children:[(0,b.jsxs)(e.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:[(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(p.FileText,{className:"h-5 w-5 text-primary"}),"مدیریت محتوای صفحات"]}),(0,b.jsx)(e.CardDescription,{children:"ویرایش محتوای تمام صفحات سایت"})]}),(0,b.jsxs)(e.CardContent,{className:"space-y-6 pt-6",children:[(0,b.jsxs)(w.Tabs,{value:d,onValueChange:a=>k(a),children:[(0,b.jsx)(w.TabsList,{className:"grid w-full grid-cols-3 lg:grid-cols-7",children:R.map(a=>(0,b.jsxs)(w.TabsTrigger,{value:a.key,className:"text-xs",children:[a.icon,(0,b.jsx)("span",{className:"mr-1 hidden sm:inline",children:a.title})]},a.key))}),(0,b.jsx)(w.TabsContent,{value:"about",className:"space-y-4 mt-6",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"محتوای صفحه درباره ما"}),(0,b.jsx)(i.Textarea,{value:r,onChange:a=>s(a.target.value),placeholder:"محتوای صفحه درباره ما را اینجا وارد کنید...",className:"min-h-[300px] font-sans",rows:10}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"می‌توانید از چند خط استفاده کنید. هر خط به صورت یک پاراگراف نمایش داده می‌شود."})]})}),(0,b.jsxs)(w.TabsContent,{value:"faq",className:"space-y-4 mt-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(h.Label,{children:"سوالات متداول"}),(0,b.jsxs)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{u([...t,{question:"",answer:""}])},children:[(0,b.jsx)(K.Plus,{className:"h-4 w-4 ml-2"}),"افزودن سوال"]})]}),0===t.length&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-4 border border-dashed rounded-lg text-muted-foreground",children:[(0,b.jsx)(M.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-sm",children:"هنوز سوالی اضافه نشده است"})]}),(0,b.jsx)("div",{className:"space-y-4",children:t.map((a,c)=>(0,b.jsxs)("div",{className:"border rounded-lg p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"سوال"}),(0,b.jsx)(g.Input,{value:a.question,onChange:a=>V(c,"question",a.target.value),placeholder:"سوال را اینجا وارد کنید..."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"پاسخ"}),(0,b.jsx)(i.Textarea,{value:a.answer,onChange:a=>V(c,"answer",a.target.value),placeholder:"پاسخ را اینجا وارد کنید...",rows:3})]}),(0,b.jsxs)(f.Button,{type:"button",variant:"destructive",size:"sm",onClick:()=>{u(t.filter((a,b)=>b!==c))},children:[(0,b.jsx)(L.Trash2,{className:"h-4 w-4 ml-2"}),"حذف"]})]},c))})]}),(0,b.jsx)(w.TabsContent,{value:"shipping",className:"space-y-4 mt-6",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"محتوای صفحه ارسال و تحویل"}),(0,b.jsx)(i.Textarea,{value:r,onChange:a=>s(a.target.value),placeholder:"محتوای صفحه ارسال و تحویل را اینجا وارد کنید...",className:"min-h-[300px] font-sans",rows:10})]})}),(0,b.jsx)(w.TabsContent,{value:"returns",className:"space-y-4 mt-6",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"محتوای صفحه بازگشت کالا"}),(0,b.jsx)(i.Textarea,{value:r,onChange:a=>s(a.target.value),placeholder:"محتوای صفحه بازگشت کالا را اینجا وارد کنید...",className:"min-h-[300px] font-sans",rows:10})]})}),(0,b.jsx)(w.TabsContent,{value:"warranty",className:"space-y-4 mt-6",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"محتوای صفحه گارانتی"}),(0,b.jsx)(i.Textarea,{value:r,onChange:a=>s(a.target.value),placeholder:"محتوای صفحه گارانتی را اینجا وارد کنید...",className:"min-h-[300px] font-sans",rows:10})]})}),(0,b.jsx)(w.TabsContent,{value:"contact",className:"space-y-4 mt-6",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"شماره تلفن"}),(0,b.jsx)(g.Input,{value:v.phone,onChange:a=>C({...v,phone:a.target.value}),placeholder:"021-12345678"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"ایمیل"}),(0,b.jsx)(g.Input,{type:"email",value:v.email,onChange:a=>C({...v,email:a.target.value}),placeholder:"info@saded.ir"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{children:"آدرس"}),(0,b.jsx)(i.Textarea,{value:v.address,onChange:a=>C({...v,address:a.target.value}),placeholder:"تهران، ایران",rows:3})]})]})}),(0,b.jsxs)(w.TabsContent,{value:"footer",className:"space-y-3 mt-6",children:[(0,b.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>G({...F,footerAbout:!F.footerAbout}),className:"flex w-full items-center justify-between p-4 hover:bg-accent transition-colors bg-muted/30",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(p.FileText,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"font-medium text-sm",children:"درباره ساد"})]}),F.footerAbout?(0,b.jsx)(O.ChevronUp,{className:"h-4 w-4 text-muted-foreground"}):(0,b.jsx)(N.ChevronDown,{className:"h-4 w-4 text-muted-foreground"})]}),F.footerAbout&&(0,b.jsxs)("div",{className:"space-y-4 p-4 pt-2 border-t bg-background",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{className:"text-sm",children:"عنوان"}),(0,b.jsx)(g.Input,{value:D.footer.about.title,onChange:a=>E(b=>({...b,footer:{...b.footer,about:{...b.footer.about,title:a.target.value}}}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{className:"text-sm",children:"توضیحات"}),(0,b.jsx)(i.Textarea,{value:D.footer.about.description,onChange:a=>E(b=>({...b,footer:{...b.footer,about:{...b.footer.about,description:a.target.value}}})),rows:3,placeholder:"توضیحات کوتاه درباره فروشگاه..."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{className:"text-sm",children:"شبکه‌های اجتماعی"}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(h.Label,{className:"text-xs flex items-center gap-1",children:[(0,b.jsx)(z.Instagram,{className:"h-3 w-3"}),"Instagram"]}),(0,b.jsx)(g.Input,{value:D.footer.about.socialLinks.instagram,onChange:a=>E(b=>({...b,footer:{...b.footer,about:{...b.footer.about,socialLinks:{...b.footer.about.socialLinks,instagram:a.target.value}}}})),placeholder:"#"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(h.Label,{className:"text-xs flex items-center gap-1",children:[(0,b.jsx)(A.Facebook,{className:"h-3 w-3"}),"Facebook"]}),(0,b.jsx)(g.Input,{value:D.footer.about.socialLinks.facebook,onChange:a=>E(b=>({...b,footer:{...b.footer,about:{...b.footer.about,socialLinks:{...b.footer.about.socialLinks,facebook:a.target.value}}}})),placeholder:"#"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(h.Label,{className:"text-xs flex items-center gap-1",children:[(0,b.jsx)(B.Twitter,{className:"h-3 w-3"}),"Twitter"]}),(0,b.jsx)(g.Input,{value:D.footer.about.socialLinks.twitter,onChange:a=>E(b=>({...b,footer:{...b.footer,about:{...b.footer.about,socialLinks:{...b.footer.about.socialLinks,twitter:a.target.value}}}})),placeholder:"#"})]})]})]})]})]}),(0,b.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>G({...F,footerQuickLinks:!F.footerQuickLinks}),className:"flex w-full items-center justify-between p-4 hover:bg-accent transition-colors bg-muted/30",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(x,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"font-medium text-sm",children:"دسترسی سریع"})]}),F.footerQuickLinks?(0,b.jsx)(O.ChevronUp,{className:"h-4 w-4 text-muted-foreground"}):(0,b.jsx)(N.ChevronDown,{className:"h-4 w-4 text-muted-foreground"})]}),F.footerQuickLinks&&(0,b.jsxs)("div",{className:"space-y-4 p-4 pt-2 border-t bg-background",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{className:"text-sm",children:"عنوان"}),(0,b.jsx)(g.Input,{value:D.footer.quickLinks.title,onChange:a=>E(b=>({...b,footer:{...b.footer,quickLinks:{...b.footer.quickLinks,title:a.target.value}}}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(h.Label,{className:"text-sm",children:"لینک‌ها"}),(0,b.jsxs)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>W("quickLinks"),children:[(0,b.jsx)(K.Plus,{className:"h-4 w-4 ml-2"}),"افزودن لینک"]})]}),0===D.footer.quickLinks.links.length&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 border border-dashed rounded-lg text-muted-foreground text-sm",children:[(0,b.jsx)(M.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"هنوز لینکی اضافه نشده است"})]}),(0,b.jsx)("div",{className:"space-y-2",children:D.footer.quickLinks.links.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,b.jsx)("div",{className:"flex-1 space-y-1",children:(0,b.jsx)(g.Input,{value:a.label,onChange:a=>Y("quickLinks",c,"label",a.target.value),placeholder:"عنوان لینک"})}),(0,b.jsx)("div",{className:"flex-1 space-y-1",children:(0,b.jsx)(g.Input,{value:a.href,onChange:a=>Y("quickLinks",c,"href",a.target.value),placeholder:"/products"})}),(0,b.jsx)(f.Button,{type:"button",variant:"destructive",size:"icon",onClick:()=>X("quickLinks",c),children:(0,b.jsx)(L.Trash2,{className:"h-4 w-4"})})]},c))})]})]})]}),(0,b.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>G({...F,footerSupport:!F.footerSupport}),className:"flex w-full items-center justify-between p-4 hover:bg-accent transition-colors bg-muted/30",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(x,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"font-medium text-sm",children:"پشتیبانی"})]}),F.footerSupport?(0,b.jsx)(O.ChevronUp,{className:"h-4 w-4 text-muted-foreground"}):(0,b.jsx)(N.ChevronDown,{className:"h-4 w-4 text-muted-foreground"})]}),F.footerSupport&&(0,b.jsxs)("div",{className:"space-y-4 p-4 pt-2 border-t bg-background",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{className:"text-sm",children:"عنوان"}),(0,b.jsx)(g.Input,{value:D.footer.support.title,onChange:a=>E(b=>({...b,footer:{...b.footer,support:{...b.footer.support,title:a.target.value}}}))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(h.Label,{className:"text-sm",children:"لینک‌ها"}),(0,b.jsxs)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>W("support"),children:[(0,b.jsx)(K.Plus,{className:"h-4 w-4 ml-2"}),"افزودن لینک"]})]}),0===D.footer.support.links.length&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 border border-dashed rounded-lg text-muted-foreground text-sm",children:[(0,b.jsx)(M.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"هنوز لینکی اضافه نشده است"})]}),(0,b.jsx)("div",{className:"space-y-2",children:D.footer.support.links.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,b.jsx)("div",{className:"flex-1 space-y-1",children:(0,b.jsx)(g.Input,{value:a.label,onChange:a=>Y("support",c,"label",a.target.value),placeholder:"عنوان لینک"})}),(0,b.jsx)("div",{className:"flex-1 space-y-1",children:(0,b.jsx)(g.Input,{value:a.href,onChange:a=>Y("support",c,"href",a.target.value),placeholder:"/faq"})}),(0,b.jsx)(f.Button,{type:"button",variant:"destructive",size:"icon",onClick:()=>X("support",c),children:(0,b.jsx)(L.Trash2,{className:"h-4 w-4"})})]},c))})]})]})]}),(0,b.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>G({...F,footerContact:!F.footerContact}),className:"flex w-full items-center justify-between p-4 hover:bg-accent transition-colors bg-muted/30",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(P.Phone,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"font-medium text-sm",children:"تماس با ما"})]}),F.footerContact?(0,b.jsx)(O.ChevronUp,{className:"h-4 w-4 text-muted-foreground"}):(0,b.jsx)(N.ChevronDown,{className:"h-4 w-4 text-muted-foreground"})]}),F.footerContact&&(0,b.jsxs)("div",{className:"space-y-4 p-4 pt-2 border-t bg-background",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{className:"text-sm",children:"عنوان"}),(0,b.jsx)(g.Input,{value:D.footer.contact.title,onChange:a=>E(b=>({...b,footer:{...b.footer,contact:{...b.footer.contact,title:a.target.value}}}))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(h.Label,{className:"text-sm flex items-center gap-2",children:[(0,b.jsx)(P.Phone,{className:"h-4 w-4"}),"تلفن"]}),(0,b.jsx)(g.Input,{value:D.footer.contact.phone,onChange:a=>E(b=>({...b,footer:{...b.footer,contact:{...b.footer.contact,phone:a.target.value}}})),placeholder:"021-12345678"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(h.Label,{className:"text-sm flex items-center gap-2",children:[(0,b.jsx)(Q.Mail,{className:"h-4 w-4"}),"ایمیل"]}),(0,b.jsx)(g.Input,{type:"email",value:D.footer.contact.email,onChange:a=>E(b=>({...b,footer:{...b.footer,contact:{...b.footer.contact,email:a.target.value}}})),placeholder:"info@saded.ir"})]})]})]})]}),(0,b.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>G({...F,footerCopyright:!F.footerCopyright}),className:"flex w-full items-center justify-between p-4 hover:bg-accent transition-colors bg-muted/30",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(p.FileText,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"font-medium text-sm",children:"Copyright"})]}),F.footerCopyright?(0,b.jsx)(O.ChevronUp,{className:"h-4 w-4 text-muted-foreground"}):(0,b.jsx)(N.ChevronDown,{className:"h-4 w-4 text-muted-foreground"})]}),F.footerCopyright&&(0,b.jsx)("div",{className:"p-4 pt-2 border-t bg-background",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{className:"text-sm",children:"متن Copyright"}),(0,b.jsx)(g.Input,{value:D.footer.copyright,onChange:a=>E(b=>({...b,footer:{...b.footer,copyright:a.target.value}})),placeholder:`\xa9 ${new Date().getFullYear()} ساد. تمامی حقوق محفوظ است.`}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"این متن در پایین Footer نمایش داده می‌شود"})]})})]})]})]}),(0,b.jsx)(H.Separator,{}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)(f.Button,{onClick:U,disabled:o,size:"lg",children:o?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.RefreshCw,{className:"ml-2 h-4 w-4 animate-spin"}),"در حال ذخیره..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n,{className:"ml-2 h-4 w-4"}),"ذخیره تغییرات"]})})})]})]})}function V(){(0,d.useRouter)();let{user:a,isAuthenticated:m}=(0,u.useAuthStore)(),{updateSettings:x}=(0,v.useAdminStore)(),{toast:y}=(0,j.useToast)(),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)("general"),[F,G]=(0,c.useState)({siteName:"",siteDescription:"",logoUrl:"",maintenanceMode:!1,allowRegistration:!0,emailNotifications:!0,lowStockThreshold:10,itemsPerPage:10});(0,c.useEffect)(()=>{m&&a?.role==="admin"&&H()},[m,a]);let H=async()=>{A(!0);try{let a=await fetch("/api/site-settings");if(a.ok){let b=await a.json();if(b.success&&b.data)G(a=>({...a,...b.data})),x({siteName:b.data.siteName??"",logoUrl:b.data.logoUrl??"",lowStockThreshold:b.data.lowStockThreshold??10,itemsPerPage:b.data.itemsPerPage??10});else throw Error(b.error||"ساختار پاسخ نامعتبر است")}else throw await a.text().catch(()=>"Unknown error"),Error(`خطا در بارگذاری تنظیمات از سرور: ${a.status} ${a.statusText}`)}catch(a){console.error("Error loading settings:",a),y({title:"خطا",description:a.message||"خطا در بارگذاری تنظیمات",variant:"destructive"})}finally{A(!1)}},I=async b=>{b.preventDefault(),C(!0);try{let b=document.cookie;fetch("http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"page.tsx:98",message:"Client: handleSave - About to send PUT",data:{hasCookies:!!b,cookieCount:(b.match(/;/g)||[]).length+1,hasSadedSession:b.includes("saded_session")},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"J"})}).catch(()=>{});let c={"Content-Type":"application/json"};a?.id&&(c["x-user-id"]=a.id);let d=await fetch("/api/site-settings",{method:"PUT",credentials:"include",headers:c,body:JSON.stringify(F)});if(fetch("http://127.0.0.1:7242/ingest/6e2493c0-cc8b-4c0b-9456-c04638b7e615",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"page.tsx:109",message:"Client: handleSave - Response received",data:{status:d.status,statusText:d.statusText,ok:d.ok},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"K"})}).catch(()=>{}),!d.ok){let a=await d.json().catch(()=>({}));throw Error(a.message||"خطا در ذخیره تنظیمات")}let e=await d.json();if(!e.success)throw Error(e.message||"خطا در ذخیره تنظیمات");x({siteName:F.siteName,logoUrl:F.logoUrl,lowStockThreshold:F.lowStockThreshold,itemsPerPage:F.itemsPerPage});try{localStorage.setItem("admin_site_settings",JSON.stringify(F))}catch(a){console.warn("Failed to save settings to localStorage:",a)}y({title:"موفق",description:"تنظیمات با موفقیت در دیتابیس ذخیره شد"})}catch(a){y({title:"خطا",description:a.message||"خطا در ذخیره تنظیمات",variant:"destructive"})}finally{C(!1)}};return m&&a?.role==="admin"?z?(0,b.jsx)("div",{className:"container mx-auto px-4 py-12",children:(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,b.jsx)(k.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):(0,b.jsxs)("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,b.jsx)(l.Settings,{className:"h-8 w-8"}),"تنظیمات سایت"]}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"مدیریت تنظیمات عمومی سایت، فوتر و محتوای صفحات"})]}),(0,b.jsxs)(w.Tabs,{value:D,onValueChange:E,className:"space-y-6",children:[(0,b.jsxs)(w.TabsList,{className:"grid w-full grid-cols-3",children:[(0,b.jsxs)(w.TabsTrigger,{value:"general",className:"flex items-center gap-2",children:[(0,b.jsx)(q,{className:"h-4 w-4"}),"تنظیمات عمومی"]}),(0,b.jsxs)(w.TabsTrigger,{value:"footer",className:"flex items-center gap-2",children:[(0,b.jsx)(o,{className:"h-4 w-4"}),"فوتر"]}),(0,b.jsxs)(w.TabsTrigger,{value:"pages",className:"flex items-center gap-2",children:[(0,b.jsx)(p.FileText,{className:"h-4 w-4"}),"محتوای صفحات"]})]}),(0,b.jsx)(w.TabsContent,{value:"general",className:"space-y-6",children:(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"تنظیمات عمومی سایت"}),(0,b.jsx)(e.CardDescription,{children:"تنظیمات اصلی و عمومی سایت"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("form",{onSubmit:I,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(h.Label,{htmlFor:"siteName",children:["نام سایت ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(g.Input,{id:"siteName",placeholder:"نام سایت را وارد کنید",value:F.siteName,onChange:a=>G({...F,siteName:a.target.value}),disabled:B,required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"logo",children:"لوگوی سایت"}),(0,b.jsxs)("div",{className:"space-y-3",children:[F.logoUrl?(0,b.jsxs)("div",{className:"relative inline-block",children:[(0,b.jsx)("div",{className:"relative w-32 h-32 border-2 border-border rounded-lg overflow-hidden bg-muted",children:(0,b.jsx)("img",{src:F.logoUrl,alt:"لوگوی سایت",className:"w-full h-full object-contain"})}),(0,b.jsx)(f.Button,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full",onClick:()=>G({...F,logoUrl:""}),disabled:B,children:(0,b.jsx)(s.X,{className:"h-3 w-3"})})]}):(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{onClick:()=>{B||document.getElementById("logo-upload")?.click()},className:"flex items-center justify-center w-32 h-32 border-2 border-dashed border-border rounded-lg cursor-pointer hover:border-primary/50 hover:bg-primary/5 transition-colors bg-muted/20",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(t.Image,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"آپلود لوگو"})]})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"فرمت‌های مجاز: JPG, PNG, WebP"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"حداکثر حجم: 5 مگابایت"})]})]}),(0,b.jsx)("input",{id:"logo-upload",type:"file",accept:"image/*",className:"hidden",onChange:async a=>{let b=a.target.files?.[0];if(b){if(!b.type.startsWith("image/"))return void y({title:"خطا",description:"فقط فایل‌های تصویری مجاز هستند",variant:"destructive"});if(b.size>5242880)return void y({title:"خطا",description:"حجم فایل باید کمتر از 5 مگابایت باشد",variant:"destructive"});try{let a=new FileReader;a.onload=a=>{let b=a.target?.result;G({...F,logoUrl:b}),y({title:"موفق",description:"لوگو با موفقیت آپلود شد"})},a.onerror=()=>{y({title:"خطا",description:"خطا در خواندن فایل",variant:"destructive"})},a.readAsDataURL(b)}catch(a){y({title:"خطا",description:"خطا در آپلود لوگو",variant:"destructive"})}a.target.value=""}},disabled:B}),!F.logoUrl&&(0,b.jsxs)(f.Button,{type:"button",variant:"outline",onClick:()=>document.getElementById("logo-upload")?.click(),disabled:B,className:"gap-2",children:[(0,b.jsx)(r.Upload,{className:"h-4 w-4"}),"انتخاب لوگو"]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"siteDescription",children:"توضیحات سایت"}),(0,b.jsx)(i.Textarea,{id:"siteDescription",placeholder:"توضیحات سایت را وارد کنید",value:F.siteDescription,onChange:a=>G({...F,siteDescription:a.target.value}),disabled:B,rows:4})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"lowStockThreshold",children:"حد آستانه موجودی کم"}),(0,b.jsx)(g.Input,{id:"lowStockThreshold",type:"number",min:"0",step:"1",value:F.lowStockThreshold,onChange:a=>{let b=parseInt(a.target.value)||0;G({...F,lowStockThreshold:Math.max(0,b)})},disabled:B,required:!0}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"محصولاتی که موجودی آنها کمتر از این عدد باشد، به عنوان موجودی کم نمایش داده می‌شوند"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Label,{htmlFor:"itemsPerPage",children:"تعداد آیتم در هر صفحه"}),(0,b.jsx)(g.Input,{id:"itemsPerPage",type:"number",min:"1",step:"1",value:F.itemsPerPage,onChange:a=>{let b=parseInt(a.target.value)||10;G({...F,itemsPerPage:Math.max(1,b)})},disabled:B,required:!0}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"تعداد محصولاتی که در هر صفحه نمایش داده می‌شوند"})]})]}),(0,b.jsx)("div",{className:"flex gap-2 pt-4",children:(0,b.jsx)(f.Button,{type:"submit",className:"flex-1",disabled:B,children:B?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"در حال ذخیره..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n,{className:"mr-2 h-4 w-4"}),"ذخیره تنظیمات"]})})})]})})]})}),(0,b.jsx)(w.TabsContent,{value:"footer",children:(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"تنظیمات فوتر"}),(0,b.jsx)(e.CardDescription,{children:"مدیریت محتوای فوتر سایت"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)(J,{})})]})}),(0,b.jsx)(w.TabsContent,{value:"pages",children:(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"محتوای صفحات"}),(0,b.jsx)(e.CardDescription,{children:"ویرایش محتوای صفحات مختلف سایت"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)(U,{})})]})})]})]}):(0,b.jsx)("div",{className:"container mx-auto px-4 py-12",children:(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsx)("p",{className:"text-center text-muted-foreground",children:"دسترسی غیرمجاز"})})})})}a.s(["default",()=>V],81502)}];

//# sourceMappingURL=app_admin_settings_page_tsx_b6d248a9._.js.map