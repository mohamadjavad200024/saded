module.exports=[89592,80625,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(40695),f=a.i(83497),g=a.i(50522),h=a.i(13749),i=a.i(81464),j=a.i(78987),k=a.i(32336),l=a.i(38246),m=a.i(60421),n=a.i(21366),o=a.i(89078),p=a.i(40395),q=a.i(5522),r=a.i(17171),s=a.i(30656),t=a.i(7554),u=a.i(70121),v=a.i(50104),w=a.i(25152),x=a.i(7827),y=a.i(77994),z=a.i(3688),A=a.i(30553),B=a.i(37738),C=["PageUp","PageDown"],D=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],E={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},F="Slider",[G,H,I]=(0,B.createCollection)(F),[J,K]=(0,v.createContextScope)(F,[I]),[L,M]=J(F),N=c.forwardRef((a,d)=>{let{name:e,min:f=0,max:g=100,step:h=1,orientation:i="horizontal",disabled:j=!1,minStepsBetweenThumbs:k=0,defaultValue:l=[f],value:m,onValueChange:n=()=>{},onValueCommit:o=()=>{},inverted:p=!1,form:q,...r}=a,u=c.useRef(new Set),v=c.useRef(0),x="horizontal"===i,[y=[],z]=(0,w.useControllableState)({prop:m,defaultProp:l,onChange:a=>{let b=[...u.current];b[v.current]?.focus(),n(a)}}),A=c.useRef(y);function B(a,b,{commit:c}={commit:!1}){let d,e=(String(h).split(".")[1]||"").length,i=Math.round((Math.round((a-f)/h)*h+f)*(d=Math.pow(10,e)))/d,j=(0,s.clamp)(i,[f,g]);z((a=[])=>{let d=function(a=[],b,c){let d=[...a];return d[c]=b,d.sort((a,b)=>a-b)}(a,j,b);if(!function(a,b){if(b>0)return Math.min(...a.slice(0,-1).map((b,c)=>a[c+1]-b))>=b;return!0}(d,k*h))return a;{v.current=d.indexOf(j);let b=String(d)!==String(a);return b&&c&&o(d),b?d:a}})}return(0,b.jsx)(L,{scope:a.__scopeSlider,name:e,disabled:j,min:f,max:g,valueIndexToChangeRef:v,thumbs:u.current,values:y,orientation:i,form:q,children:(0,b.jsx)(G.Provider,{scope:a.__scopeSlider,children:(0,b.jsx)(G.Slot,{scope:a.__scopeSlider,children:(0,b.jsx)(x?Q:R,{"aria-disabled":j,"data-disabled":j?"":void 0,...r,ref:d,onPointerDown:(0,t.composeEventHandlers)(r.onPointerDown,()=>{j||(A.current=y)}),min:f,max:g,inverted:p,onSlideStart:j?void 0:function(a){let b=function(a,b){if(1===a.length)return 0;let c=a.map(a=>Math.abs(a-b)),d=Math.min(...c);return c.indexOf(d)}(y,a);B(a,b)},onSlideMove:j?void 0:function(a){B(a,v.current)},onSlideEnd:j?void 0:function(){let a=A.current[v.current];y[v.current]!==a&&o(y)},onHomeKeyDown:()=>!j&&B(f,0,{commit:!0}),onEndKeyDown:()=>!j&&B(g,y.length-1,{commit:!0}),onStepKeyDown:({event:a,direction:b})=>{if(!j){let c=C.includes(a.key)||a.shiftKey&&D.includes(a.key),d=v.current;B(y[d]+h*(c?10:1)*b,d,{commit:!0})}}})})})})});N.displayName=F;var[O,P]=J(F,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Q=c.forwardRef((a,d)=>{let{min:e,max:f,dir:g,inverted:h,onSlideStart:i,onSlideMove:j,onSlideEnd:k,onStepKeyDown:l,...m}=a,[n,o]=c.useState(null),p=(0,u.useComposedRefs)(d,a=>o(a)),q=c.useRef(void 0),r=(0,x.useDirection)(g),s="ltr"===r,t=s&&!h||!s&&h;function v(a){let b=q.current||n.getBoundingClientRect(),c=aa([0,b.width],t?[e,f]:[f,e]);return q.current=b,c(a-b.left)}return(0,b.jsx)(O,{scope:a.__scopeSlider,startEdge:t?"left":"right",endEdge:t?"right":"left",direction:t?1:-1,size:"width",children:(0,b.jsx)(S,{dir:r,"data-orientation":"horizontal",...m,ref:p,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:a=>{let b=v(a.clientX);i?.(b)},onSlideMove:a=>{let b=v(a.clientX);j?.(b)},onSlideEnd:()=>{q.current=void 0,k?.()},onStepKeyDown:a=>{let b=E[t?"from-left":"from-right"].includes(a.key);l?.({event:a,direction:b?-1:1})}})})}),R=c.forwardRef((a,d)=>{let{min:e,max:f,inverted:g,onSlideStart:h,onSlideMove:i,onSlideEnd:j,onStepKeyDown:k,...l}=a,m=c.useRef(null),n=(0,u.useComposedRefs)(d,m),o=c.useRef(void 0),p=!g;function q(a){let b=o.current||m.current.getBoundingClientRect(),c=aa([0,b.height],p?[f,e]:[e,f]);return o.current=b,c(a-b.top)}return(0,b.jsx)(O,{scope:a.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:(0,b.jsx)(S,{"data-orientation":"vertical",...l,ref:n,style:{...l.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:a=>{let b=q(a.clientY);h?.(b)},onSlideMove:a=>{let b=q(a.clientY);i?.(b)},onSlideEnd:()=>{o.current=void 0,j?.()},onStepKeyDown:a=>{let b=E[p?"from-bottom":"from-top"].includes(a.key);k?.({event:a,direction:b?-1:1})}})})}),S=c.forwardRef((a,c)=>{let{__scopeSlider:d,onSlideStart:e,onSlideMove:f,onSlideEnd:g,onHomeKeyDown:h,onEndKeyDown:i,onStepKeyDown:j,...k}=a,l=M(F,d);return(0,b.jsx)(A.Primitive.span,{...k,ref:c,onKeyDown:(0,t.composeEventHandlers)(a.onKeyDown,a=>{"Home"===a.key?(h(a),a.preventDefault()):"End"===a.key?(i(a),a.preventDefault()):C.concat(D).includes(a.key)&&(j(a),a.preventDefault())}),onPointerDown:(0,t.composeEventHandlers)(a.onPointerDown,a=>{let b=a.target;b.setPointerCapture(a.pointerId),a.preventDefault(),l.thumbs.has(b)?b.focus():e(a)}),onPointerMove:(0,t.composeEventHandlers)(a.onPointerMove,a=>{a.target.hasPointerCapture(a.pointerId)&&f(a)}),onPointerUp:(0,t.composeEventHandlers)(a.onPointerUp,a=>{let b=a.target;b.hasPointerCapture(a.pointerId)&&(b.releasePointerCapture(a.pointerId),g(a))})})}),T="SliderTrack",U=c.forwardRef((a,c)=>{let{__scopeSlider:d,...e}=a,f=M(T,d);return(0,b.jsx)(A.Primitive.span,{"data-disabled":f.disabled?"":void 0,"data-orientation":f.orientation,...e,ref:c})});U.displayName=T;var V="SliderRange",W=c.forwardRef((a,d)=>{let{__scopeSlider:e,...f}=a,g=M(V,e),h=P(V,e),i=c.useRef(null),j=(0,u.useComposedRefs)(d,i),k=g.values.length,l=g.values.map(a=>_(a,g.min,g.max)),m=k>1?Math.min(...l):0,n=100-Math.max(...l);return(0,b.jsx)(A.Primitive.span,{"data-orientation":g.orientation,"data-disabled":g.disabled?"":void 0,...f,ref:j,style:{...a.style,[h.startEdge]:m+"%",[h.endEdge]:n+"%"}})});W.displayName=V;var X="SliderThumb",Y=c.forwardRef((a,d)=>{let e=H(a.__scopeSlider),[f,g]=c.useState(null),h=(0,u.useComposedRefs)(d,a=>g(a)),i=c.useMemo(()=>f?e().findIndex(a=>a.ref.current===f):-1,[e,f]);return(0,b.jsx)(Z,{...a,ref:h,index:i})}),Z=c.forwardRef((a,d)=>{var e,f,g,h,i;let j,k,{__scopeSlider:l,index:m,name:n,...o}=a,p=M(X,l),q=P(X,l),[r,s]=c.useState(null),v=(0,u.useComposedRefs)(d,a=>s(a)),w=!r||p.form||!!r.closest("form"),x=(0,z.useSize)(r),y=p.values[m],B=void 0===y?0:_(y,p.min,p.max),C=(e=m,(f=p.values.length)>2?`Value ${e+1} of ${f}`:2===f?["Minimum","Maximum"][e]:void 0),D=x?.[q.size],E=D?(g=D,h=B,i=q.direction,k=aa([0,50],[0,j=g/2]),(j-k(h)*i)*i):0;return c.useEffect(()=>{if(r)return p.thumbs.add(r),()=>{p.thumbs.delete(r)}},[r,p.thumbs]),(0,b.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[q.startEdge]:`calc(${B}% + ${E}px)`},children:[(0,b.jsx)(G.ItemSlot,{scope:a.__scopeSlider,children:(0,b.jsx)(A.Primitive.span,{role:"slider","aria-label":a["aria-label"]||C,"aria-valuemin":p.min,"aria-valuenow":y,"aria-valuemax":p.max,"aria-orientation":p.orientation,"data-orientation":p.orientation,"data-disabled":p.disabled?"":void 0,tabIndex:p.disabled?void 0:0,...o,ref:v,style:void 0===y?{display:"none"}:a.style,onFocus:(0,t.composeEventHandlers)(a.onFocus,()=>{p.valueIndexToChangeRef.current=m})})}),w&&(0,b.jsx)($,{name:n??(p.name?p.name+(p.values.length>1?"[]":""):void 0),form:p.form,value:y},m)]})});Y.displayName=X;var $=c.forwardRef(({__scopeSlider:a,value:d,...e},f)=>{let g=c.useRef(null),h=(0,u.useComposedRefs)(g,f),i=(0,y.usePrevious)(d);return c.useEffect(()=>{let a=g.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(i!==d&&b){let c=new Event("input",{bubbles:!0});b.call(a,d),a.dispatchEvent(c)}},[i,d]),(0,b.jsx)(A.Primitive.input,{style:{display:"none"},...e,ref:h,defaultValue:d})});function _(a,b,c){return(0,s.clamp)(100/(c-b)*(a-b),[0,100])}function aa(a,b){return c=>{if(a[0]===a[1]||b[0]===b[1])return b[0];let d=(b[1]-b[0])/(a[1]-a[0]);return b[0]+d*(c-a[0])}}$.displayName="RadioBubbleInput";var ab=a.i(97895);let ac=c.forwardRef(({className:a,...c},d)=>(0,b.jsxs)(N,{ref:d,className:(0,ab.cn)("relative flex w-full touch-none select-none items-center",a),...c,children:[(0,b.jsx)(U,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,b.jsx)(W,{className:"absolute h-full bg-primary"})}),(0,b.jsx)(Y,{className:"block h-5 w-5 rounded-full border-[0.25px] border-primary/30 bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"}),(0,b.jsx)(Y,{className:"block h-5 w-5 rounded-full border-[0.25px] border-primary/30 bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));ac.displayName=N.displayName;var ad=a.i(46143),ae=a.i(7379),af=a.i(87532),ag=a.i(90166),ah=a.i(70106);let ai=(0,ah.default)("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),aj=(0,ah.default)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var ak=a.i(49814);function al(){let{setFilters:a,clearFilters:d,filters:g}=(0,m.useProductStore)(),{getActiveCategories:h,loadCategoriesFromDB:i}=(0,ak.useCategoryStore)(),[j,k]=(0,c.useState)([0,5e7]),[l,n]=(0,c.useState)([]),[o,p]=(0,c.useState)([]),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(void 0),w=(0,c.useRef)(!1),{getEnabledProducts:x}=(0,m.useProductStore)(),y=x(),z=(0,ak.useCategoryStore)(a=>a.getEnabledCategories());(0,c.useEffect)(()=>{(async()=>{try{await i(!0)}catch(a){console.error("Error loading categories:",a)}})()},[i]);let A=(0,c.useMemo)(()=>{let a=new Set;return y.forEach(b=>{b.brand&&a.add(b.brand)}),Array.from(a).sort()},[y]),B=(0,c.useMemo)(()=>{let a=new Set;return y.forEach(b=>{b.category&&a.add(b.category)}),z.forEach(b=>{b.name&&a.add(b.name)}),Array.from(a).sort()},[y,z]);(0,c.useEffect)(()=>{(void 0!==g.minPrice||void 0!==g.maxPrice)&&k([g.minPrice||0,g.maxPrice||5e7]),g.brands&&n(g.brands),g.categories&&p(g.categories),g.search&&t(g.search),void 0!==g.inStock&&v(g.inStock)},[]),(0,c.useEffect)(()=>{if(w.current)return;let b=setTimeout(()=>{let b={};j[0]>0&&(b.minPrice=j[0]),j[1]<5e7&&(b.maxPrice=j[1]),l.length>0&&(b.brands=l),o.length>0&&(b.categories=o),b.search=s.trim()||void 0,void 0!==u&&(b.inStock=u),a(b)},300);return()=>clearTimeout(b)},[j,l,o,s,u,a]);let C=a=>{n(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])},D=a=>{p(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])},E=j[0]>0||j[1]<5e7||l.length>0||o.length>0||""!==s.trim()||void 0!==u;return(0,b.jsxs)("div",{className:"space-y-4 sm:space-y-5",children:[E&&(0,b.jsx)("div",{className:"flex items-center justify-end pb-3 border-b border-border/30",children:(0,b.jsxs)(e.Button,{variant:"ghost",size:"sm",onClick:()=>{k([0,5e7]),n([]),p([]),t(""),v(void 0),d()},className:"text-xs sm:text-sm h-8 sm:h-9 text-muted-foreground hover:text-foreground",children:[(0,b.jsx)(aj,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 ml-1.5"}),"پاک کردن"]})}),(0,b.jsxs)("div",{className:"space-y-5 sm:space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2.5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(af.Search,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)(r.Label,{className:"text-sm sm:text-base font-semibold",children:"جستجو"})]}),(0,b.jsx)(q.Input,{placeholder:"جستجوی محصول...",value:s,onChange:a=>t(a.target.value),className:"h-10 sm:h-11 text-sm border-border/50 focus:border-primary"})]}),(0,b.jsx)(ae.Separator,{className:"bg-border/30"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(ag.DollarSign,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)(r.Label,{className:"text-sm sm:text-base font-semibold",children:"محدوده قیمت"})]}),(0,b.jsx)("div",{className:"px-1",children:(0,b.jsx)(ac,{value:j,onValueChange:k,max:5e7,min:0,step:1e5,className:"w-full"})}),(0,b.jsxs)("div",{className:"flex items-center justify-between bg-muted/30 rounded-lg p-3",children:[(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground mb-1",children:"حداقل"}),(0,b.jsxs)("span",{className:"text-sm sm:text-base font-semibold",children:[j[0].toLocaleString("fa-IR")," تومان"]})]}),(0,b.jsx)("div",{className:"h-8 w-px bg-border/50"}),(0,b.jsxs)("div",{className:"flex flex-col items-end",children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground mb-1",children:"حداکثر"}),(0,b.jsxs)("span",{className:"text-sm sm:text-base font-semibold",children:[j[1].toLocaleString("fa-IR")," تومان"]})]})]})]}),(0,b.jsx)(ae.Separator,{className:"bg-border/30"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(r.Label,{className:"text-sm sm:text-base font-semibold",children:"برند"}),l.length>0&&(0,b.jsx)("span",{className:"text-xs bg-primary/10 text-primary px-2 py-0.5 rounded-full",children:l.length})]}),(0,b.jsx)("div",{className:"space-y-2.5 max-h-56 overflow-y-auto pr-1",children:A.length>0?A.map(a=>(0,b.jsxs)("div",{className:`flex items-center gap-3 p-2.5 rounded-lg transition-colors cursor-pointer ${l.includes(a)?"bg-primary/10 border border-primary/20":"hover:bg-muted/50 border border-transparent"}`,onClick:()=>C(a),children:[(0,b.jsx)(ad.Checkbox,{id:a,checked:l.includes(a),onCheckedChange:()=>C(a),className:"h-4.5 w-4.5"}),(0,b.jsx)("label",{htmlFor:a,className:`text-sm font-medium leading-none cursor-pointer flex-1 ${l.includes(a)?"text-primary":"text-foreground"}`,children:a})]},a)):(0,b.jsx)("p",{className:"text-xs text-muted-foreground text-center py-4",children:"برندی یافت نشد"})})]}),(0,b.jsx)(ae.Separator,{className:"bg-border/30"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(ai,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)(r.Label,{className:"text-sm sm:text-base font-semibold",children:"دسته‌بندی"}),o.length>0&&(0,b.jsx)("span",{className:"text-xs bg-primary/10 text-primary px-2 py-0.5 rounded-full",children:o.length})]}),(0,b.jsx)("div",{className:"space-y-2.5 max-h-56 overflow-y-auto pr-1",children:B.length>0?B.map(a=>(0,b.jsxs)("div",{className:`flex items-center gap-3 p-2.5 rounded-lg transition-colors cursor-pointer ${o.includes(a)?"bg-primary/10 border border-primary/20":"hover:bg-muted/50 border border-transparent"}`,onClick:()=>D(a),children:[(0,b.jsx)(ad.Checkbox,{id:a,checked:o.includes(a),onCheckedChange:()=>D(a),className:"h-4.5 w-4.5"}),(0,b.jsx)("label",{htmlFor:a,className:`text-sm font-medium leading-none cursor-pointer flex-1 ${o.includes(a)?"text-primary":"text-foreground"}`,children:a})]},a)):(0,b.jsx)("p",{className:"text-xs text-muted-foreground text-center py-4",children:"دسته‌بندی‌ای یافت نشد"})})]}),(0,b.jsx)(ae.Separator,{className:"bg-border/30"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Package,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)(r.Label,{className:"text-sm sm:text-base font-semibold",children:"وضعیت موجودی"})]}),(0,b.jsxs)("div",{className:`flex items-center gap-3 p-2.5 rounded-lg transition-colors cursor-pointer ${!0===u?"bg-primary/10 border border-primary/20":"hover:bg-muted/50 border border-transparent"}`,onClick:()=>v(!0!==u||void 0),children:[(0,b.jsx)(ad.Checkbox,{id:"in-stock",checked:!0===u,onCheckedChange:a=>v(!!a||void 0),className:"h-4.5 w-4.5"}),(0,b.jsx)("label",{htmlFor:"in-stock",className:`text-sm font-medium leading-none cursor-pointer flex-1 ${!0===u?"text-primary":"text-foreground"}`,children:"موجود در انبار"})]})]})]})]})}a.s(["ProductFilters",()=>al],80625);var am=a.i(53071),an=a.i(74355);function ao(){return(0,b.jsx)(al,{})}function ap(){let[a,q]=(0,c.useState)(1),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(2),{getFilteredProducts:v,filters:w,getEnabledProducts:x}=(0,m.useProductStore)(),{vehicles:y,getVehicle:z,loadVehiclesFromDB:A}=(0,n.useVehicleStore)(),{settings:B,updateSettings:C}=(0,o.useAdminStore)(),[D,E]=(0,c.useState)(new Map);(0,c.useEffect)(()=>{(async()=>{try{let a=await fetch("/api/site-settings");if(a.ok){let b=await a.json();b.success&&b.data&&C(b.data,!1)}}catch(a){console.error("Error loading settings:",a)}})()},[C]);let F=B.itemsPerPage||50;(0,c.useEffect)(()=>{(async()=>{try{0===y.length&&await A();let a=new Map;y.forEach(b=>{b.id&&a.set(b.id,b)}),E(a)}catch(a){console.error("[ProductGrid] Error loading vehicles:",a)}})()},[y,A]),(0,c.useEffect)(()=>{let a=()=>{s(!1)};return window.addEventListener("closeFilterSheet",a),()=>{window.removeEventListener("closeFilterSheet",a)}},[]);let G=w&&(w.search||w.vehicle||void 0!==w.minPrice||void 0!==w.maxPrice||w.brands&&w.brands.length>0||w.categories&&w.categories.length>0||void 0!==w.inStock),{data:H,pagination:I,isLoading:J}=(0,p.useProducts)(G?w:void 0,a,F),K=(0,c.useMemo)(()=>1!==a||G?[]:x().slice(0,F),[a,G,x,F]);(0,c.useEffect)(()=>{if(H&&H.length>0){let a=m.useProductStore.getState();H.forEach(b=>{a.getProduct(b.id)||a.addProduct(b)})}},[H]);let L=(0,c.useMemo)(()=>H&&H.length>0?H.filter(a=>a.enabled):J||1!==a||G||!(K.length>0)?[]:K,[H,K,a,G,J]);(0,c.useEffect)(()=>{q(1)},[G?JSON.stringify(w):""]);let M=I?.totalPages||1,N=I?.total||L.length;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"lg:hidden fixed -left-[9999px] -top-[9999px] opacity-0 pointer-events-none",children:(0,b.jsx)(ao,{})}),(0,b.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-1 sm:px-0 mb-3 sm:mb-4",children:[(0,b.jsx)("div",{className:"text-xs sm:text-sm text-muted-foreground",children:J?"در حال بارگذاری...":0===L.length?"محصولی یافت نشد":`نمایش ${L.length} از ${N} محصول`}),(0,b.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,b.jsxs)(am.Sheet,{open:r,onOpenChange:s,children:[(0,b.jsx)(am.SheetTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",className:"lg:hidden flex items-center gap-2 h-9 w-auto sm:h-10 px-3 sm:px-4 text-xs sm:text-sm",children:[(0,b.jsx)(i.Filter,{className:"h-4 w-4 sm:h-4 sm:w-4"}),(0,b.jsx)("span",{className:"text-xs sm:text-sm",children:"فیلترها"})]})}),(0,b.jsxs)(am.SheetContent,{side:"bottom",className:"h-[85vh] sm:h-[90vh] overflow-y-auto rounded-t-2xl border-t-2 border-border",children:[(0,b.jsx)(am.SheetHeader,{className:"pb-4 border-b border-border/30",children:(0,b.jsx)(am.SheetTitle,{className:"text-right",children:(0,b.jsx)("span",{className:"text-lg sm:text-xl font-bold",children:"فیلتر محصولات"})})}),(0,b.jsx)("div",{className:"mt-6 pb-6",children:(0,b.jsx)(ao,{})})]})]}),(0,b.jsx)(e.Button,{variant:2===t?"default":"outline",size:"icon",className:"h-9 w-9 sm:h-10 sm:w-10",onClick:()=>u(2),title:"دو ستون",children:(0,b.jsxs)("svg",{className:"h-4 w-4 sm:h-5 sm:w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("rect",{x:"2.5",y:"2.5",width:"9",height:"5.5",rx:"1.2",fill:"none"}),(0,b.jsx)("rect",{x:"2.5",y:"9.5",width:"9",height:"5.5",rx:"1.2",fill:"none"}),(0,b.jsx)("rect",{x:"2.5",y:"16.5",width:"9",height:"5",rx:"1.2",fill:"none"}),(0,b.jsx)("rect",{x:"12.5",y:"2.5",width:"9",height:"5.5",rx:"1.2",fill:"none"}),(0,b.jsx)("rect",{x:"12.5",y:"9.5",width:"9",height:"5.5",rx:"1.2",fill:"none"}),(0,b.jsx)("rect",{x:"12.5",y:"16.5",width:"9",height:"5",rx:"1.2",fill:"none"})]})}),(0,b.jsx)(e.Button,{variant:3===t?"default":"outline",size:"icon",className:"h-9 w-9 sm:h-10 sm:w-10",onClick:()=>u(3),title:"سه ستون",children:(0,b.jsxs)("svg",{className:"h-4 w-4 sm:h-5 sm:w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("rect",{x:"1.5",y:"2.5",width:"6",height:"5.5",rx:"1.2",fill:"none"}),(0,b.jsx)("rect",{x:"1.5",y:"9.5",width:"6",height:"5.5",rx:"1.2",fill:"none"}),(0,b.jsx)("rect",{x:"1.5",y:"16.5",width:"6",height:"5",rx:"1.2",fill:"none"}),(0,b.jsx)("rect",{x:"9",y:"2.5",width:"6",height:"5.5",rx:"1.2",fill:"none"}),(0,b.jsx)("rect",{x:"9",y:"9.5",width:"6",height:"5.5",rx:"1.2",fill:"none"}),(0,b.jsx)("rect",{x:"9",y:"16.5",width:"6",height:"5",rx:"1.2",fill:"none"}),(0,b.jsx)("rect",{x:"16.5",y:"2.5",width:"6",height:"5.5",rx:"1.2",fill:"none"}),(0,b.jsx)("rect",{x:"16.5",y:"9.5",width:"6",height:"5.5",rx:"1.2",fill:"none"}),(0,b.jsx)("rect",{x:"16.5",y:"16.5",width:"6",height:"5",rx:"1.2",fill:"none"})]})})]})]}),J&&0===L.length?(0,b.jsx)("div",{className:`grid ${2===t?"grid-cols-2":"grid-cols-3"} gap-1 sm:gap-1.5 md:gap-2 w-full max-w-full overflow-x-hidden`,children:Array.from({length:6}).map((a,c)=>(0,b.jsx)("div",{className:"animate-pulse",children:(0,b.jsxs)(d.Card,{className:"h-full flex flex-col",children:[(0,b.jsx)(d.CardHeader,{className:"p-0",children:(0,b.jsx)("div",{className:"relative h-32 sm:h-36 md:h-40 lg:h-44 w-full bg-muted rounded-t-lg"})}),(0,b.jsxs)(d.CardContent,{className:"p-2 sm:p-3 md:p-4",children:[(0,b.jsx)("div",{className:"h-4 bg-muted rounded mb-2"}),(0,b.jsx)("div",{className:"h-3 bg-muted rounded w-2/3"})]})]})},c))}):0===L.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 sm:py-16 md:py-20 px-4",children:[(0,b.jsx)(f.Package,{className:"h-12 w-12 sm:h-16 sm:w-16 text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:"محصولی یافت نشد"}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground text-center mb-6",children:G?"هیچ محصولی با فیلترهای انتخابی یافت نشد":"در حال حاضر محصولی برای نمایش وجود ندارد"}),(0,b.jsx)("div",{className:"flex justify-center w-full max-w-md",children:(0,b.jsx)(l.default,{href:"/chat",className:"w-full sm:w-auto",children:(0,b.jsxs)(e.Button,{variant:"default",className:"w-full sm:w-auto h-11 sm:h-12 px-6 sm:px-8 text-sm sm:text-base",children:[(0,b.jsx)(j.ShoppingBag,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),"ثبت سفارش مستقیم"]})})}),(0,b.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground text-center mt-4 max-w-md",children:"می‌توانید قطعه درخواستی خود را برای ما ارسال کنید تا برایتان تهیه و ارسال کنیم"})]}):(0,b.jsx)("div",{className:`grid ${2===t?"grid-cols-2":"grid-cols-3"} gap-1 sm:gap-1.5 md:gap-2 w-full max-w-full overflow-x-hidden`,children:L.map(a=>{let c;return(0,b.jsx)(l.default,{href:`/products/${a.id}`,children:(0,b.jsxs)(d.Card,{className:"flex flex-col border border-border/30 hover:border-border/50 hover:shadow-lg transition-all active:scale-95 relative overflow-hidden cursor-pointer h-full",children:[(0,b.jsx)(d.CardHeader,{className:"p-0 relative",children:(0,b.jsxs)("div",{className:"relative h-32 sm:h-36 md:h-40 lg:h-44 w-full bg-muted rounded-t-lg overflow-hidden",children:[(0,b.jsx)(k.SafeImage,{src:Array.isArray(a.images)&&a.images.length>0?a.images[0]:null,alt:`${a.name}${a.brand?` - برند ${a.brand}`:""}${a.category?` - دسته‌بندی ${a.category}`:""}`,fill:!0,className:"w-full h-full",priority:!0,loading:"eager",sizes:2===t?"(max-width: 640px) 50vw, (max-width: 768px) 50vw, (max-width: 1024px) 50vw, 50vw":"(max-width: 640px) 33vw, (max-width: 768px) 33vw, (max-width: 1024px) 33vw, 33vw",productId:a.id}),a.originalPrice&&a.originalPrice>a.price&&(0,b.jsxs)("div",{className:"absolute top-1 right-1 sm:top-1.5 sm:right-1.5 bg-red-500 text-white text-[10px] sm:text-xs font-bold px-1.5 sm:px-2 py-0.5 sm:py-1 rounded shadow-sm z-10",children:[Math.round((a.originalPrice-a.price)/a.originalPrice*100),"%"]})]})}),(0,b.jsxs)(d.CardContent,{className:"flex-1 p-2 sm:p-3 md:p-4",children:[(0,b.jsx)("h3",{className:"font-medium mb-1.5 sm:mb-2 hover:text-primary transition-colors line-clamp-2 text-xs sm:text-sm md:text-base leading-snug",children:a.name}),a.vehicle&&((c=D.get(a.vehicle)||z(a.vehicle))?(0,b.jsxs)("div",{className:"flex items-center gap-1 mb-0.5 sm:mb-1 text-[8px] sm:text-[9px] text-muted-foreground line-clamp-1",children:[(0,b.jsx)(an.VehicleLogo,{logo:c.logo,alt:c.name,size:"sm",fallbackIcon:!1,className:"flex-shrink-0"}),(0,b.jsx)("span",{className:"font-medium truncate",children:c.name}),a.model&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-[7px]",children:"•"}),(0,b.jsx)("span",{className:"truncate",children:a.model})]})]}):null),(0,b.jsxs)("div",{className:"flex flex-col gap-1 sm:gap-1.5",children:[(0,b.jsxs)("span",{className:"text-xs sm:text-sm md:text-base font-bold text-primary",children:[a.price.toLocaleString("fa-IR")," ",(0,b.jsx)("span",{className:"text-[10px] sm:text-xs",children:"تومان"})]}),a.originalPrice&&a.originalPrice>a.price&&(0,b.jsx)("span",{className:"text-[10px] sm:text-xs text-muted-foreground line-through",children:a.originalPrice.toLocaleString("fa-IR")})]})]})]})},a.id)})}),M>1&&(0,b.jsxs)("div",{className:"flex items-center justify-center gap-1 sm:gap-2 mt-6 sm:mt-8 px-2",children:[(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",className:"h-9 sm:h-10 text-xs sm:text-sm",onClick:()=>q(a=>Math.max(1,a-1)),disabled:1===a||J,children:[(0,b.jsx)(g.ChevronRight,{className:"h-4 w-4 ml-1"}),"قبلی"]}),(0,b.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,M)},(c,d)=>{let f;return f=M<=5||a<=3?d+1:a>=M-2?M-4+d:a-2+d,(0,b.jsx)(e.Button,{variant:a===f?"default":"outline",size:"sm",className:"h-9 sm:h-10 text-xs sm:text-sm min-w-[2.5rem]",onClick:()=>q(f),disabled:J,children:f},f)})}),(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",className:"h-9 sm:h-10 text-xs sm:text-sm",onClick:()=>q(a=>Math.min(M,a+1)),disabled:a===M||J,children:["بعدی",(0,b.jsx)(h.ChevronLeft,{className:"h-4 w-4 mr-1"})]})]})]})]})}a.s(["ProductGrid",()=>ap],89592)}];

//# sourceMappingURL=components_product_product-grid_tsx_7eb9b687._.js.map