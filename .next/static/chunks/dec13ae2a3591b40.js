(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55900,e=>{"use strict";let t=(0,e.i(75254).default)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);e.s(["ChevronUp",()=>t],55900)},62870,e=>{"use strict";let t,s,a;var r=e.i(43476),l=e.i(71645),i=e.i(74080),n=e.i(70152),o=e.i(81140),d=e.i(75830),c=e.i(20783),m=e.i(30030),u=e.i(86318),p=e.i(26330),h=e.i(3536),x=e.i(65491),f=e.i(10772),g=e.i(53660),v=e.i(74606),j=e.i(48425),y=Symbol("radix.slottable");function b(e){return l.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===y}var N=e.i(30207),w=e.i(69340),C=e.i(34620),S=e.i(99682),k=e.i(59411),D=e.i(86312),T=e.i(85369),I=[" ","Enter","ArrowUp","ArrowDown"],R=[" ","Enter"],P="Select",[E,M,H]=(0,d.createCollection)(P),[L,A]=(0,m.createContextScope)(P,[H,g.createPopperScope]),B=(0,g.createPopperScope)(),[F,V]=L(P),[z,O]=L(P),q=e=>{let{__scopeSelect:t,children:s,open:a,defaultOpen:i,onOpenChange:n,value:o,defaultValue:d,onValueChange:c,dir:m,name:p,autoComplete:h,disabled:x,required:v,form:j}=e,y=B(t),[b,N]=l.useState(null),[C,S]=l.useState(null),[k,D]=l.useState(!1),T=(0,u.useDirection)(m),[I,R]=(0,w.useControllableState)({prop:a,defaultProp:i??!1,onChange:n,caller:P}),[M,H]=(0,w.useControllableState)({prop:o,defaultProp:d,onChange:c,caller:P}),L=l.useRef(null),A=!b||j||!!b.closest("form"),[V,O]=l.useState(new Set),q=Array.from(V).map(e=>e.props.value).join(";");return(0,r.jsx)(g.Root,{...y,children:(0,r.jsxs)(F,{required:v,scope:t,trigger:b,onTriggerChange:N,valueNode:C,onValueNodeChange:S,valueNodeHasChildren:k,onValueNodeHasChildrenChange:D,contentId:(0,f.useId)(),value:M,onValueChange:H,open:I,onOpenChange:R,dir:T,triggerPointerDownPosRef:L,disabled:x,children:[(0,r.jsx)(E.Provider,{scope:t,children:(0,r.jsx)(z,{scope:e.__scopeSelect,onNativeOptionAdd:l.useCallback(e=>{O(t=>new Set(t).add(e))},[]),onNativeOptionRemove:l.useCallback(e=>{O(t=>{let s=new Set(t);return s.delete(e),s})},[]),children:s})}),A?(0,r.jsxs)(eD,{"aria-hidden":!0,required:v,tabIndex:-1,name:p,autoComplete:h,value:M,onChange:e=>H(e.target.value),disabled:x,form:j,children:[void 0===M?(0,r.jsx)("option",{value:""}):null,Array.from(V)]},q):null]})})};q.displayName=P;var _="SelectTrigger",K=l.forwardRef((e,t)=>{let{__scopeSelect:s,disabled:a=!1,...i}=e,n=B(s),d=V(_,s),m=d.disabled||a,u=(0,c.useComposedRefs)(t,d.onTriggerChange),p=M(s),h=l.useRef("touch"),[x,f,v]=eI(e=>{let t=p().filter(e=>!e.disabled),s=t.find(e=>e.value===d.value),a=eR(t,e,s);void 0!==a&&d.onValueChange(a.value)}),y=e=>{m||(d.onOpenChange(!0),v()),e&&(d.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,r.jsx)(g.Anchor,{asChild:!0,...n,children:(0,r.jsx)(j.Primitive.button,{type:"button",role:"combobox","aria-controls":d.contentId,"aria-expanded":d.open,"aria-required":d.required,"aria-autocomplete":"none",dir:d.dir,"data-state":d.open?"open":"closed",disabled:m,"data-disabled":m?"":void 0,"data-placeholder":eT(d.value)?"":void 0,...i,ref:u,onClick:(0,o.composeEventHandlers)(i.onClick,e=>{e.currentTarget.focus(),"mouse"!==h.current&&y(e)}),onPointerDown:(0,o.composeEventHandlers)(i.onPointerDown,e=>{h.current=e.pointerType;let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(y(e),e.preventDefault())}),onKeyDown:(0,o.composeEventHandlers)(i.onKeyDown,e=>{let t=""!==x.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||f(e.key),(!t||" "!==e.key)&&I.includes(e.key)&&(y(),e.preventDefault())})})})});K.displayName=_;var U="SelectValue",W=l.forwardRef((e,t)=>{let{__scopeSelect:s,className:a,style:l,children:i,placeholder:n="",...o}=e,d=V(U,s),{onValueNodeHasChildrenChange:m}=d,u=void 0!==i,p=(0,c.useComposedRefs)(t,d.onValueNodeChange);return(0,C.useLayoutEffect)(()=>{m(u)},[m,u]),(0,r.jsx)(j.Primitive.span,{...o,ref:p,style:{pointerEvents:"none"},children:eT(d.value)?(0,r.jsx)(r.Fragment,{children:n}):i})});W.displayName=U;var $=l.forwardRef((e,t)=>{let{__scopeSelect:s,children:a,...l}=e;return(0,r.jsx)(j.Primitive.span,{"aria-hidden":!0,...l,ref:t,children:a||"▼"})});$.displayName="SelectIcon";var G=e=>(0,r.jsx)(v.Portal,{asChild:!0,...e});G.displayName="SelectPortal";var X="SelectContent",Y=l.forwardRef((e,t)=>{let s=V(X,e.__scopeSelect),[a,n]=l.useState();return((0,C.useLayoutEffect)(()=>{n(new DocumentFragment)},[]),s.open)?(0,r.jsx)(ee,{...e,ref:t}):a?i.createPortal((0,r.jsx)(Z,{scope:e.__scopeSelect,children:(0,r.jsx)(E.Slot,{scope:e.__scopeSelect,children:(0,r.jsx)("div",{children:e.children})})}),a):null});Y.displayName=X;var[Z,J]=L(X),Q=((a=l.forwardRef((e,t)=>{let{children:s,...a}=e;if(l.isValidElement(s)){var r;let e,i,n=(r=s,(i=(e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?r.ref:(i=(e=Object.getOwnPropertyDescriptor(r,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?r.props.ref:r.props.ref||r.ref),o=function(e,t){let s={...t};for(let a in t){let r=e[a],l=t[a];/^on[A-Z]/.test(a)?r&&l?s[a]=(...e)=>{let t=l(...e);return r(...e),t}:r&&(s[a]=r):"style"===a?s[a]={...r,...l}:"className"===a&&(s[a]=[r,l].filter(Boolean).join(" "))}return{...e,...s}}(a,s.props);return s.type!==l.Fragment&&(o.ref=t?(0,c.composeRefs)(t,n):n),l.cloneElement(s,o)}return l.Children.count(s)>1?l.Children.only(null):null})).displayName="SelectContent.RemoveScroll.SlotClone",t=a,(s=l.forwardRef((e,s)=>{let{children:a,...i}=e,n=l.Children.toArray(a),o=n.find(b);if(o){let e=o.props.children,a=n.map(t=>t!==o?t:l.Children.count(e)>1?l.Children.only(null):l.isValidElement(e)?e.props.children:null);return(0,r.jsx)(t,{...i,ref:s,children:l.isValidElement(e)?l.cloneElement(e,void 0,a):null})}return(0,r.jsx)(t,{...i,ref:s,children:a})})).displayName="SelectContent.RemoveScroll.Slot",s),ee=l.forwardRef((e,t)=>{let{__scopeSelect:s,position:a="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:n,onPointerDownOutside:d,side:m,sideOffset:u,align:f,alignOffset:g,arrowPadding:v,collisionBoundary:j,collisionPadding:y,sticky:b,hideWhenDetached:N,avoidCollisions:w,...C}=e,S=V(X,s),[k,I]=l.useState(null),[R,P]=l.useState(null),E=(0,c.useComposedRefs)(t,e=>I(e)),[H,L]=l.useState(null),[A,B]=l.useState(null),F=M(s),[z,O]=l.useState(!1),q=l.useRef(!1);l.useEffect(()=>{if(k)return(0,D.hideOthers)(k)},[k]),(0,h.useFocusGuards)();let _=l.useCallback(e=>{let[t,...s]=F().map(e=>e.ref.current),[a]=s.slice(-1),r=document.activeElement;for(let s of e)if(s===r||(s?.scrollIntoView({block:"nearest"}),s===t&&R&&(R.scrollTop=0),s===a&&R&&(R.scrollTop=R.scrollHeight),s?.focus(),document.activeElement!==r))return},[F,R]),K=l.useCallback(()=>_([H,k]),[_,H,k]);l.useEffect(()=>{z&&K()},[z,K]);let{onOpenChange:U,triggerPointerDownPosRef:W}=S;l.useEffect(()=>{if(k){let e={x:0,y:0},t=t=>{e={x:Math.abs(Math.round(t.pageX)-(W.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(W.current?.y??0))}},s=s=>{e.x<=10&&e.y<=10?s.preventDefault():k.contains(s.target)||U(!1),document.removeEventListener("pointermove",t),W.current=null};return null!==W.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",s,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",s,{capture:!0})}}},[k,U,W]),l.useEffect(()=>{let e=()=>U(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[U]);let[$,G]=eI(e=>{let t=F().filter(e=>!e.disabled),s=t.find(e=>e.ref.current===document.activeElement),a=eR(t,e,s);a&&setTimeout(()=>a.ref.current.focus())}),Y=l.useCallback((e,t,s)=>{let a=!q.current&&!s;(void 0!==S.value&&S.value===t||a)&&(L(e),a&&(q.current=!0))},[S.value]),J=l.useCallback(()=>k?.focus(),[k]),ee=l.useCallback((e,t,s)=>{let a=!q.current&&!s;(void 0!==S.value&&S.value===t||a)&&B(e)},[S.value]),ea="popper"===a?es:et,er=ea===es?{side:m,sideOffset:u,align:f,alignOffset:g,arrowPadding:v,collisionBoundary:j,collisionPadding:y,sticky:b,hideWhenDetached:N,avoidCollisions:w}:{};return(0,r.jsx)(Z,{scope:s,content:k,viewport:R,onViewportChange:P,itemRefCallback:Y,selectedItem:H,onItemLeave:J,itemTextRefCallback:ee,focusSelectedItem:K,selectedItemText:A,position:a,isPositioned:z,searchRef:$,children:(0,r.jsx)(T.RemoveScroll,{as:Q,allowPinchZoom:!0,children:(0,r.jsx)(x.FocusScope,{asChild:!0,trapped:S.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:(0,o.composeEventHandlers)(i,e=>{S.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:(0,r.jsx)(p.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:n,onPointerDownOutside:d,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:(0,r.jsx)(ea,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:e=>e.preventDefault(),...C,...er,onPlaced:()=>O(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:(0,o.composeEventHandlers)(C.onKeyDown,e=>{let t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||G(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=F().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){let s=e.target,a=t.indexOf(s);t=t.slice(a+1)}setTimeout(()=>_(t)),e.preventDefault()}})})})})})})});ee.displayName="SelectContentImpl";var et=l.forwardRef((e,t)=>{let{__scopeSelect:s,onPlaced:a,...i}=e,o=V(X,s),d=J(X,s),[m,u]=l.useState(null),[p,h]=l.useState(null),x=(0,c.useComposedRefs)(t,e=>h(e)),f=M(s),g=l.useRef(!1),v=l.useRef(!0),{viewport:y,selectedItem:b,selectedItemText:N,focusSelectedItem:w}=d,S=l.useCallback(()=>{if(o.trigger&&o.valueNode&&m&&p&&y&&b&&N){let e=o.trigger.getBoundingClientRect(),t=p.getBoundingClientRect(),s=o.valueNode.getBoundingClientRect(),r=N.getBoundingClientRect();if("rtl"!==o.dir){let a=r.left-t.left,l=s.left-a,i=e.left-l,o=e.width+i,d=Math.max(o,t.width),c=window.innerWidth-10,u=(0,n.clamp)(l,[10,Math.max(10,c-d)]);m.style.minWidth=o+"px",m.style.left=u+"px"}else{let a=t.right-r.right,l=window.innerWidth-s.right-a,i=window.innerWidth-e.right-l,o=e.width+i,d=Math.max(o,t.width),c=window.innerWidth-10,u=(0,n.clamp)(l,[10,Math.max(10,c-d)]);m.style.minWidth=o+"px",m.style.right=u+"px"}let l=f(),i=window.innerHeight-20,d=y.scrollHeight,c=window.getComputedStyle(p),u=parseInt(c.borderTopWidth,10),h=parseInt(c.paddingTop,10),x=parseInt(c.borderBottomWidth,10),v=u+h+d+parseInt(c.paddingBottom,10)+x,j=Math.min(5*b.offsetHeight,v),w=window.getComputedStyle(y),C=parseInt(w.paddingTop,10),S=parseInt(w.paddingBottom,10),k=e.top+e.height/2-10,D=b.offsetHeight/2,T=u+h+(b.offsetTop+D);if(T<=k){let e=l.length>0&&b===l[l.length-1].ref.current;m.style.bottom="0px";let t=Math.max(i-k,D+(e?S:0)+(p.clientHeight-y.offsetTop-y.offsetHeight)+x);m.style.height=T+t+"px"}else{let e=l.length>0&&b===l[0].ref.current;m.style.top="0px";let t=Math.max(k,u+y.offsetTop+(e?C:0)+D);m.style.height=t+(v-T)+"px",y.scrollTop=T-k+y.offsetTop}m.style.margin="10px 0",m.style.minHeight=j+"px",m.style.maxHeight=i+"px",a?.(),requestAnimationFrame(()=>g.current=!0)}},[f,o.trigger,o.valueNode,m,p,y,b,N,o.dir,a]);(0,C.useLayoutEffect)(()=>S(),[S]);let[k,D]=l.useState();(0,C.useLayoutEffect)(()=>{p&&D(window.getComputedStyle(p).zIndex)},[p]);let T=l.useCallback(e=>{e&&!0===v.current&&(S(),w?.(),v.current=!1)},[S,w]);return(0,r.jsx)(ea,{scope:s,contentWrapper:m,shouldExpandOnScrollRef:g,onScrollButtonChange:T,children:(0,r.jsx)("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:(0,r.jsx)(j.Primitive.div,{...i,ref:x,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});et.displayName="SelectItemAlignedPosition";var es=l.forwardRef((e,t)=>{let{__scopeSelect:s,align:a="start",collisionPadding:l=10,...i}=e,n=B(s);return(0,r.jsx)(g.Content,{...n,...i,ref:t,align:a,collisionPadding:l,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});es.displayName="SelectPopperPosition";var[ea,er]=L(X,{}),el="SelectViewport",ei=l.forwardRef((e,t)=>{let{__scopeSelect:s,nonce:a,...i}=e,n=J(el,s),d=er(el,s),m=(0,c.useComposedRefs)(t,n.onViewportChange),u=l.useRef(0);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),(0,r.jsx)(E.Slot,{scope:s,children:(0,r.jsx)(j.Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:m,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:(0,o.composeEventHandlers)(i.onScroll,e=>{let t=e.currentTarget,{contentWrapper:s,shouldExpandOnScrollRef:a}=d;if(a?.current&&s){let e=Math.abs(u.current-t.scrollTop);if(e>0){let a=window.innerHeight-20,r=Math.max(parseFloat(s.style.minHeight),parseFloat(s.style.height));if(r<a){let l=r+e,i=Math.min(a,l),n=l-i;s.style.height=i+"px","0px"===s.style.bottom&&(t.scrollTop=n>0?n:0,s.style.justifyContent="flex-end")}}}u.current=t.scrollTop})})})]})});ei.displayName=el;var en="SelectGroup",[eo,ed]=L(en);l.forwardRef((e,t)=>{let{__scopeSelect:s,...a}=e,l=(0,f.useId)();return(0,r.jsx)(eo,{scope:s,id:l,children:(0,r.jsx)(j.Primitive.div,{role:"group","aria-labelledby":l,...a,ref:t})})}).displayName=en;var ec="SelectLabel",em=l.forwardRef((e,t)=>{let{__scopeSelect:s,...a}=e,l=ed(ec,s);return(0,r.jsx)(j.Primitive.div,{id:l.id,...a,ref:t})});em.displayName=ec;var eu="SelectItem",[ep,eh]=L(eu),ex=l.forwardRef((e,t)=>{let{__scopeSelect:s,value:a,disabled:i=!1,textValue:n,...d}=e,m=V(eu,s),u=J(eu,s),p=m.value===a,[h,x]=l.useState(n??""),[g,v]=l.useState(!1),y=(0,c.useComposedRefs)(t,e=>u.itemRefCallback?.(e,a,i)),b=(0,f.useId)(),N=l.useRef("touch"),w=()=>{i||(m.onValueChange(a),m.onOpenChange(!1))};if(""===a)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,r.jsx)(ep,{scope:s,value:a,disabled:i,textId:b,isSelected:p,onItemTextChange:l.useCallback(e=>{x(t=>t||(e?.textContent??"").trim())},[]),children:(0,r.jsx)(E.ItemSlot,{scope:s,value:a,disabled:i,textValue:h,children:(0,r.jsx)(j.Primitive.div,{role:"option","aria-labelledby":b,"data-highlighted":g?"":void 0,"aria-selected":p&&g,"data-state":p?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...d,ref:y,onFocus:(0,o.composeEventHandlers)(d.onFocus,()=>v(!0)),onBlur:(0,o.composeEventHandlers)(d.onBlur,()=>v(!1)),onClick:(0,o.composeEventHandlers)(d.onClick,()=>{"mouse"!==N.current&&w()}),onPointerUp:(0,o.composeEventHandlers)(d.onPointerUp,()=>{"mouse"===N.current&&w()}),onPointerDown:(0,o.composeEventHandlers)(d.onPointerDown,e=>{N.current=e.pointerType}),onPointerMove:(0,o.composeEventHandlers)(d.onPointerMove,e=>{N.current=e.pointerType,i?u.onItemLeave?.():"mouse"===N.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:(0,o.composeEventHandlers)(d.onPointerLeave,e=>{e.currentTarget===document.activeElement&&u.onItemLeave?.()}),onKeyDown:(0,o.composeEventHandlers)(d.onKeyDown,e=>{(u.searchRef?.current===""||" "!==e.key)&&(R.includes(e.key)&&w()," "===e.key&&e.preventDefault())})})})})});ex.displayName=eu;var ef="SelectItemText",eg=l.forwardRef((e,t)=>{let{__scopeSelect:s,className:a,style:n,...o}=e,d=V(ef,s),m=J(ef,s),u=eh(ef,s),p=O(ef,s),[h,x]=l.useState(null),f=(0,c.useComposedRefs)(t,e=>x(e),u.onItemTextChange,e=>m.itemTextRefCallback?.(e,u.value,u.disabled)),g=h?.textContent,v=l.useMemo(()=>(0,r.jsx)("option",{value:u.value,disabled:u.disabled,children:g},u.value),[u.disabled,u.value,g]),{onNativeOptionAdd:y,onNativeOptionRemove:b}=p;return(0,C.useLayoutEffect)(()=>(y(v),()=>b(v)),[y,b,v]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.Primitive.span,{id:u.textId,...o,ref:f}),u.isSelected&&d.valueNode&&!d.valueNodeHasChildren?i.createPortal(o.children,d.valueNode):null]})});eg.displayName=ef;var ev="SelectItemIndicator",ej=l.forwardRef((e,t)=>{let{__scopeSelect:s,...a}=e;return eh(ev,s).isSelected?(0,r.jsx)(j.Primitive.span,{"aria-hidden":!0,...a,ref:t}):null});ej.displayName=ev;var ey="SelectScrollUpButton",eb=l.forwardRef((e,t)=>{let s=J(ey,e.__scopeSelect),a=er(ey,e.__scopeSelect),[i,n]=l.useState(!1),o=(0,c.useComposedRefs)(t,a.onScrollButtonChange);return(0,C.useLayoutEffect)(()=>{if(s.viewport&&s.isPositioned){let e=function(){n(t.scrollTop>0)},t=s.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[s.viewport,s.isPositioned]),i?(0,r.jsx)(eC,{...e,ref:o,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=s;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});eb.displayName=ey;var eN="SelectScrollDownButton",ew=l.forwardRef((e,t)=>{let s=J(eN,e.__scopeSelect),a=er(eN,e.__scopeSelect),[i,n]=l.useState(!1),o=(0,c.useComposedRefs)(t,a.onScrollButtonChange);return(0,C.useLayoutEffect)(()=>{if(s.viewport&&s.isPositioned){let e=function(){let e=t.scrollHeight-t.clientHeight;n(Math.ceil(t.scrollTop)<e)},t=s.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[s.viewport,s.isPositioned]),i?(0,r.jsx)(eC,{...e,ref:o,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=s;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});ew.displayName=eN;var eC=l.forwardRef((e,t)=>{let{__scopeSelect:s,onAutoScroll:a,...i}=e,n=J("SelectScrollButton",s),d=l.useRef(null),c=M(s),m=l.useCallback(()=>{null!==d.current&&(window.clearInterval(d.current),d.current=null)},[]);return l.useEffect(()=>()=>m(),[m]),(0,C.useLayoutEffect)(()=>{let e=c().find(e=>e.ref.current===document.activeElement);e?.ref.current?.scrollIntoView({block:"nearest"})},[c]),(0,r.jsx)(j.Primitive.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:(0,o.composeEventHandlers)(i.onPointerDown,()=>{null===d.current&&(d.current=window.setInterval(a,50))}),onPointerMove:(0,o.composeEventHandlers)(i.onPointerMove,()=>{n.onItemLeave?.(),null===d.current&&(d.current=window.setInterval(a,50))}),onPointerLeave:(0,o.composeEventHandlers)(i.onPointerLeave,()=>{m()})})}),eS=l.forwardRef((e,t)=>{let{__scopeSelect:s,...a}=e;return(0,r.jsx)(j.Primitive.div,{"aria-hidden":!0,...a,ref:t})});eS.displayName="SelectSeparator";var ek="SelectArrow";l.forwardRef((e,t)=>{let{__scopeSelect:s,...a}=e,l=B(s),i=V(ek,s),n=J(ek,s);return i.open&&"popper"===n.position?(0,r.jsx)(g.Arrow,{...l,...a,ref:t}):null}).displayName=ek;var eD=l.forwardRef(({__scopeSelect:e,value:t,...s},a)=>{let i=l.useRef(null),n=(0,c.useComposedRefs)(a,i),o=(0,S.usePrevious)(t);return l.useEffect(()=>{let e=i.current;if(!e)return;let s=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(o!==t&&s){let a=new Event("change",{bubbles:!0});s.call(e,t),e.dispatchEvent(a)}},[o,t]),(0,r.jsx)(j.Primitive.select,{...s,style:{...k.VISUALLY_HIDDEN_STYLES,...s.style},ref:n,defaultValue:t})});function eT(e){return""===e||void 0===e}function eI(e){let t=(0,N.useCallbackRef)(e),s=l.useRef(""),a=l.useRef(0),r=l.useCallback(e=>{let r=s.current+e;t(r),function e(t){s.current=t,window.clearTimeout(a.current),""!==t&&(a.current=window.setTimeout(()=>e(""),1e3))}(r)},[t]),i=l.useCallback(()=>{s.current="",window.clearTimeout(a.current)},[]);return l.useEffect(()=>()=>window.clearTimeout(a.current),[]),[s,r,i]}function eR(e,t,s){var a,r;let l=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,i=s?e.indexOf(s):-1,n=(a=e,r=Math.max(i,0),a.map((e,t)=>a[(r+t)%a.length]));1===l.length&&(n=n.filter(e=>e!==s));let o=n.find(e=>e.textValue.toLowerCase().startsWith(l.toLowerCase()));return o!==s?o:void 0}eD.displayName="SelectBubbleInput";var eP=e.i(43531),eE=e.i(64659),eM=e.i(55900),eH=e.i(47163);let eL=l.forwardRef(({className:e,children:t,...s},a)=>(0,r.jsxs)(K,{ref:a,className:(0,eH.cn)("flex h-10 w-full items-center justify-between rounded-md border-[0.25px] border-input/30 bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer [&>span]:line-clamp-1",e),...s,children:[t,(0,r.jsx)($,{asChild:!0,children:(0,r.jsx)(eE.ChevronDown,{className:"h-4 w-4 opacity-50"})})]}));eL.displayName=K.displayName;let eA=l.forwardRef(({className:e,...t},s)=>(0,r.jsx)(eb,{ref:s,className:(0,eH.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(eM.ChevronUp,{className:"h-4 w-4"})}));eA.displayName=eb.displayName;let eB=l.forwardRef(({className:e,...t},s)=>(0,r.jsx)(ew,{ref:s,className:(0,eH.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(eE.ChevronDown,{className:"h-4 w-4"})}));eB.displayName=ew.displayName;let eF=l.forwardRef(({className:e,children:t,position:s="popper",...a},l)=>(0,r.jsx)(G,{children:(0,r.jsxs)(Y,{ref:l,className:(0,eH.cn)("relative z-[10000] max-h-96 min-w-[8rem] overflow-hidden rounded-md border-[0.25px] border-border/30 bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...a,children:[(0,r.jsx)(eA,{}),(0,r.jsx)(ei,{className:(0,eH.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,r.jsx)(eB,{})]})}));eF.displayName=Y.displayName,l.forwardRef(({className:e,...t},s)=>(0,r.jsx)(em,{ref:s,className:(0,eH.cn)("py-1.5 pr-8 pl-2 text-sm font-semibold",e),...t})).displayName=em.displayName;let eV=l.forwardRef(({className:e,children:t,...s},a)=>(0,r.jsxs)(ex,{ref:a,className:(0,eH.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pr-8 pl-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[(0,r.jsx)(eg,{className:"flex-1",children:t}),(0,r.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(ej,{children:(0,r.jsx)(eP.Check,{className:"h-4 w-4"})})})]}));eV.displayName=ex.displayName,l.forwardRef(({className:e,...t},s)=>(0,r.jsx)(eS,{ref:s,className:(0,eH.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=eS.displayName,e.s(["Select",()=>q,"SelectContent",()=>eF,"SelectItem",()=>eV,"SelectTrigger",()=>eL,"SelectValue",()=>W],62870)},12426,e=>{"use strict";let t=(0,e.i(75254).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],12426)},99682,e=>{"use strict";var t=e.i(71645);function s(e){let s=t.useRef({value:e,previous:e});return t.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}e.s(["usePrevious",()=>s])},7233,e=>{"use strict";let t=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},19036,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(81140),r=e.i(20783),l=e.i(30030),i=e.i(69340),n=e.i(99682),o=e.i(35804),d=e.i(48425),c="Switch",[m,u]=(0,l.createContextScope)(c),[p,h]=m(c),x=s.forwardRef((e,l)=>{let{__scopeSwitch:n,name:o,checked:m,defaultChecked:u,required:h,disabled:x,value:f="on",onCheckedChange:g,form:y,...b}=e,[N,w]=s.useState(null),C=(0,r.useComposedRefs)(l,e=>w(e)),S=s.useRef(!1),k=!N||y||!!N.closest("form"),[D,T]=(0,i.useControllableState)({prop:m,defaultProp:u??!1,onChange:g,caller:c});return(0,t.jsxs)(p,{scope:n,checked:D,disabled:x,children:[(0,t.jsx)(d.Primitive.button,{type:"button",role:"switch","aria-checked":D,"aria-required":h,"data-state":j(D),"data-disabled":x?"":void 0,disabled:x,value:f,...b,ref:C,onClick:(0,a.composeEventHandlers)(e.onClick,e=>{T(e=>!e),k&&(S.current=e.isPropagationStopped(),S.current||e.stopPropagation())})}),k&&(0,t.jsx)(v,{control:N,bubbles:!S.current,name:o,value:f,checked:D,required:h,disabled:x,form:y,style:{transform:"translateX(-100%)"}})]})});x.displayName=c;var f="SwitchThumb",g=s.forwardRef((e,s)=>{let{__scopeSwitch:a,...r}=e,l=h(f,a);return(0,t.jsx)(d.Primitive.span,{"data-state":j(l.checked),"data-disabled":l.disabled?"":void 0,...r,ref:s})});g.displayName=f;var v=s.forwardRef(({__scopeSwitch:e,control:a,checked:l,bubbles:i=!0,...d},c)=>{let m=s.useRef(null),u=(0,r.useComposedRefs)(m,c),p=(0,n.usePrevious)(l),h=(0,o.useSize)(a);return s.useEffect(()=>{let e=m.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(p!==l&&t){let s=new Event("click",{bubbles:i});t.call(e,l),e.dispatchEvent(s)}},[p,l,i]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:l,...d,tabIndex:-1,ref:u,style:{...d.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function j(e){return e?"checked":"unchecked"}v.displayName="SwitchBubbleInput";var y=e.i(47163);let b=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)(x,{className:(0,y.cn)("peer inline-flex h-6 w-12 shrink-0 cursor-pointer items-center rounded-full border-2 transition-all duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-green-500 data-[state=checked]:border-green-500 data-[state=unchecked]:bg-muted data-[state=unchecked]:border-transparent px-0.5",e),...s,ref:a,children:(0,t.jsx)(g,{className:(0,y.cn)("pointer-events-none block h-5 w-5 rounded-full shadow-lg ring-0 transition-all duration-200 ease-in-out data-[state=checked]:-translate-x-6 data-[state=unchecked]:translate-x-0 data-[state=checked]:bg-primary-foreground data-[state=unchecked]:bg-foreground")})}));b.displayName=x.displayName,e.s(["Switch",()=>b],19036)},72520,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},88511,e=>{"use strict";let t=(0,e.i(75254).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],88511)},47627,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(47163);let r=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:r,className:(0,a.cn)("w-full caption-bottom text-sm",e),...s})}));r.displayName="Table";let l=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("thead",{ref:r,className:(0,a.cn)("[&_tr]:border-b border-border/30",e),...s}));l.displayName="TableHeader";let i=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("tbody",{ref:r,className:(0,a.cn)("[&_tr:last-child]:border-0",e),...s}));i.displayName="TableBody",s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("tfoot",{ref:r,className:(0,a.cn)("border-t border-border/30 bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";let n=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("tr",{ref:r,className:(0,a.cn)("border-b border-border/30 transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));n.displayName="TableRow";let o=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("th",{ref:r,className:(0,a.cn)("h-12 px-4 text-right align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));o.displayName="TableHead";let d=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("td",{ref:r,className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));d.displayName="TableCell",s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("caption",{ref:r,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption",e.s(["Table",()=>r,"TableBody",()=>i,"TableCell",()=>d,"TableHead",()=>o,"TableHeader",()=>l,"TableRow",()=>n])},41071,e=>{"use strict";let t=(0,e.i(75254).default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>t],41071)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},27341,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(81140),r=e.i(30030),l=e.i(42727),i=e.i(96626),n=e.i(48425),o=e.i(86318),d=e.i(69340),c=e.i(10772),m="Tabs",[u,p]=(0,r.createContextScope)(m,[l.createRovingFocusGroupScope]),h=(0,l.createRovingFocusGroupScope)(),[x,f]=u(m),g=s.forwardRef((e,s)=>{let{__scopeTabs:a,value:r,onValueChange:l,defaultValue:i,orientation:u="horizontal",dir:p,activationMode:h="automatic",...f}=e,g=(0,o.useDirection)(p),[v,j]=(0,d.useControllableState)({prop:r,onChange:l,defaultProp:i??"",caller:m});return(0,t.jsx)(x,{scope:a,baseId:(0,c.useId)(),value:v,onValueChange:j,orientation:u,dir:g,activationMode:h,children:(0,t.jsx)(n.Primitive.div,{dir:g,"data-orientation":u,...f,ref:s})})});g.displayName=m;var v="TabsList",j=s.forwardRef((e,s)=>{let{__scopeTabs:a,loop:r=!0,...i}=e,o=f(v,a),d=h(a);return(0,t.jsx)(l.Root,{asChild:!0,...d,orientation:o.orientation,dir:o.dir,loop:r,children:(0,t.jsx)(n.Primitive.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:s})})});j.displayName=v;var y="TabsTrigger",b=s.forwardRef((e,s)=>{let{__scopeTabs:r,value:i,disabled:o=!1,...d}=e,c=f(y,r),m=h(r),u=C(c.baseId,i),p=S(c.baseId,i),x=i===c.value;return(0,t.jsx)(l.Item,{asChild:!0,...m,focusable:!o,active:x,children:(0,t.jsx)(n.Primitive.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":p,"data-state":x?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:u,...d,ref:s,onMouseDown:(0,a.composeEventHandlers)(e.onMouseDown,e=>{o||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(i)}),onKeyDown:(0,a.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(i)}),onFocus:(0,a.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==c.activationMode;x||o||!e||c.onValueChange(i)})})})});b.displayName=y;var N="TabsContent",w=s.forwardRef((e,a)=>{let{__scopeTabs:r,value:l,forceMount:o,children:d,...c}=e,m=f(N,r),u=C(m.baseId,l),p=S(m.baseId,l),h=l===m.value,x=s.useRef(h);return s.useEffect(()=>{let e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(i.Presence,{present:o||h,children:({present:s})=>(0,t.jsx)(n.Primitive.div,{"data-state":h?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":u,hidden:!s,id:p,tabIndex:0,...c,ref:a,style:{...e.style,animationDuration:x.current?"0s":void 0},children:s&&d})})});function C(e,t){return`${e}-trigger-${t}`}function S(e,t){return`${e}-content-${t}`}w.displayName=N;var k=e.i(47163);let D=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)(j,{ref:a,className:(0,k.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));D.displayName=j.displayName;let T=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)(b,{ref:a,className:(0,k.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));T.displayName=b.displayName;let I=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)(w,{ref:a,className:(0,k.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));I.displayName=w.displayName,e.s(["Tabs",()=>g,"TabsContent",()=>I,"TabsList",()=>D,"TabsTrigger",()=>T],27341)},10524,e=>{"use strict";var t=e.i(43476),s=e.i(53145),a=e.i(94814),r=e.i(65638),l=e.i(67881),i=e.i(23750),n=e.i(10708),o=e.i(84762),d=e.i(19036),c=e.i(70065),m=e.i(24327),u=e.i(17513),p=e.i(20682),h=e.i(18566),x=e.i(71645),f=e.i(37727),g=e.i(31278),v=e.i(43432),j=e.i(88844),y=e.i(94179),b=e.i(62870),N=e.i(30374),w=e.i(47627),C=e.i(36361),S=e.i(7233),k=e.i(27612),D=e.i(88511);function T({supplier:e,onUpdate:s}){let{products:a}=(0,C.useProductStore)(),{getActiveCategories:r}=(0,u.useCategoryStore)(),{toast:o}=(0,p.useToast)(),[d,c]=(0,x.useState)(!1),[m,h]=(0,x.useState)(null),[f,g]=(0,x.useState)(""),[v,j]=(0,x.useState)(0),[T,I]=(0,x.useState)(void 0),[R,P]=(0,x.useState)("all"),E=r(),M=e.products||[],H=(0,x.useMemo)(()=>{let t=a.filter(t=>t.category&&e.categories.includes(t.category));if("all"!==R&&(t=t.filter(e=>e.category===R)),!m){let e=M.map(e=>e.productId);t=t.filter(t=>!e.includes(t.id))}return t},[a,e.categories,R,M,m]),L=(0,x.useMemo)(()=>{let e={};return M.forEach(t=>{e[t.category]||(e[t.category]=[]),e[t.category].push(t)}),e},[M]);return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"مدیریت محصولات"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"محصولات و تعداد موجودی که این تامین‌کننده می‌تواند تامین کند"})]}),(0,t.jsxs)(l.Button,{onClick:()=>c(!0),size:"sm",children:[(0,t.jsx)(S.Plus,{className:"ml-2 h-4 w-4"}),"افزودن محصول"]})]}),0===M.length?(0,t.jsx)("div",{className:"text-center py-8 border border-dashed rounded-lg",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"هیچ محصولی اضافه نشده است"})}):(0,t.jsx)("div",{className:"space-y-4",children:Object.entries(L).map(([e,a])=>(0,t.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-muted/50 px-4 py-2 border-b",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(y.Badge,{variant:"secondary",children:e}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[a.length," محصول - مجموع:"," ",new Intl.NumberFormat("fa-IR").format(a.reduce((e,t)=>e+t.quantity,0))," ","عدد"]})]})}),(0,t.jsxs)(w.Table,{children:[(0,t.jsx)(w.TableHeader,{children:(0,t.jsxs)(w.TableRow,{children:[(0,t.jsx)(w.TableHead,{children:"محصول"}),(0,t.jsx)(w.TableHead,{children:"تعداد"}),(0,t.jsx)(w.TableHead,{children:"قیمت واحد"}),(0,t.jsx)(w.TableHead,{className:"text-left",children:"عملیات"})]})}),(0,t.jsx)(w.TableBody,{children:a.map(e=>(0,t.jsxs)(w.TableRow,{children:[(0,t.jsx)(w.TableCell,{className:"font-medium",children:e.productName}),(0,t.jsxs)(w.TableCell,{children:[new Intl.NumberFormat("fa-IR").format(e.quantity)," عدد"]}),(0,t.jsx)(w.TableCell,{children:e.unitPrice?`${new Intl.NumberFormat("fa-IR").format(e.unitPrice)} تومان`:"-"}),(0,t.jsx)(w.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:()=>{h(e),g(e.productId),j(e.quantity),I(e.unitPrice),c(!0)},children:(0,t.jsx)(D.Edit,{className:"h-4 w-4"})}),(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:()=>{var t;return t=e.productId,void(s(M.filter(e=>e.productId!==t)),o({title:"موفق",description:"محصول حذف شد"}))},children:(0,t.jsx)(k.Trash2,{className:"h-4 w-4 text-destructive"})})]})})]},e.productId))})]})]},e))}),(0,t.jsx)(N.Dialog,{open:d,onOpenChange:c,children:(0,t.jsxs)(N.DialogContent,{className:"max-w-md",children:[(0,t.jsxs)(N.DialogHeader,{children:[(0,t.jsx)(N.DialogTitle,{children:m?"ویرایش محصول":"افزودن محصول"}),(0,t.jsx)(N.DialogDescription,{children:"محصول و تعداد موجودی را انتخاب کنید"})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{children:"فیلتر دسته‌بندی"}),(0,t.jsxs)(b.Select,{value:R,onValueChange:P,children:[(0,t.jsx)(b.SelectTrigger,{children:(0,t.jsx)(b.SelectValue,{placeholder:"همه دسته‌بندی‌ها"})}),(0,t.jsxs)(b.SelectContent,{children:[(0,t.jsx)(b.SelectItem,{value:"all",children:"همه دسته‌بندی‌ها"}),E.map(e=>(0,t.jsx)(b.SelectItem,{value:e.name,children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{children:"محصول *"}),(0,t.jsxs)(b.Select,{value:f,onValueChange:g,children:[(0,t.jsx)(b.SelectTrigger,{children:(0,t.jsx)(b.SelectValue,{placeholder:"انتخاب محصول"})}),(0,t.jsx)(b.SelectContent,{children:H.map(e=>(0,t.jsxs)(b.SelectItem,{value:e.id,children:[e.name," (",e.category,")"]},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{children:"تعداد *"}),(0,t.jsx)(i.Input,{type:"number",min:"1",value:v||"",onChange:e=>j(parseInt(e.target.value)||0),placeholder:"تعداد موجودی"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{children:"قیمت واحد (اختیاری)"}),(0,t.jsx)(i.Input,{type:"number",min:"0",value:T||"",onChange:e=>I(e.target.value?parseFloat(e.target.value):void 0),placeholder:"قیمت واحد از تامین‌کننده"})]})]}),(0,t.jsxs)(N.DialogFooter,{children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>{g(""),j(0),I(void 0),h(null),c(!1)},children:"انصراف"}),(0,t.jsx)(l.Button,{onClick:()=>{if(!f||v<=0)return void o({title:"خطا",description:"لطفاً محصول و تعداد را وارد کنید",variant:"destructive"});let e=a.find(e=>e.id===f);if(!e)return;let t={productId:e.id,productName:e.name,category:e.category||"",quantity:v,unitPrice:T||void 0};m?(s(M.map(e=>e.productId===m.productId?t:e)),o({title:"موفق",description:"محصول به‌روزرسانی شد"})):(s([...M,t]),o({title:"موفق",description:"محصول اضافه شد"})),g(""),j(0),I(void 0),h(null),c(!1)},children:m?"ذخیره تغییرات":"افزودن"})]})]})})]})}let I=r.object({name:r.string().min(1,"نام تامین‌کننده الزامی است"),phone:r.string().min(1,"شماره تماس الزامی است"),email:r.string().email("ایمیل معتبر نیست").optional().or(r.literal("")),categories:r.array(r.string()).min(1,"حداقل یک دسته‌بندی الزامی است"),notes:r.string().optional(),isActive:r.boolean(),lowStockThreshold:r.number().min(0).optional()});function R({supplier:e,onSuccess:r}){let b=(0,h.useRouter)(),{addSupplier:N,updateSupplier:w}=(0,m.useSupplierStore)(),{getActiveCategories:C,loadCategoriesFromDB:S}=(0,u.useCategoryStore)(),{toast:k}=(0,p.useToast)(),D=C(),[R,P]=(0,x.useState)(e?.categories||[]);(0,x.useEffect)(()=>{(async()=>{try{await S()}catch(e){console.error("Error loading categories:",e)}})()},[S]);let[E,M]=(0,x.useState)(e?.products||[]),{register:H,handleSubmit:L,formState:{errors:A,isSubmitting:B},setValue:F,watch:V}=(0,s.useForm)({resolver:(0,a.zodResolver)(I),defaultValues:e?{name:e.name,phone:e.phone,email:e.email||"",categories:e.categories,notes:e.notes||"",isActive:e.isActive,lowStockThreshold:e.lowStockThreshold||10}:{name:"",phone:"",email:"",categories:[],notes:"",isActive:!0,lowStockThreshold:10}}),z=V("isActive"),O=e=>{let t=R.includes(e)?R.filter(t=>t!==e):[...R,e];P(t),F("categories",t)},q=async t=>{try{if(0===R.length)return void k({title:"خطا",description:"حداقل یک دسته‌بندی باید انتخاب شود",variant:"destructive"});let s={...t,categories:R,products:E,email:t.email||void 0,notes:t.notes||void 0};e?(w(e.id,s),k({title:"موفق",description:"تامین‌کننده با موفقیت به‌روزرسانی شد"})):(N(s),k({title:"موفق",description:"تامین‌کننده با موفقیت اضافه شد"})),r?.(),b.push("/admin/suppliers")}catch(e){k({title:"خطا",description:"خطایی رخ داد. لطفاً دوباره تلاش کنید.",variant:"destructive"})}};return(0,t.jsxs)("form",{onSubmit:L(q),className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)(c.Card,{className:"shadow-sm",children:[(0,t.jsx)(c.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,t.jsxs)(c.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(v.Phone,{className:"h-5 w-5 text-primary"}),"اطلاعات تماس"]})}),(0,t.jsxs)(c.CardContent,{className:"space-y-4 pt-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"name",children:"نام تامین‌کننده *"}),(0,t.jsx)(i.Input,{id:"name",...H("name"),placeholder:"نام تامین‌کننده"}),A.name&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:A.name.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"phone",children:"شماره تماس *"}),(0,t.jsx)(i.Input,{id:"phone",...H("phone"),placeholder:"09123456789",type:"tel"}),A.phone&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:A.phone.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"email",children:"ایمیل"}),(0,t.jsx)(i.Input,{id:"email",...H("email"),placeholder:"example@email.com",type:"email"}),A.email&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:A.email.message})]})]})]}),(0,t.jsxs)(c.Card,{className:"shadow-sm",children:[(0,t.jsx)(c.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,t.jsxs)(c.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(j.Package,{className:"h-5 w-5 text-primary"}),"دسته‌بندی‌ها و تنظیمات"]})}),(0,t.jsxs)(c.CardContent,{className:"space-y-4 pt-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{children:"دسته‌بندی محصولات *"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2 p-3 border border-border/30 rounded-lg min-h-[120px]",children:D.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>O(e.name),className:`
                      p-2 rounded text-sm text-right transition-colors
                      ${R.includes(e.name)?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}
                    `,children:e.name},e.id))}),R.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:R.map(e=>(0,t.jsxs)(y.Badge,{variant:"default",className:"gap-1",children:[e,(0,t.jsx)("button",{type:"button",onClick:()=>O(e),className:"ml-1 hover:opacity-70",children:(0,t.jsx)(f.X,{className:"h-3 w-3"})})]},e))}),A.categories&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:A.categories.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"lowStockThreshold",children:"حد آستانه موجودی کم (عدد)"}),(0,t.jsx)(i.Input,{id:"lowStockThreshold",type:"number",...H("lowStockThreshold",{valueAsNumber:!0}),placeholder:"10"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"وقتی موجودی محصولات به این عدد یا کمتر برسد، هشدار نمایش داده می‌شود"})]})]})]})]}),(0,t.jsxs)(c.Card,{className:"shadow-sm",children:[(0,t.jsx)(c.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,t.jsx)(c.CardTitle,{children:"یادداشت‌ها"})}),(0,t.jsx)(c.CardContent,{className:"pt-6",children:(0,t.jsx)(o.Textarea,{...H("notes"),placeholder:"یادداشت‌های اضافی درباره این تامین‌کننده...",rows:4})})]}),(0,t.jsxs)(c.Card,{className:"shadow-sm",children:[(0,t.jsx)(c.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,t.jsxs)(c.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(j.Package,{className:"h-5 w-5 text-primary"}),"مدیریت محصولات"]})}),(0,t.jsx)(c.CardContent,{className:"pt-6",children:(0,t.jsx)(T,{supplier:{...e,categories:R,products:E},onUpdate:M})})]}),(0,t.jsxs)(c.Card,{className:"shadow-sm",children:[(0,t.jsx)(c.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,t.jsx)(c.CardTitle,{children:"وضعیت"})}),(0,t.jsx)(c.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(n.Label,{children:"فعال"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"تامین‌کننده فعال است و می‌تواند محصولات را تامین کند"})]}),(0,t.jsx)(d.Switch,{checked:z,onCheckedChange:e=>F("isActive",e)})]})})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-4 pt-4 border-t border-border/30",children:[(0,t.jsx)(l.Button,{type:"button",variant:"outline",onClick:()=>b.back(),size:"lg",children:"انصراف"}),(0,t.jsx)(l.Button,{type:"submit",disabled:B,size:"lg",className:"min-w-[140px]",children:B?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.Loader2,{className:"ml-2 h-4 w-4 animate-spin"}),"در حال ذخیره..."]}):e?"ذخیره تغییرات":"افزودن تامین‌کننده"})]})]})}e.s(["SupplierForm",()=>R],10524)},4270,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),r=e.i(10524),l=e.i(24327),i=e.i(67881),n=e.i(94179),o=e.i(30374),d=e.i(53145),c=e.i(94814),m=e.i(65638),u=e.i(23750),p=e.i(10708),h=e.i(84762),x=e.i(62870),f=e.i(70065),g=e.i(36361),v=e.i(20682),j=e.i(7233),y=e.i(31278),b=e.i(88844),N=e.i(27612);let w=m.object({items:m.array(m.object({productId:m.string().min(1,"محصول الزامی است"),productName:m.string().min(1,"نام محصول الزامی است"),quantity:m.number().min(1,"تعداد باید بیشتر از صفر باشد"),unitPrice:m.number().min(0,"قیمت واحد باید مثبت باشد")})).min(1,"حداقل یک محصول الزامی است"),totalAmount:m.number().min(0,"مبلغ کل باید مثبت باشد"),paymentMethod:m.enum(["cash","check"]),checkDetails:m.object({checkNumber:m.string().min(1,"شماره چک الزامی است"),bankName:m.string().min(1,"نام بانک الزامی است"),dueDate:m.string().min(1,"تاریخ سررسید الزامی است")}).optional(),orderDate:m.string().min(1,"تاریخ سفارش الزامی است"),deliveryDate:m.string().min(1,"تاریخ تحویل الزامی است"),paymentDate:m.string().optional(),notes:m.string().optional()}).refine(e=>"check"!==e.paymentMethod||e.checkDetails?.checkNumber&&e.checkDetails?.bankName&&e.checkDetails?.dueDate,{message:"در صورت انتخاب پرداخت چکی، جزئیات چک الزامی است",path:["checkDetails"]});function C({supplierId:e,transaction:a,onSuccess:r,onCancel:l}){let{products:n}=(0,g.useProductStore)(),{toast:o}=(0,v.useToast)(),[m,C]=(0,s.useState)(!1),{register:S,handleSubmit:k,formState:{errors:D},control:T,watch:I,setValue:R}=(0,d.useForm)({resolver:(0,c.zodResolver)(w),defaultValues:a?{items:a.items.map(e=>({productId:e.productId,productName:e.productName,quantity:e.quantity,unitPrice:e.unitPrice})),totalAmount:a.totalAmount,paymentMethod:a.paymentMethod,checkDetails:a.checkDetails?{checkNumber:a.checkDetails.checkNumber,bankName:a.checkDetails.bankName,dueDate:"string"==typeof a.checkDetails.dueDate?a.checkDetails.dueDate.split("T")[0]:new Date(a.checkDetails.dueDate).toISOString().split("T")[0]}:void 0,orderDate:"string"==typeof a.orderDate?a.orderDate.split("T")[0]:new Date(a.orderDate).toISOString().split("T")[0],deliveryDate:"string"==typeof a.deliveryDate?a.deliveryDate.split("T")[0]:new Date(a.deliveryDate).toISOString().split("T")[0],paymentDate:a.paymentDate?"string"==typeof a.paymentDate?a.paymentDate.split("T")[0]:new Date(a.paymentDate).toISOString().split("T")[0]:"",notes:a.notes||""}:{items:[{productId:"",productName:"",quantity:1,unitPrice:0}],totalAmount:0,paymentMethod:"cash",orderDate:new Date().toISOString().split("T")[0],deliveryDate:new Date().toISOString().split("T")[0],notes:""}}),{fields:P,append:E,remove:M}=(0,d.useFieldArray)({control:T,name:"items"}),H=I("paymentMethod"),L=I("items"),A=()=>{let e=L.reduce((e,t)=>e+(t.quantity||0)*(t.unitPrice||0),0);return R("totalAmount",e),e},B=async e=>{C(!0);try{let t={items:e.items.map(e=>({productId:e.productId,productName:e.productName,quantity:e.quantity,unitPrice:e.unitPrice})),totalAmount:e.totalAmount,paymentMethod:e.paymentMethod,checkDetails:"check"===e.paymentMethod&&e.checkDetails?{checkNumber:e.checkDetails.checkNumber,bankName:e.checkDetails.bankName,dueDate:new Date(e.checkDetails.dueDate)}:void 0,orderDate:new Date(e.orderDate),deliveryDate:new Date(e.deliveryDate),paymentDate:e.paymentDate?new Date(e.paymentDate):void 0,notes:e.notes||void 0};r(t)}catch(e){o({title:"خطا",description:"خطایی در ذخیره تراکنش رخ داد",variant:"destructive"})}finally{C(!1)}};return(0,t.jsxs)("form",{onSubmit:k(B),className:"space-y-6",children:[(0,t.jsxs)(f.Card,{className:"shadow-sm",children:[(0,t.jsx)(f.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,t.jsxs)(f.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(b.Package,{className:"h-5 w-5 text-primary"}),"محصولات تحویل‌شده"]})}),(0,t.jsxs)(f.CardContent,{className:"pt-6 space-y-4",children:[P.map((e,s)=>(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-4 p-4 border border-border/30 rounded-lg",children:[(0,t.jsxs)("div",{className:"col-span-12 md:col-span-4 space-y-2",children:[(0,t.jsx)(p.Label,{children:"محصول *"}),(0,t.jsxs)(x.Select,{value:L[s]?.productId||"",onValueChange:e=>{let t;(t=n.find(t=>t.id===e))&&(R(`items.${s}.productId`,t.id),R(`items.${s}.productName`,t.name),R(`items.${s}.unitPrice`,t.price||0),A())},children:[(0,t.jsx)(x.SelectTrigger,{children:(0,t.jsx)(x.SelectValue,{placeholder:"انتخاب محصول"})}),(0,t.jsx)(x.SelectContent,{children:n.map(e=>(0,t.jsx)(x.SelectItem,{value:e.id,children:e.name},e.id))})]}),D.items?.[s]?.productId&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:D.items[s]?.productId?.message})]}),(0,t.jsxs)("div",{className:"col-span-6 md:col-span-3 space-y-2",children:[(0,t.jsx)(p.Label,{children:"تعداد *"}),(0,t.jsx)(u.Input,{type:"number",min:"1",...S(`items.${s}.quantity`,{valueAsNumber:!0,onChange:()=>A()})}),D.items?.[s]?.quantity&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:D.items[s]?.quantity?.message})]}),(0,t.jsxs)("div",{className:"col-span-6 md:col-span-3 space-y-2",children:[(0,t.jsx)(p.Label,{children:"قیمت واحد (تومان) *"}),(0,t.jsx)(u.Input,{type:"number",min:"0",step:"0.01",...S(`items.${s}.unitPrice`,{valueAsNumber:!0,onChange:()=>A()})}),D.items?.[s]?.unitPrice&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:D.items[s]?.unitPrice?.message})]}),(0,t.jsx)("div",{className:"col-span-12 md:col-span-2 flex items-end",children:P.length>1&&(0,t.jsx)(i.Button,{type:"button",variant:"ghost",size:"icon",onClick:()=>{M(s),A()},className:"text-destructive",children:(0,t.jsx)(N.Trash2,{className:"h-4 w-4"})})})]},e.id)),(0,t.jsxs)(i.Button,{type:"button",variant:"outline",onClick:()=>E({productId:"",productName:"",quantity:1,unitPrice:0}),className:"w-full",children:[(0,t.jsx)(j.Plus,{className:"ml-2 h-4 w-4"}),"افزودن محصول"]})]})]}),(0,t.jsxs)(f.Card,{className:"shadow-sm",children:[(0,t.jsx)(f.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,t.jsx)(f.CardTitle,{children:"مبلغ کل"})}),(0,t.jsx)(f.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{children:"مبلغ کل (تومان) *"}),(0,t.jsx)(u.Input,{type:"number",min:"0",step:"0.01",...S("totalAmount",{valueAsNumber:!0}),readOnly:!0,className:"text-lg font-bold"}),D.totalAmount&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:D.totalAmount.message})]})})]}),(0,t.jsxs)(f.Card,{className:"shadow-sm",children:[(0,t.jsx)(f.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,t.jsx)(f.CardTitle,{children:"روش پرداخت"})}),(0,t.jsxs)(f.CardContent,{className:"pt-6 space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{children:"نوع پرداخت *"}),(0,t.jsxs)(x.Select,{value:H,onValueChange:e=>R("paymentMethod",e),children:[(0,t.jsx)(x.SelectTrigger,{children:(0,t.jsx)(x.SelectValue,{})}),(0,t.jsxs)(x.SelectContent,{children:[(0,t.jsx)(x.SelectItem,{value:"cash",children:"نقدی"}),(0,t.jsx)(x.SelectItem,{value:"check",children:"چکی"})]})]}),D.paymentMethod&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:D.paymentMethod.message})]}),"check"===H&&(0,t.jsxs)("div",{className:"space-y-4 p-4 border border-border/30 rounded-lg bg-muted/30",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{children:"شماره چک *"}),(0,t.jsx)(u.Input,{...S("checkDetails.checkNumber"),placeholder:"مثال: 123456"}),D.checkDetails?.checkNumber&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:D.checkDetails.checkNumber.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{children:"نام بانک *"}),(0,t.jsx)(u.Input,{...S("checkDetails.bankName"),placeholder:"مثال: بانک ملی"}),D.checkDetails?.bankName&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:D.checkDetails.bankName.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{children:"تاریخ سررسید چک *"}),(0,t.jsx)(u.Input,{type:"date",...S("checkDetails.dueDate")}),D.checkDetails?.dueDate&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:D.checkDetails.dueDate.message})]})]})]})]}),(0,t.jsxs)(f.Card,{className:"shadow-sm",children:[(0,t.jsx)(f.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,t.jsx)(f.CardTitle,{children:"تاریخ‌ها"})}),(0,t.jsx)(f.CardContent,{className:"pt-6 space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{children:"تاریخ سفارش *"}),(0,t.jsx)(u.Input,{type:"date",...S("orderDate")}),D.orderDate&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:D.orderDate.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{children:"تاریخ تحویل *"}),(0,t.jsx)(u.Input,{type:"date",...S("deliveryDate")}),D.deliveryDate&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:D.deliveryDate.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{children:"تاریخ پرداخت"}),(0,t.jsx)(u.Input,{type:"date",...S("paymentDate")}),D.paymentDate&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:D.paymentDate.message})]})]})})]}),(0,t.jsxs)(f.Card,{className:"shadow-sm",children:[(0,t.jsx)(f.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,t.jsx)(f.CardTitle,{children:"یادداشت‌ها"})}),(0,t.jsx)(f.CardContent,{className:"pt-6",children:(0,t.jsx)(h.Textarea,{...S("notes"),placeholder:"یادداشت‌های اضافی درباره این تراکنش...",rows:4})})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-4 pt-4 border-t border-border/30",children:[l&&(0,t.jsx)(i.Button,{type:"button",variant:"outline",onClick:l,size:"lg",children:"انصراف"}),(0,t.jsx)(i.Button,{type:"submit",disabled:m,size:"lg",className:"min-w-[140px]",children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Loader2,{className:"ml-2 h-4 w-4 animate-spin"}),"در حال ذخیره..."]}):a?"ذخیره تغییرات":"افزودن تراکنش"})]})]})}var S=e.i(63415),k=e.i(41071),D=e.i(88511),T=e.i(87316),I=e.i(12426),R=e.i(75254);let P=(0,R.default)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var E=e.i(61659);let M=(0,R.default)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);var H=e.i(45919),L=e.i(29865);function A({transaction:e,onEdit:a,onDelete:r}){let[l,o]=(0,s.useState)(!1),d=e=>{try{return(0,H.format)(new Date(e),"yyyy/MM/dd",{locale:L.faIR})}catch{return"-"}},c=e=>new Intl.NumberFormat("fa-IR").format(e),m=e.items.reduce((e,t)=>e+t.quantity,0);return(0,t.jsxs)(f.Card,{className:"hover:shadow-md transition-shadow border-border/30",children:[(0,t.jsx)(f.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsx)("div",{className:"flex-1 space-y-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,t.jsx)(P,{className:"h-5 w-5 text-primary"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("h3",{className:"font-semibold",children:["تراکنش #",e.id.slice(-8)]}),(0,t.jsx)(n.Badge,{variant:"cash"===e.paymentMethod?"success":"warning",className:"text-xs",children:"cash"===e.paymentMethod?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M,{className:"h-3 w-3 ml-1"}),"نقدی"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(E.CreditCard,{className:"h-3 w-3 ml-1"}),"چکی"]})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mt-1 text-xs text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(T.Calendar,{className:"h-3 w-3"}),"تحویل: ",d(e.deliveryDate)]}),e.paymentDate&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(T.Calendar,{className:"h-3 w-3"}),"پرداخت: ",d(e.paymentDate)]})]})]})]})}),(0,t.jsxs)(S.DropdownMenu,{children:[(0,t.jsx)(S.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,t.jsx)(k.MoreHorizontal,{className:"h-4 w-4"})})}),(0,t.jsxs)(S.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(S.DropdownMenuLabel,{children:"عملیات"}),(0,t.jsx)(S.DropdownMenuSeparator,{}),(0,t.jsxs)(S.DropdownMenuItem,{onClick:()=>a(e),children:[(0,t.jsx)(D.Edit,{className:"ml-2 h-4 w-4"}),"ویرایش"]}),(0,t.jsx)(S.DropdownMenuSeparator,{}),(0,t.jsxs)(S.DropdownMenuItem,{className:"text-destructive",onClick:()=>r(e.id),children:[(0,t.jsx)(N.Trash2,{className:"ml-2 h-4 w-4"}),"حذف"]})]})]})]})}),(0,t.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(I.DollarSign,{className:"h-5 w-5 text-primary"}),(0,t.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"مبلغ کل"})]}),(0,t.jsxs)("span",{className:"text-xl font-bold",children:[c(e.totalAmount)," تومان"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(b.Package,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"تعداد محصولات"})]}),(0,t.jsx)("div",{className:"text-lg font-semibold",children:e.items.length})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(b.Package,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"تعداد کل"})]}),(0,t.jsxs)("div",{className:"text-lg font-semibold",children:[c(m)," عدد"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"محصولات"}),e.items.length>3&&(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>o(!l),children:l?"بستن":"مشاهده همه"})]}),(0,t.jsx)("div",{className:"space-y-2",children:e.items.slice(0,l?e.items.length:3).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,t.jsx)(b.Package,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-sm",children:e.productName})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(n.Badge,{variant:"outline",className:"text-xs",children:[c(e.quantity)," عدد"]}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:[c(e.unitPrice)," تومان"]})]})]},s))})]}),"check"===e.paymentMethod&&e.checkDetails&&(0,t.jsxs)("div",{className:"pt-3 border-t border-border/30 space-y-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-muted-foreground block",children:"جزئیات چک:"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"شماره چک:"}),(0,t.jsx)("div",{className:"font-medium",children:e.checkDetails.checkNumber})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"بانک:"}),(0,t.jsx)("div",{className:"font-medium",children:e.checkDetails.bankName})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"تاریخ سررسید:"}),(0,t.jsxs)("div",{className:"flex items-center gap-1 font-medium",children:[(0,t.jsx)(T.Calendar,{className:"h-3 w-3"}),d(e.checkDetails.dueDate)]})]})]})]}),(0,t.jsx)("div",{className:"pt-3 border-t border-border/30",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground block mb-1",children:"تاریخ سفارش"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(T.Calendar,{className:"h-3 w-3"}),d(e.orderDate)]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground block mb-1",children:"تاریخ تحویل"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(T.Calendar,{className:"h-3 w-3"}),d(e.deliveryDate)]})]})]})}),e.notes&&(0,t.jsxs)("div",{className:"pt-3 border-t border-border/30",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-muted-foreground block mb-1",children:"یادداشت:"}),(0,t.jsx)("p",{className:"text-sm",children:e.notes})]})]})]})}function B({supplier:e,onUpdate:a}){let{addSupplierTransaction:r,updateSupplierTransaction:d,deleteSupplierTransaction:c}=(0,l.useSupplierStore)(),{toast:m}=(0,v.useToast)(),[u,p]=(0,s.useState)(!1),[h,x]=(0,s.useState)(null),[f,g]=(0,s.useState)(!1),[y,b]=(0,s.useState)(null),N=e.transactions||[],w=()=>{x(null),p(!0)},S=e=>{x(e),p(!0)},k=e=>{b(e),g(!0)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(P,{className:"h-5 w-5 text-primary"}),(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"تراکنش‌های تامین"}),N.length>0&&(0,t.jsx)(n.Badge,{variant:"secondary",className:"text-xs",children:N.length})]}),(0,t.jsxs)(i.Button,{onClick:w,size:"sm",children:[(0,t.jsx)(j.Plus,{className:"ml-2 h-4 w-4"}),"افزودن تراکنش"]})]}),0===N.length?(0,t.jsxs)("div",{className:"text-center py-12 border border-dashed border-border/30 rounded-lg",children:[(0,t.jsx)(P,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4 opacity-50"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"تراکنشی ثبت نشده است"}),(0,t.jsxs)(i.Button,{onClick:w,variant:"outline",size:"sm",className:"mt-4",children:[(0,t.jsx)(j.Plus,{className:"ml-2 h-4 w-4"}),"افزودن اولین تراکنش"]})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:N.sort((e,t)=>new Date(t.deliveryDate).getTime()-new Date(e.deliveryDate).getTime()).map(e=>(0,t.jsx)(A,{transaction:e,onEdit:S,onDelete:k},e.id))})]}),(0,t.jsx)(o.Dialog,{open:u,onOpenChange:p,children:(0,t.jsxs)(o.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(o.DialogHeader,{children:[(0,t.jsx)(o.DialogTitle,{children:h?"ویرایش تراکنش":"افزودن تراکنش جدید"}),(0,t.jsx)(o.DialogDescription,{children:h?"اطلاعات تراکنش را ویرایش کنید":"اطلاعات تراکنش جدید را وارد کنید"})]}),(0,t.jsx)(C,{supplierId:e.id,transaction:h||void 0,onSuccess:t=>{h?d(e.id,h.id,t):r(e.id,t),h?m({title:"موفق",description:"تراکنش با موفقیت به‌روزرسانی شد"}):m({title:"موفق",description:"تراکنش با موفقیت افزوده شد"}),p(!1),x(null),a?.()},onCancel:()=>p(!1)})]})}),(0,t.jsx)(o.Dialog,{open:f,onOpenChange:g,children:(0,t.jsxs)(o.DialogContent,{children:[(0,t.jsxs)(o.DialogHeader,{children:[(0,t.jsx)(o.DialogTitle,{children:"حذف تراکنش"}),(0,t.jsx)(o.DialogDescription,{children:"آیا از حذف این تراکنش اطمینان دارید؟ این عمل قابل بازگشت نیست."})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>g(!1),children:"انصراف"}),(0,t.jsx)(i.Button,{variant:"destructive",onClick:()=>{y&&(c(e.id,y),m({title:"موفق",description:"تراکنش با موفقیت حذف شد"}),g(!1),b(null),a?.())},children:"حذف"})]})]})})]})}var F=e.i(27341),V=e.i(72520),z=e.i(84614),O=e.i(43432),q=e.i(63488),_=e.i(22016);function K({params:e}){let{id:o}=(0,s.use)(e);(0,a.useRouter)();let d=(0,l.useSupplierStore)(e=>e.getSupplier(o)),[c,m]=(0,s.useState)(0);if(!d)return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-4",children:[(0,t.jsx)(y.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"در حال بارگذاری..."})]});let u=d.transactions||[],p=u.length;u.reduce((e,t)=>e+t.totalAmount,0);let h=d.products?.length||0;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:d.name}),(0,t.jsx)(n.Badge,{variant:d.isActive?"success":"secondary",children:d.isActive?"فعال":"غیرفعال"})]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"مدیریت اطلاعات و تراکنش‌های تامین‌کننده"})]}),(0,t.jsx)(i.Button,{variant:"outline",asChild:!0,children:(0,t.jsxs)(_.default,{href:"/admin/suppliers",children:[(0,t.jsx)(V.ArrowRight,{className:"ml-2 h-4 w-4"}),"بازگشت به لیست"]})})]}),(0,t.jsxs)(f.Card,{children:[(0,t.jsx)(f.CardHeader,{children:(0,t.jsxs)(f.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(z.User,{className:"h-5 w-5 text-primary"}),"اطلاعات تامین‌کننده"]})}),(0,t.jsx)(f.CardContent,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"تماس"}),(0,t.jsxs)("div",{className:"mt-1.5 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(O.Phone,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("a",{href:`tel:${d.phone}`,className:"text-sm hover:text-primary transition-colors",children:d.phone})]}),d.email&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(q.Mail,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("a",{href:`mailto:${d.email}`,className:"text-sm hover:text-primary transition-colors",children:d.email})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"دسته‌بندی‌ها"}),(0,t.jsx)("div",{className:"mt-1.5 flex flex-wrap gap-1.5",children:d.categories.map(e=>(0,t.jsx)(n.Badge,{variant:"secondary",className:"text-xs",children:e},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"محصولات"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(b.Package,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-lg font-semibold",children:h})]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"تراکنش‌ها"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(P,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-lg font-semibold",children:p})]})]})]}),d.notes&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"یادداشت‌ها"}),(0,t.jsx)("p",{className:"mt-1.5 text-sm text-foreground",children:d.notes})]})]})]})})]}),(0,t.jsx)(f.Card,{children:(0,t.jsx)(f.CardContent,{className:"pt-6",children:(0,t.jsxs)(F.Tabs,{defaultValue:"info",className:"w-full",children:[(0,t.jsxs)(F.TabsList,{className:"grid w-full grid-cols-2 lg:grid-cols-2",children:[(0,t.jsxs)(F.TabsTrigger,{value:"info",className:"flex items-center gap-2",children:[(0,t.jsx)(z.User,{className:"h-4 w-4"}),"اطلاعات پایه"]}),(0,t.jsxs)(F.TabsTrigger,{value:"transactions",className:"flex items-center gap-2",children:[(0,t.jsx)(P,{className:"h-4 w-4"}),"تراکنش‌ها",p>0&&(0,t.jsx)(n.Badge,{variant:"secondary",className:"text-xs",children:p})]})]}),(0,t.jsx)(F.TabsContent,{value:"info",className:"mt-6",children:(0,t.jsx)(r.SupplierForm,{supplier:d})}),(0,t.jsx)(F.TabsContent,{value:"transactions",className:"mt-6",children:(0,t.jsx)(B,{supplier:d,onUpdate:()=>{m(e=>e+1)}},c)})]})})})]})}e.s(["default",()=>K],4270)}]);