(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16715,e=>{"use strict";let s=(0,e.i(75254).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>s],16715)},1419,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(70065),a=e.i(67881),l=e.i(31278);let d=(0,e.i(75254).default)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var n=e.i(16715),c=e.i(93226),i=e.i(18566);function m(){let[e,m]=(0,t.useState)(null),[x,o]=(0,t.useState)(!0),[h,u]=(0,t.useState)(null),{user:j,isAuthenticated:p,hasCheckedAuth:b}=(0,c.useAuthStore)();(0,i.useRouter)(),(0,t.useEffect)(()=>{b&&N()},[b]);let N=async()=>{o(!0),u(null);try{let e=await fetch("/api/debug/database",{credentials:"include"}),s=await e.json();s.success?m(s.data):u(s.error||"خطا در بارگذاری داده‌ها")}catch(e){u(e.message||"خطا در اتصال به سرور")}finally{o(!1)}};return!b||x?(0,s.jsx)("div",{className:"container mx-auto px-4 py-12",children:(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsx)(l.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):h?(0,s.jsx)("div",{className:"container mx-auto px-4 py-12",children:(0,s.jsx)(r.Card,{children:(0,s.jsxs)(r.CardContent,{className:"pt-6",children:[(0,s.jsx)("div",{className:"text-center text-red-600",children:h}),(0,s.jsx)(a.Button,{onClick:N,className:"mt-4",children:"تلاش مجدد"})]})})}):(0,s.jsx)("div",{className:"container mx-auto px-4 py-6 sm:py-8 md:py-12",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[(0,s.jsx)(d,{className:"h-8 w-8"}),"مشاهده تمام داده‌های دیتابیس"]}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:e?.timestamp&&new Date(e.timestamp).toLocaleString("fa-IR")})]}),(0,s.jsxs)(a.Button,{onClick:N,variant:"outline",children:[(0,s.jsx)(n.RefreshCw,{className:"h-4 w-4 mr-2"}),"به‌روزرسانی"]})]}),e?.tables&&e.tables.length>0?(0,s.jsx)("div",{className:"space-y-6",children:e.tables.map(t=>{let a=e.summary[t];return a?(0,s.jsxs)(r.Card,{children:[(0,s.jsx)(r.CardHeader,{children:(0,s.jsxs)(r.CardTitle,{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:t}),(0,s.jsxs)("span",{className:"text-sm font-normal text-muted-foreground",children:[a.rowCount||0," ردیف"]})]})}),(0,s.jsx)(r.CardContent,{children:a.error?(0,s.jsxs)("div",{className:"text-red-600",children:["خطا: ",a.error]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"font-semibold mb-3",children:"ساختار جدول:"}),(0,s.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,s.jsxs)("table",{className:"w-full text-sm border-collapse",children:[(0,s.jsx)("thead",{className:"bg-muted/50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-3 text-right border-b border-r",children:"نام ستون"}),(0,s.jsx)("th",{className:"p-3 text-right border-b border-r",children:"نوع داده"}),(0,s.jsx)("th",{className:"p-3 text-right border-b border-r",children:"Nullable"}),(0,s.jsx)("th",{className:"p-3 text-right border-b",children:"Key"})]})}),(0,s.jsx)("tbody",{children:a.columns?.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b even:bg-muted/10 hover:bg-muted/30",children:[(0,s.jsx)("td",{className:"p-3 border-r font-medium",children:e.name}),(0,s.jsx)("td",{className:"p-3 border-r text-muted-foreground",children:e.type}),(0,s.jsx)("td",{className:"p-3 border-r text-center",children:e.nullable?(0,s.jsx)("span",{className:"text-green-600",children:"✓"}):(0,s.jsx)("span",{className:"text-red-600",children:"✗"})}),(0,s.jsx)("td",{className:"p-3",children:e.key&&(0,s.jsx)("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded text-xs",children:e.key})})]},t))})]})})]}),a.sampleData&&a.sampleData.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"font-semibold mb-3",children:["داده‌ها ",a.hasMore&&`(نمایش ${a.sampleData.length} از ${a.rowCount})`,":"]}),(0,s.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,s.jsxs)("table",{className:"w-full text-sm border-collapse bg-background",children:[(0,s.jsx)("thead",{className:"bg-muted/50",children:(0,s.jsx)("tr",{children:Object.keys(a.sampleData[0]).map(e=>(0,s.jsx)("th",{className:"p-3 text-right font-semibold border-b border-r last:border-r-0 sticky top-0 bg-muted/50 z-10",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:e}),(0,s.jsx)("span",{className:"text-xs font-normal text-muted-foreground ml-2",children:a.columns?.find(s=>s.name===e)?.type||""})]})},e))})}),(0,s.jsx)("tbody",{children:a.sampleData.map((e,t)=>(0,s.jsx)("tr",{className:"border-b hover:bg-muted/30 transition-colors even:bg-muted/10",children:Object.entries(e).map(([e,t])=>{let r=a.columns?.find(s=>s.name===e),l=r?.type?.toLowerCase().includes("json");return(0,s.jsx)("td",{className:"p-3 border-r last:border-r-0 align-top",children:null==t?(0,s.jsx)("span",{className:"text-muted-foreground italic",children:"NULL"}):l||"object"==typeof t?(0,s.jsxs)("details",{className:"cursor-pointer",children:[(0,s.jsxs)("summary",{className:"text-primary hover:underline text-xs",children:["نمایش JSON (","object"==typeof t?"Object":"Array",")"]}),(0,s.jsx)("pre",{className:"mt-2 p-2 bg-muted rounded text-xs overflow-x-auto max-w-md",children:JSON.stringify(t,null,2)})]}):String(t).length>50?(0,s.jsxs)("div",{className:"max-w-xs",children:[(0,s.jsx)("span",{className:"text-muted-foreground break-words",children:String(t).substring(0,50)}),(0,s.jsxs)("details",{className:"mt-1",children:[(0,s.jsx)("summary",{className:"text-primary hover:underline text-xs cursor-pointer",children:"بیشتر..."}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-muted rounded text-xs break-words",children:String(t)})]})]}):(0,s.jsx)("span",{className:"break-words",children:String(t)})},e)})},t))})]})})]}),0===a.rowCount&&(0,s.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"(هیچ داده‌ای وجود ندارد)"})]})})]},t):null})}):(0,s.jsx)(r.Card,{children:(0,s.jsx)(r.CardContent,{className:"pt-6",children:(0,s.jsx)("div",{className:"text-center text-muted-foreground",children:"هیچ جدولی یافت نشد"})})})]})})}e.s(["default",()=>m],1419)}]);