(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23750,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(47163);let i=r.forwardRef(({className:e,type:r,...i},s)=>(0,t.jsx)("input",{type:r,className:(0,a.cn)("flex h-10 w-full rounded-md border-[0.25px] border-input/30 bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...i}));i.displayName="Input",e.s(["Input",()=>i])},43531,e=>{"use strict";let t=(0,e.i(75254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],43531)},14683,e=>{"use strict";let t=(0,e.i(75254).default)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Circle",()=>t],14683)},43432,e=>{"use strict";let t=(0,e.i(75254).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);e.s(["Phone",()=>t],43432)},63488,e=>{"use strict";let t=(0,e.i(75254).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",()=>t],63488)},14764,e=>{"use strict";let t=(0,e.i(75254).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],14764)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},72520,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},78583,e=>{"use strict";let t=(0,e.i(75254).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},84762,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(47163);let i=r.forwardRef(({className:e,...r},i)=>(0,t.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border-[0.25px] border-input/30 bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...r}));i.displayName="Textarea",e.s(["Textarea",()=>i])},20682,e=>{"use strict";var t=e.i(71645);let r=0,a=new Map,i=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},s=[],n={toasts:[]};function l(e){n=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(n,e),s.forEach(e=>{e(n)})}function c({...e}){let t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>l({type:"DISMISS_TOAST",toastId:t});return l({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function o(){let[e,r]=t.useState(n);return t.useEffect(()=>(s.push(r),()=>{let e=s.indexOf(r);e>-1&&s.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}e.s(["useToast",()=>o])},64659,e=>{"use strict";let t=(0,e.i(75254).default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>t],64659)},73708,e=>{"use strict";let t=(0,e.i(75254).default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["Image",()=>t],73708)},46897,e=>{"use strict";let t=(0,e.i(75254).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},82735,87951,52044,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("Paperclip",[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]]);e.s(["Paperclip",()=>r],82735);let a=(0,t.default)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);e.s(["Mic",()=>a],87951);let i=(0,t.default)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);e.s(["Square",()=>i],52044)},95242,e=>{"use strict";let t=(0,e.i(75254).default)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);e.s(["Pause",()=>t],95242)},94771,e=>{"use strict";let t=(0,e.i(75254).default)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);e.s(["CheckCheck",()=>t],94771)},31343,e=>{"use strict";let t=(0,e.i(75254).default)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);e.s(["Play",()=>t],31343)},14050,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(31343),i=e.i(95242),s=e.i(46932),n=e.i(88653);function l({url:e,duration:l,className:c=""}){let[o,u]=(0,r.useState)(!1),[d,f]=(0,r.useState)(0),[m,h]=(0,r.useState)(l||0),[p,x]=(0,r.useState)(0),[y,g]=(0,r.useState)(!1),v=(0,r.useRef)(null),b=(0,r.useRef)(null),k=(0,r.useRef)(0),w=(0,r.useRef)(0);(0,r.useEffect)(()=>{v.current?v.current.src=e:v.current=new Audio(e);let t=v.current,r=()=>{t&&!y&&(f(t.currentTime),x(m>0?t.currentTime/m*100:0))},a=()=>{if(t){let e=t.duration;e&&isFinite(e)&&h(e)}},i=()=>{u(!1),f(0),x(0)};return t.addEventListener("timeupdate",r),t.addEventListener("loadedmetadata",a),t.addEventListener("durationchange",a),t.addEventListener("ended",i),()=>{t.removeEventListener("timeupdate",r),t.removeEventListener("loadedmetadata",a),t.removeEventListener("durationchange",a),t.removeEventListener("ended",i)}},[e,m,y]);let j=()=>{y&&v.current&&(g(!1),v.current.currentTime=p/100*m)},M=e=>{if(!isFinite(e)||isNaN(e))return"0:00";let t=Math.floor(e/60),r=Math.floor(e%60);return`${t}:${r.toString().padStart(2,"0")}`},T=(0,r.useMemo)(()=>{let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r&=r;return Array.from({length:60},(e,t)=>Math.max(.15,Math.min(1,(.3*Math.sin(t/60*Math.PI*4)+.7)*(.4*((r=(9301*r+49297)%233280)/233280)+.6)))).map((e,r)=>{let a=r/60*100<=p;return(0,t.jsx)(s.motion.div,{className:`rounded-full transition-colors ${a?"bg-primary":"bg-muted-foreground/25"}`,style:{width:"3px",height:`${100*e}%`,minHeight:"6px",maxHeight:"32px"},animate:o&&a?{scaleY:[1,1.2,1],opacity:[.7,1,.7]}:{},transition:{duration:.6,repeat:o&&a?1/0:0,delay:r%5*.1}},r)})},[e,p,o]);return(0,t.jsxs)("div",{className:`flex items-center gap-3 p-2.5 bg-gradient-to-br from-background to-muted/20 rounded-xl border border-border/40 shadow-sm hover:shadow-md transition-all duration-300 ${c}`,children:[(0,t.jsxs)(s.motion.button,{onClick:()=>{v.current&&(o?(v.current.pause(),u(!1)):(v.current.play().catch(e=>{console.error("Error playing audio:",e)}),u(!0)))},whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex-shrink-0 w-10 h-10 rounded-full bg-primary text-primary-foreground flex items-center justify-center shadow-md hover:shadow-lg transition-all duration-200 relative overflow-hidden","aria-label":o?"Pause":"Play",children:[(0,t.jsx)(n.AnimatePresence,{mode:"wait",children:o?(0,t.jsx)(s.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},children:(0,t.jsx)(i.Pause,{className:"h-5 w-5",fill:"currentColor"})},"pause"):(0,t.jsx)(s.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},children:(0,t.jsx)(a.Play,{className:"h-5 w-5 ml-0.5",fill:"currentColor"})},"play")}),o&&(0,t.jsx)(s.motion.div,{className:"absolute inset-0 bg-primary/20 rounded-full",animate:{scale:[1,1.3,1],opacity:[.5,0,.5]},transition:{duration:1.5,repeat:1/0}})]}),(0,t.jsxs)("div",{ref:b,onClick:e=>{if(!v.current||!b.current||y)return;let t=b.current.getBoundingClientRect(),r=Math.max(0,Math.min(100,(e.clientX-t.left)/t.width*100)),a=r/100*m;v.current.currentTime=a,f(a),x(r)},onMouseDown:e=>{if(!b.current||!v.current)return;g(!0);let t=b.current.getBoundingClientRect();k.current=e.clientX-t.left,w.current=p},onMouseMove:e=>{if(!y||!b.current||!v.current)return;let t=b.current.getBoundingClientRect(),r=e.clientX-t.left,a=t.width,i=r-k.current,s=Math.max(0,Math.min(100,w.current+i/a*100));x(s),f(s/100*m)},onMouseUp:j,onMouseLeave:j,className:"flex-1 flex items-center justify-between gap-1 h-10 px-3 cursor-pointer relative group",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-between gap-1 px-3",children:T}),(0,t.jsx)(s.motion.div,{className:"absolute top-1/2 -translate-y-1/2 w-4 h-4 bg-primary rounded-full shadow-lg z-10 cursor-grab active:cursor-grabbing border-2 border-background",style:{left:`${p}%`,marginLeft:"-8px"},animate:{scale:y?1.3:o?[1,1.15,1]:1},transition:{duration:+!y,repeat:y?0:o?1/0:0}})]}),(0,t.jsxs)("div",{className:"flex-shrink-0 flex items-center gap-1 text-xs font-medium text-muted-foreground min-w-[5rem] justify-end",children:[(0,t.jsx)("span",{className:"text-foreground",children:M(d)}),(0,t.jsx)("span",{className:"text-muted-foreground/40",children:"/"}),(0,t.jsx)("span",{children:M(m)})]})]})}e.s(["AudioPlayer",()=>l])},27651,e=>{"use strict";var t=e.i(71645),r=e.i(73493);function a({adminId:e="admin-1",enabled:i=!0,heartbeatInterval:s=15e3}={}){let[n,l]=(0,t.useState)(!1),[c,o]=(0,t.useState)(null),u=(0,t.useRef)(null),d=(0,t.useRef)(!0),f=(0,t.useCallback)(async()=>{if(i&&d.current)try{let t=await fetch(`/api/admin/presence?adminId=${e}`,{credentials:"include"});if(!t.ok){t.status;try{let e=await t.json();e.error&&e.error}catch{}return}let r=await t.json();r.success&&r.data?(l(r.data.isOnline||!1),o(r.data.lastSeen||null)):r.success}catch(e){}},[e,i]),m=(0,t.useCallback)(async t=>{if(i&&d.current)try{let r=await fetch("/api/admin/presence",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({adminId:e,isOnline:t})});if(!r.ok){r.status;try{let e=await r.json();e.error&&e.error}catch{}return}let a=await r.json();a.success&&a.data?(l(a.data.isOnline||!1),o(a.data.lastSeen||null)):a.success}catch(e){}},[e,i]);return(0,t.useEffect)(()=>{i&&f()},[i,f]),(0,t.useEffect)(()=>{if(!i||!n){u.current&&(clearInterval(u.current),u.current=null);return}return m(!0),u.current=setInterval(()=>{d.current&&m(!0)},s),()=>{u.current&&(clearInterval(u.current),u.current=null)}},[i,n,s,m]),(0,t.useEffect)(()=>()=>{d.current=!1,u.current&&(clearInterval(u.current),u.current=null),i&&m(!1).catch(e=>r.logger.error("Error setting offline status:",e))},[i,m]),{isOnline:n,lastSeen:c,checkStatus:f,setOnline:m}}e.s(["useAdminPresence",()=>a])},26428,e=>{"use strict";var t=e.i(43476),r=e.i(46932);function a({className:e}){return(0,t.jsxs)(r.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:`flex items-center gap-2 px-5 py-3 bg-muted/60 rounded-2xl shadow-sm border border-border/30 ${e||""}`,children:[(0,t.jsx)(r.motion.div,{className:"w-2.5 h-2.5 bg-muted-foreground/70 rounded-full",animate:{y:[0,-6,0]},transition:{duration:.6,repeat:1/0,delay:0}}),(0,t.jsx)(r.motion.div,{className:"w-2.5 h-2.5 bg-muted-foreground/70 rounded-full",animate:{y:[0,-6,0]},transition:{duration:.6,repeat:1/0,delay:.2}}),(0,t.jsx)(r.motion.div,{className:"w-2.5 h-2.5 bg-muted-foreground/70 rounded-full",animate:{y:[0,-6,0]},transition:{duration:.6,repeat:1/0,delay:.4}})]})}e.s(["TypingIndicator",()=>a])},37496,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),i=e.i(93226),s=e.i(31278);function n({children:e,requireAuth:n=!0,requireAdmin:l=!1}){let c=(0,a.useRouter)(),o=(0,a.usePathname)(),{user:u,isAuthenticated:d,hasCheckedAuth:f,isCheckingAuth:m}=(0,i.useAuthStore)(),h=(0,r.useRef)(!1);return((0,r.useEffect)(()=>{if(f&&n&&!h.current&&"/auth"!==o){if(!d||!u){h.current=!0,c.replace("/auth?redirect="+encodeURIComponent(o));return}l&&"admin"!==u.role&&(h.current=!0,c.replace("/"))}},[f,d,u,n,l,c,o]),m||!f)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,t.jsx)(s.Loader2,{className:"h-6 w-6 animate-spin text-primary"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"در حال بارگذاری..."})]})}):!n||d&&u?l&&u&&"admin"!==u.role?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"flex flex-col items-center gap-4",children:(0,t.jsx)("p",{className:"text-destructive",children:"شما دسترسی به این بخش را ندارید"})})}):(0,t.jsx)(t.Fragment,{children:e}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,t.jsx)(s.Loader2,{className:"h-6 w-6 animate-spin text-primary"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"در حال هدایت..."})]})})}e.s(["ProtectedRoute",()=>n])},73042,e=>{"use strict";var t=e.i(43476),r=e.i(46932),a=e.i(14683),i=e.i(47163);function s({isOnline:e,lastSeen:s,className:n,showText:l=!1}){return(0,t.jsxs)(r.motion.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:(0,i.cn)("inline-flex items-center gap-2",n),children:[(0,t.jsxs)("span",{className:"relative inline-flex items-center",children:[(0,t.jsx)(a.Circle,{className:(0,i.cn)("h-3 w-3",e?"fill-green-500 text-green-500":"fill-gray-400 text-gray-400")}),e&&(0,t.jsx)(r.motion.span,{className:"absolute inset-0 rounded-full bg-green-500 pointer-events-none",animate:{scale:[1,1.5,1],opacity:[1,0,1]},transition:{duration:2,repeat:1/0}})]}),l&&(0,t.jsx)("span",{className:(0,i.cn)("text-sm font-semibold leading-tight",e?"text-green-600 dark:text-green-400":"text-gray-500"),children:e?"آنلاین":s?`آخرین بازدید: ${(e=>{if(!e)return"هرگز";let t=new Date(e),r=new Date().getTime()-t.getTime(),a=Math.floor(r/6e4),i=Math.floor(r/36e5),s=Math.floor(r/864e5);return a<1?"همین الان":a<60?`${a} دقیقه پیش`:i<24?`${i} ساعت پیش`:s<7?`${s} روز پیش`:t.toLocaleDateString("fa-IR")})(s)}`:"آفلاین"})]})}e.s(["OnlineStatusBadge",()=>s])}]);