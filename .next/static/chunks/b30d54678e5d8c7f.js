(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,60366,e=>{"use strict";var r=e.i(6344),t=e.i(73493);let a={},s=(0,r.create)((r,s)=>({orders:[],filters:a,isLoading:!1,setOrders:e=>r({orders:e}),addOrder:e=>r(r=>{let t=r.orders.findIndex(r=>r.id===e.id);if(t>=0){let a=[...r.orders];return a[t]=e,{orders:a}}return{orders:[...r.orders,e]}}),updateOrder:(e,t)=>r(r=>{let a=r.orders.findIndex(r=>r.id===e);if(a>=0){let e=[...r.orders];return e[a]={...e[a],...t},{orders:e}}return r}),updateOrderStatus:(e,t)=>r(r=>({orders:r.orders.map(r=>r.id===e?{...r,status:t,updatedAt:new Date}:r)})),updatePaymentStatus:(e,t)=>r(r=>({orders:r.orders.map(r=>r.id===e?{...r,paymentStatus:t,updatedAt:new Date}:r)})),deleteOrder:e=>r(r=>({orders:r.orders.filter(r=>r.id!==e)})),getOrder:e=>s().orders.find(r=>r.id===e),setFilters:e=>r(r=>({filters:{...r.filters,...e}})),clearFilters:()=>r({filters:a}),loadOrdersFromDB:async()=>{r({isLoading:!0});try{let a=new AbortController,s=setTimeout(()=>a.abort(),15e3),{fetchWithAuth:i}=await e.A(91079),d=await i("/api/orders",{signal:a.signal});if(clearTimeout(s),d.ok){let e;try{e=await d.json()}catch(e){t.logger.error("Error parsing orders response:",e),r({orders:[],isLoading:!1});return}if(e.success&&e.data)try{let a=e.data.map(e=>{let r=[],a={};try{r=Array.isArray(e.items)?e.items:"string"==typeof e.items?JSON.parse(e.items):[]}catch(a){t.logger.warn("Error parsing items for order:",e.id,a),r=[]}try{a="object"==typeof e.shippingAddress&&null!==e.shippingAddress?e.shippingAddress:"string"==typeof e.shippingAddress?JSON.parse(e.shippingAddress):{}}catch(r){t.logger.warn("Error parsing shippingAddress for order:",e.id,r),a={}}return{...e,items:r,shippingAddress:a,total:Number(e.total)||0,shippingCost:Number(e.shippingCost)||0,createdAt:e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),updatedAt:e.updatedAt instanceof Date?e.updatedAt:new Date(e.updatedAt)}});r({orders:a,isLoading:!1})}catch(e){t.logger.error("Error parsing orders data:",e),r({orders:[],isLoading:!1})}else r({orders:[],isLoading:!1})}else t.logger.error("Failed to load orders:",d.status),r({orders:[],isLoading:!1})}catch(e){e instanceof Error&&"AbortError"!==e.name&&t.logger.error("Error loading orders from DB:",e),r({orders:[],isLoading:!1})}}}));e.s(["useOrderStore",0,s])},27612,e=>{"use strict";let r=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>r],27612)},36361,e=>{"use strict";var r=e.i(6344),t=e.i(73493);let a={},s=(0,r.create)((e,r)=>({products:[],filters:a,setProducts:r=>e({products:r}),addProduct:r=>e(e=>{let t=e.products.findIndex(e=>e.id===r.id);if(t>=0){let a=[...e.products];return a[t]=r,{products:a}}return{products:[...e.products,r]}}),updateProduct:r=>e(e=>{let t=e.products.findIndex(e=>e.id===r.id);if(t>=0){let a=[...e.products];return a[t]=r,{products:a}}return e}),removeProduct:r=>e(e=>({products:e.products.filter(e=>e.id!==r)})),getProduct:e=>r().products.find(r=>r.id===e),getEnabledProducts:()=>r().products.filter(e=>e.enabled),getFilteredProducts:()=>{let{products:e,filters:t}=r(),a=e.filter(e=>e.enabled);if(t.search){let e=t.search.toLowerCase();a=a.filter(r=>r.name.toLowerCase().includes(e)||r.description?.toLowerCase().includes(e)||r.brand?.toLowerCase().includes(e))}return void 0!==t.minPrice&&(a=a.filter(e=>e.price>=t.minPrice)),void 0!==t.maxPrice&&(a=a.filter(e=>e.price<=t.maxPrice)),t.brands&&t.brands.length>0&&(a=a.filter(e=>e.brand&&t.brands.includes(e.brand))),t.categories&&t.categories.length>0&&(a=a.filter(e=>e.category&&t.categories.includes(e.category))),void 0!==t.inStock&&(a=a.filter(e=>e.inStock===t.inStock)),a},setFilters:r=>e(e=>({filters:{...e.filters,...r}})),clearFilters:()=>e({filters:a}),createProduct:async e=>{let t=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json().catch(()=>({}))).message||"خطا در ایجاد محصول");let a=(await t.json()).data;return r().addProduct(a),a},updateProductInDB:async(e,t)=>{let a=await fetch(`/api/products/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error((await a.json().catch(()=>({}))).message||"خطا در به‌روزرسانی محصول");let s=(await a.json()).data;return r().updateProduct(s),s},deleteProductFromDB:async e=>{let t=await fetch(`/api/products/${e}`,{method:"DELETE"});if(!t.ok)throw Error((await t.json().catch(()=>({}))).message||"خطا در حذف محصول");r().removeProduct(e)},loadProductsFromDB:async(e=!1)=>{try{let t=await fetch(e?"/api/products?limit=1000&all=true":"/api/products?limit=1000");if(!t.ok){let e=await t.json().catch(()=>({})),r=e.error||e.message||"خطا در بارگذاری محصولات";throw Error(r)}let a=((await t.json()).data||[]).map(e=>({...e,createdAt:e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),updatedAt:e.updatedAt instanceof Date?e.updatedAt:new Date(e.updatedAt)}));r().setProducts(a)}catch(e){t.logger.error("Error loading products from DB:",e)}},deleteProduct:async e=>{await r().deleteProductFromDB(e)},deleteProducts:async e=>{await Promise.all(e.map(e=>r().deleteProductFromDB(e)))},toggleProduct:async e=>{let t=r().getProduct(e);t&&await r().updateProductInDB(e,{enabled:!t.enabled})},toggleProducts:async(e,t)=>{await Promise.all(e.map(e=>r().updateProductInDB(e,{enabled:t})))}}));e.s(["useProductStore",0,s])},70152,e=>{"use strict";function r(e,[r,t]){return Math.min(t,Math.max(r,e))}e.s(["clamp",()=>r])},64659,e=>{"use strict";let r=(0,e.i(75254).default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>r],64659)},59411,e=>{"use strict";var r=e.i(71645),t=e.i(48425),a=e.i(43476),s=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),i=r.forwardRef((e,r)=>(0,a.jsx)(t.Primitive.span,{...e,ref:r,style:{...s,...e.style}}));i.displayName="VisuallyHidden",e.s(["VISUALLY_HIDDEN_STYLES",()=>s,"VisuallyHidden",()=>i])},24327,e=>{"use strict";let r=(0,e.i(6344).create)((e,r)=>({suppliers:[],setSuppliers:r=>e({suppliers:r}),addSupplier:r=>{let t={id:`supplier-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...r,products:r.products||[],transactions:r.transactions||[]};e(e=>({suppliers:[...e.suppliers,t]}))},updateSupplier:(r,t)=>e(e=>{let a=e.suppliers.findIndex(e=>e.id===r);if(a>=0){let r=[...e.suppliers];return r[a]={...r[a],...t},{suppliers:r}}return e}),deleteSupplier:r=>e(e=>({suppliers:e.suppliers.filter(e=>e.id!==r)})),toggleSupplier:r=>e(e=>({suppliers:e.suppliers.map(e=>e.id===r?{...e,isActive:!e.isActive}:e)})),getSupplier:e=>r().suppliers.find(r=>r.id===e),addSupplierTransaction:(r,t)=>{let a={id:`transaction-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...t};e(e=>({suppliers:e.suppliers.map(e=>e.id===r?{...e,transactions:[...e.transactions||[],a]}:e)}))},updateSupplierTransaction:(r,t,a)=>e(e=>({suppliers:e.suppliers.map(e=>e.id===r?{...e,transactions:(e.transactions||[]).map(e=>e.id===t?{...e,...a}:e)}:e)})),deleteSupplierTransaction:(r,t)=>e(e=>({suppliers:e.suppliers.map(e=>e.id===r?{...e,transactions:(e.transactions||[]).filter(e=>e.id!==t)}:e)}))}));e.s(["useSupplierStore",0,r])},73375,e=>{"use strict";let r=(0,e.i(75254).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>r],73375)},61659,e=>{"use strict";let r=(0,e.i(75254).default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["CreditCard",()=>r],61659)},61911,e=>{"use strict";let r=(0,e.i(75254).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>r],61911)},78894,e=>{"use strict";let r=(0,e.i(75254).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>r],78894)},73014,e=>{"use strict";let r=(0,e.i(75254).default)("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);e.s(["FolderTree",()=>r],73014)},91079,e=>{e.v(r=>Promise.all(["static/chunks/0212ee3e90afbd18.js"].map(r=>e.l(r))).then(()=>r(40171)))}]);