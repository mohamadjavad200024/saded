(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55257,e=>{"use strict";let a=(0,e.i(57929).default)("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>a],55257)},30374,e=>{"use strict";var a=e.i(92316),t=e.i(96040),r=e.i(31104),s=e.i(19956),l=e.i(47163);let i=r.Root,o=r.Trigger,d=r.Portal;r.Close;let n=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)(r.Overlay,{ref:s,className:(0,l.cn)("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));n.displayName=r.Overlay.displayName;let c=t.forwardRef(({className:e,children:t,...i},o)=>(0,a.jsxs)(d,{children:[(0,a.jsx)(n,{}),(0,a.jsxs)(r.Content,{ref:o,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border-[0.25px] border-border/30 bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg",e),...i,children:[t,(0,a.jsxs)(r.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(s.X,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"بستن"})]})]})]}));c.displayName=r.Content.displayName;let m=({className:e,...t})=>(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-right",e),...t});m.displayName="DialogHeader";let f=({className:e,...t})=>(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 sm:space-x-reverse",e),...t});f.displayName="DialogFooter";let x=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)(r.Title,{ref:s,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));x.displayName=r.Title.displayName;let g=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)(r.Description,{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",e),...t}));g.displayName=r.Description.displayName,e.s(["Dialog",()=>i,"DialogContent",()=>c,"DialogDescription",()=>g,"DialogFooter",()=>f,"DialogHeader",()=>m,"DialogTitle",()=>x,"DialogTrigger",()=>o])},47627,e=>{"use strict";var a=e.i(92316),t=e.i(96040),r=e.i(47163);let s=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,r.cn)("w-full caption-bottom text-sm",e),...t})}));s.displayName="Table";let l=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("thead",{ref:s,className:(0,r.cn)("[&_tr]:border-b border-border/30",e),...t}));l.displayName="TableHeader";let i=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("tbody",{ref:s,className:(0,r.cn)("[&_tr:last-child]:border-0",e),...t}));i.displayName="TableBody",t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("tfoot",{ref:s,className:(0,r.cn)("border-t border-border/30 bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let o=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("tr",{ref:s,className:(0,r.cn)("border-b border-border/30 transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));o.displayName="TableRow";let d=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("th",{ref:s,className:(0,r.cn)("h-12 px-4 text-right align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));d.displayName="TableHead";let n=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("td",{ref:s,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));n.displayName="TableCell",t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("caption",{ref:s,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption",e.s(["Table",()=>s,"TableBody",()=>i,"TableCell",()=>n,"TableHead",()=>d,"TableHeader",()=>l,"TableRow",()=>o])},70065,e=>{"use strict";var a=e.i(92316),t=e.i(96040),r=e.i(47163);let s=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border-[0.25px] border-border/3 bg-card text-card-foreground shadow-sm",e),...t}));s.displayName="Card";let l=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let i=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("h3",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));i.displayName="CardTitle";let o=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",e),...t}));o.displayName="CardDescription";let d=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter",e.s(["Card",()=>s,"CardContent",()=>d,"CardDescription",()=>o,"CardHeader",()=>l,"CardTitle",()=>i])},17513,e=>{"use strict";var a=e.i(82408),t=e.i(73493);let r=(0,a.create)((e,a)=>({categories:[],setCategories:a=>e({categories:a}),addCategory:a=>e(e=>{let t=e.categories.findIndex(e=>e.id===a.id);if(t>=0){let r=[...e.categories];return r[t]=a,{categories:r}}return{categories:[...e.categories,a]}}),updateCategory:a=>e(e=>{let t=e.categories.findIndex(e=>e.id===a.id);if(t>=0){let r=[...e.categories];return r[t]=a,{categories:r}}return e}),deleteCategory:a=>e(e=>({categories:e.categories.filter(e=>e.id!==a)})),toggleCategory:a=>e(e=>({categories:e.categories.map(e=>e.id===a?{...e,isActive:!e.isActive}:e)})),getCategory:e=>a().categories.find(a=>a.id===e),getActiveCategories:()=>a().categories.filter(e=>e.isActive&&e.enabled),getEnabledCategories:()=>a().categories.filter(e=>e.enabled),loadCategoriesFromDB:async(e=!1)=>{try{let t=await fetch(e?"/api/categories?all=true":"/api/categories");if(!t.ok)throw Error("خطا در بارگذاری دسته‌بندی‌ها");let r=(await t.json()).data||[];a().setCategories(r)}catch(e){t.logger.error("Error loading categories from DB:",e)}}}));e.s(["useCategoryStore",0,r])},9077,e=>{"use strict";let a=(0,e.i(57929).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],9077)},10748,e=>{"use strict";let a=(0,e.i(57929).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);e.s(["Edit",()=>a],10748)},27497,e=>{"use strict";var a=e.i(92316),t=e.i(96040),r=e.i(47627),s=e.i(67881),l=e.i(94179),i=e.i(63415),o=e.i(55257),d=e.i(10748),n=e.i(67910),c=e.i(62767),m=e.i(17513),f=e.i(20682),x=e.i(31551),g=e.i(30374);function p({categories:e,onRefresh:p}){let{deleteCategory:u,toggleCategory:h}=(0,m.useCategoryStore)(),{toast:b}=(0,f.useToast)(),[j,y]=(0,t.useState)(!1),[N,w]=(0,t.useState)(null);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"rounded-lg border border-border/30 shadow-sm overflow-hidden",children:(0,a.jsxs)(r.Table,{children:[(0,a.jsx)(r.TableHeader,{className:"bg-muted/50",children:(0,a.jsxs)(r.TableRow,{children:[(0,a.jsx)(r.TableHead,{children:"نام"}),(0,a.jsx)(r.TableHead,{children:"توضیحات"}),(0,a.jsx)(r.TableHead,{children:"وضعیت"}),(0,a.jsx)(r.TableHead,{className:"text-left",children:"عملیات"})]})}),(0,a.jsx)(r.TableBody,{children:0===e.length?(0,a.jsx)(r.TableRow,{children:(0,a.jsx)(r.TableCell,{colSpan:4,className:"text-center py-8",children:"دسته‌بندی‌ای یافت نشد"})},"empty-state"):e.map((e,t)=>(0,a.jsxs)(r.TableRow,{children:[(0,a.jsxs)(r.TableCell,{className:"font-medium flex items-center gap-2",children:[(0,a.jsx)(c.Package,{className:"h-4 w-4 text-muted-foreground"}),e.name]}),(0,a.jsx)(r.TableCell,{className:"text-muted-foreground",children:e.description||"-"}),(0,a.jsx)(r.TableCell,{children:(0,a.jsx)(l.Badge,{variant:e.isActive?"success":"secondary",children:e.isActive?"فعال":"غیرفعال"})}),(0,a.jsx)(r.TableCell,{children:(0,a.jsxs)(i.DropdownMenu,{children:[(0,a.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(s.Button,{variant:"ghost",size:"icon",children:(0,a.jsx)(o.MoreHorizontal,{className:"h-4 w-4"})})}),(0,a.jsxs)(i.DropdownMenuContent,{align:"end",children:[(0,a.jsx)(i.DropdownMenuLabel,{children:"عملیات"}),(0,a.jsx)(i.DropdownMenuSeparator,{}),(0,a.jsx)(i.DropdownMenuItem,{asChild:!0,children:(0,a.jsxs)(x.default,{href:`/admin/categories/${e.id}`,children:[(0,a.jsx)(d.Edit,{className:"ml-2 h-4 w-4"}),"ویرایش"]})}),(0,a.jsx)(i.DropdownMenuItem,{onClick:()=>{h(e.id),b({title:"موفق",description:"وضعیت دسته‌بندی تغییر کرد"}),p?.()},children:e.isActive?"غیرفعال کردن":"فعال کردن"}),(0,a.jsx)(i.DropdownMenuSeparator,{}),(0,a.jsxs)(i.DropdownMenuItem,{className:"text-destructive",onClick:()=>{w(e.id),y(!0)},children:[(0,a.jsx)(n.Trash2,{className:"ml-2 h-4 w-4"}),"حذف"]})]})]})})]},e.id||`category-${t}`))})]})}),(0,a.jsx)(g.Dialog,{open:j,onOpenChange:y,children:(0,a.jsxs)(g.DialogContent,{children:[(0,a.jsxs)(g.DialogHeader,{children:[(0,a.jsx)(g.DialogTitle,{children:"حذف دسته‌بندی"}),(0,a.jsx)(g.DialogDescription,{children:"آیا از حذف این دسته‌بندی اطمینان دارید؟ این عمل قابل بازگشت نیست."})]}),(0,a.jsxs)(g.DialogFooter,{children:[(0,a.jsx)(s.Button,{variant:"outline",onClick:()=>y(!1),children:"انصراف"}),(0,a.jsx)(s.Button,{variant:"destructive",onClick:()=>{N&&(u(N),b({title:"موفق",description:"دسته‌بندی با موفقیت حذف شد"}),y(!1),w(null),p?.())},children:"حذف"})]})]})})]})}var u=e.i(70065),h=e.i(9077),b=e.i(22940),j=e.i(97923);function y(){let{categories:e,loadCategoriesFromDB:r}=(0,m.useCategoryStore)(),[l,i]=(0,t.useState)(!0),o=(0,j.usePathname)();return(0,t.useEffect)(()=>{(async()=>{i(!0);try{await r(!0)}catch(e){console.error("Error loading categories:",e)}finally{i(!1)}})()},[r,o]),(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(u.Card,{className:"shadow-sm",children:[(0,a.jsx)(u.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(u.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(b.FolderTree,{className:"h-5 w-5 text-primary"}),"دسته‌بندی‌ها (",e.length,")"]}),(0,a.jsx)(s.Button,{asChild:!0,size:"sm",children:(0,a.jsxs)(x.default,{href:"/admin/categories/new",children:[(0,a.jsx)(h.Plus,{className:"ml-2 h-4 w-4"}),"افزودن دسته‌بندی"]})})]})}),(0,a.jsx)(u.CardContent,{children:(0,a.jsx)(p,{categories:e})})]})})}e.s(["default",()=>y],27497)}]);