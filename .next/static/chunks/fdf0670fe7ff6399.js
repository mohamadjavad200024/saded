(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var r=e.i(43476),s=e.i(71645),t=e.i(47163);let a=s.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,t.cn)("rounded-lg border-[0.25px] border-border/3 bg-card text-card-foreground shadow-sm",e),...s}));a.displayName="Card";let d=s.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",e),...s}));d.displayName="CardHeader";let l=s.forwardRef(({className:e,...s},a)=>(0,r.jsx)("h3",{ref:a,className:(0,t.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));l.displayName="CardTitle";let i=s.forwardRef(({className:e,...s},a)=>(0,r.jsx)("p",{ref:a,className:(0,t.cn)("text-sm text-muted-foreground",e),...s}));i.displayName="CardDescription";let n=s.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,t.cn)("p-6 pt-0",e),...s}));n.displayName="CardContent",s.forwardRef(({className:e,...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,t.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter",e.s(["Card",()=>a,"CardContent",()=>n,"CardDescription",()=>i,"CardHeader",()=>d,"CardTitle",()=>l])},60366,e=>{"use strict";var r=e.i(6344),s=e.i(73493);let t={},a=(0,r.create)((r,a)=>({orders:[],filters:t,isLoading:!1,setOrders:e=>r({orders:e}),addOrder:e=>r(r=>{let s=r.orders.findIndex(r=>r.id===e.id);if(s>=0){let t=[...r.orders];return t[s]=e,{orders:t}}return{orders:[...r.orders,e]}}),updateOrder:(e,s)=>r(r=>{let t=r.orders.findIndex(r=>r.id===e);if(t>=0){let e=[...r.orders];return e[t]={...e[t],...s},{orders:e}}return r}),updateOrderStatus:(e,s)=>r(r=>({orders:r.orders.map(r=>r.id===e?{...r,status:s,updatedAt:new Date}:r)})),updatePaymentStatus:(e,s)=>r(r=>({orders:r.orders.map(r=>r.id===e?{...r,paymentStatus:s,updatedAt:new Date}:r)})),deleteOrder:e=>r(r=>({orders:r.orders.filter(r=>r.id!==e)})),getOrder:e=>a().orders.find(r=>r.id===e),setFilters:e=>r(r=>({filters:{...r.filters,...e}})),clearFilters:()=>r({filters:t}),loadOrdersFromDB:async()=>{r({isLoading:!0});try{let t=new AbortController,a=setTimeout(()=>t.abort(),15e3),{fetchWithAuth:d}=await e.A(91079),l=await d("/api/orders",{signal:t.signal});if(clearTimeout(a),l.ok){let e;try{e=await l.json()}catch(e){s.logger.error("Error parsing orders response:",e),r({orders:[],isLoading:!1});return}if(e.success&&e.data)try{let t=e.data.map(e=>{let r=[],t={};try{r=Array.isArray(e.items)?e.items:"string"==typeof e.items?JSON.parse(e.items):[]}catch(t){s.logger.warn("Error parsing items for order:",e.id,t),r=[]}try{t="object"==typeof e.shippingAddress&&null!==e.shippingAddress?e.shippingAddress:"string"==typeof e.shippingAddress?JSON.parse(e.shippingAddress):{}}catch(r){s.logger.warn("Error parsing shippingAddress for order:",e.id,r),t={}}return{...e,items:r,shippingAddress:t,total:Number(e.total)||0,shippingCost:Number(e.shippingCost)||0,createdAt:e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),updatedAt:e.updatedAt instanceof Date?e.updatedAt:new Date(e.updatedAt)}});r({orders:t,isLoading:!1})}catch(e){s.logger.error("Error parsing orders data:",e),r({orders:[],isLoading:!1})}else r({orders:[],isLoading:!1})}else s.logger.error("Failed to load orders:",l.status),r({orders:[],isLoading:!1})}catch(e){e instanceof Error&&"AbortError"!==e.name&&s.logger.error("Error loading orders from DB:",e),r({orders:[],isLoading:!1})}}}));e.s(["useOrderStore",0,a])},95468,e=>{"use strict";let r=(0,e.i(75254).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>r],95468)},31897,e=>{"use strict";var r=e.i(43476),s=e.i(71645),t=e.i(18566),a=e.i(70065),d=e.i(67881),l=e.i(95468),i=e.i(88844),n=e.i(22016),o=e.i(60366);function c(){let e=(0,t.useSearchParams)();(0,t.useRouter)();let c=e.get("orderNumber"),{orders:m}=(0,o.useOrderStore)(),[x,u]=(0,s.useState)(null);return((0,s.useEffect)(()=>{if(c){let e=m.find(e=>e.orderNumber===c||e.id===c);e?u(e):m.length>0&&u(m[0])}else m.length>0&&u(m[0])},[c,m]),x)?(0,r.jsx)("div",{className:"container mx-auto px-4 py-12 sm:py-20",children:(0,r.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,r.jsx)(a.Card,{children:(0,r.jsx)(a.CardContent,{className:"pt-6",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 sm:py-12",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(l.CheckCircle2,{className:"h-20 w-20 text-green-600"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-green-600/20 rounded-full blur-xl"})]})}),(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold mb-2 text-center",children:"سفارش شما با موفقیت ثبت شد"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-6 text-center",children:"سفارش شما دریافت شد و در حال پردازش است"}),(0,r.jsxs)("div",{className:"w-full space-y-4 mb-8",children:[(0,r.jsxs)("div",{className:"bg-muted/50 rounded-lg p-4 space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:"شماره سفارش:"}),(0,r.jsx)("span",{className:"font-mono font-bold text-lg",children:x.orderNumber})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:"مبلغ کل:"}),(0,r.jsxs)("span",{className:"font-bold text-lg",children:[(x.total+x.shippingCost).toLocaleString("fa-IR")," تومان"]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:"وضعیت سفارش:"}),(0,r.jsx)("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium",children:"در انتظار پردازش"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:"وضعیت پرداخت:"}),(0,r.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${"paid"===x.paymentStatus?"bg-green-100 text-green-800":"pending"===x.paymentStatus?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:"paid"===x.paymentStatus?"پرداخت شده":"pending"===x.paymentStatus?"در انتظار پرداخت":"پرداخت ناموفق"})]})]}),(0,r.jsx)("div",{className:"bg-blue-50 dark:bg-blue-950/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:(0,r.jsxs)("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:[(0,r.jsx)("strong",{children:"نکته:"})," برای پیگیری سفارش خود، می‌توانید از شماره سفارش استفاده کنید."]})})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full",children:[(0,r.jsx)(n.default,{href:`/order/track?orderNumber=${x.orderNumber}`,className:"flex-1",children:(0,r.jsxs)(d.Button,{className:"w-full",size:"lg",children:[(0,r.jsx)(i.Package,{className:"ml-2 h-4 w-4"}),"پیگیری سفارش"]})}),(0,r.jsx)(n.default,{href:"/products",className:"flex-1",children:(0,r.jsx)(d.Button,{variant:"outline",className:"w-full",size:"lg",children:"ادامه خرید"})})]})]})})})})}):(0,r.jsx)("div",{className:"container mx-auto px-4 py-12 sm:py-20",children:(0,r.jsx)("div",{className:"max-w-md mx-auto",children:(0,r.jsx)(a.Card,{children:(0,r.jsx)(a.CardContent,{className:"pt-6",children:(0,r.jsx)("div",{className:"flex flex-col items-center justify-center py-12",children:(0,r.jsx)("p",{className:"text-muted-foreground text-center",children:"در حال بارگذاری اطلاعات سفارش..."})})})})})})}function m(){return(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)("div",{className:"container mx-auto px-4 py-6",children:"در حال بارگذاری..."}),children:(0,r.jsx)(c,{})})}e.s(["default",()=>m])},91079,e=>{e.v(r=>Promise.all(["static/chunks/617555628b6cfdbb.js"].map(r=>e.l(r))).then(()=>r(40171)))}]);