(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,20045,e=>{"use strict";let a=(0,e.i(57929).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);e.s(["Filter",()=>a],20045)},55257,e=>{"use strict";let a=(0,e.i(57929).default)("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>a],55257)},30374,e=>{"use strict";var a=e.i(92316),s=e.i(96040),l=e.i(31104),t=e.i(19956),r=e.i(47163);let i=l.Root,d=l.Trigger,n=l.Portal;l.Close;let o=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.Overlay,{ref:t,className:(0,r.cn)("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));o.displayName=l.Overlay.displayName;let c=s.forwardRef(({className:e,children:s,...i},d)=>(0,a.jsxs)(n,{children:[(0,a.jsx)(o,{}),(0,a.jsxs)(l.Content,{ref:d,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border-[0.25px] border-border/30 bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg",e),...i,children:[s,(0,a.jsxs)(l.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(t.X,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"بستن"})]})]})]}));c.displayName=l.Content.displayName;let m=({className:e,...s})=>(0,a.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-1.5 text-center sm:text-right",e),...s});m.displayName="DialogHeader";let u=({className:e,...s})=>(0,a.jsx)("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 sm:space-x-reverse",e),...s});u.displayName="DialogFooter";let x=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.Title,{ref:t,className:(0,r.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));x.displayName=l.Title.displayName;let h=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.Description,{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",e),...s}));h.displayName=l.Description.displayName,e.s(["Dialog",()=>i,"DialogContent",()=>c,"DialogDescription",()=>h,"DialogFooter",()=>u,"DialogHeader",()=>m,"DialogTitle",()=>x,"DialogTrigger",()=>d])},47627,e=>{"use strict";var a=e.i(92316),s=e.i(96040),l=e.i(47163);let t=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",e),...s})}));t.displayName="Table";let r=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b border-border/30",e),...s}));r.displayName="TableHeader";let i=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",e),...s}));i.displayName="TableBody",s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t border-border/30 bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";let d=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("tr",{ref:t,className:(0,l.cn)("border-b border-border/30 transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));d.displayName="TableRow";let n=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-right align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));n.displayName="TableHead";let o=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("td",{ref:t,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));o.displayName="TableCell",s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption",e.s(["Table",()=>t,"TableBody",()=>i,"TableCell",()=>o,"TableHead",()=>n,"TableHeader",()=>r,"TableRow",()=>d])},78766,e=>{"use strict";let a=(0,e.i(57929).default)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>a],78766)},58454,e=>{"use strict";let a=(0,e.i(57929).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>a],58454)},30691,e=>{"use strict";let a=(0,e.i(57929).default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>a],30691)},99440,e=>{"use strict";var a=e.i(82408);let s={},l=(0,a.create)((e,a)=>({users:[],filters:s,setUsers:a=>e({users:a}),addUser:a=>e(e=>{let s=e.users.findIndex(e=>e.id===a.id);if(s>=0){let l=[...e.users];return l[s]=a,{users:l}}return{users:[...e.users,a]}}),updateUser:(a,s)=>e(e=>{let l=e.users.findIndex(e=>e.id===a);if(l>=0){let a=[...e.users];return a[l]={...a[l],...s,updatedAt:new Date},{users:a}}return e}),updateUserStatus:(a,s)=>e(e=>({users:e.users.map(e=>e.id===a?{...e,status:s,updatedAt:new Date}:e)})),updateUserRole:(a,s)=>e(e=>({users:e.users.map(e=>e.id===a?{...e,role:s,updatedAt:new Date}:e)})),deleteUser:a=>e(e=>({users:e.users.filter(e=>e.id!==a)})),getUser:e=>a().users.find(a=>a.id===e),setFilters:a=>e(e=>({filters:{...e.filters,...a}})),clearFilters:()=>e({filters:s})}));e.s(["useUserStore",0,l])},51364,e=>{"use strict";var a=e.i(92316),s=e.i(96040),l=e.i(47627),t=e.i(67881),r=e.i(94179),i=e.i(63415),d=e.i(55257),n=e.i(52176),o=e.i(30691),c=e.i(57929);let m=(0,c.default)("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);var u=e.i(78766),x=e.i(99440),h=e.i(20682),j=e.i(30374);let p={admin:"مدیر",user:"کاربر",moderator:"ناظر"},f={active:"فعال",inactive:"غیرفعال",suspended:"معلق"},b={admin:"destructive",user:"default",moderator:"secondary"},g={active:"success",inactive:"secondary",suspended:"warning"};function y({users:e,onRefresh:c}){let{updateUserStatus:y,updateUserRole:v,deleteUser:N}=(0,x.useUserStore)(),{toast:w}=(0,h.useToast)(),[C,T]=(0,s.useState)(!1),[S,D]=(0,s.useState)(null);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"rounded-lg border border-border/30 shadow-sm overflow-hidden",children:(0,a.jsxs)(l.Table,{children:[(0,a.jsx)(l.TableHeader,{className:"bg-muted/50",children:(0,a.jsxs)(l.TableRow,{children:[(0,a.jsx)(l.TableHead,{children:"نام"}),(0,a.jsx)(l.TableHead,{children:"ایمیل"}),(0,a.jsx)(l.TableHead,{children:"تلفن"}),(0,a.jsx)(l.TableHead,{children:"نقش"}),(0,a.jsx)(l.TableHead,{children:"وضعیت"}),(0,a.jsx)(l.TableHead,{children:"سفارشات"}),(0,a.jsx)(l.TableHead,{children:"خرید کل"}),(0,a.jsx)(l.TableHead,{className:"text-left",children:"عملیات"})]})}),(0,a.jsx)(l.TableBody,{children:0===e.length?(0,a.jsx)(l.TableRow,{children:(0,a.jsx)(l.TableCell,{colSpan:8,className:"text-center py-8",children:"کاربری یافت نشد"})}):e.map(e=>{let s;return(0,a.jsxs)(l.TableRow,{children:[(0,a.jsx)(l.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[e.avatar?(0,a.jsx)("img",{src:e.avatar,alt:e.name,className:"w-10 h-10 rounded-full"}):(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,a.jsx)(n.User,{className:"h-5 w-5 text-primary"})}),(0,a.jsx)("span",{className:"font-medium",children:e.name})]})}),(0,a.jsx)(l.TableCell,{children:e.email}),(0,a.jsx)(l.TableCell,{children:e.phone||"-"}),(0,a.jsx)(l.TableCell,{children:(0,a.jsx)(r.Badge,{variant:b[e.role],children:p[e.role]})}),(0,a.jsx)(l.TableCell,{children:(0,a.jsx)(r.Badge,{variant:g[e.status],children:f[e.status]})}),(0,a.jsx)(l.TableCell,{children:e.ordersCount||0}),(0,a.jsxs)(l.TableCell,{children:[e.totalSpent?(s=e.totalSpent,new Intl.NumberFormat("fa-IR").format(s)):"0"," تومان"]}),(0,a.jsx)(l.TableCell,{children:(0,a.jsxs)(i.DropdownMenu,{children:[(0,a.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(t.Button,{variant:"ghost",size:"icon",children:(0,a.jsx)(d.MoreHorizontal,{className:"h-4 w-4"})})}),(0,a.jsxs)(i.DropdownMenuContent,{align:"end",children:[(0,a.jsx)(i.DropdownMenuLabel,{children:"عملیات"}),(0,a.jsx)(i.DropdownMenuSeparator,{}),(0,a.jsx)(i.DropdownMenuLabel,{children:"تغییر نقش"}),Object.entries(p).map(([s,l])=>(0,a.jsxs)(i.DropdownMenuItem,{onClick:()=>{v(e.id,s),w({title:"موفق",description:"نقش کاربر به‌روزرسانی شد"}),c?.()},disabled:e.role===s,children:[(0,a.jsx)(o.Shield,{className:"ml-2 h-4 w-4"}),l]},s)),(0,a.jsx)(i.DropdownMenuSeparator,{}),(0,a.jsx)(i.DropdownMenuLabel,{children:"تغییر وضعیت"}),Object.entries(f).map(([s,l])=>(0,a.jsxs)(i.DropdownMenuItem,{onClick:()=>{y(e.id,s),w({title:"موفق",description:"وضعیت کاربر به‌روزرسانی شد"}),c?.()},disabled:e.status===s,children:["active"===s?(0,a.jsx)(u.CheckCircle,{className:"ml-2 h-4 w-4"}):(0,a.jsx)(m,{className:"ml-2 h-4 w-4"}),l]},s)),(0,a.jsx)(i.DropdownMenuSeparator,{}),(0,a.jsx)(i.DropdownMenuItem,{className:"text-destructive",onClick:()=>{D(e.id),T(!0)},children:"حذف کاربر"})]})]})})]},e.id)})})]})}),(0,a.jsx)(j.Dialog,{open:C,onOpenChange:T,children:(0,a.jsxs)(j.DialogContent,{children:[(0,a.jsxs)(j.DialogHeader,{children:[(0,a.jsx)(j.DialogTitle,{children:"حذف کاربر"}),(0,a.jsx)(j.DialogDescription,{children:"آیا از حذف این کاربر اطمینان دارید؟ این عمل قابل بازگشت نیست."})]}),(0,a.jsxs)(j.DialogFooter,{children:[(0,a.jsx)(t.Button,{variant:"outline",onClick:()=>T(!1),children:"انصراف"}),(0,a.jsx)(t.Button,{variant:"destructive",onClick:()=>{S&&(N(S),w({title:"موفق",description:"کاربر با موفقیت حذف شد"}),T(!1),D(null),c?.())},children:"حذف"})]})]})})]})}var v=e.i(23750),N=e.i(70065),w=e.i(62870),C=e.i(48232);let T=(0,c.default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var S=e.i(58454),D=e.i(20045);function k(){let{users:e,setFilters:l,clearFilters:r,filters:i}=(0,x.useUserStore)(),[d,o]=(0,s.useState)(i.search||""),[c,m]=(0,s.useState)("all"),[u,h]=(0,s.useState)("all"),[j,p]=(0,s.useState)(!1),f=(0,s.useMemo)(()=>{let a=e;if(d){let e=d.toLowerCase();a=a.filter(a=>a.name.toLowerCase().includes(e)||a.email.toLowerCase().includes(e)||a.phone?.includes(e))}return"all"!==c&&(a=a.filter(e=>e.role===c)),"all"!==u&&(a=a.filter(e=>e.status===u)),a},[e,d,c,u]);return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(N.Card,{className:"shadow-sm",children:[(0,a.jsxs)(N.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(N.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(n.User,{className:"h-5 w-5 text-primary"}),"کاربران (",f.length,")"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(t.Button,{variant:j?"default":"outline",onClick:()=>p(!j),size:"sm",children:[(0,a.jsx)(D.Filter,{className:"ml-2 h-4 w-4"}),"فیلتر"]}),(0,a.jsxs)(t.Button,{variant:"outline",size:"sm",children:[(0,a.jsx)(S.Download,{className:"ml-2 h-4 w-4"}),"خروجی CSV"]}),(0,a.jsxs)(t.Button,{size:"sm",children:[(0,a.jsx)(T,{className:"ml-2 h-4 w-4"}),"افزودن کاربر"]})]})]}),j&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-border/20",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"جستجو"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(C.Search,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(v.Input,{placeholder:"جستجو در کاربران...",value:d,onChange:e=>{var a;o(a=e.target.value),a?l({search:a}):r()},className:"pr-10"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"نقش"}),(0,a.jsxs)(w.Select,{value:c,onValueChange:e=>m(e),children:[(0,a.jsx)(w.SelectTrigger,{children:(0,a.jsx)(w.SelectValue,{placeholder:"همه نقش‌ها"})}),(0,a.jsxs)(w.SelectContent,{children:[(0,a.jsx)(w.SelectItem,{value:"all",children:"همه نقش‌ها"}),(0,a.jsx)(w.SelectItem,{value:"admin",children:"مدیر"}),(0,a.jsx)(w.SelectItem,{value:"moderator",children:"ناظر"}),(0,a.jsx)(w.SelectItem,{value:"user",children:"کاربر"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"وضعیت"}),(0,a.jsxs)(w.Select,{value:u,onValueChange:e=>h(e),children:[(0,a.jsx)(w.SelectTrigger,{children:(0,a.jsx)(w.SelectValue,{placeholder:"همه وضعیت‌ها"})}),(0,a.jsxs)(w.SelectContent,{children:[(0,a.jsx)(w.SelectItem,{value:"all",children:"همه وضعیت‌ها"}),(0,a.jsx)(w.SelectItem,{value:"active",children:"فعال"}),(0,a.jsx)(w.SelectItem,{value:"inactive",children:"غیرفعال"}),(0,a.jsx)(w.SelectItem,{value:"suspended",children:"معلق"})]})]})]})]}),(d||"all"!==c||"all"!==u)&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)(t.Button,{variant:"ghost",size:"sm",onClick:()=>{o(""),m("all"),h("all"),r()},children:[(0,a.jsx)(D.Filter,{className:"ml-2 h-4 w-4"}),"پاک کردن فیلترها"]})})]})]}),(0,a.jsx)(N.CardContent,{children:(0,a.jsx)(y,{users:f})})]})})}e.s(["default",()=>k],51364)}]);