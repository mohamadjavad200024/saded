(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10708,e=>{"use strict";var t=e.i(43476),a=e.i(71645);e.i(74080);var s=e.i(91918),r=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let i=(0,s.createSlot)(`Primitive.${r}`),l=a.forwardRef((e,a)=>{let{asChild:s,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(s?i:r,{...l,ref:a})});return l.displayName=`Primitive.${r}`,{...e,[r]:l}},{}),i=a.forwardRef((e,a)=>(0,t.jsx)(r.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var l=e.i(25913),d=e.i(47163);let o=(0,l.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),n=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(i,{ref:s,className:(0,d.cn)(o(),e),...a}));n.displayName=i.displayName,e.s(["Label",()=>n],10708)},17513,e=>{"use strict";var t=e.i(6344),a=e.i(73493);let s=(0,t.create)((e,t)=>({categories:[],setCategories:t=>e({categories:t}),addCategory:t=>e(e=>{let a=e.categories.findIndex(e=>e.id===t.id);if(a>=0){let s=[...e.categories];return s[a]=t,{categories:s}}return{categories:[...e.categories,t]}}),updateCategory:t=>e(e=>{let a=e.categories.findIndex(e=>e.id===t.id);if(a>=0){let s=[...e.categories];return s[a]=t,{categories:s}}return e}),deleteCategory:t=>e(e=>({categories:e.categories.filter(e=>e.id!==t)})),toggleCategory:t=>e(e=>({categories:e.categories.map(e=>e.id===t?{...e,isActive:!e.isActive}:e)})),getCategory:e=>t().categories.find(t=>t.id===e),getActiveCategories:()=>t().categories.filter(e=>e.isActive&&e.enabled),getEnabledCategories:()=>t().categories.filter(e=>e.enabled),loadCategoriesFromDB:async(e=!1)=>{try{let a=await fetch(e?"/api/categories?all=true":"/api/categories");if(!a.ok)throw Error("خطا در بارگذاری دسته‌بندی‌ها");let s=(await a.json()).data||[];t().setCategories(s)}catch(e){a.logger.error("Error loading categories from DB:",e)}}}));e.s(["useCategoryStore",0,s])},70065,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(47163);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border-[0.25px] border-border/3 bg-card text-card-foreground shadow-sm",e),...a}));r.displayName="Card";let i=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...a}));i.displayName="CardHeader";let l=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("h3",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));l.displayName="CardTitle";let d=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",e),...a}));d.displayName="CardDescription";let o=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",e),...a}));o.displayName="CardContent",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>o,"CardDescription",()=>d,"CardHeader",()=>i,"CardTitle",()=>l])},99682,e=>{"use strict";var t=e.i(71645);function a(e){let a=t.useRef({value:e,previous:e});return t.useMemo(()=>(a.current.value!==e&&(a.current.previous=a.current.value,a.current.value=e),a.current.previous),[e])}e.s(["usePrevious",()=>a])},19036,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(81140),r=e.i(20783),i=e.i(30030),l=e.i(69340),d=e.i(99682),o=e.i(35804),n=e.i(48425),c="Switch",[m,u]=(0,i.createContextScope)(c),[p,x]=m(c),h=a.forwardRef((e,i)=>{let{__scopeSwitch:d,name:o,checked:m,defaultChecked:u,required:x,disabled:h,value:g="on",onCheckedChange:f,form:v,...y}=e,[N,C]=a.useState(null),w=(0,r.useComposedRefs)(i,e=>C(e)),T=a.useRef(!1),k=!N||v||!!N.closest("form"),[S,R]=(0,l.useControllableState)({prop:m,defaultProp:u??!1,onChange:f,caller:c});return(0,t.jsxs)(p,{scope:d,checked:S,disabled:h,children:[(0,t.jsx)(n.Primitive.button,{type:"button",role:"switch","aria-checked":S,"aria-required":x,"data-state":j(S),"data-disabled":h?"":void 0,disabled:h,value:g,...y,ref:w,onClick:(0,s.composeEventHandlers)(e.onClick,e=>{R(e=>!e),k&&(T.current=e.isPropagationStopped(),T.current||e.stopPropagation())})}),k&&(0,t.jsx)(b,{control:N,bubbles:!T.current,name:o,value:g,checked:S,required:x,disabled:h,form:v,style:{transform:"translateX(-100%)"}})]})});h.displayName=c;var g="SwitchThumb",f=a.forwardRef((e,a)=>{let{__scopeSwitch:s,...r}=e,i=x(g,s);return(0,t.jsx)(n.Primitive.span,{"data-state":j(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:a})});f.displayName=g;var b=a.forwardRef(({__scopeSwitch:e,control:s,checked:i,bubbles:l=!0,...n},c)=>{let m=a.useRef(null),u=(0,r.useComposedRefs)(m,c),p=(0,d.usePrevious)(i),x=(0,o.useSize)(s);return a.useEffect(()=>{let e=m.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(p!==i&&t){let a=new Event("click",{bubbles:l});t.call(e,i),e.dispatchEvent(a)}},[p,i,l]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i,...n,tabIndex:-1,ref:u,style:{...n.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function j(e){return e?"checked":"unchecked"}b.displayName="SwitchBubbleInput";var v=e.i(47163);let y=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(h,{className:(0,v.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...a,ref:s,children:(0,t.jsx)(f,{className:(0,v.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));y.displayName=h.displayName,e.s(["Switch",()=>y],19036)},30374,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(26999),r=e.i(37727),i=e.i(47163);let l=s.Root,d=s.Trigger,o=s.Portal;s.Close;let n=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(s.Overlay,{ref:r,className:(0,i.cn)("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),style:{backgroundImage:`
        url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E"),
        url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter2'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.95' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter2)'/%3E%3C/svg%3E")
      `,backgroundSize:"200px 200px, 150px 150px",backgroundBlendMode:"overlay",opacity:.9},...a}));n.displayName=s.Overlay.displayName;let c=a.forwardRef(({className:e,children:a,...l},d)=>(0,t.jsxs)(o,{children:[(0,t.jsx)(n,{}),(0,t.jsxs)(s.Content,{ref:d,"aria-describedby":void 0,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border-[0.25px] border-border/30 glass-morphism-strong p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg",e),...l,children:[a,(0,t.jsxs)(s.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(r.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"بستن"})]})]})]}));c.displayName=s.Content.displayName;let m=({className:e,...a})=>(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-right",e),...a});m.displayName="DialogHeader";let u=({className:e,...a})=>(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 sm:space-x-reverse",e),...a});u.displayName="DialogFooter";let p=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(s.Title,{ref:r,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));p.displayName=s.Title.displayName;let x=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(s.Description,{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...a}));x.displayName=s.Description.displayName,e.s(["Dialog",()=>l,"DialogContent",()=>c,"DialogDescription",()=>x,"DialogFooter",()=>u,"DialogHeader",()=>m,"DialogTitle",()=>p,"DialogTrigger",()=>d])},47627,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(47163);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:r,className:(0,s.cn)("w-full caption-bottom text-sm",e),...a})}));r.displayName="Table";let i=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("thead",{ref:r,className:(0,s.cn)("[&_tr]:border-b border-border/30",e),...a}));i.displayName="TableHeader";let l=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("tbody",{ref:r,className:(0,s.cn)("[&_tr:last-child]:border-0",e),...a}));l.displayName="TableBody",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("tfoot",{ref:r,className:(0,s.cn)("border-t border-border/30 bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...a})).displayName="TableFooter";let d=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("tr",{ref:r,className:(0,s.cn)("border-b border-border/30 transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...a}));d.displayName="TableRow";let o=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("th",{ref:r,className:(0,s.cn)("h-12 px-4 text-right align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...a}));o.displayName="TableHead";let n=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("td",{ref:r,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...a}));n.displayName="TableCell",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("caption",{ref:r,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",e),...a})).displayName="TableCaption",e.s(["Table",()=>r,"TableBody",()=>l,"TableCell",()=>n,"TableHead",()=>o,"TableHeader",()=>i,"TableRow",()=>d])},7233,e=>{"use strict";let t=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},88511,e=>{"use strict";let t=(0,e.i(75254).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],88511)},10524,e=>{"use strict";var t=e.i(43476),a=e.i(53145),s=e.i(94814),r=e.i(65638),i=e.i(67881),l=e.i(23750),d=e.i(10708),o=e.i(84762),n=e.i(19036),c=e.i(70065),m=e.i(24327),u=e.i(17513),p=e.i(20682),x=e.i(18566),h=e.i(71645),g=e.i(37727),f=e.i(31278),b=e.i(43432),j=e.i(88844),v=e.i(94179),y=e.i(62870),N=e.i(30374),C=e.i(47627),w=e.i(36361),T=e.i(7233),k=e.i(27612),S=e.i(88511);function R({supplier:e,onUpdate:a}){let{products:s}=(0,w.useProductStore)(),{getActiveCategories:r}=(0,u.useCategoryStore)(),{toast:o}=(0,p.useToast)(),[n,c]=(0,h.useState)(!1),[m,x]=(0,h.useState)(null),[g,f]=(0,h.useState)(""),[b,j]=(0,h.useState)(0),[R,I]=(0,h.useState)(void 0),[D,E]=(0,h.useState)("all"),P=r(),F=e.products||[],H=(0,h.useMemo)(()=>{let t=s.filter(t=>t.category&&e.categories.includes(t.category));if("all"!==D&&(t=t.filter(e=>e.category===D)),!m){let e=F.map(e=>e.productId);t=t.filter(t=>!e.includes(t.id))}return t},[s,e.categories,D,F,m]),B=(0,h.useMemo)(()=>{let e={};return F.forEach(t=>{e[t.category]||(e[t.category]=[]),e[t.category].push(t)}),e},[F]);return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"مدیریت محصولات"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"محصولات و تعداد موجودی که این تامین‌کننده می‌تواند تامین کند"})]}),(0,t.jsxs)(i.Button,{onClick:()=>c(!0),size:"sm",children:[(0,t.jsx)(T.Plus,{className:"ml-2 h-4 w-4"}),"افزودن محصول"]})]}),0===F.length?(0,t.jsx)("div",{className:"text-center py-8 border border-dashed rounded-lg",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"هیچ محصولی اضافه نشده است"})}):(0,t.jsx)("div",{className:"space-y-4",children:Object.entries(B).map(([e,s])=>(0,t.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-muted/50 px-4 py-2 border-b",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(v.Badge,{variant:"secondary",children:e}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[s.length," محصول - مجموع:"," ",new Intl.NumberFormat("fa-IR").format(s.reduce((e,t)=>e+t.quantity,0))," ","عدد"]})]})}),(0,t.jsxs)(C.Table,{children:[(0,t.jsx)(C.TableHeader,{children:(0,t.jsxs)(C.TableRow,{children:[(0,t.jsx)(C.TableHead,{children:"محصول"}),(0,t.jsx)(C.TableHead,{children:"تعداد"}),(0,t.jsx)(C.TableHead,{children:"قیمت واحد"}),(0,t.jsx)(C.TableHead,{className:"text-left",children:"عملیات"})]})}),(0,t.jsx)(C.TableBody,{children:s.map(e=>(0,t.jsxs)(C.TableRow,{children:[(0,t.jsx)(C.TableCell,{className:"font-medium",children:e.productName}),(0,t.jsxs)(C.TableCell,{children:[new Intl.NumberFormat("fa-IR").format(e.quantity)," عدد"]}),(0,t.jsx)(C.TableCell,{children:e.unitPrice?`${new Intl.NumberFormat("fa-IR").format(e.unitPrice)} تومان`:"-"}),(0,t.jsx)(C.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>{x(e),f(e.productId),j(e.quantity),I(e.unitPrice),c(!0)},children:(0,t.jsx)(S.Edit,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>{var t;return t=e.productId,void(a(F.filter(e=>e.productId!==t)),o({title:"موفق",description:"محصول حذف شد"}))},children:(0,t.jsx)(k.Trash2,{className:"h-4 w-4 text-destructive"})})]})})]},e.productId))})]})]},e))}),(0,t.jsx)(N.Dialog,{open:n,onOpenChange:c,children:(0,t.jsxs)(N.DialogContent,{className:"max-w-md",children:[(0,t.jsxs)(N.DialogHeader,{children:[(0,t.jsx)(N.DialogTitle,{children:m?"ویرایش محصول":"افزودن محصول"}),(0,t.jsx)(N.DialogDescription,{children:"محصول و تعداد موجودی را انتخاب کنید"})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{children:"فیلتر دسته‌بندی"}),(0,t.jsxs)(y.Select,{value:D,onValueChange:E,children:[(0,t.jsx)(y.SelectTrigger,{children:(0,t.jsx)(y.SelectValue,{placeholder:"همه دسته‌بندی‌ها"})}),(0,t.jsxs)(y.SelectContent,{children:[(0,t.jsx)(y.SelectItem,{value:"all",children:"همه دسته‌بندی‌ها"}),P.map(e=>(0,t.jsx)(y.SelectItem,{value:e.name,children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{children:"محصول *"}),(0,t.jsxs)(y.Select,{value:g,onValueChange:f,children:[(0,t.jsx)(y.SelectTrigger,{children:(0,t.jsx)(y.SelectValue,{placeholder:"انتخاب محصول"})}),(0,t.jsx)(y.SelectContent,{children:H.map(e=>(0,t.jsxs)(y.SelectItem,{value:e.id,children:[e.name," (",e.category,")"]},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{children:"تعداد *"}),(0,t.jsx)(l.Input,{type:"number",min:"1",value:b||"",onChange:e=>j(parseInt(e.target.value)||0),placeholder:"تعداد موجودی"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{children:"قیمت واحد (اختیاری)"}),(0,t.jsx)(l.Input,{type:"number",min:"0",value:R||"",onChange:e=>I(e.target.value?parseFloat(e.target.value):void 0),placeholder:"قیمت واحد از تامین‌کننده"})]})]}),(0,t.jsxs)(N.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>{f(""),j(0),I(void 0),x(null),c(!1)},children:"انصراف"}),(0,t.jsx)(i.Button,{onClick:()=>{if(!g||b<=0)return void o({title:"خطا",description:"لطفاً محصول و تعداد را وارد کنید",variant:"destructive"});let e=s.find(e=>e.id===g);if(!e)return;let t={productId:e.id,productName:e.name,category:e.category||"",quantity:b,unitPrice:R||void 0};m?(a(F.map(e=>e.productId===m.productId?t:e)),o({title:"موفق",description:"محصول به‌روزرسانی شد"})):(a([...F,t]),o({title:"موفق",description:"محصول اضافه شد"})),f(""),j(0),I(void 0),x(null),c(!1)},children:m?"ذخیره تغییرات":"افزودن"})]})]})})]})}let I=r.object({name:r.string().min(1,"نام تامین‌کننده الزامی است"),phone:r.string().min(1,"شماره تماس الزامی است"),email:r.string().email("ایمیل معتبر نیست").optional().or(r.literal("")),categories:r.array(r.string()).min(1,"حداقل یک دسته‌بندی الزامی است"),notes:r.string().optional(),isActive:r.boolean(),lowStockThreshold:r.number().min(0).optional()});function D({supplier:e,onSuccess:r}){let y=(0,x.useRouter)(),{addSupplier:N,updateSupplier:C}=(0,m.useSupplierStore)(),{getActiveCategories:w,loadCategoriesFromDB:T}=(0,u.useCategoryStore)(),{toast:k}=(0,p.useToast)(),S=w(),[D,E]=(0,h.useState)(e?.categories||[]);(0,h.useEffect)(()=>{(async()=>{try{await T()}catch(e){console.error("Error loading categories:",e)}})()},[T]);let[P,F]=(0,h.useState)(e?.products||[]),{register:H,handleSubmit:B,formState:{errors:L,isSubmitting:z},setValue:A,watch:M}=(0,a.useForm)({resolver:(0,s.zodResolver)(I),defaultValues:e?{name:e.name,phone:e.phone,email:e.email||"",categories:e.categories,notes:e.notes||"",isActive:e.isActive,lowStockThreshold:e.lowStockThreshold||10}:{name:"",phone:"",email:"",categories:[],notes:"",isActive:!0,lowStockThreshold:10}}),O=M("isActive"),q=e=>{let t=D.includes(e)?D.filter(t=>t!==e):[...D,e];E(t),A("categories",t)},V=async t=>{try{if(0===D.length)return void k({title:"خطا",description:"حداقل یک دسته‌بندی باید انتخاب شود",variant:"destructive"});let a={...t,categories:D,products:P,email:t.email||void 0,notes:t.notes||void 0};e?(C(e.id,a),k({title:"موفق",description:"تامین‌کننده با موفقیت به‌روزرسانی شد"})):(N(a),k({title:"موفق",description:"تامین‌کننده با موفقیت اضافه شد"})),r?.(),y.push("/admin/suppliers")}catch(e){k({title:"خطا",description:"خطایی رخ داد. لطفاً دوباره تلاش کنید.",variant:"destructive"})}};return(0,t.jsxs)("form",{onSubmit:B(V),className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)(c.Card,{className:"shadow-sm",children:[(0,t.jsx)(c.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,t.jsxs)(c.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(b.Phone,{className:"h-5 w-5 text-primary"}),"اطلاعات تماس"]})}),(0,t.jsxs)(c.CardContent,{className:"space-y-4 pt-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{htmlFor:"name",children:"نام تامین‌کننده *"}),(0,t.jsx)(l.Input,{id:"name",...H("name"),placeholder:"نام تامین‌کننده"}),L.name&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:L.name.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{htmlFor:"phone",children:"شماره تماس *"}),(0,t.jsx)(l.Input,{id:"phone",...H("phone"),placeholder:"09123456789",type:"tel"}),L.phone&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:L.phone.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{htmlFor:"email",children:"ایمیل"}),(0,t.jsx)(l.Input,{id:"email",...H("email"),placeholder:"example@email.com",type:"email"}),L.email&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:L.email.message})]})]})]}),(0,t.jsxs)(c.Card,{className:"shadow-sm",children:[(0,t.jsx)(c.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,t.jsxs)(c.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(j.Package,{className:"h-5 w-5 text-primary"}),"دسته‌بندی‌ها و تنظیمات"]})}),(0,t.jsxs)(c.CardContent,{className:"space-y-4 pt-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{children:"دسته‌بندی محصولات *"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2 p-3 border border-border/30 rounded-lg min-h-[120px]",children:S.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>q(e.name),className:`
                      p-2 rounded text-sm text-right transition-colors
                      ${D.includes(e.name)?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}
                    `,children:e.name},e.id))}),D.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:D.map(e=>(0,t.jsxs)(v.Badge,{variant:"default",className:"gap-1",children:[e,(0,t.jsx)("button",{type:"button",onClick:()=>q(e),className:"ml-1 hover:opacity-70",children:(0,t.jsx)(g.X,{className:"h-3 w-3"})})]},e))}),L.categories&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:L.categories.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{htmlFor:"lowStockThreshold",children:"حد آستانه موجودی کم (عدد)"}),(0,t.jsx)(l.Input,{id:"lowStockThreshold",type:"number",...H("lowStockThreshold",{valueAsNumber:!0}),placeholder:"10"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"وقتی موجودی محصولات به این عدد یا کمتر برسد، هشدار نمایش داده می‌شود"})]})]})]})]}),(0,t.jsxs)(c.Card,{className:"shadow-sm",children:[(0,t.jsx)(c.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,t.jsx)(c.CardTitle,{children:"یادداشت‌ها"})}),(0,t.jsx)(c.CardContent,{className:"pt-6",children:(0,t.jsx)(o.Textarea,{...H("notes"),placeholder:"یادداشت‌های اضافی درباره این تامین‌کننده...",rows:4})})]}),(0,t.jsxs)(c.Card,{className:"shadow-sm",children:[(0,t.jsx)(c.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,t.jsxs)(c.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(j.Package,{className:"h-5 w-5 text-primary"}),"مدیریت محصولات"]})}),(0,t.jsx)(c.CardContent,{className:"pt-6",children:(0,t.jsx)(R,{supplier:{...e,categories:D,products:P},onUpdate:F})})]}),(0,t.jsxs)(c.Card,{className:"shadow-sm",children:[(0,t.jsx)(c.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,t.jsx)(c.CardTitle,{children:"وضعیت"})}),(0,t.jsx)(c.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(d.Label,{children:"فعال"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"تامین‌کننده فعال است و می‌تواند محصولات را تامین کند"})]}),(0,t.jsx)(n.Switch,{checked:O,onCheckedChange:e=>A("isActive",e)})]})})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-4 pt-4 border-t border-border/30",children:[(0,t.jsx)(i.Button,{type:"button",variant:"outline",onClick:()=>y.back(),size:"lg",children:"انصراف"}),(0,t.jsx)(i.Button,{type:"submit",disabled:z,size:"lg",className:"min-w-[140px]",children:z?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.Loader2,{className:"ml-2 h-4 w-4 animate-spin"}),"در حال ذخیره..."]}):e?"ذخیره تغییرات":"افزودن تامین‌کننده"})]})]})}e.s(["SupplierForm",()=>D],10524)},64707,e=>{"use strict";var t=e.i(43476),a=e.i(10524),s=e.i(70065);function r(){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"افزودن تامین‌کننده جدید"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"اطلاعات تامین‌کننده جدید را وارد کنید"})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{children:"فرم تامین‌کننده"})}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)(a.SupplierForm,{})})]})]})}e.s(["default",()=>r])}]);