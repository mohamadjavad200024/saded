(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15788,e=>{"use strict";let s=(0,e.i(75254).default)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["Truck",()=>s],15788)},71757,40392,e=>{"use strict";var s=e.i(75254);let a=(0,s.default)("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);e.s(["Plane",()=>a],71757);let t=(0,s.default)("Ship",[["path",{d:"M12 10.189V14",key:"1p8cqu"}],["path",{d:"M12 2v3",key:"qbqxhf"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-8.188-3.639a2 2 0 0 0-1.624 0L3 14a11.6 11.6 0 0 0 2.81 7.76",key:"7tigtc"}],["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1s1.2 1 2.5 1c2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"1924j5"}]]);e.s(["Ship",()=>t],40392)},98919,e=>{"use strict";let s=(0,e.i(75254).default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>s],98919)},93226,e=>{"use strict";var s=e.i(6344),a=e.i(79473);let t=(0,s.create)()((0,a.persist)((e,s)=>({user:null,isAuthenticated:!1,register:async(s,a,t)=>{let r=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,phone:a,password:t})}),i=await r.json();if(!i.success)throw Error(i.error||"خطا در ثبت‌نام");e({user:{id:i.data.user.id,name:i.data.user.name,phone:i.data.user.phone,createdAt:i.data.user.createdAt},isAuthenticated:!0})},login:async(s,a)=>{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:s,password:a})}),r=await t.json();return!!r.success&&(e({user:{id:r.data.user.id,name:r.data.user.name,phone:r.data.user.phone,role:r.data.user.role,createdAt:r.data.user.createdAt},isAuthenticated:!0}),!0)},logout:()=>{e({user:null,isAuthenticated:!1})},updateUser:a=>{let{user:t}=s();t&&e({user:{...t,...a}})},loadUser:async s=>{try{let a=await fetch(`/api/auth/me?userId=${s}`),t=await a.json();t.success&&t.data.user&&e({user:{id:t.data.user.id,name:t.data.user.name,phone:t.data.user.phone,role:t.data.user.role,createdAt:t.data.user.createdAt},isAuthenticated:!0})}catch(e){console.error("Error loading user:",e)}}}),{name:"saded_auth",storage:(0,a.createJSONStorage)(()=>localStorage),partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated})}));e.s(["useAuthStore",0,t])},39616,e=>{"use strict";let s=(0,e.i(75254).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Settings",()=>s],39616)},92161,92270,e=>{"use strict";var s=e.i(75254);let a=(0,s.default)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);e.s(["Menu",()=>a],92161);let t=(0,s.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);e.s(["LogOut",()=>t],92270)},5125,95116,83086,e=>{"use strict";var s=e.i(75254);let a=(0,s.default)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);e.s(["Car",()=>a],5125);let t=(0,s.default)("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);e.s(["Wrench",()=>t],95116);let r=(0,s.default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);e.s(["Sparkles",()=>r],83086)},49786,e=>{"use strict";var s=e.i(43476),a=e.i(22016),t=e.i(55436),r=e.i(1928),i=e.i(84614),l=e.i(92161),n=e.i(37727),c=e.i(92270),d=e.i(67881),o=e.i(23750),m=e.i(18566),x=e.i(47163),h=e.i(5125),p=e.i(95116),u=e.i(83086),g=e.i(39616);let f=[{name:"خانه",href:"/",icon:h.Car},{name:"محصولات",href:"/products",icon:p.Wrench},{name:"دسته‌بندی‌ها",href:"/categories",icon:u.Sparkles},{name:"خدمات",href:"/services",icon:g.Settings}];function j({mobile:e=!1,onNavigate:t}){let r=(0,m.usePathname)();return e?(0,s.jsx)("nav",{className:"flex flex-col space-y-2",children:f.map(e=>{let i=e.icon,l=r===e.href;return(0,s.jsxs)(a.default,{href:e.href,onClick:t,className:(0,x.cn)("flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-lg text-base font-medium transition-colors",l?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent hover:text-accent-foreground"),children:[(0,s.jsx)(i,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:e.name})]},e.href)})}):(0,s.jsx)("nav",{className:"hidden lg:flex items-center space-x-1 space-x-reverse",children:f.map(e=>{let t=e.icon,i=r===e.href;return(0,s.jsxs)(a.default,{href:e.href,className:(0,x.cn)("flex items-center space-x-2 space-x-reverse px-3 xl:px-4 py-2 rounded-md text-sm font-medium transition-colors",i?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[(0,s.jsx)(t,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"hidden xl:inline",children:e.name})]},e.href)})})}var y=e.i(61180),b=e.i(93226),v=e.i(71645),N=e.i(75254);let w=(0,N.default)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),k=(0,N.default)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);var S=e.i(63178);function C(){let{theme:e,setTheme:a,resolvedTheme:t}=(0,S.useTheme)(),[r,i]=v.useState(!1);if(v.useEffect(()=>{i(!0)},[]),!r)return(0,s.jsxs)(d.Button,{variant:"ghost",size:"icon",className:"h-9 w-9",children:[(0,s.jsx)(k,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"تغییر تم"})]});let l="dark"===t||"dark"===e;return(0,s.jsxs)(d.Button,{variant:"ghost",size:"icon",className:"h-9 w-9 relative",onClick:()=>{a("dark"===(t||("system"===e?"light":e))?"light":"dark")},type:"button",children:[(0,s.jsx)(k,{className:`h-5 w-5 absolute transition-all duration-300 ${l?"rotate-90 scale-0 opacity-0":"rotate-0 scale-100 opacity-100"}`}),(0,s.jsx)(w,{className:`h-5 w-5 absolute transition-all duration-300 ${l?"rotate-0 scale-100 opacity-100":"-rotate-90 scale-0 opacity-0"}`}),(0,s.jsx)("span",{className:"sr-only",children:"تغییر تم"})]})}var M=e.i(52917),$=e.i(63415);function T(){let[e,m]=(0,v.useState)(""),[x,h]=(0,v.useState)(!1),[p,u]=(0,v.useState)(!1),[g,f]=(0,v.useState)(!1),{getItemCount:N,initializeSession:w,loadFromDatabase:k,items:S}=(0,y.useCartStore)(),{user:T,isAuthenticated:P,logout:z}=(0,b.useAuthStore)(),A=S.reduce((e,s)=>e+s.quantity,0);return(0,v.useEffect)(()=>{f(!0),(async()=>{try{w(),await k()}catch(e){console.error("Error initializing cart in header:",e)}})()},[w,k]),(0,s.jsxs)("header",{className:"sticky top-0 z-50 w-full border-b-[0.25px] border-border/30 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[(0,s.jsxs)("div",{className:"container flex h-14 sm:h-16 items-center justify-between px-3 sm:px-4",children:[(0,s.jsx)(a.default,{href:"/",className:"flex items-center space-x-1.5 space-x-reverse min-w-0 flex-shrink-0",children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-xl sm:text-2xl font-bold text-primary leading-tight",children:"ساد"}),(0,s.jsx)("span",{className:"hidden sm:block text-[10px] sm:text-xs text-muted-foreground leading-tight",children:"قطعات خودرو وارداتی"})]})}),(0,s.jsx)("div",{className:"hidden lg:block",children:(0,s.jsx)(j,{})}),(0,s.jsx)("div",{className:"hidden lg:flex flex-1 max-w-xl mx-8",children:(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)(t.Search,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,s.jsx)(o.Input,{type:"search",placeholder:"جستجوی قطعه، برند یا شماره VIN...",value:e,onChange:e=>m(e.target.value),className:"pr-10 w-full h-9"})]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-1 space-x-reverse flex-shrink-0",children:[(0,s.jsxs)(d.Button,{variant:"ghost",size:"icon",className:"lg:hidden h-9 w-9",onClick:()=>u(!p),children:[(0,s.jsx)(t.Search,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"جستجو"})]}),(0,s.jsx)(C,{}),P&&T?(0,s.jsxs)($.DropdownMenu,{children:[(0,s.jsx)($.DropdownMenuTrigger,{asChild:!0,children:(0,s.jsxs)(d.Button,{variant:"ghost",size:"icon",className:"hidden md:flex h-9 w-9",children:[(0,s.jsx)(i.User,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"حساب کاربری"})]})}),(0,s.jsxs)($.DropdownMenuContent,{align:"end",className:"w-56",children:[(0,s.jsxs)("div",{className:"px-2 py-1.5",children:[(0,s.jsx)("p",{className:"text-sm font-semibold",children:T.name}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:T.phone})]}),(0,s.jsx)($.DropdownMenuSeparator,{}),(0,s.jsx)($.DropdownMenuItem,{asChild:!0,children:(0,s.jsxs)(a.default,{href:"/profile",className:"cursor-pointer",children:[(0,s.jsx)(i.User,{className:"ml-2 h-4 w-4"}),"پروفایل"]})}),(0,s.jsx)($.DropdownMenuSeparator,{}),(0,s.jsxs)($.DropdownMenuItem,{onClick:()=>{z()},className:"cursor-pointer text-destructive focus:text-destructive",children:[(0,s.jsx)(c.LogOut,{className:"ml-2 h-4 w-4"}),"خروج"]})]})]}):(0,s.jsx)(a.default,{href:"/auth",children:(0,s.jsxs)(d.Button,{variant:"ghost",size:"icon",className:"hidden md:flex h-9 w-9",children:[(0,s.jsx)(i.User,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"حساب کاربری"})]})}),(0,s.jsx)(a.default,{href:"/cart","aria-label":g?`سبد خرید با ${A} آیتم`:"سبد خرید",children:(0,s.jsxs)(d.Button,{variant:"ghost",size:"icon",className:"relative h-9 w-9","aria-label":g&&A>0?`سبد خرید (${A} آیتم)`:"سبد خرید",children:[(0,s.jsx)(r.ShoppingCart,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"سبد خرید"}),g&&A>0&&(0,s.jsx)("span",{className:"absolute -top-0.5 -left-0.5 h-4 w-4 sm:h-5 sm:w-5 rounded-full bg-secondary text-secondary-foreground text-[10px] sm:text-xs font-bold flex items-center justify-center","aria-label":`${A} آیتم در سبد خرید`,children:A>99?"99+":A})]})}),(0,s.jsxs)(M.Sheet,{open:x,onOpenChange:h,children:[(0,s.jsx)(M.SheetTrigger,{asChild:!0,children:(0,s.jsxs)(d.Button,{variant:"ghost",size:"icon",className:"lg:hidden h-9 w-9",children:[(0,s.jsx)(l.Menu,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"منو"})]})}),(0,s.jsxs)(M.SheetContent,{side:"right",className:"w-[280px] sm:w-[320px]",children:[(0,s.jsx)(M.SheetHeader,{children:(0,s.jsx)(M.SheetTitle,{children:"منو"})}),(0,s.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,s.jsx)(j,{mobile:!0,onNavigate:()=>h(!1)}),(0,s.jsxs)("div",{className:"pt-4 border-t-[0.25px] border-border/30 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"تم"}),(0,s.jsx)(C,{})]}),P&&T?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"px-2 py-1.5 border-b border-border/30",children:[(0,s.jsx)("p",{className:"text-sm font-semibold",children:T.name}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:T.phone})]}),(0,s.jsx)(a.default,{href:"/profile",children:(0,s.jsxs)(d.Button,{variant:"ghost",className:"w-full justify-start",onClick:()=>h(!1),children:[(0,s.jsx)(i.User,{className:"h-4 w-4 ml-2"}),"پروفایل"]})}),(0,s.jsxs)(d.Button,{variant:"ghost",className:"w-full justify-start text-destructive hover:text-destructive",onClick:()=>{z(),h(!1)},children:[(0,s.jsx)(c.LogOut,{className:"h-4 w-4 ml-2"}),"خروج"]})]}):(0,s.jsx)(a.default,{href:"/auth",children:(0,s.jsxs)(d.Button,{variant:"ghost",className:"w-full justify-start",onClick:()=>h(!1),children:[(0,s.jsx)(i.User,{className:"h-4 w-4 ml-2"}),"حساب کاربری"]})})]})]})]})]})]})]}),p&&(0,s.jsx)("div",{className:"lg:hidden border-t-[0.25px] border-border/30 px-3 py-2 bg-background animate-in slide-in-from-top",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(t.Search,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,s.jsx)(o.Input,{type:"search",placeholder:"جستجو...",value:e,onChange:e=>m(e.target.value),className:"pr-10 h-9",autoFocus:!0}),(0,s.jsx)(d.Button,{variant:"ghost",size:"icon",className:"absolute left-1 top-1/2 transform -translate-y-1/2 h-7 w-7",onClick:()=>u(!1),children:(0,s.jsx)(n.X,{className:"h-4 w-4"})})]})})]})}e.s(["Header",()=>T],49786)},4967,e=>{"use strict";function s(e=600,a=600){let t=encodeURIComponent(`${e}x${a}`);return`https://placehold.co/${e}x${a}/f3f4f6/9ca3af?text=${t}`}e.s(["getPlaceholderImage",()=>s])},27341,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(81140),r=e.i(30030),i=e.i(42727),l=e.i(96626),n=e.i(48425),c=e.i(86318),d=e.i(69340),o=e.i(10772),m="Tabs",[x,h]=(0,r.createContextScope)(m,[i.createRovingFocusGroupScope]),p=(0,i.createRovingFocusGroupScope)(),[u,g]=x(m),f=a.forwardRef((e,a)=>{let{__scopeTabs:t,value:r,onValueChange:i,defaultValue:l,orientation:x="horizontal",dir:h,activationMode:p="automatic",...g}=e,f=(0,c.useDirection)(h),[j,y]=(0,d.useControllableState)({prop:r,onChange:i,defaultProp:l??"",caller:m});return(0,s.jsx)(u,{scope:t,baseId:(0,o.useId)(),value:j,onValueChange:y,orientation:x,dir:f,activationMode:p,children:(0,s.jsx)(n.Primitive.div,{dir:f,"data-orientation":x,...g,ref:a})})});f.displayName=m;var j="TabsList",y=a.forwardRef((e,a)=>{let{__scopeTabs:t,loop:r=!0,...l}=e,c=g(j,t),d=p(t);return(0,s.jsx)(i.Root,{asChild:!0,...d,orientation:c.orientation,dir:c.dir,loop:r,children:(0,s.jsx)(n.Primitive.div,{role:"tablist","aria-orientation":c.orientation,...l,ref:a})})});y.displayName=j;var b="TabsTrigger",v=a.forwardRef((e,a)=>{let{__scopeTabs:r,value:l,disabled:c=!1,...d}=e,o=g(b,r),m=p(r),x=k(o.baseId,l),h=S(o.baseId,l),u=l===o.value;return(0,s.jsx)(i.Item,{asChild:!0,...m,focusable:!c,active:u,children:(0,s.jsx)(n.Primitive.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":h,"data-state":u?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:x,...d,ref:a,onMouseDown:(0,t.composeEventHandlers)(e.onMouseDown,e=>{c||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(l)}),onKeyDown:(0,t.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(l)}),onFocus:(0,t.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==o.activationMode;u||c||!e||o.onValueChange(l)})})})});v.displayName=b;var N="TabsContent",w=a.forwardRef((e,t)=>{let{__scopeTabs:r,value:i,forceMount:c,children:d,...o}=e,m=g(N,r),x=k(m.baseId,i),h=S(m.baseId,i),p=i===m.value,u=a.useRef(p);return a.useEffect(()=>{let e=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,s.jsx)(l.Presence,{present:c||p,children:({present:a})=>(0,s.jsx)(n.Primitive.div,{"data-state":p?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":x,hidden:!a,id:h,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:a&&d})})});function k(e,s){return`${e}-trigger-${s}`}function S(e,s){return`${e}-content-${s}`}w.displayName=N;var C=e.i(47163);let M=a.forwardRef(({className:e,...a},t)=>(0,s.jsx)(y,{ref:t,className:(0,C.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...a}));M.displayName=y.displayName;let $=a.forwardRef(({className:e,...a},t)=>(0,s.jsx)(v,{ref:t,className:(0,C.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...a}));$.displayName=v.displayName;let T=a.forwardRef(({className:e,...a},t)=>(0,s.jsx)(w,{ref:t,className:(0,C.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...a}));T.displayName=w.displayName,e.s(["Tabs",()=>f,"TabsContent",()=>T,"TabsList",()=>M,"TabsTrigger",()=>$],27341)},17842,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(70065),r=e.i(67881),i=e.i(27341),l=e.i(1928),n=e.i(75254);let c=(0,n.default)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),d=(0,n.default)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),o=(0,n.default)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var m=e.i(43531),x=e.i(15788),h=e.i(98919),p=e.i(71757),u=e.i(40392),g=e.i(63209),f=e.i(57688),j=e.i(22016),y=e.i(61180),b=e.i(36361),v=e.i(4967);function N({productId:e}){let[n,N]=(0,a.useState)(0),[w,k]=(0,a.useState)(1),[S,C]=(0,a.useState)(null),[M,$]=(0,a.useState)(null),[T,P]=(0,a.useState)(!0),[z,A]=(0,a.useState)(!1),E=(0,y.useCartStore)(e=>e.addItem),I=(0,b.useProductStore)(e=>e.getProduct),O=(0,b.useProductStore)(e=>e.addProduct);(0,a.useEffect)(()=>{A(!0);let s=I(e);if(s){$(s),P(!1);return}(async()=>{try{P(!0);let s=await fetch(`/api/products/${e}`);if(s.ok){let e=await s.json();if(e.success&&e.data){let s=e.data;O(s),$(s)}else $(null)}else $(null)}catch(e){console.error("Error fetching product:",e),$(null)}finally{P(!1)}})()},[e,I,O]);let B=(0,y.useCartStore)(e=>e.setShippingMethod);if(!z||T)return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 sm:py-16 md:py-20 px-4",suppressHydrationWarning:!0,children:[(0,s.jsx)("div",{className:"h-12 w-12 sm:h-16 sm:w-16 border-4 border-primary border-t-transparent rounded-full animate-spin mb-4"}),(0,s.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold mb-2",children:"در حال بارگذاری..."})]});if(!M)return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 sm:py-16 md:py-20 px-4",children:[(0,s.jsx)(g.AlertCircle,{className:"h-12 w-12 sm:h-16 sm:w-16 text-muted-foreground mb-4"}),(0,s.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold mb-2",children:"محصول یافت نشد"}),(0,s.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground text-center mb-6",children:"متأسفانه محصول مورد نظر شما یافت نشد"}),(0,s.jsx)(j.default,{href:"/products",children:(0,s.jsx)(r.Button,{variant:"default",children:"بازگشت به لیست محصولات"})})]});let R=window.location.origin,L=`${R}/products/${M.id}`,q=M.images?.[0]||(0,v.getPlaceholderImage)(600,600);M.price;let D=M.inStock?"https://schema.org/InStock":"https://schema.org/OutOfStock",H={"@context":"https://schema.org","@type":"Product",name:M.name,description:M.description||`${M.name} - قطعه خودرو ${M.brand||""}`,image:M.images.length>0?M.images:[q],brand:{"@type":"Brand",name:M.brand||"نامشخص"},category:M.category,sku:M.id,offers:{"@type":"Offer",url:L,priceCurrency:"IRR",price:M.price.toString(),priceValidUntil:new Date(Date.now()+31536e6).toISOString().split("T")[0],availability:D,itemCondition:"https://schema.org/NewCondition",seller:{"@type":"Organization",name:"ساد"}}};return M.rating&&(H.aggregateRating={"@type":"AggregateRating",ratingValue:M.rating.toString(),reviewCount:(M.reviews||0).toString()}),(0,s.jsxs)("div",{className:"space-y-4 sm:space-y-6 md:space-y-8 px-2 sm:px-0",children:[(0,s.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(H)}}),(0,s.jsxs)("nav",{className:"text-[10px] sm:text-xs text-muted-foreground overflow-x-auto mb-2",children:[(0,s.jsx)("span",{children:"خانه"})," / ",(0,s.jsx)("span",{children:"محصولات"})," / ",(0,s.jsx)("span",{children:M.category})," /"," ",(0,s.jsx)("span",{className:"text-foreground truncate",children:M.name})]}),(0,s.jsx)("div",{children:(0,s.jsx)("span",{className:"text-xs sm:text-sm text-muted-foreground",children:M.category})}),(M.airShippingEnabled||M.seaShippingEnabled)&&(0,s.jsxs)("div",{className:"hidden lg:block space-y-2 sm:space-y-3 lg:max-w-lg lg:mr-auto",children:[(0,s.jsx)("label",{className:"text-xs sm:text-sm font-medium block",children:"روش ارسال:"}),(0,s.jsxs)("div",{className:`grid gap-2 sm:gap-3 ${M.airShippingEnabled&&M.seaShippingEnabled?"grid-cols-2":"grid-cols-1"}`,children:[M.airShippingEnabled&&(0,s.jsxs)("button",{onClick:()=>C("air"),className:`flex flex-col items-center justify-center gap-2 p-3 sm:p-4 rounded-lg border-[0.25px] transition-all ${"air"===S?"border-primary/30 bg-primary/5":"border-border/30 hover:border-primary/20"}`,children:[(0,s.jsx)(p.Plane,{className:`h-5 w-5 sm:h-6 sm:w-6 ${"air"===S?"text-primary":"text-muted-foreground"}`}),(0,s.jsx)("span",{className:`text-xs sm:text-sm font-medium ${"air"===S?"text-primary":"text-foreground"}`,children:"ارسال هوایی"})]}),M.seaShippingEnabled&&(0,s.jsxs)("button",{onClick:()=>C("sea"),className:`flex flex-col items-center justify-center gap-2 p-3 sm:p-4 rounded-lg border-[0.25px] transition-all ${"sea"===S?"border-primary/30 bg-primary/5":"border-border/30 hover:border-primary/20"}`,children:[(0,s.jsx)(u.Ship,{className:`h-5 w-5 sm:h-6 sm:w-6 ${"sea"===S?"text-primary":"text-muted-foreground"}`}),(0,s.jsx)("span",{className:`text-xs sm:text-sm font-medium ${"sea"===S?"text-primary":"text-foreground"}`,children:"ارسال دریایی"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 md:gap-8",children:[(0,s.jsxs)("div",{className:"space-y-2 sm:space-y-3 lg:-mt-32",children:[(0,s.jsx)("div",{className:"relative aspect-square w-full bg-muted rounded-lg overflow-hidden",children:(0,s.jsx)(f.default,{src:M.images[n]||(0,v.getPlaceholderImage)(600,600),alt:M.name,fill:!0,className:"object-cover",priority:!0})}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:(M.images.length>0?M.images:[(0,v.getPlaceholderImage)(600,600)]).map((e,a)=>(0,s.jsx)("button",{onClick:()=>N(a),className:`relative aspect-square rounded-lg overflow-hidden border-[0.25px] transition-all ${n===a?"border-primary/30":"border-transparent hover:border-muted-foreground/30"}`,children:(0,s.jsx)(f.default,{src:e,alt:`${M.name} - تصویر ${a+1} از ${M.images.length}`,fill:!0,className:"object-cover",loading:a<2?"eager":"lazy",sizes:"(max-width: 640px) 25vw, 20vw"})},a))}),(M.airShippingEnabled||M.seaShippingEnabled)&&(0,s.jsxs)("div",{className:"block lg:hidden space-y-2 sm:space-y-3 pt-2 sm:pt-3",children:[(0,s.jsx)("label",{className:"text-xs sm:text-sm font-medium block",children:"روش ارسال:"}),(0,s.jsxs)("div",{className:`grid gap-2 sm:gap-3 ${M.airShippingEnabled&&M.seaShippingEnabled?"grid-cols-2":"grid-cols-1"}`,children:[M.airShippingEnabled&&(0,s.jsxs)("button",{onClick:()=>C("air"),className:`flex flex-col items-center justify-center gap-2 p-3 sm:p-4 rounded-lg border-[0.25px] transition-all ${"air"===S?"border-primary/30 bg-primary/5":"border-border/30 hover:border-primary/20"}`,children:[(0,s.jsx)(p.Plane,{className:`h-5 w-5 sm:h-6 sm:w-6 ${"air"===S?"text-primary":"text-muted-foreground"}`}),(0,s.jsx)("span",{className:`text-xs sm:text-sm font-medium ${"air"===S?"text-primary":"text-foreground"}`,children:"ارسال هوایی"})]}),M.seaShippingEnabled&&(0,s.jsxs)("button",{onClick:()=>C("sea"),className:`flex flex-col items-center justify-center gap-2 p-3 sm:p-4 rounded-lg border-[0.25px] transition-all ${"sea"===S?"border-primary/30 bg-primary/5":"border-border/30 hover:border-primary/20"}`,children:[(0,s.jsx)(u.Ship,{className:`h-5 w-5 sm:h-6 sm:w-6 ${"sea"===S?"text-primary":"text-muted-foreground"}`}),(0,s.jsx)("span",{className:`text-xs sm:text-sm font-medium ${"sea"===S?"text-primary":"text-foreground"}`,children:"ارسال دریایی"})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4 sm:space-y-5 md:space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 mb-2 flex-wrap",children:[(0,s.jsx)("span",{className:"text-[10px] sm:text-xs text-muted-foreground",children:M.brand}),(0,s.jsx)("span",{className:"text-muted-foreground hidden sm:inline text-xs",children:"•"}),(0,s.jsx)("span",{className:"text-[10px] sm:text-xs text-muted-foreground",children:M.category})]}),(0,s.jsx)("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold mb-3 sm:mb-4 leading-tight",children:M.name}),(0,s.jsx)("div",{className:"flex items-center gap-2 sm:gap-3 mb-0",children:M.rating&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(o,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 fill-accent text-accent"}),(0,s.jsx)("span",{className:"text-sm sm:text-base font-semibold mr-1",children:M.rating})]}),M.reviews&&(0,s.jsxs)("span",{className:"text-xs sm:text-sm text-muted-foreground",children:["(",M.reviews," نظر)"]})]})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[(0,s.jsxs)("span",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-primary",children:[M.price.toLocaleString("fa-IR")," تومان"]}),M.originalPrice&&M.originalPrice>M.price&&(0,s.jsx)("span",{className:"text-sm sm:text-base text-muted-foreground line-through",children:M.originalPrice.toLocaleString("fa-IR")})]}),M.originalPrice&&M.originalPrice>M.price&&(0,s.jsxs)("div",{className:"text-[10px] sm:text-xs text-secondary font-semibold",children:[Math.round((M.originalPrice-M.price)/M.originalPrice*100),"% تخفیف"]})]}),(0,s.jsx)("div",{className:"flex items-center gap-1.5",children:M.inStock?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Check,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 text-green-600 flex-shrink-0"}),(0,s.jsxs)("span",{className:"text-xs sm:text-sm text-green-600 font-semibold",children:["موجود در انبار",M.stockCount?` (${M.stockCount} عدد)`:""]})]}):(0,s.jsx)("span",{className:"text-xs sm:text-sm text-secondary font-semibold",children:"ناموجود"})}),(0,s.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,s.jsx)("label",{className:"text-xs sm:text-sm font-medium",children:"تعداد:"}),(0,s.jsxs)("div",{className:"flex items-center border-[0.25px] border-border/30 rounded-md",children:[(0,s.jsx)(r.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9",onClick:()=>k(Math.max(1,w-1)),children:(0,s.jsx)("span",{className:"text-sm",children:"-"})}),(0,s.jsx)("span",{className:"w-8 sm:w-10 text-center text-xs sm:text-sm",children:w}),(0,s.jsx)(r.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9",onClick:()=>k(w+1),children:(0,s.jsx)("span",{className:"text-sm",children:"+"})})]})]}),(0,s.jsxs)("div",{className:"flex gap-1.5 sm:gap-2",children:[(0,s.jsxs)(r.Button,{size:"default",className:"flex-1 h-9 sm:h-10 text-xs sm:text-sm",disabled:!M.inStock,onClick:()=>{E({id:M.id,name:M.name,price:M.price,image:M.images[0]||(0,v.getPlaceholderImage)(300,300),quantity:w}),S&&("air"===S&&M.airShippingEnabled||"sea"===S&&M.seaShippingEnabled)?B(S):M.airShippingEnabled?B("air"):M.seaShippingEnabled&&B("sea")},children:[(0,s.jsx)(l.ShoppingCart,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 ml-1.5 sm:ml-2"}),(0,s.jsx)("span",{children:"افزودن به سبد"})]}),(0,s.jsx)(r.Button,{variant:"outline",size:"icon",className:"h-9 w-9 sm:h-10 sm:w-10 flex-shrink-0",children:(0,s.jsx)(d,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}),(0,s.jsx)(r.Button,{variant:"outline",size:"icon",className:"h-9 w-9 sm:h-10 sm:w-10 flex-shrink-0",children:(0,s.jsx)(c,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 pt-4 sm:pt-5 border-t-[0.25px] border-border/30",children:[(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)(x.Truck,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 text-muted-foreground flex-shrink-0 mt-0.5"}),(0,s.jsx)("span",{className:"text-[10px] sm:text-xs leading-relaxed",children:"ارسال رایگان بالای 500 هزار تومان"})]}),(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)(h.Shield,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 text-muted-foreground flex-shrink-0 mt-0.5"}),(0,s.jsx)("span",{className:"text-[10px] sm:text-xs leading-relaxed",children:"گارانتی اصالت کالا"})]})]})]})]}),(0,s.jsxs)(i.Tabs,{defaultValue:"description",className:"w-full",children:[(0,s.jsxs)(i.TabsList,{className:"w-full grid grid-cols-3 h-auto",children:[(0,s.jsx)(i.TabsTrigger,{value:"description",className:"text-[10px] sm:text-xs py-1.5 sm:py-2",children:"توضیحات"}),(0,s.jsx)(i.TabsTrigger,{value:"specifications",className:"text-[10px] sm:text-xs py-1.5 sm:py-2",children:"مشخصات"}),(0,s.jsxs)(i.TabsTrigger,{value:"reviews",className:"text-[10px] sm:text-xs py-1.5 sm:py-2",children:["نظرات ",M.reviews?`(${M.reviews})`:""]})]}),(0,s.jsx)(i.TabsContent,{value:"description",className:"mt-4 sm:mt-6",children:(0,s.jsx)(t.Card,{children:(0,s.jsx)(t.CardContent,{className:"p-4 sm:p-5",children:(0,s.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground leading-relaxed",children:M.description||"توضیحات محصول در دسترس نیست"})})})}),(0,s.jsx)(i.TabsContent,{value:"specifications",className:"mt-4 sm:mt-6",children:(0,s.jsx)(t.Card,{children:(0,s.jsx)(t.CardContent,{className:"p-4 sm:p-5",children:M.specifications&&Object.keys(M.specifications).length>0?(0,s.jsx)("dl",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:Object.entries(M.specifications).map(([e,a])=>(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between py-2 border-b-[0.25px] border-border/30 gap-1 sm:gap-0",children:[(0,s.jsxs)("dt",{className:"font-medium text-xs sm:text-sm",children:[e,":"]}),(0,s.jsx)("dd",{className:"text-xs sm:text-sm text-muted-foreground",children:"string"==typeof a||"number"==typeof a||"boolean"==typeof a?String(a):JSON.stringify(a)})]},e))}):(0,s.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"مشخصات محصول در دسترس نیست"})})})}),(0,s.jsx)(i.TabsContent,{value:"reviews",className:"mt-4 sm:mt-6",children:(0,s.jsx)(t.Card,{children:(0,s.jsx)(t.CardContent,{className:"p-4 sm:p-5",children:(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["نظرات کاربران ",M.reviews?`(${M.reviews})`:""," به زودی..."]})})})})]})]})}e.s(["ProductDetail",()=>N],17842)}]);