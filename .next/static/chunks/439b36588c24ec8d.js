(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var a=e.i(43476),t=e.i(71645),r=e.i(47163);let s=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border-[0.25px] border-border/3 bg-card text-card-foreground shadow-sm",e),...t}));s.displayName="Card";let i=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let l=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("h3",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let o=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",e),...t}));o.displayName="CardDescription";let d=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter",e.s(["Card",()=>s,"CardContent",()=>d,"CardDescription",()=>o,"CardHeader",()=>i,"CardTitle",()=>l])},17513,e=>{"use strict";var a=e.i(6344),t=e.i(73493);let r=(0,a.create)((e,a)=>({categories:[],setCategories:a=>e({categories:a}),addCategory:a=>e(e=>{let t=e.categories.findIndex(e=>e.id===a.id);if(t>=0){let r=[...e.categories];return r[t]=a,{categories:r}}return{categories:[...e.categories,a]}}),updateCategory:a=>e(e=>{let t=e.categories.findIndex(e=>e.id===a.id);if(t>=0){let r=[...e.categories];return r[t]=a,{categories:r}}return e}),deleteCategory:a=>e(e=>({categories:e.categories.filter(e=>e.id!==a)})),toggleCategory:a=>e(e=>({categories:e.categories.map(e=>e.id===a?{...e,isActive:!e.isActive}:e)})),getCategory:e=>a().categories.find(a=>a.id===e),getActiveCategories:()=>a().categories.filter(e=>e.isActive&&e.enabled),getEnabledCategories:()=>a().categories.filter(e=>e.enabled),loadCategoriesFromDB:async(e=!1)=>{try{let t=await fetch(e?"/api/categories?all=true":"/api/categories");if(!t.ok)throw Error("خطا در بارگذاری دسته‌بندی‌ها");let r=(await t.json()).data||[];a().setCategories(r)}catch(e){t.logger.error("Error loading categories from DB:",e)}}}));e.s(["useCategoryStore",0,r])},7233,e=>{"use strict";let a=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],7233)},88511,e=>{"use strict";let a=(0,e.i(75254).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>a],88511)},41071,e=>{"use strict";let a=(0,e.i(75254).default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>a],41071)},30374,e=>{"use strict";var a=e.i(43476),t=e.i(71645),r=e.i(26999),s=e.i(37727),i=e.i(47163);let l=r.Root,o=r.Trigger,d=r.Portal;r.Close;let n=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)(r.Overlay,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),style:{backgroundImage:`
        url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E"),
        url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter2'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.95' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter2)'/%3E%3C/svg%3E")
      `,backgroundSize:"200px 200px, 150px 150px",backgroundBlendMode:"overlay",opacity:.9},...t}));n.displayName=r.Overlay.displayName;let c=t.forwardRef(({className:e,children:t,...l},o)=>(0,a.jsxs)(d,{children:[(0,a.jsx)(n,{}),(0,a.jsxs)(r.Content,{ref:o,"aria-describedby":void 0,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border-[0.25px] border-border/30 glass-morphism-strong p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg",e),...l,children:[t,(0,a.jsxs)(r.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(s.X,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"بستن"})]})]})]}));c.displayName=r.Content.displayName;let m=({className:e,...t})=>(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-right",e),...t});m.displayName="DialogHeader";let f=({className:e,...t})=>(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 sm:space-x-reverse",e),...t});f.displayName="DialogFooter";let g=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)(r.Title,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));g.displayName=r.Title.displayName;let x=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)(r.Description,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));x.displayName=r.Description.displayName,e.s(["Dialog",()=>l,"DialogContent",()=>c,"DialogDescription",()=>x,"DialogFooter",()=>f,"DialogHeader",()=>m,"DialogTitle",()=>g,"DialogTrigger",()=>o])},47627,e=>{"use strict";var a=e.i(43476),t=e.i(71645),r=e.i(47163);let s=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,r.cn)("w-full caption-bottom text-sm",e),...t})}));s.displayName="Table";let i=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("thead",{ref:s,className:(0,r.cn)("[&_tr]:border-b border-border/30",e),...t}));i.displayName="TableHeader";let l=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("tbody",{ref:s,className:(0,r.cn)("[&_tr:last-child]:border-0",e),...t}));l.displayName="TableBody",t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("tfoot",{ref:s,className:(0,r.cn)("border-t border-border/30 bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let o=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("tr",{ref:s,className:(0,r.cn)("border-b border-border/30 transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));o.displayName="TableRow";let d=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("th",{ref:s,className:(0,r.cn)("h-12 px-4 text-right align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));d.displayName="TableHead";let n=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("td",{ref:s,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));n.displayName="TableCell",t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("caption",{ref:s,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption",e.s(["Table",()=>s,"TableBody",()=>l,"TableCell",()=>n,"TableHead",()=>d,"TableHeader",()=>i,"TableRow",()=>o])},27497,e=>{"use strict";var a=e.i(43476),t=e.i(71645),r=e.i(47627),s=e.i(67881),i=e.i(94179),l=e.i(63415),o=e.i(41071),d=e.i(88511),n=e.i(27612),c=e.i(88844),m=e.i(17513),f=e.i(20682),g=e.i(22016),x=e.i(30374);function u({categories:e,onRefresh:u}){let{deleteCategory:p,toggleCategory:h}=(0,m.useCategoryStore)(),{toast:b}=(0,f.useToast)(),[j,y]=(0,t.useState)(!1),[w,C]=(0,t.useState)(null);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"rounded-lg border border-border/30 shadow-sm overflow-hidden",children:(0,a.jsxs)(r.Table,{children:[(0,a.jsx)(r.TableHeader,{className:"bg-muted/50",children:(0,a.jsxs)(r.TableRow,{children:[(0,a.jsx)(r.TableHead,{children:"نام"}),(0,a.jsx)(r.TableHead,{children:"توضیحات"}),(0,a.jsx)(r.TableHead,{children:"وضعیت"}),(0,a.jsx)(r.TableHead,{className:"text-left",children:"عملیات"})]})}),(0,a.jsx)(r.TableBody,{children:0===e.length?(0,a.jsx)(r.TableRow,{children:(0,a.jsx)(r.TableCell,{colSpan:4,className:"text-center py-8",children:"دسته‌بندی‌ای یافت نشد"})},"empty-state"):e.map((e,t)=>(0,a.jsxs)(r.TableRow,{children:[(0,a.jsxs)(r.TableCell,{className:"font-medium flex items-center gap-2",children:[(0,a.jsx)(c.Package,{className:"h-4 w-4 text-muted-foreground"}),e.name]}),(0,a.jsx)(r.TableCell,{className:"text-muted-foreground",children:e.description||"-"}),(0,a.jsx)(r.TableCell,{children:(0,a.jsx)(i.Badge,{variant:e.isActive?"success":"secondary",children:e.isActive?"فعال":"غیرفعال"})}),(0,a.jsx)(r.TableCell,{children:(0,a.jsxs)(l.DropdownMenu,{children:[(0,a.jsx)(l.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(s.Button,{variant:"ghost",size:"icon",children:(0,a.jsx)(o.MoreHorizontal,{className:"h-4 w-4"})})}),(0,a.jsxs)(l.DropdownMenuContent,{align:"end",children:[(0,a.jsx)(l.DropdownMenuLabel,{children:"عملیات"}),(0,a.jsx)(l.DropdownMenuSeparator,{}),(0,a.jsx)(l.DropdownMenuItem,{asChild:!0,children:(0,a.jsxs)(g.default,{href:`/admin/categories/${e.id}`,children:[(0,a.jsx)(d.Edit,{className:"ml-2 h-4 w-4"}),"ویرایش"]})}),(0,a.jsx)(l.DropdownMenuItem,{onClick:()=>{h(e.id),b({title:"موفق",description:"وضعیت دسته‌بندی تغییر کرد"}),u?.()},children:e.isActive?"غیرفعال کردن":"فعال کردن"}),(0,a.jsx)(l.DropdownMenuSeparator,{}),(0,a.jsxs)(l.DropdownMenuItem,{className:"text-destructive",onClick:()=>{C(e.id),y(!0)},children:[(0,a.jsx)(n.Trash2,{className:"ml-2 h-4 w-4"}),"حذف"]})]})]})})]},e.id||`category-${t}`))})]})}),(0,a.jsx)(x.Dialog,{open:j,onOpenChange:y,children:(0,a.jsxs)(x.DialogContent,{children:[(0,a.jsxs)(x.DialogHeader,{children:[(0,a.jsx)(x.DialogTitle,{children:"حذف دسته‌بندی"}),(0,a.jsx)(x.DialogDescription,{children:"آیا از حذف این دسته‌بندی اطمینان دارید؟ این عمل قابل بازگشت نیست."})]}),(0,a.jsxs)(x.DialogFooter,{children:[(0,a.jsx)(s.Button,{variant:"outline",onClick:()=>y(!1),children:"انصراف"}),(0,a.jsx)(s.Button,{variant:"destructive",onClick:()=>{w&&(p(w),b({title:"موفق",description:"دسته‌بندی با موفقیت حذف شد"}),y(!1),C(null),u?.())},children:"حذف"})]})]})})]})}var p=e.i(70065),h=e.i(7233),b=e.i(73014),j=e.i(18566);function y(){let{categories:e,loadCategoriesFromDB:r}=(0,m.useCategoryStore)(),[i,l]=(0,t.useState)(!0),o=(0,j.usePathname)();return(0,t.useEffect)(()=>{(async()=>{l(!0);try{await r(!0)}catch(e){console.error("Error loading categories:",e)}finally{l(!1)}})()},[r,o]),(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(p.Card,{className:"shadow-sm",children:[(0,a.jsx)(p.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(p.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(b.FolderTree,{className:"h-5 w-5 text-primary"}),"دسته‌بندی‌ها (",e.length,")"]}),(0,a.jsx)(s.Button,{asChild:!0,size:"sm",children:(0,a.jsxs)(g.default,{href:"/admin/categories/new",children:[(0,a.jsx)(h.Plus,{className:"ml-2 h-4 w-4"}),"افزودن دسته‌بندی"]})})]})}),(0,a.jsx)(p.CardContent,{children:(0,a.jsx)(u,{categories:e})})]})})}e.s(["default",()=>y],27497)}]);