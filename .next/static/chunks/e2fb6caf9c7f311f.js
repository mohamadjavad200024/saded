(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,20682,e=>{"use strict";var t=e.i(71645);let s=0,r=new Map,a=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),n({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},i=[],l={toasts:[]};function n(e){l=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?a(s):e.toasts.forEach(e=>{a(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(l,e),i.forEach(e=>{e(l)})}function c({...e}){let t=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>n({type:"DISMISS_TOAST",toastId:t});return n({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>n({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function o(){let[e,s]=t.useState(l);return t.useEffect(()=>(i.push(s),()=>{let e=i.indexOf(s);e>-1&&i.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>n({type:"DISMISS_TOAST",toastId:e})}}e.s(["useToast",()=>o])},71757,40392,e=>{"use strict";var t=e.i(75254);let s=(0,t.default)("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);e.s(["Plane",()=>s],71757);let r=(0,t.default)("Ship",[["path",{d:"M12 10.189V14",key:"1p8cqu"}],["path",{d:"M12 2v3",key:"qbqxhf"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-8.188-3.639a2 2 0 0 0-1.624 0L3 14a11.6 11.6 0 0 0 2.81 7.76",key:"7tigtc"}],["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1s1.2 1 2.5 1c2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"1924j5"}]]);e.s(["Ship",()=>r],40392)},5125,e=>{"use strict";let t=(0,e.i(75254).default)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);e.s(["Car",()=>t],5125)},48106,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(4967),a=e.i(88844),i=e.i(36361);function l({src:e,alt:l,fill:n=!1,width:c,height:o,className:d="",priority:m=!1,loading:u="eager",sizes:x,onError:p,placeholder:g="empty",blurDataURL:h,productId:f}){let y=(0,i.useProductStore)(),b=(0,s.useMemo)(()=>(0,r.getPlaceholderImage)(c||600,o||600),[c,o]),v=(0,s.useCallback)(()=>{if(e&&"string"==typeof e&&""!==e.trim()){let t=(0,r.normalizeImageUrl)(e.trim());if(t&&(0,r.validateImageUrl)(t))return t}if(f){let e=y.getProduct(f);if(e?.images&&Array.isArray(e.images)&&e.images.length>0){for(let t of e.images)if(t&&"string"==typeof t&&""!==t.trim()){let e=(0,r.normalizeImageUrl)(t.trim());if(e&&(0,r.validateImageUrl)(e))return e}}}return b},[e,f,b,y]),j=(0,s.useMemo)(()=>v(),[v]),[N,w]=(0,s.useState)(j),[S,T]=(0,s.useState)(!0),[k,C]=(0,s.useState)(!1),[E,I]=(0,s.useState)(!u||"eager"===u),A=(0,s.useRef)(null),$=(0,s.useRef)(0),P=(0,s.useRef)(null),M=(0,s.useRef)(null);(0,s.useEffect)(()=>{if("lazy"===u&&"IntersectionObserver"in window){let e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(I(!0),e.disconnect())})},{rootMargin:"50px",threshold:.01});return A.current&&(e.observe(A.current),M.current=e),()=>{M.current&&M.current.disconnect()}}I(!0)},[u]),(0,s.useEffect)(()=>{m&&j&&j!==b&&E&&(0,r.preloadImage)(j).catch(()=>{})},[m,j,b,E]),(0,s.useEffect)(()=>{j!==N&&(w(j),T(!0),C(!1),$.current=0,P.current&&clearTimeout(P.current))},[j,N]),(0,s.useEffect)(()=>{if(S&&N&&N!==b&&E)return P.current=setTimeout(()=>{S&&R()},3e4),()=>{P.current&&clearTimeout(P.current)}},[S,N,b,E]);let O=(0,s.useCallback)(()=>{P.current&&clearTimeout(P.current),T(!1),C(!1),$.current=0},[]),R=(0,s.useCallback)(()=>{P.current&&clearTimeout(P.current);let e=N||j;if(e===b){T(!1),C(!0),p?.();return}if($.current<3){$.current+=1;let t=1e3*Math.pow(2,$.current-1),s=e;if((0,r.needsCacheBusting)(e))s=(0,r.addCacheBusting)(e);else{let t=e.includes("?")?"&":"?";s=`${e.split("&_t=")[0].split("?_t=")[0]}${t}_retry=${$.current}&_t=${Date.now()}`}P.current=setTimeout(()=>{A.current&&(A.current.src="",setTimeout(()=>{A.current&&(A.current.src=s)},100))},t)}else{if(T(!1),C(!0),f){let t=y.getProduct(f);if(t?.images&&Array.isArray(t.images)&&t.images.length>0){let s=t.images.find(t=>{if(!t||"string"!=typeof t||""===t.trim())return!1;let s=(0,r.normalizeImageUrl)(t.trim());return s&&(0,r.validateImageUrl)(s)&&s!==e&&s!==N});if(s){let e=(0,r.normalizeImageUrl)(s.trim());if(e&&(0,r.validateImageUrl)(e)){$.current=0,w(e),T(!0),C(!1);return}}}}w(b),p?.()}},[N,j,b,f,y,p]);(0,s.useEffect)(()=>()=>{P.current&&clearTimeout(P.current),M.current&&M.current.disconnect()},[]);let D=(0,s.useMemo)(()=>N&&""!==N.trim()?N:b,[N,b]),V={src:(0,s.useMemo)(()=>(0,r.validateImageUrl)(D),[D])?D:b,alt:l,onLoad:O,onError:R,loading:E?u:"lazy",className:"object-cover w-full h-full",style:{objectFit:"cover"},fetchPriority:m?"high":"auto",decoding:"async",crossOrigin:D.startsWith("http")&&!D.includes(window.location.origin)?"anonymous":void 0};return n?(0,t.jsxs)("div",{className:`relative ${d}`,style:{width:"100%",height:"100%"},children:[(0,t.jsx)("img",{...V,ref:A}),S&&!k&&(0,t.jsx)("div",{className:"absolute inset-0 bg-muted animate-pulse flex items-center justify-center z-10",children:(0,t.jsx)(a.Package,{className:"h-8 w-8 text-muted-foreground"})})]}):(0,t.jsxs)("div",{className:`relative ${d}`,style:{width:c,height:o},children:[(0,t.jsx)("img",{...V,ref:A}),S&&!k&&(0,t.jsx)("div",{className:"absolute inset-0 bg-muted animate-pulse flex items-center justify-center z-10",children:(0,t.jsx)(a.Package,{className:"h-8 w-8 text-muted-foreground"})})]})}e.s(["SafeImage",()=>l])},33488,e=>{"use strict";var t=e.i(6344),s=e.i(73493);let r={},a=(0,t.create)((e,t)=>({vehicles:[],filters:r,isLoading:!1,setVehicles:t=>e({vehicles:t}),addVehicle:t=>e(e=>{let s=e.vehicles.findIndex(e=>e.id===t.id);if(s>=0){let r=[...e.vehicles];return r[s]=t,{vehicles:r}}return{vehicles:[...e.vehicles,t]}}),updateVehicle:(t,s)=>e(e=>{let r=e.vehicles.findIndex(e=>e.id===t);if(r>=0){let t=[...e.vehicles];return t[r]={...t[r],...s,updatedAt:new Date},{vehicles:t}}return e}),deleteVehicle:t=>e(e=>({vehicles:e.vehicles.filter(e=>e.id!==t)})),getVehicle:e=>t().vehicles.find(t=>t.id===e),getEnabledVehicles:()=>t().vehicles.filter(e=>e.enabled),setFilters:t=>e(e=>({filters:{...e.filters,...t}})),clearFilters:()=>e({filters:r}),loadVehiclesFromDB:async()=>{e({isLoading:!0});try{let t=await fetch("/api/vehicles");if(!t.ok)throw Error("Failed to load vehicles");let s=await t.json();if(s.success&&s.data){let t=s.data.map(e=>({...e,models:Array.isArray(e.models)?e.models:e.models?JSON.parse(e.models):[],createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)}));e({vehicles:t,isLoading:!1})}else throw Error(s.error||"Failed to load vehicles")}catch(t){throw s.logger.error("Error loading vehicles:",t),e({isLoading:!1}),t}}}));e.s(["useVehicleStore",0,a])},31042,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(5125),a=e.i(47163);let i={sm:"h-6 w-6",md:"h-8 w-8",lg:"h-12 w-12"};function l({logo:e,alt:l,className:n,size:c="md",fallbackIcon:o=!0}){let[d,m]=(0,s.useState)(!1),[u,x]=(0,s.useState)(!1);return!(e&&"string"==typeof e&&e.trim().length>0&&(e.startsWith("data:image")||e.startsWith("data:")||e.startsWith("/")||e.startsWith("http")))||d?o?(0,t.jsx)("div",{className:(0,a.cn)("flex items-center justify-center bg-muted rounded-full",i[c],n),children:(0,t.jsx)(r.Car,{className:(0,a.cn)("text-muted-foreground",i[c])})}):null:(0,t.jsxs)("div",{className:(0,a.cn)("relative flex items-center justify-center overflow-hidden rounded-full bg-background border border-border/30",i[c],n),children:[(0,t.jsx)("img",{src:e,alt:l,className:(0,a.cn)("object-contain w-full h-full rounded-full",!u&&"opacity-0"),onLoad:()=>{x(!0),m(!1)},onError:t=>{console.warn(`[VehicleLogo] Failed to load logo for ${l}:`,{logoLength:e?.length,logoStart:e?.substring(0,50)}),m(!0),x(!1)},style:{display:d?"none":"block"}}),!u&&!d&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-muted animate-pulse",children:(0,t.jsx)(r.Car,{className:(0,a.cn)("text-muted-foreground",i[c])})})]})}e.s(["VehicleLogo",()=>l])},27341,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(81140),a=e.i(30030),i=e.i(42727),l=e.i(96626),n=e.i(48425),c=e.i(86318),o=e.i(69340),d=e.i(10772),m="Tabs",[u,x]=(0,a.createContextScope)(m,[i.createRovingFocusGroupScope]),p=(0,i.createRovingFocusGroupScope)(),[g,h]=u(m),f=s.forwardRef((e,s)=>{let{__scopeTabs:r,value:a,onValueChange:i,defaultValue:l,orientation:u="horizontal",dir:x,activationMode:p="automatic",...h}=e,f=(0,c.useDirection)(x),[y,b]=(0,o.useControllableState)({prop:a,onChange:i,defaultProp:l??"",caller:m});return(0,t.jsx)(g,{scope:r,baseId:(0,d.useId)(),value:y,onValueChange:b,orientation:u,dir:f,activationMode:p,children:(0,t.jsx)(n.Primitive.div,{dir:f,"data-orientation":u,...h,ref:s})})});f.displayName=m;var y="TabsList",b=s.forwardRef((e,s)=>{let{__scopeTabs:r,loop:a=!0,...l}=e,c=h(y,r),o=p(r);return(0,t.jsx)(i.Root,{asChild:!0,...o,orientation:c.orientation,dir:c.dir,loop:a,children:(0,t.jsx)(n.Primitive.div,{role:"tablist","aria-orientation":c.orientation,...l,ref:s})})});b.displayName=y;var v="TabsTrigger",j=s.forwardRef((e,s)=>{let{__scopeTabs:a,value:l,disabled:c=!1,...o}=e,d=h(v,a),m=p(a),u=S(d.baseId,l),x=T(d.baseId,l),g=l===d.value;return(0,t.jsx)(i.Item,{asChild:!0,...m,focusable:!c,active:g,children:(0,t.jsx)(n.Primitive.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":x,"data-state":g?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:u,...o,ref:s,onMouseDown:(0,r.composeEventHandlers)(e.onMouseDown,e=>{c||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(l)}),onKeyDown:(0,r.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(l)}),onFocus:(0,r.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==d.activationMode;g||c||!e||d.onValueChange(l)})})})});j.displayName=v;var N="TabsContent",w=s.forwardRef((e,r)=>{let{__scopeTabs:a,value:i,forceMount:c,children:o,...d}=e,m=h(N,a),u=S(m.baseId,i),x=T(m.baseId,i),p=i===m.value,g=s.useRef(p);return s.useEffect(()=>{let e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(l.Presence,{present:c||p,children:({present:s})=>(0,t.jsx)(n.Primitive.div,{"data-state":p?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":u,hidden:!s,id:x,tabIndex:0,...d,ref:r,style:{...e.style,animationDuration:g.current?"0s":void 0},children:s&&o})})});function S(e,t){return`${e}-trigger-${t}`}function T(e,t){return`${e}-content-${t}`}w.displayName=N;var k=e.i(47163);let C=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)(b,{ref:r,className:(0,k.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));C.displayName=b.displayName;let E=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)(j,{ref:r,className:(0,k.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));E.displayName=j.displayName;let I=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)(w,{ref:r,className:(0,k.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));I.displayName=w.displayName,e.s(["Tabs",()=>f,"TabsContent",()=>I,"TabsList",()=>C,"TabsTrigger",()=>E],27341)},83745,e=>{"use strict";let t=(0,e.i(75254).default)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>t],83745)},17842,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(70065),a=e.i(67881),i=e.i(27341),l=e.i(1928);let n=(0,e.i(75254).default)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var c=e.i(83745),o=e.i(43531),d=e.i(71757),m=e.i(40392),u=e.i(63209),x=e.i(48106),p=e.i(31042),g=e.i(22016),h=e.i(61180),f=e.i(36361),y=e.i(33488),b=e.i(4967),v=e.i(20682);function j({productId:e}){let[j,N]=(0,s.useState)(0),[w,S]=(0,s.useState)(1),[T,k]=(0,s.useState)(null),[C,E]=(0,s.useState)(null),[I,A]=(0,s.useState)(!0),[$,P]=(0,s.useState)(!1),[M,O]=(0,s.useState)(!1),{toast:R}=(0,v.useToast)(),D=(0,h.useCartStore)(e=>e.addItem),V=(0,f.useProductStore)(e=>e.getProduct),L=(0,f.useProductStore)(e=>e.addProduct),{getVehicle:z,loadVehiclesFromDB:F}=(0,y.useVehicleStore)();(0,s.useEffect)(()=>{P(!0);let t=V(e);if(t){E(t),A(!1);return}(async()=>{try{A(!0);let t=await fetch(`/api/products/${e}`);if(t.ok){let e=await t.json();if(e.success&&e.data){let t=e.data;L(t),E(t)}else E(null)}else E(null)}catch(e){console.error("Error fetching product:",e),E(null)}finally{A(!1)}})()},[e,V,L]);let _=(0,h.useCartStore)(e=>e.setShippingMethod);if((0,s.useEffect)(()=>{F().catch(console.error)},[F]),(0,s.useEffect)(()=>{if(M){let e=setTimeout(()=>{O(!1)},2500);return()=>clearTimeout(e)}},[M]),!$||I)return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 sm:py-16 md:py-20 px-4",suppressHydrationWarning:!0,children:[(0,t.jsx)("div",{className:"h-12 w-12 sm:h-16 sm:w-16 border-4 border-primary border-t-transparent rounded-full animate-spin mb-4"}),(0,t.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold mb-2",children:"در حال بارگذاری..."})]});if(!C)return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 sm:py-16 md:py-20 px-4",children:[(0,t.jsx)(u.AlertCircle,{className:"h-12 w-12 sm:h-16 sm:w-16 text-muted-foreground mb-4"}),(0,t.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold mb-2",children:"محصول یافت نشد"}),(0,t.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground text-center mb-6",children:"متأسفانه محصول مورد نظر شما یافت نشد"}),(0,t.jsx)(g.default,{href:"/products",children:(0,t.jsx)(a.Button,{variant:"default",children:"بازگشت به لیست محصولات"})})]});let U=async()=>{let e=window.location.origin,t=`${e}/products/${C.id}`;if(navigator.share)try{await navigator.share({title:C.name,text:C.description||C.name,url:t})}catch(e){q(t)}else q(t)},q=e=>{navigator.clipboard?navigator.clipboard.writeText(e).then(()=>{R({title:"کپی شد",description:"لینک محصول در کلیپ‌بورد کپی شد"})}).catch(()=>{B(e)}):B(e)},B=e=>{let t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-999999px",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy"),R({title:"کپی شد",description:"لینک محصول در کلیپ‌بورد کپی شد"})}catch(e){console.error("Failed to copy:",e)}document.body.removeChild(t)},W=window.location.origin,H=`${W}/products/${C.id}`,K=Array.isArray(C.images)?C.images:[],G=K[0]||(0,b.getPlaceholderImage)(600,600);C.price;let J=C.inStock?"https://schema.org/InStock":"https://schema.org/OutOfStock",X={"@context":"https://schema.org","@type":"Product",name:C.name,description:C.description||`${C.name} - قطعه خودرو ${C.brand||""}`,image:K.length>0?K:[G],brand:{"@type":"Brand",name:C.brand||"نامشخص"},category:C.category,sku:C.id,offers:{"@type":"Offer",url:H,priceCurrency:"IRR",price:C.price.toString(),priceValidUntil:new Date(Date.now()+31536e6).toISOString().split("T")[0],availability:J,itemCondition:"https://schema.org/NewCondition",seller:{"@type":"Organization",name:"ساد"}}};C.rating&&(X.aggregateRating={"@type":"AggregateRating",ratingValue:C.rating.toString(),reviewCount:(C.reviews||0).toString()});let Q=C.vehicle?z(C.vehicle):null,Y=Q&&Q.logo&&"string"==typeof Q.logo&&""!==Q.logo.trim()&&(Q.logo.startsWith("data:image")||Q.logo.startsWith("http")||Q.logo.startsWith("/"));return(0,t.jsxs)("div",{className:"relative space-y-4 sm:space-y-6 md:space-y-8 px-2 sm:px-0",children:[(0,t.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(X)}}),(0,t.jsxs)("div",{className:"absolute top-0 left-0 z-10 flex items-center gap-2 sm:gap-3",dir:"ltr",children:[(0,t.jsx)("div",{className:"relative w-16 h-16 sm:w-20 sm:h-20 bg-muted rounded-full overflow-hidden border-2 border-green-500 flex items-center justify-center p-2 sm:p-3 flex-shrink-0",children:Q&&Y?(0,t.jsx)("img",{src:Q.logo,alt:Q.name,className:"w-full h-full object-contain rounded-full",onError:e=>{e.currentTarget.style.display="none";let t=e.currentTarget.parentElement;if(t){let e=document.createElement("span");e.className="text-green-500 text-[10px] sm:text-xs font-medium",e.textContent="لوگو",t.appendChild(e)}}}):Q?(0,t.jsx)(p.VehicleLogo,{logo:Q.logo,alt:Q.name,size:"md",className:"w-full h-full rounded-full"}):(0,t.jsx)("span",{className:"text-green-500 text-[10px] sm:text-xs font-medium",children:"لوگو"})}),Q&&(0,t.jsx)("span",{className:"text-sm sm:text-base md:text-lg font-bold text-foreground whitespace-nowrap",children:Q.name})]}),(0,t.jsxs)("nav",{className:"text-[10px] sm:text-xs text-muted-foreground overflow-x-auto mb-2",children:[(0,t.jsx)("span",{children:"خانه"})," / ",(0,t.jsx)("span",{children:"محصولات"})," / ",(0,t.jsx)("span",{children:C.category})," /"," ",(0,t.jsx)("span",{className:"text-foreground truncate",children:C.name})]}),(0,t.jsx)("div",{children:(0,t.jsx)("span",{className:"text-xs sm:text-sm text-muted-foreground",children:C.category})}),(C.airShippingEnabled||C.seaShippingEnabled)&&(0,t.jsxs)("div",{className:"hidden lg:block space-y-2 sm:space-y-3 lg:max-w-lg lg:mr-auto",children:[(0,t.jsx)("label",{className:"text-xs sm:text-sm font-medium block",children:"روش ارسال:"}),(0,t.jsxs)("div",{className:`grid gap-2 sm:gap-3 ${C.airShippingEnabled&&C.seaShippingEnabled?"grid-cols-2":"grid-cols-1"}`,children:[C.airShippingEnabled&&(0,t.jsxs)("button",{onClick:()=>k("air"),className:`flex flex-col items-center justify-center gap-2 p-3 sm:p-4 rounded-lg border-[0.25px] transition-all ${"air"===T?"border-primary/30 bg-primary/5":"border-border/30 hover:border-primary/20"}`,children:[(0,t.jsx)(d.Plane,{className:`h-5 w-5 sm:h-6 sm:w-6 ${"air"===T?"text-primary":"text-muted-foreground"}`}),(0,t.jsx)("span",{className:`text-xs sm:text-sm font-medium ${"air"===T?"text-primary":"text-foreground"}`,children:"ارسال هوایی"})]}),C.seaShippingEnabled&&(0,t.jsxs)("button",{onClick:()=>k("sea"),className:`flex flex-col items-center justify-center gap-2 p-3 sm:p-4 rounded-lg border-[0.25px] transition-all ${"sea"===T?"border-primary/30 bg-primary/5":"border-border/30 hover:border-primary/20"}`,children:[(0,t.jsx)(m.Ship,{className:`h-5 w-5 sm:h-6 sm:w-6 ${"sea"===T?"text-primary":"text-muted-foreground"}`}),(0,t.jsx)("span",{className:`text-xs sm:text-sm font-medium ${"sea"===T?"text-primary":"text-foreground"}`,children:"ارسال دریایی"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 md:gap-8",children:[(0,t.jsxs)("div",{className:"space-y-2 sm:space-y-3 lg:-mt-32",children:[(0,t.jsx)("div",{className:"relative aspect-square w-full bg-muted rounded-lg overflow-hidden",children:(0,t.jsx)(x.SafeImage,{src:Array.isArray(C.images)&&C.images.length>0?C.images[j]:null,alt:C.name,fill:!0,className:"w-full h-full",priority:!0,loading:"eager",productId:C.id})}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-1.5 sm:gap-2",children:(Array.isArray(C.images)&&C.images.length>0?C.images:[(0,b.getPlaceholderImage)(600,600)]).map((e,s)=>(0,t.jsx)("button",{onClick:()=>N(s),className:`relative aspect-square rounded-lg overflow-hidden border-[0.25px] transition-all ${j===s?"border-primary/30":"border-transparent hover:border-muted-foreground/30"}`,children:(0,t.jsx)(x.SafeImage,{src:e,alt:`${C.name} - تصویر ${s+1} از ${Array.isArray(C.images)?C.images.length:1}`,fill:!0,className:"w-full h-full",priority:!0,loading:"eager",sizes:"(max-width: 640px) 25vw, 20vw",productId:C.id})},s))}),(C.airShippingEnabled||C.seaShippingEnabled)&&(0,t.jsxs)("div",{className:"block lg:hidden space-y-2 sm:space-y-3 pt-2 sm:pt-3",children:[(0,t.jsx)("label",{className:"text-xs sm:text-sm font-medium block",children:"روش ارسال:"}),(0,t.jsxs)("div",{className:`grid gap-2 sm:gap-3 ${C.airShippingEnabled&&C.seaShippingEnabled?"grid-cols-2":"grid-cols-1"}`,children:[C.airShippingEnabled&&(0,t.jsxs)("button",{onClick:()=>k("air"),className:`flex flex-col items-center justify-center gap-2 p-3 sm:p-4 rounded-lg border-[0.25px] transition-all ${"air"===T?"border-primary/30 bg-primary/5":"border-border/30 hover:border-primary/20"}`,children:[(0,t.jsx)(d.Plane,{className:`h-5 w-5 sm:h-6 sm:w-6 ${"air"===T?"text-primary":"text-muted-foreground"}`}),(0,t.jsx)("span",{className:`text-xs sm:text-sm font-medium ${"air"===T?"text-primary":"text-foreground"}`,children:"ارسال هوایی"})]}),C.seaShippingEnabled&&(0,t.jsxs)("button",{onClick:()=>k("sea"),className:`flex flex-col items-center justify-center gap-2 p-3 sm:p-4 rounded-lg border-[0.25px] transition-all ${"sea"===T?"border-primary/30 bg-primary/5":"border-border/30 hover:border-primary/20"}`,children:[(0,t.jsx)(m.Ship,{className:`h-5 w-5 sm:h-6 sm:w-6 ${"sea"===T?"text-primary":"text-muted-foreground"}`}),(0,t.jsx)("span",{className:`text-xs sm:text-sm font-medium ${"sea"===T?"text-primary":"text-foreground"}`,children:"ارسال دریایی"})]})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 sm:gap-6 md:gap-8",children:[(0,t.jsx)("div",{className:"flex-shrink-0 space-y-3 sm:space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mb-2 flex-wrap",children:[(0,t.jsx)("span",{className:"text-[10px] sm:text-xs text-muted-foreground",children:C.brand}),(0,t.jsx)("span",{className:"text-muted-foreground hidden sm:inline text-xs",children:"•"}),(0,t.jsx)("span",{className:"text-[10px] sm:text-xs text-muted-foreground",children:C.category})]}),(0,t.jsx)("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold mb-2 sm:mb-3 leading-tight",children:C.name}),(0,t.jsx)("div",{className:"flex items-center gap-2 sm:gap-3",children:C.rating&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(c.Star,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 fill-accent text-accent"}),(0,t.jsx)("span",{className:"text-sm sm:text-base font-semibold mr-1",children:C.rating})]}),C.reviews&&(0,t.jsxs)("span",{className:"text-xs sm:text-sm text-muted-foreground",children:["(",C.reviews," نظر)"]})]})})]})}),(0,t.jsxs)("div",{className:"flex-1 space-y-4 sm:space-y-5 md:space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[(0,t.jsxs)("span",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-primary",children:[C.price.toLocaleString("fa-IR")," تومان"]}),C.originalPrice&&C.originalPrice>C.price&&(0,t.jsx)("span",{className:"text-sm sm:text-base text-muted-foreground line-through",children:C.originalPrice.toLocaleString("fa-IR")})]}),C.originalPrice&&C.originalPrice>C.price&&(0,t.jsxs)("div",{className:"text-[10px] sm:text-xs text-secondary font-semibold",children:[Math.round((C.originalPrice-C.price)/C.originalPrice*100),"% تخفیف"]})]}),(0,t.jsx)("div",{className:"flex items-center gap-1.5",children:C.inStock?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Check,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 text-green-600 flex-shrink-0"}),(0,t.jsxs)("span",{className:"text-xs sm:text-sm text-green-600 font-semibold",children:["موجود در انبار",C.stockCount?` (${C.stockCount} عدد)`:""]})]}):(0,t.jsx)("span",{className:"text-xs sm:text-sm text-secondary font-semibold",children:"ناموجود"})}),(0,t.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,t.jsx)("label",{className:"text-xs sm:text-sm font-medium",children:"تعداد:"}),(0,t.jsxs)("div",{className:"flex items-center border-[0.25px] border-border/30 rounded-md",children:[(0,t.jsx)(a.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9",onClick:()=>S(Math.max(1,w-1)),children:(0,t.jsx)("span",{className:"text-sm",children:"-"})}),(0,t.jsx)("span",{className:"w-8 sm:w-10 text-center text-xs sm:text-sm",children:w}),(0,t.jsx)(a.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9",onClick:()=>S(w+1),children:(0,t.jsx)("span",{className:"text-sm",children:"+"})})]})]}),(0,t.jsxs)("div",{className:"flex gap-1.5 sm:gap-2",children:[(0,t.jsx)(a.Button,{size:"default",className:`flex-1 h-9 sm:h-10 text-xs sm:text-sm transition-all ${M?"bg-green-600 hover:bg-green-700":""}`,disabled:!C.inStock,onClick:()=>{M&&O(!1),D({id:C.id,name:C.name,price:C.price,image:Array.isArray(C.images)&&C.images[0]||(0,b.getPlaceholderImage)(300,300),quantity:w}),T&&("air"===T&&C.airShippingEnabled||"sea"===T&&C.seaShippingEnabled)?_(T):C.airShippingEnabled?_("air"):C.seaShippingEnabled&&_("sea"),R({title:"افزوده شد",description:`${C.name} به سبد خرید اضافه شد`}),O(!0)},children:M?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Check,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 ml-1.5 sm:ml-2"}),(0,t.jsx)("span",{children:"افزوده شد"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.ShoppingCart,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 ml-1.5 sm:ml-2"}),(0,t.jsx)("span",{children:"افزودن به سبد"})]})}),(0,t.jsx)(a.Button,{variant:"outline",size:"icon",className:"h-9 w-9 sm:h-10 sm:w-10 flex-shrink-0",onClick:U,children:(0,t.jsx)(n,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})]})]})]})]})]}),(0,t.jsxs)(i.Tabs,{defaultValue:"description",className:"w-full",children:[(0,t.jsxs)(i.TabsList,{className:"w-full grid grid-cols-2 h-auto",children:[(0,t.jsx)(i.TabsTrigger,{value:"description",className:"text-[10px] sm:text-xs py-1.5 sm:py-2",children:"توضیحات"}),(0,t.jsx)(i.TabsTrigger,{value:"specifications",className:"text-[10px] sm:text-xs py-1.5 sm:py-2",children:"مشخصات"})]}),(0,t.jsx)(i.TabsContent,{value:"description",className:"mt-4 sm:mt-6",children:(0,t.jsx)(r.Card,{children:(0,t.jsx)(r.CardContent,{className:"p-4 sm:p-5",children:(0,t.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground leading-relaxed",children:C.description||"توضیحات محصول در دسترس نیست"})})})}),(0,t.jsx)(i.TabsContent,{value:"specifications",className:"mt-4 sm:mt-6",children:(0,t.jsx)(r.Card,{children:(0,t.jsx)(r.CardContent,{className:"p-4 sm:p-5",children:C.specifications&&Object.keys(C.specifications).length>0?(0,t.jsx)("dl",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4",children:Object.entries(C.specifications).map(([e,s])=>(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between py-2 border-b-[0.25px] border-border/30 gap-1 sm:gap-0",children:[(0,t.jsxs)("dt",{className:"font-medium text-xs sm:text-sm",children:[e,":"]}),(0,t.jsx)("dd",{className:"text-xs sm:text-sm text-muted-foreground",children:"string"==typeof s||"number"==typeof s||"boolean"==typeof s?String(s):JSON.stringify(s)})]},e))}):(0,t.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"مشخصات محصول در دسترس نیست"})})})})]})]})}e.s(["ProductDetail",()=>j],17842)}]);