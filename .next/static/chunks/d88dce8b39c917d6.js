(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,12426,e=>{"use strict";let s=(0,e.i(75254).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>s],12426)},97548,e=>{"use strict";let s=(0,e.i(75254).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);e.s(["Filter",()=>s],97548)},87316,e=>{"use strict";let s=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>s],87316)},41071,e=>{"use strict";let s=(0,e.i(75254).default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>s],41071)},88511,e=>{"use strict";let s=(0,e.i(75254).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>s],88511)},73884,e=>{"use strict";let s=(0,e.i(75254).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>s],73884)},25652,e=>{"use strict";let s=(0,e.i(75254).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>s],25652)},32260,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(67881),l=e.i(94179),r=e.i(70065),i=e.i(63415),n=e.i(41071),c=e.i(88511),d=e.i(27612),m=e.i(43432),o=e.i(63488),x=e.i(78894),h=e.i(88844),u=e.i(87316),j=e.i(12426);let p=(0,e.i(75254).default)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);var f=e.i(95468),g=e.i(73884),N=e.i(25652),v=e.i(45919),y=e.i(29865),b=e.i(36361),w=e.i(22016);function k({supplier:e,onDelete:k,onToggle:C}){let S,{products:M}=(0,b.useProductStore)(),[D,I]=(0,t.useState)(!1),B=(S=e.lowStockThreshold||10,M.filter(s=>s.category&&e.categories.includes(s.category)&&s.stockCount<=S).length),T=e.transactions||[],z=T.length>0?T[T.length-1]:null,A=T.length,F=T.reduce((e,s)=>e+s.totalAmount,0),H=T.reduce((e,s)=>e+s.items.reduce((e,s)=>e+s.quantity,0),0),P=e.products?.length||0,q=e=>{try{return(0,v.format)(new Date(e),"yyyy/MM/dd",{locale:y.faIR})}catch{return"-"}};return(0,s.jsxs)(r.Card,{className:"hover:shadow-md transition-shadow border-border/30",children:[(0,s.jsx)(r.CardHeader,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)("div",{className:"flex items-center gap-3",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)(l.Badge,{variant:e.isActive?"success":"secondary",className:"text-xs",children:e.isActive?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.CheckCircle2,{className:"h-3 w-3 ml-1"}),"فعال"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.XCircle,{className:"h-3 w-3 ml-1"}),"غیرفعال"]})}),B>0&&(0,s.jsxs)(l.Badge,{variant:"warning",className:"text-xs gap-1",children:[(0,s.jsx)(x.AlertTriangle,{className:"h-3 w-3"}),B," هشدار"]})]})]})}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[(0,s.jsxs)("a",{href:`tel:${e.phone}`,className:"flex items-center gap-1.5 hover:text-primary transition-colors",children:[(0,s.jsx)(m.Phone,{className:"h-4 w-4"}),e.phone]}),e.email&&(0,s.jsxs)("a",{href:`mailto:${e.email}`,className:"flex items-center gap-1.5 hover:text-primary transition-colors",children:[(0,s.jsx)(o.Mail,{className:"h-4 w-4"}),e.email]})]})]}),(0,s.jsxs)(i.DropdownMenu,{children:[(0,s.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,s.jsx)(a.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,s.jsx)(n.MoreHorizontal,{className:"h-4 w-4"})})}),(0,s.jsxs)(i.DropdownMenuContent,{align:"end",children:[(0,s.jsx)(i.DropdownMenuLabel,{children:"عملیات"}),(0,s.jsx)(i.DropdownMenuSeparator,{}),(0,s.jsx)(i.DropdownMenuItem,{asChild:!0,children:(0,s.jsxs)(w.default,{href:`/admin/suppliers/${e.id}`,children:[(0,s.jsx)(c.Edit,{className:"ml-2 h-4 w-4"}),"ویرایش"]})}),B>0&&(0,s.jsx)(i.DropdownMenuItem,{asChild:!0,children:(0,s.jsxs)("a",{href:`tel:${e.phone}`,children:[(0,s.jsx)(m.Phone,{className:"ml-2 h-4 w-4"}),"تماس برای شارژ موجودی"]})}),(0,s.jsx)(i.DropdownMenuItem,{onClick:()=>C(e.id),children:e.isActive?"غیرفعال کردن":"فعال کردن"}),(0,s.jsx)(i.DropdownMenuSeparator,{}),(0,s.jsxs)(i.DropdownMenuItem,{className:"text-destructive",onClick:()=>k(e.id),children:[(0,s.jsx)(d.Trash2,{className:"ml-2 h-4 w-4"}),"حذف"]})]})]})]})}),(0,s.jsxs)(r.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(p,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"دسته‌بندی‌ها"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1.5",children:e.categories.map(e=>(0,s.jsx)(l.Badge,{variant:"secondary",className:"text-xs",children:e},e))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-2 border-t border-border/30",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,s.jsx)(h.Package,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"محصولات"})]}),(0,s.jsx)("div",{className:"text-lg font-semibold",children:P})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,s.jsx)(N.TrendingUp,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"تراکنش‌ها"})]}),(0,s.jsx)("div",{className:"text-lg font-semibold",children:A})]})]}),z&&(0,s.jsxs)("div",{className:"pt-3 border-t border-border/30 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"آخرین تراکنش"}),(0,s.jsx)(a.Button,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>I(!D),children:D?"بستن":"جزئیات"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"روش پرداخت"}),(0,s.jsx)(l.Badge,{variant:"cash"===z.paymentMethod?"success":"warning",className:"text-xs",children:"cash"===z.paymentMethod?"نقدی":"چکی"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"مبلغ"}),(0,s.jsxs)("span",{className:"text-sm font-medium",children:[new Intl.NumberFormat("fa-IR").format(z.totalAmount)," تومان"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"تاریخ تحویل"}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,s.jsx)(u.Calendar,{className:"h-3 w-3"}),q(z.deliveryDate)]})]}),D&&(0,s.jsxs)("div",{className:"pt-2 space-y-2 border-t border-border/30 mt-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-xs font-medium text-muted-foreground block mb-1.5",children:"محصولات تحویل‌شده:"}),(0,s.jsxs)("div",{className:"space-y-1",children:[z.items.slice(0,3).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(h.Package,{className:"h-3 w-3 text-muted-foreground"}),e.productName]}),(0,s.jsxs)(l.Badge,{variant:"outline",className:"text-xs",children:[new Intl.NumberFormat("fa-IR").format(e.quantity)," عدد"]})]},t)),z.items.length>3&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["+",z.items.length-3," محصول دیگر"]})]})]}),"check"===z.paymentMethod&&z.checkDetails&&(0,s.jsxs)("div",{className:"pt-2 border-t border-border/30",children:[(0,s.jsx)("span",{className:"text-xs font-medium text-muted-foreground block mb-1.5",children:"جزئیات چک:"}),(0,s.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"شماره چک:"}),(0,s.jsx)("span",{children:z.checkDetails.checkNumber})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"بانک:"}),(0,s.jsx)("span",{children:z.checkDetails.bankName})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"تاریخ سررسید:"}),(0,s.jsx)("span",{children:q(z.checkDetails.dueDate)})]})]})]}),z.paymentDate&&(0,s.jsx)("div",{className:"pt-2 border-t border-border/30",children:(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"تاریخ پرداخت:"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(u.Calendar,{className:"h-3 w-3"}),q(z.paymentDate)]})]})}),(F>0||H>0)&&(0,s.jsxs)("div",{className:"pt-2 border-t border-border/30",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs mb-1",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"کل تحویل شده:"}),(0,s.jsxs)("span",{className:"font-medium",children:[new Intl.NumberFormat("fa-IR").format(H)," عدد"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"کل مبلغ:"}),(0,s.jsxs)("span",{className:"font-medium flex items-center gap-1",children:[(0,s.jsx)(j.DollarSign,{className:"h-3 w-3"}),new Intl.NumberFormat("fa-IR").format(F)," تومان"]})]})]})]})]})]}),(0,s.jsx)("div",{className:"pt-2 border-t border-border/30",children:(0,s.jsx)(a.Button,{variant:"outline",size:"sm",className:"w-full",asChild:!0,children:(0,s.jsx)(w.default,{href:`/admin/suppliers/${e.id}`,children:"مشاهده جزئیات کامل"})})})]})]})}var C=e.i(24327),S=e.i(20682),M=e.i(30374);function D({suppliers:e,onRefresh:l}){let{deleteSupplier:r,toggleSupplier:i}=(0,C.useSupplierStore)(),{toast:n}=(0,S.useToast)(),[c,d]=(0,t.useState)(!1),[m,o]=(0,t.useState)(null),x=e=>{o(e),d(!0)},h=e=>{i(e),n({title:"موفق",description:"وضعیت تامین‌کننده تغییر کرد"}),l?.()};return(0,s.jsxs)(s.Fragment,{children:[0===e.length?(0,s.jsx)("div",{className:"text-center py-12 border border-dashed border-border/30 rounded-lg",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"تامین‌کننده‌ای یافت نشد"})}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>(0,s.jsx)(k,{supplier:e,onDelete:x,onToggle:h},e.id))}),(0,s.jsx)(M.Dialog,{open:c,onOpenChange:d,children:(0,s.jsxs)(M.DialogContent,{children:[(0,s.jsxs)(M.DialogHeader,{children:[(0,s.jsx)(M.DialogTitle,{children:"حذف تامین‌کننده"}),(0,s.jsx)(M.DialogDescription,{children:"آیا از حذف این تامین‌کننده اطمینان دارید؟ این عمل قابل بازگشت نیست."})]}),(0,s.jsxs)(M.DialogFooter,{children:[(0,s.jsx)(a.Button,{variant:"outline",onClick:()=>d(!1),children:"انصراف"}),(0,s.jsx)(a.Button,{variant:"destructive",onClick:()=>{m&&(r(m),n({title:"موفق",description:"تامین‌کننده با موفقیت حذف شد"}),d(!1),o(null),l?.())},children:"حذف"})]})]})})]})}var I=e.i(23750),B=e.i(62870),T=e.i(7233),z=e.i(61911),A=e.i(55436),F=e.i(97548),H=e.i(37727);function P(){let{suppliers:e}=(0,C.useSupplierStore)(),[l,i]=(0,t.useState)(0),[n,c]=(0,t.useState)(!1),[d,m]=(0,t.useState)(""),[o,x]=(0,t.useState)("all"),[h,u]=(0,t.useState)("all");(0,t.useEffect)(()=>{i(e=>e+1)},[e]);let j=(0,t.useMemo)(()=>Array.from(new Set(e.flatMap(e=>e.categories))),[e]),p=(0,t.useMemo)(()=>e.filter(e=>{if(d){let s=d.toLowerCase();if(!(e.name.toLowerCase().includes(s)||e.phone.includes(s)||e.email?.toLowerCase().includes(s)))return!1}return("active"!==o||!!e.isActive)&&("inactive"!==o||!e.isActive)&&("all"===h||!!e.categories.includes(h))}),[e,d,o,h]),f=e.filter(e=>e.isActive).length,g=e.filter(e=>!e.isActive).length;return(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)(r.Card,{className:"shadow-sm",children:[(0,s.jsxs)(r.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(r.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(z.Users,{className:"h-5 w-5 text-primary"}),"تامین‌کنندگان (",p.length,")"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(a.Button,{variant:n?"default":"outline",onClick:()=>c(!n),size:"sm",children:[(0,s.jsx)(F.Filter,{className:"ml-2 h-4 w-4"}),"فیلتر"]}),(0,s.jsx)(a.Button,{asChild:!0,size:"sm",children:(0,s.jsxs)(w.default,{href:"/admin/suppliers/new",children:[(0,s.jsx)(T.Plus,{className:"ml-2 h-4 w-4"}),"افزودن تامین‌کننده"]})})]})]}),n&&(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t border-border/20",children:[(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"جستجو"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(A.Search,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(I.Input,{placeholder:"جستجو بر اساس نام، شماره تماس یا ایمیل...",value:d,onChange:e=>m(e.target.value),className:"pr-10"}),d&&(0,s.jsx)(a.Button,{variant:"ghost",size:"icon",className:"absolute left-1 top-1/2 transform -translate-y-1/2 h-6 w-6",onClick:()=>m(""),children:(0,s.jsx)(H.X,{className:"h-3 w-3"})})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"وضعیت"}),(0,s.jsxs)(B.Select,{value:o,onValueChange:x,children:[(0,s.jsx)(B.SelectTrigger,{children:(0,s.jsx)(B.SelectValue,{placeholder:"وضعیت"})}),(0,s.jsxs)(B.SelectContent,{children:[(0,s.jsx)(B.SelectItem,{value:"all",children:"همه وضعیت‌ها"}),(0,s.jsxs)(B.SelectItem,{value:"active",children:["فعال (",f,")"]}),(0,s.jsxs)(B.SelectItem,{value:"inactive",children:["غیرفعال (",g,")"]})]})]})]}),j.length>0&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"دسته‌بندی"}),(0,s.jsxs)(B.Select,{value:h,onValueChange:u,children:[(0,s.jsx)(B.SelectTrigger,{children:(0,s.jsx)(B.SelectValue,{placeholder:"دسته‌بندی"})}),(0,s.jsxs)(B.SelectContent,{children:[(0,s.jsx)(B.SelectItem,{value:"all",children:"همه دسته‌بندی‌ها"}),j.map(e=>(0,s.jsx)(B.SelectItem,{value:e,children:e},e))]})]})]})]}),(d||"all"!==o||"all"!==h)&&(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsxs)(a.Button,{variant:"ghost",size:"sm",onClick:()=>{m(""),x("all"),u("all")},children:[(0,s.jsx)(F.Filter,{className:"ml-2 h-4 w-4"}),"پاک کردن فیلترها"]})})]})]}),(0,s.jsx)(r.CardContent,{className:"pt-6",children:(0,s.jsx)(D,{suppliers:p,onRefresh:()=>i(e=>e+1)},l)})]})})}e.s(["default",()=>P],32260)}]);