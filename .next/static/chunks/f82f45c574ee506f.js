(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,60366,e=>{"use strict";var r=e.i(6344),t=e.i(73493);let a={},s=(0,r.create)((e,r)=>({orders:[],filters:a,isLoading:!1,setOrders:r=>e({orders:r}),addOrder:r=>e(e=>{let t=e.orders.findIndex(e=>e.id===r.id);if(t>=0){let a=[...e.orders];return a[t]=r,{orders:a}}return{orders:[...e.orders,r]}}),updateOrder:(r,t)=>e(e=>{let a=e.orders.findIndex(e=>e.id===r);if(a>=0){let r=[...e.orders];return r[a]={...r[a],...t},{orders:r}}return e}),updateOrderStatus:(r,t)=>e(e=>({orders:e.orders.map(e=>e.id===r?{...e,status:t,updatedAt:new Date}:e)})),updatePaymentStatus:(r,t)=>e(e=>({orders:e.orders.map(e=>e.id===r?{...e,paymentStatus:t,updatedAt:new Date}:e)})),deleteOrder:r=>e(e=>({orders:e.orders.filter(e=>e.id!==r)})),getOrder:e=>r().orders.find(r=>r.id===e),setFilters:r=>e(e=>({filters:{...e.filters,...r}})),clearFilters:()=>e({filters:a}),loadOrdersFromDB:async()=>{e({isLoading:!0});try{let r=new AbortController,a=setTimeout(()=>r.abort(),15e3),s=await fetch("/api/orders",{signal:r.signal});if(clearTimeout(a),s.ok){let r;try{r=await s.json()}catch(r){t.logger.error("Error parsing orders response:",r),e({orders:[],isLoading:!1});return}if(r.success&&r.data)try{let a=r.data.map(e=>{let r=[],a={};try{r=Array.isArray(e.items)?e.items:"string"==typeof e.items?JSON.parse(e.items):[]}catch(a){t.logger.warn("Error parsing items for order:",e.id,a),r=[]}try{a="object"==typeof e.shippingAddress&&null!==e.shippingAddress?e.shippingAddress:"string"==typeof e.shippingAddress?JSON.parse(e.shippingAddress):{}}catch(r){t.logger.warn("Error parsing shippingAddress for order:",e.id,r),a={}}return{...e,items:r,shippingAddress:a,total:Number(e.total)||0,shippingCost:Number(e.shippingCost)||0,createdAt:e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),updatedAt:e.updatedAt instanceof Date?e.updatedAt:new Date(e.updatedAt)}});e({orders:a,isLoading:!1})}catch(r){t.logger.error("Error parsing orders data:",r),e({orders:[],isLoading:!1})}else e({orders:[],isLoading:!1})}else t.logger.error("Failed to load orders:",s.status),e({orders:[],isLoading:!1})}catch(r){r instanceof Error&&"AbortError"!==r.name&&t.logger.error("Error loading orders from DB:",r),e({orders:[],isLoading:!1})}}}));e.s(["useOrderStore",0,s])},55436,e=>{"use strict";let r=(0,e.i(75254).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>r],55436)},15788,e=>{"use strict";let r=(0,e.i(75254).default)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["Truck",()=>r],15788)},39616,e=>{"use strict";let r=(0,e.i(75254).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Settings",()=>r],39616)},92161,e=>{"use strict";let r=(0,e.i(75254).default)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);e.s(["Menu",()=>r],92161)},59411,e=>{"use strict";var r=e.i(71645),t=e.i(48425),a=e.i(43476),s=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),i=r.forwardRef((e,r)=>(0,a.jsx)(t.Primitive.span,{...e,ref:r,style:{...s,...e.style}}));i.displayName="VisuallyHidden",e.s(["VISUALLY_HIDDEN_STYLES",()=>s,"VisuallyHidden",()=>i])},36361,e=>{"use strict";var r=e.i(6344),t=e.i(73493);let a={},s=(0,r.create)((e,r)=>({products:[],filters:a,setProducts:r=>e({products:r}),addProduct:r=>e(e=>{let t=e.products.findIndex(e=>e.id===r.id);if(t>=0){let a=[...e.products];return a[t]=r,{products:a}}return{products:[...e.products,r]}}),updateProduct:r=>e(e=>{let t=e.products.findIndex(e=>e.id===r.id);if(t>=0){let a=[...e.products];return a[t]=r,{products:a}}return e}),removeProduct:r=>e(e=>({products:e.products.filter(e=>e.id!==r)})),getProduct:e=>r().products.find(r=>r.id===e),getEnabledProducts:()=>r().products.filter(e=>e.enabled),getFilteredProducts:()=>{let{products:e,filters:t}=r(),a=e.filter(e=>e.enabled);if(t.search){let e=t.search.toLowerCase();a=a.filter(r=>r.name.toLowerCase().includes(e)||r.description?.toLowerCase().includes(e)||r.brand?.toLowerCase().includes(e))}return void 0!==t.minPrice&&(a=a.filter(e=>e.price>=t.minPrice)),void 0!==t.maxPrice&&(a=a.filter(e=>e.price<=t.maxPrice)),t.brands&&t.brands.length>0&&(a=a.filter(e=>e.brand&&t.brands.includes(e.brand))),t.categories&&t.categories.length>0&&(a=a.filter(e=>e.category&&t.categories.includes(e.category))),void 0!==t.inStock&&(a=a.filter(e=>e.inStock===t.inStock)),a},setFilters:r=>e(e=>({filters:{...e.filters,...r}})),clearFilters:()=>e({filters:a}),createProduct:async e=>{let t=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json().catch(()=>({}))).message||"خطا در ایجاد محصول");let a=(await t.json()).data;return r().addProduct(a),a},updateProductInDB:async(e,t)=>{let a=await fetch(`/api/products/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error((await a.json().catch(()=>({}))).message||"خطا در به‌روزرسانی محصول");let s=(await a.json()).data;return r().updateProduct(s),s},deleteProductFromDB:async e=>{let t=await fetch(`/api/products/${e}`,{method:"DELETE"});if(!t.ok)throw Error((await t.json().catch(()=>({}))).message||"خطا در حذف محصول");r().removeProduct(e)},loadProductsFromDB:async(e=!1)=>{try{let t=await fetch(e?"/api/products?limit=1000&all=true":"/api/products?limit=1000");if(!t.ok){let e=await t.json().catch(()=>({})),r=e.error||e.message||"خطا در بارگذاری محصولات";throw Error(r)}let a=((await t.json()).data||[]).map(e=>({...e,createdAt:e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt),updatedAt:e.updatedAt instanceof Date?e.updatedAt:new Date(e.updatedAt)}));r().setProducts(a)}catch(e){t.logger.error("Error loading products from DB:",e)}},deleteProduct:async e=>{await r().deleteProductFromDB(e)},deleteProducts:async e=>{await Promise.all(e.map(e=>r().deleteProductFromDB(e)))},toggleProduct:async e=>{let t=r().getProduct(e);t&&await r().updateProductInDB(e,{enabled:!t.enabled})},toggleProducts:async(e,t)=>{await Promise.all(e.map(e=>r().updateProductInDB(e,{enabled:t})))}}));e.s(["useProductStore",0,s])},70152,e=>{"use strict";function r(e,[r,t]){return Math.min(t,Math.max(r,e))}e.s(["clamp",()=>r])},24327,e=>{"use strict";let r=(0,e.i(6344).create)((e,r)=>({suppliers:[],setSuppliers:r=>e({suppliers:r}),addSupplier:r=>{let t={id:`supplier-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...r,products:r.products||[],transactions:r.transactions||[]};e(e=>({suppliers:[...e.suppliers,t]}))},updateSupplier:(r,t)=>e(e=>{let a=e.suppliers.findIndex(e=>e.id===r);if(a>=0){let r=[...e.suppliers];return r[a]={...r[a],...t},{suppliers:r}}return e}),deleteSupplier:r=>e(e=>({suppliers:e.suppliers.filter(e=>e.id!==r)})),toggleSupplier:r=>e(e=>({suppliers:e.suppliers.map(e=>e.id===r?{...e,isActive:!e.isActive}:e)})),getSupplier:e=>r().suppliers.find(r=>r.id===e),addSupplierTransaction:(r,t)=>{let a={id:`transaction-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...t};e(e=>({suppliers:e.suppliers.map(e=>e.id===r?{...e,transactions:[...e.transactions||[],a]}:e)}))},updateSupplierTransaction:(r,t,a)=>e(e=>({suppliers:e.suppliers.map(e=>e.id===r?{...e,transactions:(e.transactions||[]).map(e=>e.id===t?{...e,...a}:e)}:e)})),deleteSupplierTransaction:(r,t)=>e(e=>({suppliers:e.suppliers.map(e=>e.id===r?{...e,transactions:(e.transactions||[]).filter(e=>e.id!==t)}:e)}))}));e.s(["useSupplierStore",0,r])},61659,e=>{"use strict";let r=(0,e.i(75254).default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["CreditCard",()=>r],61659)},61911,e=>{"use strict";let r=(0,e.i(75254).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>r],61911)},78894,e=>{"use strict";let r=(0,e.i(75254).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>r],78894)},73375,e=>{"use strict";let r=(0,e.i(75254).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>r],73375)},73014,e=>{"use strict";let r=(0,e.i(75254).default)("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);e.s(["FolderTree",()=>r],73014)}]);