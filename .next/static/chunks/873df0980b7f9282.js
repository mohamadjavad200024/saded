(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,17513,e=>{"use strict";var t=e.i(6344),a=e.i(73493);let r=(0,t.create)((e,t)=>({categories:[],setCategories:t=>e({categories:t}),addCategory:t=>e(e=>{let a=e.categories.findIndex(e=>e.id===t.id);if(a>=0){let r=[...e.categories];return r[a]=t,{categories:r}}return{categories:[...e.categories,t]}}),updateCategory:t=>e(e=>{let a=e.categories.findIndex(e=>e.id===t.id);if(a>=0){let r=[...e.categories];return r[a]=t,{categories:r}}return e}),deleteCategory:t=>e(e=>({categories:e.categories.filter(e=>e.id!==t)})),toggleCategory:t=>e(e=>({categories:e.categories.map(e=>e.id===t?{...e,isActive:!e.isActive}:e)})),getCategory:e=>t().categories.find(t=>t.id===e),getActiveCategories:()=>t().categories.filter(e=>e.isActive&&e.enabled),getEnabledCategories:()=>t().categories.filter(e=>e.enabled),loadCategoriesFromDB:async(e=!1)=>{try{let a=await fetch(e?"/api/categories?all=true":"/api/categories");if(!a.ok)throw Error("خطا در بارگذاری دسته‌بندی‌ها");let r=(await a.json()).data||[];t().setCategories(r)}catch(e){a.logger.error("Error loading categories from DB:",e)}}}));e.s(["useCategoryStore",0,r])},70065,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(47163);let s=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border-[0.25px] border-border/3 bg-card text-card-foreground shadow-sm",e),...a}));s.displayName="Card";let l=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...a}));l.displayName="CardHeader";let i=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("h3",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));i.displayName="CardTitle";let n=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",e),...a}));n.displayName="CardDescription";let o=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",e),...a}));o.displayName="CardContent",a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter",e.s(["Card",()=>s,"CardContent",()=>o,"CardDescription",()=>n,"CardHeader",()=>l,"CardTitle",()=>i])},99682,e=>{"use strict";var t=e.i(71645);function a(e){let a=t.useRef({value:e,previous:e});return t.useMemo(()=>(a.current.value!==e&&(a.current.previous=a.current.value,a.current.value=e),a.current.previous),[e])}e.s(["usePrevious",()=>a])},7233,e=>{"use strict";let t=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},88511,e=>{"use strict";let t=(0,e.i(75254).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],88511)},41071,e=>{"use strict";let t=(0,e.i(75254).default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>t],41071)},30374,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(26999),s=e.i(37727),l=e.i(47163);let i=r.Root,n=r.Trigger,o=r.Portal;r.Close;let d=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(r.Overlay,{ref:s,className:(0,l.cn)("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),style:{backgroundImage:`
        url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E"),
        url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter2'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.95' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter2)'/%3E%3C/svg%3E")
      `,backgroundSize:"200px 200px, 150px 150px",backgroundBlendMode:"overlay",opacity:.9},...a}));d.displayName=r.Overlay.displayName;let c=a.forwardRef(({className:e,children:a,...i},n)=>(0,t.jsxs)(o,{children:[(0,t.jsx)(d,{}),(0,t.jsxs)(r.Content,{ref:n,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border-[0.25px] border-border/30 glass-morphism-strong p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg",e),...i,children:[a,(0,t.jsxs)(r.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(s.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"بستن"})]})]})]}));c.displayName=r.Content.displayName;let u=({className:e,...a})=>(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-right",e),...a});u.displayName="DialogHeader";let m=({className:e,...a})=>(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 sm:space-x-reverse",e),...a});m.displayName="DialogFooter";let h=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(r.Title,{ref:s,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));h.displayName=r.Title.displayName;let f=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)(r.Description,{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",e),...a}));f.displayName=r.Description.displayName,e.s(["Dialog",()=>i,"DialogContent",()=>c,"DialogDescription",()=>f,"DialogFooter",()=>m,"DialogHeader",()=>u,"DialogTitle",()=>h,"DialogTrigger",()=>n])},47627,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(47163);let s=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:s,className:(0,r.cn)("w-full caption-bottom text-sm",e),...a})}));s.displayName="Table";let l=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("thead",{ref:s,className:(0,r.cn)("[&_tr]:border-b border-border/30",e),...a}));l.displayName="TableHeader";let i=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("tbody",{ref:s,className:(0,r.cn)("[&_tr:last-child]:border-0",e),...a}));i.displayName="TableBody",a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("tfoot",{ref:s,className:(0,r.cn)("border-t border-border/30 bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...a})).displayName="TableFooter";let n=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("tr",{ref:s,className:(0,r.cn)("border-b border-border/30 transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...a}));n.displayName="TableRow";let o=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("th",{ref:s,className:(0,r.cn)("h-12 px-4 text-right align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...a}));o.displayName="TableHead";let d=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("td",{ref:s,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...a}));d.displayName="TableCell",a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("caption",{ref:s,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",e),...a})).displayName="TableCaption",e.s(["Table",()=>s,"TableBody",()=>i,"TableCell",()=>d,"TableHead",()=>o,"TableHeader",()=>l,"TableRow",()=>n])},40160,e=>{"use strict";let t=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],40160)},41867,e=>{"use strict";var t=e.i(6344),a=e.i(36361),r=e.i(17513),s=e.i(73493);let l={siteName:"ساد",siteDescription:"فروشگاه آنلاین قطعات خودرو وارداتی",maintenanceMode:!1,allowRegistration:!0,emailNotifications:!0,lowStockThreshold:10,itemsPerPage:10,showNotifications:!0,theme:"system"},i={totalProducts:0,activeProducts:0,totalStock:0,lowStockProducts:0,totalCategories:0,activeCategories:0,totalOrders:0,pendingOrders:0,totalRevenue:0,averagePrice:0},n=(0,t.create)((e,t)=>({stats:null,isLoading:!1,settings:l,refreshStats:async()=>{e({isLoading:!0});try{let l=a.useProductStore.getState(),i=r.useCategoryStore.getState(),n=l.products,o=i.categories,d=n.filter(e=>e.enabled),c=d.reduce((e,t)=>e+(t.price||0),0),u=d.length>0?c/d.length:0,m={totalProducts:n.length,activeProducts:d.length,totalStock:n.reduce((e,t)=>e+t.stockCount,0),lowStockProducts:n.filter(e=>e.stockCount<t().settings.lowStockThreshold).length,totalCategories:o.length,activeCategories:o.filter(e=>e.isActive&&e.enabled).length,totalOrders:0,pendingOrders:0,totalRevenue:0,averagePrice:Math.round(u)};try{let e=await fetch("/api/orders",{method:"GET",headers:{"Content-Type":"application/json"}});if(e.ok){let t=await e.json();if(t.success&&t.data){let e=t.data;m.totalOrders=e.length,m.pendingOrders=e.filter(e=>"pending"===e.status||"pending"===e.paymentStatus).length,m.totalRevenue=e.filter(e=>"paid"===e.paymentStatus).reduce((e,t)=>e+(t.total||0),0)}}}catch(e){s.logger.warn("Could not fetch order stats:",e)}e({stats:m,isLoading:!1})}catch(t){s.logger.error("Error refreshing stats:",t),e({stats:i,isLoading:!1})}},updateSettings:t=>e(e=>({settings:{...e.settings,...t}})),resetSettings:()=>e({settings:l})}));e.s(["useAdminStore",0,n])},97548,e=>{"use strict";let t=(0,e.i(75254).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);e.s(["Filter",()=>t],97548)},25959,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(20783),s=e.i(30030),l=e.i(81140),i=e.i(69340),n=e.i(99682),o=e.i(35804),d=e.i(96626),c=e.i(48425),u="Checkbox",[m,h]=(0,s.createContextScope)(u),[f,g]=m(u);function x(e){let{__scopeCheckbox:r,checked:s,children:l,defaultChecked:n,disabled:o,form:d,name:c,onCheckedChange:m,required:h,value:g="on",internal_do_not_use_render:x}=e,[p,j]=(0,i.useControllableState)({prop:s,defaultProp:n??!1,onChange:m,caller:u}),[b,v]=a.useState(null),[y,w]=a.useState(null),C=a.useRef(!1),k=!b||!!d||!!b.closest("form"),T={checked:p,disabled:o,setChecked:j,control:b,setControl:v,name:c,form:d,value:g,hasConsumerStoppedPropagationRef:C,required:h,defaultChecked:!N(n)&&n,isFormControl:k,bubbleInput:y,setBubbleInput:w};return(0,t.jsx)(f,{scope:r,...T,children:"function"==typeof x?x(T):l})}var p="CheckboxTrigger",j=a.forwardRef(({__scopeCheckbox:e,onKeyDown:s,onClick:i,...n},o)=>{let{control:d,value:u,disabled:m,checked:h,required:f,setControl:x,setChecked:j,hasConsumerStoppedPropagationRef:b,isFormControl:v,bubbleInput:y}=g(p,e),w=(0,r.useComposedRefs)(o,x),C=a.useRef(h);return a.useEffect(()=>{let e=d?.form;if(e){let t=()=>j(C.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[d,j]),(0,t.jsx)(c.Primitive.button,{type:"button",role:"checkbox","aria-checked":N(h)?"mixed":h,"aria-required":f,"data-state":k(h),"data-disabled":m?"":void 0,disabled:m,value:u,...n,ref:w,onKeyDown:(0,l.composeEventHandlers)(s,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,l.composeEventHandlers)(i,e=>{j(e=>!!N(e)||!e),y&&v&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})})});j.displayName=p;var b=a.forwardRef((e,a)=>{let{__scopeCheckbox:r,name:s,checked:l,defaultChecked:i,required:n,disabled:o,value:d,onCheckedChange:c,form:u,...m}=e;return(0,t.jsx)(x,{__scopeCheckbox:r,checked:l,defaultChecked:i,disabled:o,required:n,onCheckedChange:c,name:s,form:u,value:d,internal_do_not_use_render:({isFormControl:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j,{...m,ref:a,__scopeCheckbox:r}),e&&(0,t.jsx)(C,{__scopeCheckbox:r})]})})});b.displayName=u;var v="CheckboxIndicator",y=a.forwardRef((e,a)=>{let{__scopeCheckbox:r,forceMount:s,...l}=e,i=g(v,r);return(0,t.jsx)(d.Presence,{present:s||N(i.checked)||!0===i.checked,children:(0,t.jsx)(c.Primitive.span,{"data-state":k(i.checked),"data-disabled":i.disabled?"":void 0,...l,ref:a,style:{pointerEvents:"none",...e.style}})})});y.displayName=v;var w="CheckboxBubbleInput",C=a.forwardRef(({__scopeCheckbox:e,...s},l)=>{let{control:i,hasConsumerStoppedPropagationRef:d,checked:u,defaultChecked:m,required:h,disabled:f,name:x,value:p,form:j,bubbleInput:b,setBubbleInput:v}=g(w,e),y=(0,r.useComposedRefs)(l,v),C=(0,n.usePrevious)(u),k=(0,o.useSize)(i);a.useEffect(()=>{if(!b)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!d.current;if(C!==u&&e){let a=new Event("click",{bubbles:t});b.indeterminate=N(u),e.call(b,!N(u)&&u),b.dispatchEvent(a)}},[b,C,u,d]);let T=a.useRef(!N(u)&&u);return(0,t.jsx)(c.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:m??T.current,required:h,disabled:f,name:x,value:p,form:j,...s,tabIndex:-1,ref:y,style:{...s.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function N(e){return"indeterminate"===e}function k(e){return N(e)?"indeterminate":e?"checked":"unchecked"}C.displayName=w;var T=e.i(43531),S=e.i(47163);let E=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(b,{ref:r,className:(0,S.cn)("peer h-4 w-4 shrink-0 rounded-sm border-[0.25px] border-primary/30 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...a,children:(0,t.jsx)(y,{className:(0,S.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(T.Check,{className:"h-4 w-4"})})}));E.displayName=b.displayName,e.s(["Checkbox",()=>E],25959)},86536,e=>{"use strict";let t=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},48380,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(47627),s=e.i(67881),l=e.i(94179),i=e.i(25959),n=e.i(63415),o=e.i(41071),d=e.i(88511),c=e.i(27612),u=e.i(86536);let m=(0,e.i(75254).default)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var h=e.i(36361),f=e.i(20682),g=e.i(22016),x=e.i(30374);function p({products:e,onRefresh:p}){let[j,b]=(0,a.useState)([]),[v,y]=(0,a.useState)(!1),[w,C]=(0,a.useState)(null),{deleteProduct:N,toggleProduct:k,deleteProducts:T,toggleProducts:S}=(0,h.useProductStore)(),{toast:E}=(0,f.useToast)(),R=async()=>{if(w)try{await N(w),E({title:"موفق",description:"محصول با موفقیت حذف شد"}),y(!1),C(null),p?.()}catch(e){E({title:"خطا",description:e instanceof Error?e.message:"خطا در حذف محصول",variant:"destructive"})}},D=async()=>{if(j.length>0)try{await T(j),E({title:"موفق",description:`${j.length} محصول حذف شد`}),b([]),p?.()}catch(e){E({title:"خطا",description:e instanceof Error?e.message:"خطا در حذف محصولات",variant:"destructive"})}},P=async e=>{try{await k(e),E({title:"موفق",description:"وضعیت محصول تغییر کرد"}),p?.()}catch(e){E({title:"خطا",description:e instanceof Error?e.message:"خطا در تغییر وضعیت محصول",variant:"destructive"})}},H=async e=>{if(j.length>0)try{await S(j,e),E({title:"موفق",description:`${j.length} محصول ${e?"فعال":"غیرفعال"} شد`}),b([]),p?.()}catch(e){E({title:"خطا",description:e instanceof Error?e.message:"خطا در تغییر وضعیت محصولات",variant:"destructive"})}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-4",children:[j.length>0&&(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[(0,t.jsxs)("span",{className:"text-sm font-medium",children:[j.length," محصول انتخاب شده"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(s.Button,{variant:"outline",size:"sm",onClick:()=>H(!0),children:[(0,t.jsx)(u.Eye,{className:"ml-2 h-4 w-4"}),"فعال کردن"]}),(0,t.jsxs)(s.Button,{variant:"outline",size:"sm",onClick:()=>H(!1),children:[(0,t.jsx)(m,{className:"ml-2 h-4 w-4"}),"غیرفعال کردن"]}),(0,t.jsxs)(s.Button,{variant:"destructive",size:"sm",onClick:D,children:[(0,t.jsx)(c.Trash2,{className:"ml-2 h-4 w-4"}),"حذف"]})]})]}),(0,t.jsx)("div",{className:"rounded-lg border border-border/30 shadow-sm overflow-hidden",children:(0,t.jsxs)(r.Table,{children:[(0,t.jsx)(r.TableHeader,{className:"bg-muted/50",children:(0,t.jsxs)(r.TableRow,{children:[(0,t.jsx)(r.TableHead,{className:"w-12",children:(0,t.jsx)(i.Checkbox,{checked:e.length>0&&j.length===e.length,onCheckedChange:t=>{t?b(e.map(e=>e.id)):b([])}})}),(0,t.jsx)(r.TableHead,{children:"تصویر"}),(0,t.jsx)(r.TableHead,{children:"نام"}),(0,t.jsx)(r.TableHead,{children:"برند"}),(0,t.jsx)(r.TableHead,{children:"دسته‌بندی"}),(0,t.jsx)(r.TableHead,{children:"قیمت"}),(0,t.jsx)(r.TableHead,{children:"موجودی"}),(0,t.jsx)(r.TableHead,{children:"وضعیت"}),(0,t.jsx)(r.TableHead,{className:"text-left",children:"عملیات"})]})}),(0,t.jsx)(r.TableBody,{children:0===e.length?(0,t.jsx)(r.TableRow,{children:(0,t.jsx)(r.TableCell,{colSpan:9,className:"text-center py-8",children:"محصولی یافت نشد"})}):e.map(e=>{let a;return(0,t.jsxs)(r.TableRow,{children:[(0,t.jsx)(r.TableCell,{children:(0,t.jsx)(i.Checkbox,{checked:j.includes(e.id),onCheckedChange:t=>{var a;return a=e.id,void(t?b([...j,a]):b(j.filter(e=>e!==a)))}})}),(0,t.jsx)(r.TableCell,{children:(0,t.jsx)("div",{className:"relative w-14 h-14 rounded-lg overflow-hidden border-2 border-border/30 shadow-sm group",children:e.images&&e.images.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:e.images[0],alt:e.name,className:"w-full h-full object-cover transition-transform group-hover:scale-110"}),e.images.length>1&&(0,t.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-xs px-1 py-0.5 text-center",children:["+",e.images.length-1]})]}):(0,t.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-muted to-muted/50 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-xs text-muted-foreground font-medium",children:"بدون تصویر"})})})}),(0,t.jsx)(r.TableCell,{className:"font-medium",children:e.name}),(0,t.jsx)(r.TableCell,{children:e.brand}),(0,t.jsx)(r.TableCell,{children:e.category}),(0,t.jsxs)(r.TableCell,{children:[(a=e.price,new Intl.NumberFormat("fa-IR").format(a))," تومان"]}),(0,t.jsx)(r.TableCell,{children:(0,t.jsx)(l.Badge,{variant:e.stockCount<10?"warning":"success",children:e.stockCount})}),(0,t.jsx)(r.TableCell,{children:(0,t.jsx)(l.Badge,{variant:e.enabled?"success":"secondary",children:e.enabled?"فعال":"غیرفعال"})}),(0,t.jsx)(r.TableCell,{children:(0,t.jsxs)(n.DropdownMenu,{children:[(0,t.jsx)(n.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(s.Button,{variant:"ghost",size:"icon",children:(0,t.jsx)(o.MoreHorizontal,{className:"h-4 w-4"})})}),(0,t.jsxs)(n.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(n.DropdownMenuLabel,{children:"عملیات"}),(0,t.jsx)(n.DropdownMenuSeparator,{}),(0,t.jsx)(n.DropdownMenuItem,{asChild:!0,children:(0,t.jsxs)(g.default,{href:`/admin/products/${e.id}`,children:[(0,t.jsx)(d.Edit,{className:"ml-2 h-4 w-4"}),"ویرایش"]})}),(0,t.jsx)(n.DropdownMenuItem,{onClick:()=>P(e.id),children:e.enabled?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m,{className:"ml-2 h-4 w-4"}),"غیرفعال کردن"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Eye,{className:"ml-2 h-4 w-4"}),"فعال کردن"]})}),(0,t.jsx)(n.DropdownMenuSeparator,{}),(0,t.jsxs)(n.DropdownMenuItem,{className:"text-destructive",onClick:()=>{C(e.id),y(!0)},children:[(0,t.jsx)(c.Trash2,{className:"ml-2 h-4 w-4"}),"حذف"]})]})]})})]},e.id)})})]})})]}),(0,t.jsx)(x.Dialog,{open:v,onOpenChange:y,children:(0,t.jsxs)(x.DialogContent,{children:[(0,t.jsxs)(x.DialogHeader,{children:[(0,t.jsx)(x.DialogTitle,{children:"حذف محصول"}),(0,t.jsx)(x.DialogDescription,{children:"آیا از حذف این محصول اطمینان دارید؟ این عمل قابل بازگشت نیست."})]}),(0,t.jsxs)(x.DialogFooter,{children:[(0,t.jsx)(s.Button,{variant:"outline",onClick:()=>y(!1),children:"انصراف"}),(0,t.jsx)(s.Button,{variant:"destructive",onClick:R,children:"حذف"})]})]})})]})}var j=e.i(23750),b=e.i(70065),v=e.i(62870),y=e.i(7233),w=e.i(55436),C=e.i(40160),N=e.i(97548),k=e.i(41867),T=e.i(18566);function S(){let{products:e,setFilters:r,clearFilters:l,filters:i,loadProductsFromDB:n}=(0,h.useProductStore)(),{refreshStats:o}=(0,k.useAdminStore)(),d=(0,T.usePathname)(),[c,u]=(0,a.useState)(i.search||""),[m,f]=(0,a.useState)(i.categories?.[0]||"all"),[x,S]=(0,a.useState)("all"),[E,R]=(0,a.useState)(!0),[D,P]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{R(!0);try{await n(!0)}catch(e){console.error("Error loading products:",e)}finally{R(!1)}})()},[n,d]),(0,a.useEffect)(()=>{o()},[o,e]);let H=(0,a.useMemo)(()=>{let t=e;if(t=t.filter(e=>{let t=e.name.toLowerCase();return!(t.includes("test")||t.includes("تست"))}),c){let e=c.toLowerCase();t=t.filter(t=>t.name.toLowerCase().includes(e)||t.brand?.toLowerCase().includes(e)||t.description?.toLowerCase().includes(e))}return"all"!==m&&(t=t.filter(e=>e.category===m)),"active"===x?t=t.filter(e=>e.enabled):"inactive"===x&&(t=t.filter(e=>!e.enabled)),t},[e,c,m,x]),M=Array.from(new Set(e.map(e=>e.category).filter(e=>!!e)));return(0,t.jsxs)("div",{className:"space-y-6",children:[D&&(0,t.jsxs)(b.Card,{className:"shadow-sm",children:[(0,t.jsx)(b.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,t.jsx)(b.CardTitle,{children:"فیلترها و جستجو"})}),(0,t.jsxs)(b.CardContent,{children:[(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"جستجو"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(w.Search,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(j.Input,{placeholder:"جستجو در محصولات...",value:c,onChange:e=>{var t;u(t=e.target.value),t?r({search:t}):l()},className:"pr-10"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"دسته‌بندی"}),(0,t.jsxs)(v.Select,{value:m,onValueChange:f,children:[(0,t.jsx)(v.SelectTrigger,{children:(0,t.jsx)(v.SelectValue,{placeholder:"همه دسته‌بندی‌ها"})}),(0,t.jsxs)(v.SelectContent,{children:[(0,t.jsx)(v.SelectItem,{value:"all",children:"همه دسته‌بندی‌ها"}),M.map(e=>(0,t.jsx)(v.SelectItem,{value:e,children:e},e))]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"وضعیت"}),(0,t.jsxs)(v.Select,{value:x,onValueChange:S,children:[(0,t.jsx)(v.SelectTrigger,{children:(0,t.jsx)(v.SelectValue,{placeholder:"همه وضعیت‌ها"})}),(0,t.jsxs)(v.SelectContent,{children:[(0,t.jsx)(v.SelectItem,{value:"all",children:"همه وضعیت‌ها"}),(0,t.jsx)(v.SelectItem,{value:"active",children:"فعال"}),(0,t.jsx)(v.SelectItem,{value:"inactive",children:"غیرفعال"})]})]})]})]}),(c||"all"!==m||"all"!==x)&&(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(s.Button,{variant:"ghost",size:"sm",onClick:()=>{u(""),f("all"),S("all"),l()},children:"پاک کردن فیلترها"})})]})]}),(0,t.jsxs)(b.Card,{className:"shadow-sm",children:[(0,t.jsx)(b.CardHeader,{className:"bg-gradient-to-r from-primary/5 to-transparent border-b",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(b.CardTitle,{children:["محصولات (",H.length,")"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(s.Button,{variant:D?"default":"outline",onClick:()=>P(!D),size:"sm",children:[(0,t.jsx)(N.Filter,{className:"ml-2 h-4 w-4"}),"فیلتر"]}),(0,t.jsxs)(s.Button,{variant:"outline",onClick:()=>{let e=new Blob([[["نام","برند","دسته‌بندی","قیمت","موجودی","وضعیت"],...H.map(e=>[e.name,e.brand,e.category,e.price.toString(),e.stockCount.toString(),e.enabled?"فعال":"غیرفعال"])].map(e=>e.join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download=`products-${new Date().toISOString()}.csv`,t.click()},size:"sm",children:[(0,t.jsx)(C.Download,{className:"ml-2 h-4 w-4"}),"خروجی CSV"]}),(0,t.jsx)(s.Button,{asChild:!0,size:"sm",children:(0,t.jsxs)(g.default,{href:"/admin/products/new",children:[(0,t.jsx)(y.Plus,{className:"ml-2 h-4 w-4"}),"محصول جدید"]})})]})]})}),(0,t.jsx)(b.CardContent,{children:E?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"در حال بارگذاری محصولات..."})}):(0,t.jsx)(p,{products:H,onRefresh:async()=>{await n(!0),o()}})})]})]})}e.s(["default",()=>S],48380)}]);