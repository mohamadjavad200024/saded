/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chat/unread-count/route";
exports.ids = ["app/api/chat/unread-count/route"];
exports.modules = {

/***/ "(rsc)/./app/api/chat/unread-count/route.ts":
/*!********************************************!*\
  !*** ./app/api/chat/unread-count/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var _lib_db_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/db/index */ \"(rsc)/./lib/db/index.ts\");\n/* harmony import */ var _lib_api_route_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/api-route-helpers */ \"(rsc)/./lib/api-route-helpers.ts\");\n/* harmony import */ var _lib_api_error_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/api-error-handler */ \"(rsc)/./lib/api-error-handler.ts\");\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/logger */ \"(rsc)/./lib/logger.ts\");\n\n\n\n\n/**\n * GET /api/chat/unread-count - Get unread message count\n * Query params:\n *   - chatId (optional): Get unread count for specific chat\n *   - all (optional): Get unread counts for all chats\n */ async function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const chatId = searchParams.get(\"chatId\");\n        const getAll = searchParams.get(\"all\") === \"true\";\n        // Ensure tables exist\n        try {\n            await (0,_lib_db_index__WEBPACK_IMPORTED_MODULE_0__.runQuery)(`\n        CREATE TABLE IF NOT EXISTS chat_messages (\n          id VARCHAR(255) PRIMARY KEY,\n          \"chatId\" VARCHAR(255) NOT NULL,\n          text TEXT,\n          sender VARCHAR(50) NOT NULL,\n          attachments JSONB DEFAULT '[]'::jsonb,\n          status VARCHAR(50) DEFAULT 'sent',\n          \"createdAt\" TIMESTAMP NOT NULL DEFAULT NOW()\n        );\n      `);\n        } catch (createError) {\n            if (createError?.code !== \"42P07\" && !createError?.message?.includes(\"already exists\")) {\n                _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"Error creating chat_messages table:\", createError);\n            }\n        }\n        if (chatId) {\n            // Get unread count for specific chat\n            // WhatsApp style: only count messages from \"user\" that have NOT been read yet\n            // Count messages with status 'sent', 'delivered', or 'sending' (not 'read')\n            // NULL status messages are considered unread (new messages without status set)\n            const result = await (0,_lib_db_index__WEBPACK_IMPORTED_MODULE_0__.getRow)(`SELECT COUNT(*) as count \n         FROM chat_messages \n         WHERE \"chatId\" = $1 \n           AND sender = 'user' \n           AND (status IS NULL OR (status != 'read' AND status IN ('sent', 'delivered', 'sending')))`, [\n                chatId\n            ]);\n            const unreadCount = parseInt(result?.count || \"0\", 10);\n            return (0,_lib_api_route_helpers__WEBPACK_IMPORTED_MODULE_1__.createSuccessResponse)({\n                chatId,\n                unreadCount\n            });\n        } else if (getAll) {\n            // Get unread counts for all chats\n            const chats = await (0,_lib_db_index__WEBPACK_IMPORTED_MODULE_0__.getRows)(`SELECT DISTINCT \"chatId\" as id FROM chat_messages`);\n            const chatsWithUnreadCount = await Promise.all(chats.map(async (chat)=>{\n                const result = await (0,_lib_db_index__WEBPACK_IMPORTED_MODULE_0__.getRow)(`SELECT COUNT(*) as count \n             FROM chat_messages \n             WHERE \"chatId\" = $1 \n               AND sender = 'user' \n               AND (status IS NULL OR (status != 'read' AND status IN ('sent', 'delivered', 'sending')))`, [\n                    chat.id\n                ]);\n                return {\n                    id: chat.id,\n                    unreadCount: parseInt(result?.count || \"0\", 10)\n                };\n            }));\n            return (0,_lib_api_route_helpers__WEBPACK_IMPORTED_MODULE_1__.createSuccessResponse)({\n                chats: chatsWithUnreadCount\n            });\n        } else {\n            // No chatId and getAll not specified, return error\n            throw new _lib_api_error_handler__WEBPACK_IMPORTED_MODULE_2__.AppError(\"chatId or all parameter is required\", 400, \"MISSING_PARAMS\");\n        }\n    } catch (error) {\n        _lib_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"[GET /api/chat/unread-count] Error:\", error);\n        return (0,_lib_api_route_helpers__WEBPACK_IMPORTED_MODULE_1__.createErrorResponse)(error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2NoYXQvdW5yZWFkLWNvdW50L3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQzJEO0FBQzBCO0FBQ2xDO0FBQ2I7QUFFdEM7Ozs7O0NBS0MsR0FDTSxlQUFlTyxJQUFJQyxPQUFvQjtJQUM1QyxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxZQUFZLEVBQUUsR0FBRyxJQUFJQyxJQUFJRixRQUFRRyxHQUFHO1FBQzVDLE1BQU1DLFNBQVNILGFBQWFJLEdBQUcsQ0FBQztRQUNoQyxNQUFNQyxTQUFTTCxhQUFhSSxHQUFHLENBQUMsV0FBVztRQUUzQyxzQkFBc0I7UUFDdEIsSUFBSTtZQUNGLE1BQU1YLHVEQUFRQSxDQUFDLENBQUM7Ozs7Ozs7Ozs7TUFVaEIsQ0FBQztRQUNILEVBQUUsT0FBT2EsYUFBa0I7WUFDekIsSUFBSUEsYUFBYUMsU0FBUyxXQUFXLENBQUNELGFBQWFFLFNBQVNDLFNBQVMsbUJBQW1CO2dCQUN0RlosK0NBQU1BLENBQUNhLEtBQUssQ0FBQyx1Q0FBdUNKO1lBQ3REO1FBQ0Y7UUFFQSxJQUFJSCxRQUFRO1lBQ1YscUNBQXFDO1lBQ3JDLDhFQUE4RTtZQUM5RSw0RUFBNEU7WUFDNUUsK0VBQStFO1lBQy9FLE1BQU1RLFNBQVMsTUFBTXBCLHFEQUFNQSxDQUN6QixDQUFDOzs7O29HQUkyRixDQUFDLEVBQzdGO2dCQUFDWTthQUFPO1lBR1YsTUFBTVMsY0FBY0MsU0FBU0YsUUFBUUcsU0FBUyxLQUFLO1lBRW5ELE9BQU9uQiw2RUFBcUJBLENBQUM7Z0JBQzNCUTtnQkFDQVM7WUFDRjtRQUNGLE9BQU8sSUFBSVAsUUFBUTtZQUNqQixrQ0FBa0M7WUFDbEMsTUFBTVUsUUFBUSxNQUFNdkIsc0RBQU9BLENBQ3pCLENBQUMsaURBQWlELENBQUM7WUFHckQsTUFBTXdCLHVCQUF1QixNQUFNQyxRQUFRQyxHQUFHLENBQzVDSCxNQUFNSSxHQUFHLENBQUMsT0FBT0M7Z0JBQ2YsTUFBTVQsU0FBUyxNQUFNcEIscURBQU1BLENBQ3pCLENBQUM7Ozs7d0dBSTJGLENBQUMsRUFDN0Y7b0JBQUM2QixLQUFLQyxFQUFFO2lCQUFDO2dCQUdYLE9BQU87b0JBQ0xBLElBQUlELEtBQUtDLEVBQUU7b0JBQ1hULGFBQWFDLFNBQVNGLFFBQVFHLFNBQVMsS0FBSztnQkFDOUM7WUFDRjtZQUdGLE9BQU9uQiw2RUFBcUJBLENBQUM7Z0JBQzNCb0IsT0FBT0M7WUFDVDtRQUNGLE9BQU87WUFDTCxtREFBbUQ7WUFDbkQsTUFBTSxJQUFJcEIsNERBQVFBLENBQUMsdUNBQXVDLEtBQUs7UUFDakU7SUFDRixFQUFFLE9BQU9jLE9BQU87UUFDZGIsK0NBQU1BLENBQUNhLEtBQUssQ0FBQyx1Q0FBdUNBO1FBQ3BELE9BQU9oQiwyRUFBbUJBLENBQUNnQjtJQUM3QjtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXE1vaGFtYWRKYXZhZFxcT25lRHJpdmVcXERlc2t0b3BcXHNhZGVkIC0gQ29weSAoNClcXGFwcFxcYXBpXFxjaGF0XFx1bnJlYWQtY291bnRcXHJvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IGdldFJvdywgZ2V0Um93cywgcnVuUXVlcnkgfSBmcm9tIFwiQC9saWIvZGIvaW5kZXhcIjtcbmltcG9ydCB7IGNyZWF0ZUVycm9yUmVzcG9uc2UsIGNyZWF0ZVN1Y2Nlc3NSZXNwb25zZSB9IGZyb20gXCJAL2xpYi9hcGktcm91dGUtaGVscGVyc1wiO1xuaW1wb3J0IHsgQXBwRXJyb3IgfSBmcm9tIFwiQC9saWIvYXBpLWVycm9yLWhhbmRsZXJcIjtcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCJAL2xpYi9sb2dnZXJcIjtcblxuLyoqXG4gKiBHRVQgL2FwaS9jaGF0L3VucmVhZC1jb3VudCAtIEdldCB1bnJlYWQgbWVzc2FnZSBjb3VudFxuICogUXVlcnkgcGFyYW1zOlxuICogICAtIGNoYXRJZCAob3B0aW9uYWwpOiBHZXQgdW5yZWFkIGNvdW50IGZvciBzcGVjaWZpYyBjaGF0XG4gKiAgIC0gYWxsIChvcHRpb25hbCk6IEdldCB1bnJlYWQgY291bnRzIGZvciBhbGwgY2hhdHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCBjaGF0SWQgPSBzZWFyY2hQYXJhbXMuZ2V0KFwiY2hhdElkXCIpO1xuICAgIGNvbnN0IGdldEFsbCA9IHNlYXJjaFBhcmFtcy5nZXQoXCJhbGxcIikgPT09IFwidHJ1ZVwiO1xuXG4gICAgLy8gRW5zdXJlIHRhYmxlcyBleGlzdFxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBydW5RdWVyeShgXG4gICAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGNoYXRfbWVzc2FnZXMgKFxuICAgICAgICAgIGlkIFZBUkNIQVIoMjU1KSBQUklNQVJZIEtFWSxcbiAgICAgICAgICBcImNoYXRJZFwiIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcbiAgICAgICAgICB0ZXh0IFRFWFQsXG4gICAgICAgICAgc2VuZGVyIFZBUkNIQVIoNTApIE5PVCBOVUxMLFxuICAgICAgICAgIGF0dGFjaG1lbnRzIEpTT05CIERFRkFVTFQgJ1tdJzo6anNvbmIsXG4gICAgICAgICAgc3RhdHVzIFZBUkNIQVIoNTApIERFRkFVTFQgJ3NlbnQnLFxuICAgICAgICAgIFwiY3JlYXRlZEF0XCIgVElNRVNUQU1QIE5PVCBOVUxMIERFRkFVTFQgTk9XKClcbiAgICAgICAgKTtcbiAgICAgIGApO1xuICAgIH0gY2F0Y2ggKGNyZWF0ZUVycm9yOiBhbnkpIHtcbiAgICAgIGlmIChjcmVhdGVFcnJvcj8uY29kZSAhPT0gXCI0MlAwN1wiICYmICFjcmVhdGVFcnJvcj8ubWVzc2FnZT8uaW5jbHVkZXMoXCJhbHJlYWR5IGV4aXN0c1wiKSkge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBjcmVhdGluZyBjaGF0X21lc3NhZ2VzIHRhYmxlOlwiLCBjcmVhdGVFcnJvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNoYXRJZCkge1xuICAgICAgLy8gR2V0IHVucmVhZCBjb3VudCBmb3Igc3BlY2lmaWMgY2hhdFxuICAgICAgLy8gV2hhdHNBcHAgc3R5bGU6IG9ubHkgY291bnQgbWVzc2FnZXMgZnJvbSBcInVzZXJcIiB0aGF0IGhhdmUgTk9UIGJlZW4gcmVhZCB5ZXRcbiAgICAgIC8vIENvdW50IG1lc3NhZ2VzIHdpdGggc3RhdHVzICdzZW50JywgJ2RlbGl2ZXJlZCcsIG9yICdzZW5kaW5nJyAobm90ICdyZWFkJylcbiAgICAgIC8vIE5VTEwgc3RhdHVzIG1lc3NhZ2VzIGFyZSBjb25zaWRlcmVkIHVucmVhZCAobmV3IG1lc3NhZ2VzIHdpdGhvdXQgc3RhdHVzIHNldClcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJvdzx7IGNvdW50OiBzdHJpbmcgfT4oXG4gICAgICAgIGBTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgXG4gICAgICAgICBGUk9NIGNoYXRfbWVzc2FnZXMgXG4gICAgICAgICBXSEVSRSBcImNoYXRJZFwiID0gJDEgXG4gICAgICAgICAgIEFORCBzZW5kZXIgPSAndXNlcicgXG4gICAgICAgICAgIEFORCAoc3RhdHVzIElTIE5VTEwgT1IgKHN0YXR1cyAhPSAncmVhZCcgQU5EIHN0YXR1cyBJTiAoJ3NlbnQnLCAnZGVsaXZlcmVkJywgJ3NlbmRpbmcnKSkpYCxcbiAgICAgICAgW2NoYXRJZF1cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHVucmVhZENvdW50ID0gcGFyc2VJbnQocmVzdWx0Py5jb3VudCB8fCBcIjBcIiwgMTApO1xuXG4gICAgICByZXR1cm4gY3JlYXRlU3VjY2Vzc1Jlc3BvbnNlKHtcbiAgICAgICAgY2hhdElkLFxuICAgICAgICB1bnJlYWRDb3VudCxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoZ2V0QWxsKSB7XG4gICAgICAvLyBHZXQgdW5yZWFkIGNvdW50cyBmb3IgYWxsIGNoYXRzXG4gICAgICBjb25zdCBjaGF0cyA9IGF3YWl0IGdldFJvd3M8eyBpZDogc3RyaW5nIH0+KFxuICAgICAgICBgU0VMRUNUIERJU1RJTkNUIFwiY2hhdElkXCIgYXMgaWQgRlJPTSBjaGF0X21lc3NhZ2VzYFxuICAgICAgKTtcblxuICAgICAgY29uc3QgY2hhdHNXaXRoVW5yZWFkQ291bnQgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgY2hhdHMubWFwKGFzeW5jIChjaGF0KSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0Um93PHsgY291bnQ6IHN0cmluZyB9PihcbiAgICAgICAgICAgIGBTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgXG4gICAgICAgICAgICAgRlJPTSBjaGF0X21lc3NhZ2VzIFxuICAgICAgICAgICAgIFdIRVJFIFwiY2hhdElkXCIgPSAkMSBcbiAgICAgICAgICAgICAgIEFORCBzZW5kZXIgPSAndXNlcicgXG4gICAgICAgICAgICAgICBBTkQgKHN0YXR1cyBJUyBOVUxMIE9SIChzdGF0dXMgIT0gJ3JlYWQnIEFORCBzdGF0dXMgSU4gKCdzZW50JywgJ2RlbGl2ZXJlZCcsICdzZW5kaW5nJykpKWAsXG4gICAgICAgICAgICBbY2hhdC5pZF1cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBjaGF0LmlkLFxuICAgICAgICAgICAgdW5yZWFkQ291bnQ6IHBhcnNlSW50KHJlc3VsdD8uY291bnQgfHwgXCIwXCIsIDEwKSxcbiAgICAgICAgICB9O1xuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIGNyZWF0ZVN1Y2Nlc3NSZXNwb25zZSh7XG4gICAgICAgIGNoYXRzOiBjaGF0c1dpdGhVbnJlYWRDb3VudCxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBObyBjaGF0SWQgYW5kIGdldEFsbCBub3Qgc3BlY2lmaWVkLCByZXR1cm4gZXJyb3JcbiAgICAgIHRocm93IG5ldyBBcHBFcnJvcihcImNoYXRJZCBvciBhbGwgcGFyYW1ldGVyIGlzIHJlcXVpcmVkXCIsIDQwMCwgXCJNSVNTSU5HX1BBUkFNU1wiKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKFwiW0dFVCAvYXBpL2NoYXQvdW5yZWFkLWNvdW50XSBFcnJvcjpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBjcmVhdGVFcnJvclJlc3BvbnNlKGVycm9yKTtcbiAgfVxufVxuXG4iXSwibmFtZXMiOlsiZ2V0Um93IiwiZ2V0Um93cyIsInJ1blF1ZXJ5IiwiY3JlYXRlRXJyb3JSZXNwb25zZSIsImNyZWF0ZVN1Y2Nlc3NSZXNwb25zZSIsIkFwcEVycm9yIiwibG9nZ2VyIiwiR0VUIiwicmVxdWVzdCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsImNoYXRJZCIsImdldCIsImdldEFsbCIsImNyZWF0ZUVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJpbmNsdWRlcyIsImVycm9yIiwicmVzdWx0IiwidW5yZWFkQ291bnQiLCJwYXJzZUludCIsImNvdW50IiwiY2hhdHMiLCJjaGF0c1dpdGhVbnJlYWRDb3VudCIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJjaGF0IiwiaWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/chat/unread-count/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/api-error-handler.ts":
/*!**********************************!*\
  !*** ./lib/api-error-handler.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppError: () => (/* binding */ AppError),\n/* harmony export */   NetworkError: () => (/* binding */ NetworkError),\n/* harmony export */   NetworkErrorType: () => (/* binding */ NetworkErrorType),\n/* harmony export */   getUserFriendlyMessage: () => (/* binding */ getUserFriendlyMessage),\n/* harmony export */   logError: () => (/* binding */ logError),\n/* harmony export */   parseError: () => (/* binding */ parseError)\n/* harmony export */ });\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/logger */ \"(rsc)/./lib/logger.ts\");\n/**\r\n * Centralized Error Handler\r\n * Provides consistent error handling and logging across the application\r\n */ class AppError extends Error {\n    constructor(message, status, code, details){\n        super(message);\n        this.name = \"AppError\";\n        this.status = status;\n        this.code = code;\n        this.details = details;\n        Object.setPrototypeOf(this, AppError.prototype);\n    }\n}\n/**\r\n * Network error types\r\n */ var NetworkErrorType = /*#__PURE__*/ function(NetworkErrorType) {\n    NetworkErrorType[\"TIMEOUT\"] = \"TIMEOUT\";\n    NetworkErrorType[\"NETWORK\"] = \"NETWORK\";\n    NetworkErrorType[\"ABORTED\"] = \"ABORTED\";\n    NetworkErrorType[\"UNKNOWN\"] = \"UNKNOWN\";\n    return NetworkErrorType;\n}({});\nclass NetworkError extends Error {\n    constructor(message, type = \"UNKNOWN\", originalError){\n        super(message);\n        this.name = \"NetworkError\";\n        this.type = type;\n        this.originalError = originalError;\n        Object.setPrototypeOf(this, NetworkError.prototype);\n    }\n}\n/**\r\n * Import centralized logger\r\n */ \n/**\r\n * Parse error from various sources\r\n */ function parseError(error) {\n    if (error instanceof AppError) {\n        return {\n            message: error.message,\n            status: error.status,\n            code: error.code,\n            details: error.details\n        };\n    }\n    if (error instanceof NetworkError) {\n        return {\n            message: error.message,\n            code: error.type,\n            details: error.originalError\n        };\n    }\n    if (error instanceof Error) {\n        return {\n            message: error.message\n        };\n    }\n    if (typeof error === \"string\") {\n        return {\n            message: error\n        };\n    }\n    return {\n        message: \"خطای نامشخص رخ داد\"\n    };\n}\n/**\r\n * Get user-friendly error message\r\n */ function getUserFriendlyMessage(error) {\n    const parsed = parseError(error);\n    // Network errors\n    if (parsed.code === \"TIMEOUT\") {\n        return \"درخواست شما به دلیل طولانی شدن زمان پاسخ لغو شد. لطفاً دوباره تلاش کنید.\";\n    }\n    if (parsed.code === \"NETWORK\") {\n        return \"خطا در ارتباط با سرور. لطفاً اتصال اینترنت خود را بررسی کنید.\";\n    }\n    if (parsed.code === \"ABORTED\") {\n        return \"درخواست لغو شد.\";\n    }\n    // HTTP status codes\n    if (parsed.status) {\n        switch(parsed.status){\n            case 400:\n                return parsed.message || \"درخواست نامعتبر است.\";\n            case 401:\n                return \"لطفاً دوباره وارد شوید.\";\n            case 403:\n                return \"شما دسترسی به این منبع ندارید.\";\n            case 404:\n                return \"منبع مورد نظر یافت نشد.\";\n            case 429:\n                return \"تعداد درخواست‌های شما بیش از حد مجاز است. لطفاً کمی صبر کنید.\";\n            case 500:\n                return \"خطای سرور. لطفاً بعداً تلاش کنید.\";\n            case 502:\n            case 503:\n            case 504:\n                return \"سرور در دسترس نیست. لطفاً بعداً تلاش کنید.\";\n            default:\n                return parsed.message || \"خطایی رخ داد.\";\n        }\n    }\n    return parsed.message || \"خطای نامشخص رخ داد.\";\n}\n/**\r\n * Log error (only in development)\r\n */ function logError(error, context) {\n    const parsed = parseError(error);\n    const contextMsg = context ? `[${context}] ` : \"\";\n    _lib_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error(`${contextMsg}${parsed.message}`, {\n        status: parsed.status,\n        code: parsed.code,\n        details: parsed.details\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXBpLWVycm9yLWhhbmRsZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBOzs7Q0FHQyxHQVNNLE1BQU1BLGlCQUFpQkM7SUFLNUIsWUFBWUMsT0FBZSxFQUFFQyxNQUFlLEVBQUVDLElBQWEsRUFBRUMsT0FBaUIsQ0FBRTtRQUM5RSxLQUFLLENBQUNIO1FBQ04sSUFBSSxDQUFDSSxJQUFJLEdBQUc7UUFDWixJQUFJLENBQUNILE1BQU0sR0FBR0E7UUFDZCxJQUFJLENBQUNDLElBQUksR0FBR0E7UUFDWixJQUFJLENBQUNDLE9BQU8sR0FBR0E7UUFDZkUsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRVIsU0FBU1MsU0FBUztJQUNoRDtBQUNGO0FBRUE7O0NBRUMsR0FDTSw4Q0FBS0M7Ozs7O1dBQUFBO01BS1g7QUFFTSxNQUFNQyxxQkFBcUJWO0lBSWhDLFlBQ0VDLE9BQWUsRUFDZlUsZ0JBQWlELEVBQ2pEQyxhQUFxQixDQUNyQjtRQUNBLEtBQUssQ0FBQ1g7UUFDTixJQUFJLENBQUNJLElBQUksR0FBRztRQUNaLElBQUksQ0FBQ00sSUFBSSxHQUFHQTtRQUNaLElBQUksQ0FBQ0MsYUFBYSxHQUFHQTtRQUNyQk4sT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRUcsYUFBYUYsU0FBUztJQUNwRDtBQUNGO0FBRUE7O0NBRUMsR0FDcUM7QUFFdEM7O0NBRUMsR0FDTSxTQUFTTSxXQUFXQyxLQUFjO0lBQ3ZDLElBQUlBLGlCQUFpQmhCLFVBQVU7UUFDN0IsT0FBTztZQUNMRSxTQUFTYyxNQUFNZCxPQUFPO1lBQ3RCQyxRQUFRYSxNQUFNYixNQUFNO1lBQ3BCQyxNQUFNWSxNQUFNWixJQUFJO1lBQ2hCQyxTQUFTVyxNQUFNWCxPQUFPO1FBQ3hCO0lBQ0Y7SUFFQSxJQUFJVyxpQkFBaUJMLGNBQWM7UUFDakMsT0FBTztZQUNMVCxTQUFTYyxNQUFNZCxPQUFPO1lBQ3RCRSxNQUFNWSxNQUFNSixJQUFJO1lBQ2hCUCxTQUFTVyxNQUFNSCxhQUFhO1FBQzlCO0lBQ0Y7SUFFQSxJQUFJRyxpQkFBaUJmLE9BQU87UUFDMUIsT0FBTztZQUNMQyxTQUFTYyxNQUFNZCxPQUFPO1FBQ3hCO0lBQ0Y7SUFFQSxJQUFJLE9BQU9jLFVBQVUsVUFBVTtRQUM3QixPQUFPO1lBQ0xkLFNBQVNjO1FBQ1g7SUFDRjtJQUVBLE9BQU87UUFDTGQsU0FBUztJQUNYO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLFNBQVNlLHVCQUF1QkQsS0FBYztJQUNuRCxNQUFNRSxTQUFTSCxXQUFXQztJQUUxQixpQkFBaUI7SUFDakIsSUFBSUUsT0FBT2QsSUFBSSxnQkFBK0I7UUFDNUMsT0FBTztJQUNUO0lBRUEsSUFBSWMsT0FBT2QsSUFBSSxnQkFBK0I7UUFDNUMsT0FBTztJQUNUO0lBRUEsSUFBSWMsT0FBT2QsSUFBSSxnQkFBK0I7UUFDNUMsT0FBTztJQUNUO0lBRUEsb0JBQW9CO0lBQ3BCLElBQUljLE9BQU9mLE1BQU0sRUFBRTtRQUNqQixPQUFRZSxPQUFPZixNQUFNO1lBQ25CLEtBQUs7Z0JBQ0gsT0FBT2UsT0FBT2hCLE9BQU8sSUFBSTtZQUMzQixLQUFLO2dCQUNILE9BQU87WUFDVCxLQUFLO2dCQUNILE9BQU87WUFDVCxLQUFLO2dCQUNILE9BQU87WUFDVCxLQUFLO2dCQUNILE9BQU87WUFDVCxLQUFLO2dCQUNILE9BQU87WUFDVCxLQUFLO1lBQ0wsS0FBSztZQUNMLEtBQUs7Z0JBQ0gsT0FBTztZQUNUO2dCQUNFLE9BQU9nQixPQUFPaEIsT0FBTyxJQUFJO1FBQzdCO0lBQ0Y7SUFFQSxPQUFPZ0IsT0FBT2hCLE9BQU8sSUFBSTtBQUMzQjtBQUVBOztDQUVDLEdBQ00sU0FBU2lCLFNBQVNILEtBQWMsRUFBRUksT0FBZ0I7SUFDdkQsTUFBTUYsU0FBU0gsV0FBV0M7SUFDMUIsTUFBTUssYUFBYUQsVUFBVSxDQUFDLENBQUMsRUFBRUEsUUFBUSxFQUFFLENBQUMsR0FBRztJQUUvQ04sK0NBQU1BLENBQUNFLEtBQUssQ0FBQyxHQUFHSyxhQUFhSCxPQUFPaEIsT0FBTyxFQUFFLEVBQUU7UUFDN0NDLFFBQVFlLE9BQU9mLE1BQU07UUFDckJDLE1BQU1jLE9BQU9kLElBQUk7UUFDakJDLFNBQVNhLE9BQU9iLE9BQU87SUFDekI7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxNb2hhbWFkSmF2YWRcXE9uZURyaXZlXFxEZXNrdG9wXFxzYWRlZCAtIENvcHkgKDQpXFxsaWJcXGFwaS1lcnJvci1oYW5kbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDZW50cmFsaXplZCBFcnJvciBIYW5kbGVyXHJcbiAqIFByb3ZpZGVzIGNvbnNpc3RlbnQgZXJyb3IgaGFuZGxpbmcgYW5kIGxvZ2dpbmcgYWNyb3NzIHRoZSBhcHBsaWNhdGlvblxyXG4gKi9cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQXBpRXJyb3Ige1xyXG4gIG1lc3NhZ2U6IHN0cmluZztcclxuICBzdGF0dXM/OiBudW1iZXI7XHJcbiAgY29kZT86IHN0cmluZztcclxuICBkZXRhaWxzPzogdW5rbm93bjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFwcEVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gIHN0YXR1cz86IG51bWJlcjtcclxuICBjb2RlPzogc3RyaW5nO1xyXG4gIGRldGFpbHM/OiB1bmtub3duO1xyXG5cclxuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIHN0YXR1cz86IG51bWJlciwgY29kZT86IHN0cmluZywgZGV0YWlscz86IHVua25vd24pIHtcclxuICAgIHN1cGVyKG1lc3NhZ2UpO1xyXG4gICAgdGhpcy5uYW1lID0gXCJBcHBFcnJvclwiO1xyXG4gICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XHJcbiAgICB0aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgdGhpcy5kZXRhaWxzID0gZGV0YWlscztcclxuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBBcHBFcnJvci5wcm90b3R5cGUpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIE5ldHdvcmsgZXJyb3IgdHlwZXNcclxuICovXHJcbmV4cG9ydCBlbnVtIE5ldHdvcmtFcnJvclR5cGUge1xyXG4gIFRJTUVPVVQgPSBcIlRJTUVPVVRcIixcclxuICBORVRXT1JLID0gXCJORVRXT1JLXCIsXHJcbiAgQUJPUlRFRCA9IFwiQUJPUlRFRFwiLFxyXG4gIFVOS05PV04gPSBcIlVOS05PV05cIixcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE5ldHdvcmtFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICB0eXBlOiBOZXR3b3JrRXJyb3JUeXBlO1xyXG4gIG9yaWdpbmFsRXJyb3I/OiBFcnJvcjtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBtZXNzYWdlOiBzdHJpbmcsXHJcbiAgICB0eXBlOiBOZXR3b3JrRXJyb3JUeXBlID0gTmV0d29ya0Vycm9yVHlwZS5VTktOT1dOLFxyXG4gICAgb3JpZ2luYWxFcnJvcj86IEVycm9yXHJcbiAgKSB7XHJcbiAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgIHRoaXMubmFtZSA9IFwiTmV0d29ya0Vycm9yXCI7XHJcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgdGhpcy5vcmlnaW5hbEVycm9yID0gb3JpZ2luYWxFcnJvcjtcclxuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBOZXR3b3JrRXJyb3IucHJvdG90eXBlKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbXBvcnQgY2VudHJhbGl6ZWQgbG9nZ2VyXHJcbiAqL1xyXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tIFwiQC9saWIvbG9nZ2VyXCI7XHJcblxyXG4vKipcclxuICogUGFyc2UgZXJyb3IgZnJvbSB2YXJpb3VzIHNvdXJjZXNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUVycm9yKGVycm9yOiB1bmtub3duKTogQXBpRXJyb3Ige1xyXG4gIGlmIChlcnJvciBpbnN0YW5jZW9mIEFwcEVycm9yKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICBzdGF0dXM6IGVycm9yLnN0YXR1cyxcclxuICAgICAgY29kZTogZXJyb3IuY29kZSxcclxuICAgICAgZGV0YWlsczogZXJyb3IuZGV0YWlscyxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBOZXR3b3JrRXJyb3IpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICAgIGNvZGU6IGVycm9yLnR5cGUsXHJcbiAgICAgIGRldGFpbHM6IGVycm9yLm9yaWdpbmFsRXJyb3IsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgaWYgKHR5cGVvZiBlcnJvciA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbWVzc2FnZTogZXJyb3IsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIG1lc3NhZ2U6IFwi2K7Yt9in24wg2YbYp9mF2LTYrti1INix2K4g2K/Yp9ivXCIsXHJcbiAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB1c2VyLWZyaWVuZGx5IGVycm9yIG1lc3NhZ2VcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRVc2VyRnJpZW5kbHlNZXNzYWdlKGVycm9yOiB1bmtub3duKTogc3RyaW5nIHtcclxuICBjb25zdCBwYXJzZWQgPSBwYXJzZUVycm9yKGVycm9yKTtcclxuXHJcbiAgLy8gTmV0d29yayBlcnJvcnNcclxuICBpZiAocGFyc2VkLmNvZGUgPT09IE5ldHdvcmtFcnJvclR5cGUuVElNRU9VVCkge1xyXG4gICAgcmV0dXJuIFwi2K/Ysdiu2YjYp9iz2Kog2LTZhdinINio2Ycg2K/ZhNuM2YQg2LfZiNmE2KfZhtuMINi02K/ZhiDYstmF2KfZhiDZvtin2LPYriDZhNi62Ygg2LTYry4g2YTYt9mB2KfZiyDYr9mI2KjYp9ix2Ycg2KrZhNin2LQg2qnZhtuM2K8uXCI7XHJcbiAgfVxyXG5cclxuICBpZiAocGFyc2VkLmNvZGUgPT09IE5ldHdvcmtFcnJvclR5cGUuTkVUV09SSykge1xyXG4gICAgcmV0dXJuIFwi2K7Yt9inINiv2LEg2KfYsdiq2KjYp9i3INio2Kcg2LPYsdmI2LEuINmE2LfZgdin2Ysg2KfYqti12KfZhCDYp9uM2YbYqtix2YbYqiDYrtmI2K8g2LHYpyDYqNix2LHYs9uMINqp2YbbjNivLlwiO1xyXG4gIH1cclxuXHJcbiAgaWYgKHBhcnNlZC5jb2RlID09PSBOZXR3b3JrRXJyb3JUeXBlLkFCT1JURUQpIHtcclxuICAgIHJldHVybiBcItiv2LHYrtmI2KfYs9iqINmE2LrZiCDYtNivLlwiO1xyXG4gIH1cclxuXHJcbiAgLy8gSFRUUCBzdGF0dXMgY29kZXNcclxuICBpZiAocGFyc2VkLnN0YXR1cykge1xyXG4gICAgc3dpdGNoIChwYXJzZWQuc3RhdHVzKSB7XHJcbiAgICAgIGNhc2UgNDAwOlxyXG4gICAgICAgIHJldHVybiBwYXJzZWQubWVzc2FnZSB8fCBcItiv2LHYrtmI2KfYs9iqINmG2KfZhdi52KrYqNixINin2LPYqi5cIjtcclxuICAgICAgY2FzZSA0MDE6XHJcbiAgICAgICAgcmV0dXJuIFwi2YTYt9mB2KfZiyDYr9mI2KjYp9ix2Ycg2YjYp9ix2K8g2LTZiNuM2K8uXCI7XHJcbiAgICAgIGNhc2UgNDAzOlxyXG4gICAgICAgIHJldHVybiBcIti02YXYpyDYr9iz2KrYsdiz24wg2KjZhyDYp9uM2YYg2YXZhtio2Lkg2YbYr9in2LHbjNivLlwiO1xyXG4gICAgICBjYXNlIDQwNDpcclxuICAgICAgICByZXR1cm4gXCLZhdmG2KjYuSDZhdmI2LHYryDZhti42LEg24zYp9mB2Kog2YbYtNivLlwiO1xyXG4gICAgICBjYXNlIDQyOTpcclxuICAgICAgICByZXR1cm4gXCLYqti52K/Yp9ivINiv2LHYrtmI2KfYs9iq4oCM2YfYp9uMINi02YXYpyDYqNuM2LQg2KfYsiDYrdivINmF2KzYp9iyINin2LPYqi4g2YTYt9mB2KfZiyDaqdmF24wg2LXYqNixINqp2YbbjNivLlwiO1xyXG4gICAgICBjYXNlIDUwMDpcclxuICAgICAgICByZXR1cm4gXCLYrti32KfbjCDYs9ix2YjYsS4g2YTYt9mB2KfZiyDYqNi52K/Yp9mLINiq2YTYp9i0INqp2YbbjNivLlwiO1xyXG4gICAgICBjYXNlIDUwMjpcclxuICAgICAgY2FzZSA1MDM6XHJcbiAgICAgIGNhc2UgNTA0OlxyXG4gICAgICAgIHJldHVybiBcItiz2LHZiNixINiv2LEg2K/Ys9iq2LHYsyDZhtuM2LPYqi4g2YTYt9mB2KfZiyDYqNi52K/Yp9mLINiq2YTYp9i0INqp2YbbjNivLlwiO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiBwYXJzZWQubWVzc2FnZSB8fCBcItiu2LfYp9uM24wg2LHYriDYr9in2K8uXCI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcGFyc2VkLm1lc3NhZ2UgfHwgXCLYrti32KfbjCDZhtin2YXYtNiu2LUg2LHYriDYr9in2K8uXCI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMb2cgZXJyb3IgKG9ubHkgaW4gZGV2ZWxvcG1lbnQpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbG9nRXJyb3IoZXJyb3I6IHVua25vd24sIGNvbnRleHQ/OiBzdHJpbmcpOiB2b2lkIHtcclxuICBjb25zdCBwYXJzZWQgPSBwYXJzZUVycm9yKGVycm9yKTtcclxuICBjb25zdCBjb250ZXh0TXNnID0gY29udGV4dCA/IGBbJHtjb250ZXh0fV0gYCA6IFwiXCI7XHJcbiAgXHJcbiAgbG9nZ2VyLmVycm9yKGAke2NvbnRleHRNc2d9JHtwYXJzZWQubWVzc2FnZX1gLCB7XHJcbiAgICBzdGF0dXM6IHBhcnNlZC5zdGF0dXMsXHJcbiAgICBjb2RlOiBwYXJzZWQuY29kZSxcclxuICAgIGRldGFpbHM6IHBhcnNlZC5kZXRhaWxzLFxyXG4gIH0pO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJBcHBFcnJvciIsIkVycm9yIiwibWVzc2FnZSIsInN0YXR1cyIsImNvZGUiLCJkZXRhaWxzIiwibmFtZSIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiTmV0d29ya0Vycm9yVHlwZSIsIk5ldHdvcmtFcnJvciIsInR5cGUiLCJvcmlnaW5hbEVycm9yIiwibG9nZ2VyIiwicGFyc2VFcnJvciIsImVycm9yIiwiZ2V0VXNlckZyaWVuZGx5TWVzc2FnZSIsInBhcnNlZCIsImxvZ0Vycm9yIiwiY29udGV4dCIsImNvbnRleHRNc2ciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/api-error-handler.ts\n");

/***/ }),

/***/ "(rsc)/./lib/api-route-helpers.ts":
/*!**********************************!*\
  !*** ./lib/api-route-helpers.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createErrorResponse: () => (/* binding */ createErrorResponse),\n/* harmony export */   createSuccessResponse: () => (/* binding */ createSuccessResponse),\n/* harmony export */   validateRequestBody: () => (/* binding */ validateRequestBody),\n/* harmony export */   withErrorHandling: () => (/* binding */ withErrorHandling)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/api/server.js\");\n/* harmony import */ var _api_error_handler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./api-error-handler */ \"(rsc)/./lib/api-error-handler.ts\");\n/**\r\n * API Route Helpers\r\n * Provides standardized error handling and response formatting for API routes\r\n */ \n\n/**\r\n * Create standardized error response\r\n */ function createErrorResponse(error, defaultStatus = 500) {\n    let message = \"خطای سرور\";\n    let status = defaultStatus;\n    let code;\n    let details;\n    if (error instanceof Error) {\n        message = error.message;\n        if (\"status\" in error && typeof error.status === \"number\") {\n            status = error.status;\n        }\n        if (\"code\" in error && typeof error.code === \"string\") {\n            code = error.code;\n        }\n        if (\"details\" in error) {\n            details = error.details;\n        }\n    } else if (typeof error === \"string\") {\n        message = error;\n    } else if (error && typeof error === \"object\" && \"message\" in error) {\n        message = String(error.message);\n        if (\"status\" in error && typeof error.status === \"number\") {\n            status = error.status;\n        }\n    }\n    // Log error in development\n    (0,_api_error_handler__WEBPACK_IMPORTED_MODULE_1__.logError)(error, \"API Route\");\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        success: false,\n        error: message,\n        ...code ? {\n            code\n        } : {},\n        ... true && details ? {\n            details\n        } : {}\n    }, {\n        status\n    });\n}\n/**\r\n * Create standardized success response\r\n */ function createSuccessResponse(data, status = 200, pagination) {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        success: true,\n        data,\n        ...pagination && {\n            pagination\n        }\n    }, {\n        status\n    });\n}\n/**\r\n * Wrap route handler with error handling\r\n */ function withErrorHandling(handler) {\n    return async (request, context)=>{\n        try {\n            return await handler(request, context);\n        } catch (error) {\n            return createErrorResponse(error);\n        }\n    };\n}\n/**\r\n * Validate request body\r\n */ function validateRequestBody(body, validator) {\n    if (!body) {\n        throw new Error(\"Request body is required\");\n    }\n    if (validator && !validator(body)) {\n        throw new Error(\"Invalid request body\");\n    }\n    return body;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXBpLXJvdXRlLWhlbHBlcnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7OztDQUdDLEdBRTBDO0FBQ0k7QUFTL0M7O0NBRUMsR0FDTSxTQUFTRSxvQkFDZEMsS0FBYyxFQUNkQyxnQkFBd0IsR0FBRztJQUUzQixJQUFJQyxVQUFVO0lBQ2QsSUFBSUMsU0FBU0Y7SUFDYixJQUFJRztJQUNKLElBQUlDO0lBRUosSUFBSUwsaUJBQWlCTSxPQUFPO1FBQzFCSixVQUFVRixNQUFNRSxPQUFPO1FBQ3ZCLElBQUksWUFBWUYsU0FBUyxPQUFPQSxNQUFNRyxNQUFNLEtBQUssVUFBVTtZQUN6REEsU0FBU0gsTUFBTUcsTUFBTTtRQUN2QjtRQUNBLElBQUksVUFBVUgsU0FBUyxPQUFPQSxNQUFNSSxJQUFJLEtBQUssVUFBVTtZQUNyREEsT0FBT0osTUFBTUksSUFBSTtRQUNuQjtRQUNBLElBQUksYUFBYUosT0FBTztZQUN0QkssVUFBVUwsTUFBTUssT0FBTztRQUN6QjtJQUNGLE9BQU8sSUFBSSxPQUFPTCxVQUFVLFVBQVU7UUFDcENFLFVBQVVGO0lBQ1osT0FBTyxJQUFJQSxTQUFTLE9BQU9BLFVBQVUsWUFBWSxhQUFhQSxPQUFPO1FBQ25FRSxVQUFVSyxPQUFPUCxNQUFNRSxPQUFPO1FBQzlCLElBQUksWUFBWUYsU0FBUyxPQUFPQSxNQUFNRyxNQUFNLEtBQUssVUFBVTtZQUN6REEsU0FBU0gsTUFBTUcsTUFBTTtRQUN2QjtJQUNGO0lBRUEsMkJBQTJCO0lBQzNCTCw0REFBUUEsQ0FBQ0UsT0FBTztJQUVoQixPQUFPSCxxREFBWUEsQ0FBQ1csSUFBSSxDQUN0QjtRQUNFQyxTQUFTO1FBQ1RULE9BQU9FO1FBQ1AsR0FBSUUsT0FBTztZQUFFQTtRQUFLLElBQUksQ0FBQyxDQUFDO1FBQ3hCLEdBQUlNLEtBQXNDLElBQUlMLFVBQVU7WUFBRUE7UUFBUSxJQUFJLENBQUMsQ0FBQztJQUMxRSxHQUNBO1FBQUVGO0lBQU87QUFFYjtBQUVBOztDQUVDLEdBQ00sU0FBU1Esc0JBQ2RDLElBQU8sRUFDUFQsU0FBaUIsR0FBRyxFQUNwQlUsVUFLQztJQUVELE9BQU9oQixxREFBWUEsQ0FBQ1csSUFBSSxDQUN0QjtRQUNFQyxTQUFTO1FBQ1RHO1FBQ0EsR0FBSUMsY0FBYztZQUFFQTtRQUFXLENBQUM7SUFDbEMsR0FDQTtRQUFFVjtJQUFPO0FBRWI7QUFFQTs7Q0FFQyxHQUNNLFNBQVNXLGtCQUNkQyxPQUFtRTtJQUVuRSxPQUFPLE9BQU9DLFNBQWtCQztRQUM5QixJQUFJO1lBQ0YsT0FBTyxNQUFNRixRQUFRQyxTQUFTQztRQUNoQyxFQUFFLE9BQU9qQixPQUFPO1lBQ2QsT0FBT0Qsb0JBQW9CQztRQUM3QjtJQUNGO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLFNBQVNrQixvQkFDZEMsSUFBYSxFQUNiQyxTQUF3QztJQUV4QyxJQUFJLENBQUNELE1BQU07UUFDVCxNQUFNLElBQUliLE1BQU07SUFDbEI7SUFFQSxJQUFJYyxhQUFhLENBQUNBLFVBQVVELE9BQU87UUFDakMsTUFBTSxJQUFJYixNQUFNO0lBQ2xCO0lBRUEsT0FBT2E7QUFDVCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxNb2hhbWFkSmF2YWRcXE9uZURyaXZlXFxEZXNrdG9wXFxzYWRlZCAtIENvcHkgKDQpXFxsaWJcXGFwaS1yb3V0ZS1oZWxwZXJzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBBUEkgUm91dGUgSGVscGVyc1xyXG4gKiBQcm92aWRlcyBzdGFuZGFyZGl6ZWQgZXJyb3IgaGFuZGxpbmcgYW5kIHJlc3BvbnNlIGZvcm1hdHRpbmcgZm9yIEFQSSByb3V0ZXNcclxuICovXHJcblxyXG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcclxuaW1wb3J0IHsgbG9nRXJyb3IgfSBmcm9tIFwiLi9hcGktZXJyb3ItaGFuZGxlclwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBcGlSb3V0ZUVycm9yIHtcclxuICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgc3RhdHVzPzogbnVtYmVyO1xyXG4gIGNvZGU/OiBzdHJpbmc7XHJcbiAgZGV0YWlscz86IHVua25vd247XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgc3RhbmRhcmRpemVkIGVycm9yIHJlc3BvbnNlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRXJyb3JSZXNwb25zZShcclxuICBlcnJvcjogdW5rbm93bixcclxuICBkZWZhdWx0U3RhdHVzOiBudW1iZXIgPSA1MDBcclxuKTogTmV4dFJlc3BvbnNlIHtcclxuICBsZXQgbWVzc2FnZSA9IFwi2K7Yt9in24wg2LPYsdmI2LFcIjtcclxuICBsZXQgc3RhdHVzID0gZGVmYXVsdFN0YXR1cztcclxuICBsZXQgY29kZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG4gIGxldCBkZXRhaWxzOiB1bmtub3duO1xyXG5cclxuICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgbWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XHJcbiAgICBpZiAoXCJzdGF0dXNcIiBpbiBlcnJvciAmJiB0eXBlb2YgZXJyb3Iuc3RhdHVzID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgIHN0YXR1cyA9IGVycm9yLnN0YXR1cztcclxuICAgIH1cclxuICAgIGlmIChcImNvZGVcIiBpbiBlcnJvciAmJiB0eXBlb2YgZXJyb3IuY29kZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICBjb2RlID0gZXJyb3IuY29kZTtcclxuICAgIH1cclxuICAgIGlmIChcImRldGFpbHNcIiBpbiBlcnJvcikge1xyXG4gICAgICBkZXRhaWxzID0gZXJyb3IuZGV0YWlscztcclxuICAgIH1cclxuICB9IGVsc2UgaWYgKHR5cGVvZiBlcnJvciA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgbWVzc2FnZSA9IGVycm9yO1xyXG4gIH0gZWxzZSBpZiAoZXJyb3IgJiYgdHlwZW9mIGVycm9yID09PSBcIm9iamVjdFwiICYmIFwibWVzc2FnZVwiIGluIGVycm9yKSB7XHJcbiAgICBtZXNzYWdlID0gU3RyaW5nKGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgaWYgKFwic3RhdHVzXCIgaW4gZXJyb3IgJiYgdHlwZW9mIGVycm9yLnN0YXR1cyA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICBzdGF0dXMgPSBlcnJvci5zdGF0dXM7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBMb2cgZXJyb3IgaW4gZGV2ZWxvcG1lbnRcclxuICBsb2dFcnJvcihlcnJvciwgXCJBUEkgUm91dGVcIik7XHJcblxyXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBtZXNzYWdlLFxyXG4gICAgICAuLi4oY29kZSA/IHsgY29kZSB9IDoge30pLFxyXG4gICAgICAuLi4ocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIiAmJiBkZXRhaWxzID8geyBkZXRhaWxzIH0gOiB7fSksXHJcbiAgICB9LFxyXG4gICAgeyBzdGF0dXMgfVxyXG4gICk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgc3RhbmRhcmRpemVkIHN1Y2Nlc3MgcmVzcG9uc2VcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdWNjZXNzUmVzcG9uc2U8VD4oXHJcbiAgZGF0YTogVCxcclxuICBzdGF0dXM6IG51bWJlciA9IDIwMCxcclxuICBwYWdpbmF0aW9uPzoge1xyXG4gICAgcGFnZTogbnVtYmVyO1xyXG4gICAgbGltaXQ6IG51bWJlcjtcclxuICAgIHRvdGFsOiBudW1iZXI7XHJcbiAgICB0b3RhbFBhZ2VzOiBudW1iZXI7XHJcbiAgfVxyXG4pOiBOZXh0UmVzcG9uc2Uge1xyXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgIHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgZGF0YSxcclxuICAgICAgLi4uKHBhZ2luYXRpb24gJiYgeyBwYWdpbmF0aW9uIH0pLFxyXG4gICAgfSxcclxuICAgIHsgc3RhdHVzIH1cclxuICApO1xyXG59XHJcblxyXG4vKipcclxuICogV3JhcCByb3V0ZSBoYW5kbGVyIHdpdGggZXJyb3IgaGFuZGxpbmdcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB3aXRoRXJyb3JIYW5kbGluZyhcclxuICBoYW5kbGVyOiAocmVxdWVzdDogUmVxdWVzdCwgY29udGV4dD86IGFueSkgPT4gUHJvbWlzZTxOZXh0UmVzcG9uc2U+XHJcbikge1xyXG4gIHJldHVybiBhc3luYyAocmVxdWVzdDogUmVxdWVzdCwgY29udGV4dD86IGFueSk6IFByb21pc2U8TmV4dFJlc3BvbnNlPiA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICByZXR1cm4gYXdhaXQgaGFuZGxlcihyZXF1ZXN0LCBjb250ZXh0KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiBjcmVhdGVFcnJvclJlc3BvbnNlKGVycm9yKTtcclxuICAgIH1cclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhdGUgcmVxdWVzdCBib2R5XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVSZXF1ZXN0Qm9keTxUPihcclxuICBib2R5OiB1bmtub3duLFxyXG4gIHZhbGlkYXRvcj86IChkYXRhOiB1bmtub3duKSA9PiBkYXRhIGlzIFRcclxuKTogVCB7XHJcbiAgaWYgKCFib2R5KSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZXF1ZXN0IGJvZHkgaXMgcmVxdWlyZWRcIik7XHJcbiAgfVxyXG5cclxuICBpZiAodmFsaWRhdG9yICYmICF2YWxpZGF0b3IoYm9keSkpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcmVxdWVzdCBib2R5XCIpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGJvZHkgYXMgVDtcclxufVxyXG5cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImxvZ0Vycm9yIiwiY3JlYXRlRXJyb3JSZXNwb25zZSIsImVycm9yIiwiZGVmYXVsdFN0YXR1cyIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJjb2RlIiwiZGV0YWlscyIsIkVycm9yIiwiU3RyaW5nIiwianNvbiIsInN1Y2Nlc3MiLCJwcm9jZXNzIiwiY3JlYXRlU3VjY2Vzc1Jlc3BvbnNlIiwiZGF0YSIsInBhZ2luYXRpb24iLCJ3aXRoRXJyb3JIYW5kbGluZyIsImhhbmRsZXIiLCJyZXF1ZXN0IiwiY29udGV4dCIsInZhbGlkYXRlUmVxdWVzdEJvZHkiLCJib2R5IiwidmFsaWRhdG9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/api-route-helpers.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db/index.ts":
/*!*************************!*\
  !*** ./lib/db/index.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getDatabaseType: () => (/* binding */ getDatabaseType),\n/* harmony export */   getRow: () => (/* binding */ getRow),\n/* harmony export */   getRows: () => (/* binding */ getRows),\n/* harmony export */   initializeDatabase: () => (/* binding */ initializeDatabase),\n/* harmony export */   runQuery: () => (/* binding */ runQuery),\n/* harmony export */   testConnection: () => (/* binding */ testConnection)\n/* harmony export */ });\n/**\r\n * Database Wrapper\r\n * \r\n * این فایل یک interface یکپارچه برای استفاده از PostgreSQL فراهم می‌کند\r\n */ /**\r\n * Get single row from database\r\n */ async function getRow(sql, params = []) {\n    try {\n        const { queryOne } = await __webpack_require__.e(/*! import() */ \"_rsc_lib_db_postgres_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./postgres */ \"(rsc)/./lib/db/postgres.ts\"));\n        // Convert ? placeholders to PostgreSQL $1, $2, etc.\n        const pgSql = convertToPostgresSQL(sql);\n        return await queryOne(pgSql, params);\n    } catch (error) {\n        console.error(\"Database error in getRow:\", {\n            sql,\n            params,\n            error: error?.message,\n            code: error?.code\n        });\n        throw error;\n    }\n}\n/**\r\n * Get multiple rows from database\r\n */ async function getRows(sql, params = []) {\n    try {\n        const { queryAll } = await __webpack_require__.e(/*! import() */ \"_rsc_lib_db_postgres_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./postgres */ \"(rsc)/./lib/db/postgres.ts\"));\n        // Convert ? placeholders to PostgreSQL $1, $2, etc.\n        const pgSql = convertToPostgresSQL(sql);\n        return await queryAll(pgSql, params);\n    } catch (error) {\n        console.error(\"Database error in getRows:\", {\n            sql,\n            params,\n            error: error?.message,\n            code: error?.code\n        });\n        throw error;\n    }\n}\n/**\r\n * Run a query (INSERT, UPDATE, DELETE)\r\n */ async function runQuery(sql, params = []) {\n    const { query } = await __webpack_require__.e(/*! import() */ \"_rsc_lib_db_postgres_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./postgres */ \"(rsc)/./lib/db/postgres.ts\"));\n    const pgSql = convertToPostgresSQL(sql);\n    const result = await query(pgSql, params);\n    return {\n        changes: result.rowCount || 0,\n        lastInsertRowid: undefined\n    };\n}\n/**\r\n * Convert SQL to PostgreSQL SQL\r\n * - Converts ? placeholders to $1, $2, etc.\r\n * - Handles basic syntax differences\r\n */ function convertToPostgresSQL(sql) {\n    let pgSql = sql;\n    let paramIndex = 1;\n    // First, replace ? with $1, $2, etc.\n    pgSql = pgSql.replace(/\\?/g, ()=>`$${paramIndex++}`);\n    // Convert column names that need quoting (PostgreSQL is case-sensitive)\n    // Only replace if not already quoted\n    const columnsToQuote = [\n        'createdAt',\n        'updatedAt',\n        'originalPrice',\n        'vinEnabled',\n        'airShippingEnabled',\n        'seaShippingEnabled',\n        'stockCount',\n        'inStock',\n        'orderNumber',\n        'userId',\n        'customerName',\n        'customerPhone',\n        'customerEmail',\n        'shippingCost',\n        'shippingMethod',\n        'shippingAddress',\n        'paymentStatus',\n        'isActive'\n    ];\n    columnsToQuote.forEach((col)=>{\n        // Replace column name only if not already quoted and not part of a quoted string\n        const regex = new RegExp(`\\\\b${col}\\\\b(?![^\"]*\"(?:[^\"]*\"[^\"]*\")*[^\"]*$)`, 'gi');\n        pgSql = pgSql.replace(regex, `\"${col}\"`);\n    });\n    return pgSql;\n}\n/**\r\n * Initialize database\r\n */ async function initializeDatabase() {\n    const { ensureDatabase, initializeTables } = await __webpack_require__.e(/*! import() */ \"_rsc_lib_db_postgres_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./postgres */ \"(rsc)/./lib/db/postgres.ts\"));\n    await ensureDatabase();\n    await initializeTables();\n}\n/**\r\n * Test database connection\r\n */ async function testConnection() {\n    try {\n        const { testConnection } = await __webpack_require__.e(/*! import() */ \"_rsc_lib_db_postgres_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./postgres */ \"(rsc)/./lib/db/postgres.ts\"));\n        return await testConnection();\n    } catch (error) {\n        return false;\n    }\n}\n/**\r\n * Get database type\r\n */ function getDatabaseType() {\n    return \"postgres\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7Ozs7Q0FJQyxHQUVEOztDQUVDLEdBQ00sZUFBZUEsT0FDcEJDLEdBQVcsRUFDWEMsU0FBZ0IsRUFBRTtJQUVsQixJQUFJO1FBQ0YsTUFBTSxFQUFFQyxRQUFRLEVBQUUsR0FBRyxNQUFNLG9LQUFvQjtRQUMvQyxvREFBb0Q7UUFDcEQsTUFBTUMsUUFBUUMscUJBQXFCSjtRQUNuQyxPQUFPLE1BQU1FLFNBQVlDLE9BQU9GO0lBQ2xDLEVBQUUsT0FBT0ksT0FBWTtRQUNuQkMsUUFBUUQsS0FBSyxDQUFDLDZCQUE2QjtZQUN6Q0w7WUFDQUM7WUFDQUksT0FBT0EsT0FBT0U7WUFDZEMsTUFBTUgsT0FBT0c7UUFDZjtRQUNBLE1BQU1IO0lBQ1I7QUFDRjtBQUVBOztDQUVDLEdBQ00sZUFBZUksUUFDcEJULEdBQVcsRUFDWEMsU0FBZ0IsRUFBRTtJQUVsQixJQUFJO1FBQ0YsTUFBTSxFQUFFUyxRQUFRLEVBQUUsR0FBRyxNQUFNLG9LQUFvQjtRQUMvQyxvREFBb0Q7UUFDcEQsTUFBTVAsUUFBUUMscUJBQXFCSjtRQUNuQyxPQUFPLE1BQU1VLFNBQVlQLE9BQU9GO0lBQ2xDLEVBQUUsT0FBT0ksT0FBWTtRQUNuQkMsUUFBUUQsS0FBSyxDQUFDLDhCQUE4QjtZQUMxQ0w7WUFDQUM7WUFDQUksT0FBT0EsT0FBT0U7WUFDZEMsTUFBTUgsT0FBT0c7UUFDZjtRQUNBLE1BQU1IO0lBQ1I7QUFDRjtBQUVBOztDQUVDLEdBQ00sZUFBZU0sU0FDcEJYLEdBQVcsRUFDWEMsU0FBZ0IsRUFBRTtJQUVsQixNQUFNLEVBQUVXLEtBQUssRUFBRSxHQUFHLE1BQU0sb0tBQW9CO0lBQzVDLE1BQU1ULFFBQVFDLHFCQUFxQko7SUFDbkMsTUFBTWEsU0FBUyxNQUFNRCxNQUFNVCxPQUFPRjtJQUNsQyxPQUFPO1FBQ0xhLFNBQVNELE9BQU9FLFFBQVEsSUFBSTtRQUM1QkMsaUJBQWlCQztJQUNuQjtBQUNGO0FBRUE7Ozs7Q0FJQyxHQUNELFNBQVNiLHFCQUFxQkosR0FBVztJQUN2QyxJQUFJRyxRQUFRSDtJQUNaLElBQUlrQixhQUFhO0lBRWpCLHFDQUFxQztJQUNyQ2YsUUFBUUEsTUFBTWdCLE9BQU8sQ0FBQyxPQUFPLElBQU0sQ0FBQyxDQUFDLEVBQUVELGNBQWM7SUFFckQsd0VBQXdFO0lBQ3hFLHFDQUFxQztJQUNyQyxNQUFNRSxpQkFBaUI7UUFDckI7UUFBYTtRQUFhO1FBQWlCO1FBQzNDO1FBQXNCO1FBQXNCO1FBQzVDO1FBQVc7UUFBZTtRQUFVO1FBQ3BDO1FBQWlCO1FBQWlCO1FBQ2xDO1FBQWtCO1FBQW1CO1FBQWlCO0tBQ3ZEO0lBRURBLGVBQWVDLE9BQU8sQ0FBQ0MsQ0FBQUE7UUFDckIsaUZBQWlGO1FBQ2pGLE1BQU1DLFFBQVEsSUFBSUMsT0FBTyxDQUFDLEdBQUcsRUFBRUYsSUFBSSxvQ0FBb0MsQ0FBQyxFQUFFO1FBQzFFbkIsUUFBUUEsTUFBTWdCLE9BQU8sQ0FBQ0ksT0FBTyxDQUFDLENBQUMsRUFBRUQsSUFBSSxDQUFDLENBQUM7SUFDekM7SUFFQSxPQUFPbkI7QUFDVDtBQUVBOztDQUVDLEdBQ00sZUFBZXNCO0lBQ3BCLE1BQU0sRUFBRUMsY0FBYyxFQUFFQyxnQkFBZ0IsRUFBRSxHQUFHLE1BQU0sb0tBQW9CO0lBQ3ZFLE1BQU1EO0lBQ04sTUFBTUM7QUFDUjtBQUVBOztDQUVDLEdBQ00sZUFBZUM7SUFDcEIsSUFBSTtRQUNGLE1BQU0sRUFBRUEsY0FBYyxFQUFFLEdBQUcsTUFBTSxvS0FBb0I7UUFDckQsT0FBTyxNQUFNQTtJQUNmLEVBQUUsT0FBT3ZCLE9BQU87UUFDZCxPQUFPO0lBQ1Q7QUFDRjtBQUVBOztDQUVDLEdBQ00sU0FBU3dCO0lBQ2QsT0FBTztBQUNUIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXE1vaGFtYWRKYXZhZFxcT25lRHJpdmVcXERlc2t0b3BcXHNhZGVkIC0gQ29weSAoNClcXGxpYlxcZGJcXGluZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBEYXRhYmFzZSBXcmFwcGVyXHJcbiAqIFxyXG4gKiDYp9uM2YYg2YHYp9uM2YQg24zaqSBpbnRlcmZhY2Ug24zaqdm+2KfYsdqG2Ycg2KjYsdin24wg2KfYs9iq2YHYp9iv2Ycg2KfYsiBQb3N0Z3JlU1FMINmB2LHYp9mH2YUg2YXbjOKAjNqp2YbYr1xyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBHZXQgc2luZ2xlIHJvdyBmcm9tIGRhdGFiYXNlXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Um93PFQgPSBhbnk+KFxyXG4gIHNxbDogc3RyaW5nLFxyXG4gIHBhcmFtczogYW55W10gPSBbXVxyXG4pOiBQcm9taXNlPFQgfCBudWxsPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgcXVlcnlPbmUgfSA9IGF3YWl0IGltcG9ydChcIi4vcG9zdGdyZXNcIik7XHJcbiAgICAvLyBDb252ZXJ0ID8gcGxhY2Vob2xkZXJzIHRvIFBvc3RncmVTUUwgJDEsICQyLCBldGMuXHJcbiAgICBjb25zdCBwZ1NxbCA9IGNvbnZlcnRUb1Bvc3RncmVzU1FMKHNxbCk7XHJcbiAgICByZXR1cm4gYXdhaXQgcXVlcnlPbmU8VD4ocGdTcWwsIHBhcmFtcyk7XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGluIGdldFJvdzpcIiwge1xyXG4gICAgICBzcWwsXHJcbiAgICAgIHBhcmFtcyxcclxuICAgICAgZXJyb3I6IGVycm9yPy5tZXNzYWdlLFxyXG4gICAgICBjb2RlOiBlcnJvcj8uY29kZSxcclxuICAgIH0pO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IG11bHRpcGxlIHJvd3MgZnJvbSBkYXRhYmFzZVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJvd3M8VCA9IGFueT4oXHJcbiAgc3FsOiBzdHJpbmcsXHJcbiAgcGFyYW1zOiBhbnlbXSA9IFtdXHJcbik6IFByb21pc2U8VFtdPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgcXVlcnlBbGwgfSA9IGF3YWl0IGltcG9ydChcIi4vcG9zdGdyZXNcIik7XHJcbiAgICAvLyBDb252ZXJ0ID8gcGxhY2Vob2xkZXJzIHRvIFBvc3RncmVTUUwgJDEsICQyLCBldGMuXHJcbiAgICBjb25zdCBwZ1NxbCA9IGNvbnZlcnRUb1Bvc3RncmVzU1FMKHNxbCk7XHJcbiAgICByZXR1cm4gYXdhaXQgcXVlcnlBbGw8VD4ocGdTcWwsIHBhcmFtcyk7XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yIGluIGdldFJvd3M6XCIsIHtcclxuICAgICAgc3FsLFxyXG4gICAgICBwYXJhbXMsXHJcbiAgICAgIGVycm9yOiBlcnJvcj8ubWVzc2FnZSxcclxuICAgICAgY29kZTogZXJyb3I/LmNvZGUsXHJcbiAgICB9KTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJ1biBhIHF1ZXJ5IChJTlNFUlQsIFVQREFURSwgREVMRVRFKVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJ1blF1ZXJ5KFxyXG4gIHNxbDogc3RyaW5nLFxyXG4gIHBhcmFtczogYW55W10gPSBbXVxyXG4pOiBQcm9taXNlPHsgY2hhbmdlczogbnVtYmVyOyBsYXN0SW5zZXJ0Um93aWQ/OiBudW1iZXIgfT4ge1xyXG4gIGNvbnN0IHsgcXVlcnkgfSA9IGF3YWl0IGltcG9ydChcIi4vcG9zdGdyZXNcIik7XHJcbiAgY29uc3QgcGdTcWwgPSBjb252ZXJ0VG9Qb3N0Z3Jlc1NRTChzcWwpO1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5KHBnU3FsLCBwYXJhbXMpO1xyXG4gIHJldHVybiB7XHJcbiAgICBjaGFuZ2VzOiByZXN1bHQucm93Q291bnQgfHwgMCxcclxuICAgIGxhc3RJbnNlcnRSb3dpZDogdW5kZWZpbmVkLCAvLyBQb3N0Z3JlU1FMIGRvZXNuJ3QgaGF2ZSBsYXN0SW5zZXJ0Um93aWRcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogQ29udmVydCBTUUwgdG8gUG9zdGdyZVNRTCBTUUxcclxuICogLSBDb252ZXJ0cyA/IHBsYWNlaG9sZGVycyB0byAkMSwgJDIsIGV0Yy5cclxuICogLSBIYW5kbGVzIGJhc2ljIHN5bnRheCBkaWZmZXJlbmNlc1xyXG4gKi9cclxuZnVuY3Rpb24gY29udmVydFRvUG9zdGdyZXNTUUwoc3FsOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIGxldCBwZ1NxbCA9IHNxbDtcclxuICBsZXQgcGFyYW1JbmRleCA9IDE7XHJcblxyXG4gIC8vIEZpcnN0LCByZXBsYWNlID8gd2l0aCAkMSwgJDIsIGV0Yy5cclxuICBwZ1NxbCA9IHBnU3FsLnJlcGxhY2UoL1xcPy9nLCAoKSA9PiBgJCR7cGFyYW1JbmRleCsrfWApO1xyXG5cclxuICAvLyBDb252ZXJ0IGNvbHVtbiBuYW1lcyB0aGF0IG5lZWQgcXVvdGluZyAoUG9zdGdyZVNRTCBpcyBjYXNlLXNlbnNpdGl2ZSlcclxuICAvLyBPbmx5IHJlcGxhY2UgaWYgbm90IGFscmVhZHkgcXVvdGVkXHJcbiAgY29uc3QgY29sdW1uc1RvUXVvdGUgPSBbXHJcbiAgICAnY3JlYXRlZEF0JywgJ3VwZGF0ZWRBdCcsICdvcmlnaW5hbFByaWNlJywgJ3ZpbkVuYWJsZWQnLCBcclxuICAgICdhaXJTaGlwcGluZ0VuYWJsZWQnLCAnc2VhU2hpcHBpbmdFbmFibGVkJywgJ3N0b2NrQ291bnQnLCBcclxuICAgICdpblN0b2NrJywgJ29yZGVyTnVtYmVyJywgJ3VzZXJJZCcsICdjdXN0b21lck5hbWUnLCBcclxuICAgICdjdXN0b21lclBob25lJywgJ2N1c3RvbWVyRW1haWwnLCAnc2hpcHBpbmdDb3N0JywgXHJcbiAgICAnc2hpcHBpbmdNZXRob2QnLCAnc2hpcHBpbmdBZGRyZXNzJywgJ3BheW1lbnRTdGF0dXMnLCAnaXNBY3RpdmUnXHJcbiAgXTtcclxuICBcclxuICBjb2x1bW5zVG9RdW90ZS5mb3JFYWNoKGNvbCA9PiB7XHJcbiAgICAvLyBSZXBsYWNlIGNvbHVtbiBuYW1lIG9ubHkgaWYgbm90IGFscmVhZHkgcXVvdGVkIGFuZCBub3QgcGFydCBvZiBhIHF1b3RlZCBzdHJpbmdcclxuICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgXFxcXGIke2NvbH1cXFxcYig/IVteXCJdKlwiKD86W15cIl0qXCJbXlwiXSpcIikqW15cIl0qJClgLCAnZ2knKTtcclxuICAgIHBnU3FsID0gcGdTcWwucmVwbGFjZShyZWdleCwgYFwiJHtjb2x9XCJgKTtcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIHBnU3FsO1xyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSBkYXRhYmFzZVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVEYXRhYmFzZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICBjb25zdCB7IGVuc3VyZURhdGFiYXNlLCBpbml0aWFsaXplVGFibGVzIH0gPSBhd2FpdCBpbXBvcnQoXCIuL3Bvc3RncmVzXCIpO1xyXG4gIGF3YWl0IGVuc3VyZURhdGFiYXNlKCk7XHJcbiAgYXdhaXQgaW5pdGlhbGl6ZVRhYmxlcygpO1xyXG59XHJcblxyXG4vKipcclxuICogVGVzdCBkYXRhYmFzZSBjb25uZWN0aW9uXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgdGVzdENvbm5lY3Rpb24gfSA9IGF3YWl0IGltcG9ydChcIi4vcG9zdGdyZXNcIik7XHJcbiAgICByZXR1cm4gYXdhaXQgdGVzdENvbm5lY3Rpb24oKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBkYXRhYmFzZSB0eXBlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0YWJhc2VUeXBlKCk6IFwicG9zdGdyZXNcIiB8IFwibm9uZVwiIHtcclxuICByZXR1cm4gXCJwb3N0Z3Jlc1wiO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJnZXRSb3ciLCJzcWwiLCJwYXJhbXMiLCJxdWVyeU9uZSIsInBnU3FsIiwiY29udmVydFRvUG9zdGdyZXNTUUwiLCJlcnJvciIsImNvbnNvbGUiLCJtZXNzYWdlIiwiY29kZSIsImdldFJvd3MiLCJxdWVyeUFsbCIsInJ1blF1ZXJ5IiwicXVlcnkiLCJyZXN1bHQiLCJjaGFuZ2VzIiwicm93Q291bnQiLCJsYXN0SW5zZXJ0Um93aWQiLCJ1bmRlZmluZWQiLCJwYXJhbUluZGV4IiwicmVwbGFjZSIsImNvbHVtbnNUb1F1b3RlIiwiZm9yRWFjaCIsImNvbCIsInJlZ2V4IiwiUmVnRXhwIiwiaW5pdGlhbGl6ZURhdGFiYXNlIiwiZW5zdXJlRGF0YWJhc2UiLCJpbml0aWFsaXplVGFibGVzIiwidGVzdENvbm5lY3Rpb24iLCJnZXREYXRhYmFzZVR5cGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/db/index.ts\n");

/***/ }),

/***/ "(rsc)/./lib/logger.ts":
/*!***********************!*\
  !*** ./lib/logger.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\n/**\r\n * Centralized logging utility\r\n * Disables console.log in production for better performance\r\n */ class Logger {\n    shouldLog(level) {\n        // Always log errors and warnings\n        if (level === 'error' || level === 'warn') {\n            return true;\n        }\n        // Only log other levels in development\n        return this.isDevelopment;\n    }\n    log(...args) {\n        if (this.shouldLog('log')) {\n            console.log(...args);\n        }\n    }\n    error(...args) {\n        console.error(...args);\n    }\n    warn(...args) {\n        console.warn(...args);\n    }\n    info(...args) {\n        if (this.shouldLog('info')) {\n            console.info(...args);\n        }\n    }\n    debug(...args) {\n        if (this.shouldLog('debug')) {\n            console.debug(...args);\n        }\n    }\n    /**\r\n   * Log database query (only in development)\r\n   */ dbQuery(query, params) {\n        if (this.isDevelopment) {\n            console.log('[DB Query]', query.substring(0, 100), params ? `[${params.length} params]` : '');\n        }\n    }\n    /**\r\n   * Log API request (only in development)\r\n   */ apiRequest(method, path, statusCode) {\n        if (this.isDevelopment) {\n            console.log(`[API] ${method} ${path}${statusCode ? ` ${statusCode}` : ''}`);\n        }\n    }\n    constructor(){\n        this.isDevelopment = \"development\" === 'development';\n        this.isProduction = \"development\" === 'production';\n    }\n}\nconst logger = new Logger();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbG9nZ2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7O0NBR0MsR0FJRCxNQUFNQTtJQUlJQyxVQUFVQyxLQUFlLEVBQVc7UUFDMUMsaUNBQWlDO1FBQ2pDLElBQUlBLFVBQVUsV0FBV0EsVUFBVSxRQUFRO1lBQ3pDLE9BQU87UUFDVDtRQUNBLHVDQUF1QztRQUN2QyxPQUFPLElBQUksQ0FBQ0MsYUFBYTtJQUMzQjtJQUVBQyxJQUFJLEdBQUdDLElBQVcsRUFBUTtRQUN4QixJQUFJLElBQUksQ0FBQ0osU0FBUyxDQUFDLFFBQVE7WUFDekJLLFFBQVFGLEdBQUcsSUFBSUM7UUFDakI7SUFDRjtJQUVBRSxNQUFNLEdBQUdGLElBQVcsRUFBUTtRQUMxQkMsUUFBUUMsS0FBSyxJQUFJRjtJQUNuQjtJQUVBRyxLQUFLLEdBQUdILElBQVcsRUFBUTtRQUN6QkMsUUFBUUUsSUFBSSxJQUFJSDtJQUNsQjtJQUVBSSxLQUFLLEdBQUdKLElBQVcsRUFBUTtRQUN6QixJQUFJLElBQUksQ0FBQ0osU0FBUyxDQUFDLFNBQVM7WUFDMUJLLFFBQVFHLElBQUksSUFBSUo7UUFDbEI7SUFDRjtJQUVBSyxNQUFNLEdBQUdMLElBQVcsRUFBUTtRQUMxQixJQUFJLElBQUksQ0FBQ0osU0FBUyxDQUFDLFVBQVU7WUFDM0JLLFFBQVFJLEtBQUssSUFBSUw7UUFDbkI7SUFDRjtJQUVBOztHQUVDLEdBQ0RNLFFBQVFDLEtBQWEsRUFBRUMsTUFBYyxFQUFRO1FBQzNDLElBQUksSUFBSSxDQUFDVixhQUFhLEVBQUU7WUFDdEJHLFFBQVFGLEdBQUcsQ0FBQyxjQUFjUSxNQUFNRSxTQUFTLENBQUMsR0FBRyxNQUFNRCxTQUFTLENBQUMsQ0FBQyxFQUFFQSxPQUFPRSxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUc7UUFDNUY7SUFDRjtJQUVBOztHQUVDLEdBQ0RDLFdBQVdDLE1BQWMsRUFBRUMsSUFBWSxFQUFFQyxVQUFtQixFQUFRO1FBQ2xFLElBQUksSUFBSSxDQUFDaEIsYUFBYSxFQUFFO1lBQ3RCRyxRQUFRRixHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUVhLE9BQU8sQ0FBQyxFQUFFQyxPQUFPQyxhQUFhLENBQUMsQ0FBQyxFQUFFQSxZQUFZLEdBQUcsSUFBSTtRQUM1RTtJQUNGOzthQXREUWhCLGdCQUFnQmlCLGtCQUF5QjthQUN6Q0MsZUFBZUQsa0JBQXlCOztBQXNEbEQ7QUFFTyxNQUFNRSxTQUFTLElBQUl0QixTQUFTIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXE1vaGFtYWRKYXZhZFxcT25lRHJpdmVcXERlc2t0b3BcXHNhZGVkIC0gQ29weSAoNClcXGxpYlxcbG9nZ2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDZW50cmFsaXplZCBsb2dnaW5nIHV0aWxpdHlcclxuICogRGlzYWJsZXMgY29uc29sZS5sb2cgaW4gcHJvZHVjdGlvbiBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXHJcbiAqL1xyXG5cclxudHlwZSBMb2dMZXZlbCA9ICdsb2cnIHwgJ2Vycm9yJyB8ICd3YXJuJyB8ICdpbmZvJyB8ICdkZWJ1Zyc7XHJcblxyXG5jbGFzcyBMb2dnZXIge1xyXG4gIHByaXZhdGUgaXNEZXZlbG9wbWVudCA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnO1xyXG4gIHByaXZhdGUgaXNQcm9kdWN0aW9uID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJztcclxuXHJcbiAgcHJpdmF0ZSBzaG91bGRMb2cobGV2ZWw6IExvZ0xldmVsKTogYm9vbGVhbiB7XHJcbiAgICAvLyBBbHdheXMgbG9nIGVycm9ycyBhbmQgd2FybmluZ3NcclxuICAgIGlmIChsZXZlbCA9PT0gJ2Vycm9yJyB8fCBsZXZlbCA9PT0gJ3dhcm4nKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgLy8gT25seSBsb2cgb3RoZXIgbGV2ZWxzIGluIGRldmVsb3BtZW50XHJcbiAgICByZXR1cm4gdGhpcy5pc0RldmVsb3BtZW50O1xyXG4gIH1cclxuXHJcbiAgbG9nKC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5zaG91bGRMb2coJ2xvZycpKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZXJyb3IoLi4uYXJnczogYW55W10pOiB2b2lkIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoLi4uYXJncyk7XHJcbiAgfVxyXG5cclxuICB3YXJuKC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XHJcbiAgICBjb25zb2xlLndhcm4oLi4uYXJncyk7XHJcbiAgfVxyXG5cclxuICBpbmZvKC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5zaG91bGRMb2coJ2luZm8nKSkge1xyXG4gICAgICBjb25zb2xlLmluZm8oLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkZWJ1ZyguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuc2hvdWxkTG9nKCdkZWJ1ZycpKSB7XHJcbiAgICAgIGNvbnNvbGUuZGVidWcoLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBMb2cgZGF0YWJhc2UgcXVlcnkgKG9ubHkgaW4gZGV2ZWxvcG1lbnQpXHJcbiAgICovXHJcbiAgZGJRdWVyeShxdWVyeTogc3RyaW5nLCBwYXJhbXM/OiBhbnlbXSk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuaXNEZXZlbG9wbWVudCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW0RCIFF1ZXJ5XScsIHF1ZXJ5LnN1YnN0cmluZygwLCAxMDApLCBwYXJhbXMgPyBgWyR7cGFyYW1zLmxlbmd0aH0gcGFyYW1zXWAgOiAnJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBMb2cgQVBJIHJlcXVlc3QgKG9ubHkgaW4gZGV2ZWxvcG1lbnQpXHJcbiAgICovXHJcbiAgYXBpUmVxdWVzdChtZXRob2Q6IHN0cmluZywgcGF0aDogc3RyaW5nLCBzdGF0dXNDb2RlPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5pc0RldmVsb3BtZW50KSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBbQVBJXSAke21ldGhvZH0gJHtwYXRofSR7c3RhdHVzQ29kZSA/IGAgJHtzdGF0dXNDb2RlfWAgOiAnJ31gKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCk7XHJcblxyXG4iXSwibmFtZXMiOlsiTG9nZ2VyIiwic2hvdWxkTG9nIiwibGV2ZWwiLCJpc0RldmVsb3BtZW50IiwibG9nIiwiYXJncyIsImNvbnNvbGUiLCJlcnJvciIsIndhcm4iLCJpbmZvIiwiZGVidWciLCJkYlF1ZXJ5IiwicXVlcnkiLCJwYXJhbXMiLCJzdWJzdHJpbmciLCJsZW5ndGgiLCJhcGlSZXF1ZXN0IiwibWV0aG9kIiwicGF0aCIsInN0YXR1c0NvZGUiLCJwcm9jZXNzIiwiaXNQcm9kdWN0aW9uIiwibG9nZ2VyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/logger.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Funread-count%2Froute&page=%2Fapi%2Fchat%2Funread-count%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Funread-count%2Froute.ts&appDir=C%3A%5CUsers%5CMohamadJavad%5COneDrive%5CDesktop%5Csaded%20-%20Copy%20(4)%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CMohamadJavad%5COneDrive%5CDesktop%5Csaded%20-%20Copy%20(4)&isDev=true&tsconfigPath=&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Funread-count%2Froute&page=%2Fapi%2Fchat%2Funread-count%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Funread-count%2Froute.ts&appDir=C%3A%5CUsers%5CMohamadJavad%5COneDrive%5CDesktop%5Csaded%20-%20Copy%20(4)%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CMohamadJavad%5COneDrive%5CDesktop%5Csaded%20-%20Copy%20(4)&isDev=true&tsconfigPath=&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_server_app_render_encryption_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/app-render/encryption-utils */ \"(rsc)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/server/app-render/encryption-utils.js\");\n/* harmony import */ var next_dist_server_app_render_encryption_utils__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_encryption_utils__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_app_render_action_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/app-render/action-utils */ \"(rsc)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/server/app-render/action-utils.js\");\n/* harmony import */ var next_dist_server_app_render_action_utils__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_action_utils__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var C_Users_MohamadJavad_OneDrive_Desktop_saded_Copy_4_app_api_chat_unread_count_route_ts__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./app/api/chat/unread-count/route.ts */ \"(rsc)/./app/api/chat/unread-count/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chat/unread-count/route\",\n        pathname: \"/api/chat/unread-count\",\n        filename: \"route\",\n        bundlePath: \"app/api/chat/unread-count/route\"\n    },\n    distDir: \".next\\\\dev\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"C:\\\\Users\\\\MohamadJavad\\\\OneDrive\\\\Desktop\\\\saded - Copy (4)\\\\app\\\\api\\\\chat\\\\unread-count\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_MohamadJavad_OneDrive_Desktop_saded_Copy_4_app_api_chat_unread_count_route_ts__WEBPACK_IMPORTED_MODULE_18__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    if (routeModule.isDev) {\n        (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.addRequestMeta)(req, 'devRequestTimingInternalsEnd', process.hrtime.bigint());\n    }\n    let srcPage = \"/api/chat/unread-count/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, parsedUrl, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname, clientReferenceManifest, serverActionsManifest } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_7__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    const render404 = async ()=>{\n        // TODO: should route-module itself handle rendering the 404\n        if (routerServerContext == null ? void 0 : routerServerContext.render404) {\n            await routerServerContext.render404(req, res, parsedUrl, false);\n        } else {\n            res.end('This page could not be found');\n        }\n        return null;\n    };\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                if (nextConfig.experimental.adapterPath) {\n                    return await render404();\n                }\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_16__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isStaticGeneration = isIsr && !supportsDynamicResponse;\n    // Before rendering (which initializes component tree modules), we have to\n    // set the reference manifests to our global store so Server Action's\n    // encryption util can access to them at the top level of the page module.\n    if (serverActionsManifest && clientReferenceManifest) {\n        (0,next_dist_server_app_render_encryption_utils__WEBPACK_IMPORTED_MODULE_5__.setReferenceManifestsSingleton)({\n            page: srcPage,\n            clientReferenceManifest,\n            serverActionsManifest,\n            serverModuleMap: (0,next_dist_server_app_render_action_utils__WEBPACK_IMPORTED_MODULE_6__.createServerModuleMap)({\n                serverActionsManifest\n            })\n        });\n    }\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            cacheComponents: Boolean(nextConfig.cacheComponents),\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: nextConfig.cacheLife,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_8__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_9__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_9__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_10__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${srcPage}`);\n                }\n            });\n        };\n        const isMinimalMode = Boolean( false || (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode'));\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!isMinimalMode && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_13__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_15__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_15__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_15__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_17__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_12__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_11__.getRevalidateReason)({\n                                isStaticGeneration,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil,\n                isMinimalMode\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_17__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!isMinimalMode) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_13__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!(isMinimalMode && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_15__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_14__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_12__.sendResponse)(nodeNextReq, nodeNextRes, // @ts-expect-error - Argument of type 'Buffer<ArrayBufferLike>' is not assignable to parameter of type 'BodyInit | null | undefined'.\n            new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_10__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${srcPage}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_16__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_11__.getRevalidateReason)({\n                    isStaticGeneration,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_12__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNi4wLjNfQGJhYmVsK2NvcmVANy4yX2E2ZTdmZTdiMjEwN2JmZDVjOWU0NTAzMWUzMjJjNWMzL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtYXBwLWxvYWRlci9pbmRleC5qcz9uYW1lPWFwcCUyRmFwaSUyRmNoYXQlMkZ1bnJlYWQtY291bnQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmNoYXQlMkZ1bnJlYWQtY291bnQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZjaGF0JTJGdW5yZWFkLWNvdW50JTJGcm91dGUudHMmYXBwRGlyPUMlM0ElNUNVc2VycyU1Q01vaGFtYWRKYXZhZCU1Q09uZURyaXZlJTVDRGVza3RvcCU1Q3NhZGVkJTIwLSUyMENvcHklMjAoNCklNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q01vaGFtYWRKYXZhZCU1Q09uZURyaXZlJTVDRGVza3RvcCU1Q3NhZGVkJTIwLSUyMENvcHklMjAoNCkmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9JmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCZpc0dsb2JhbE5vdEZvdW5kRW5hYmxlZD0hIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNFO0FBQ1A7QUFDc0I7QUFDYjtBQUNGO0FBQ0s7QUFDbUM7QUFDakQ7QUFDTztBQUNmO0FBQ3NDO0FBQ3pCO0FBQ007QUFDQztBQUNoQjtBQUMrRDtBQUNqSTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxhQUFhLFlBQW9DLElBQUksQ0FBRTtBQUN2RCx3QkFBd0IsTUFBdUM7QUFDL0Q7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7QUFDbkY7QUFDUDtBQUNBLFFBQVEsNkVBQWM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsS0FBcUIsRUFBRSxFQUUxQixDQUFDO0FBQ047QUFDQTtBQUNBO0FBQ0EsK0JBQStCLEtBQXdDO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLCtNQUErTTtBQUMzTiw4QkFBOEIsNkZBQWdCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDZGQUFlO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw0R0FBOEI7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLCtGQUFxQjtBQUNsRDtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLG1CQUFtQiw0RUFBUztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsOEJBQThCLDZFQUFjO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsNEVBQWU7QUFDM0MsNEJBQTRCLDZFQUFnQjtBQUM1QyxvQkFBb0IseUdBQWtCLGtDQUFrQyxpSEFBc0I7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxpRkFBYztBQUMvRSwrREFBK0QseUNBQXlDO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLFFBQVEsRUFBRSxNQUFNO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0Esa0JBQWtCO0FBQ2xCLHVDQUF1QyxRQUFRLEVBQUUsUUFBUTtBQUN6RDtBQUNBLGFBQWE7QUFDYjtBQUNBLHNDQUFzQyxNQUF3QixJQUFJLDZFQUFjO0FBQ2hGO0FBQ0E7QUFDQSwrQ0FBK0Msb0JBQW9CO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLHNGQUF5QjtBQUNqRTtBQUNBLG9DQUFvQyw0RUFBc0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzSkFBc0osb0VBQWM7QUFDcEssMElBQTBJLG9FQUFjO0FBQ3hKO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyw2RUFBZTtBQUNyRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0EsOEJBQThCLDZFQUFZO0FBQzFDO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsNEZBQW1CO0FBQ2pFO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsa0VBQVM7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFJQUFxSSw2RUFBZTtBQUNwSjtBQUNBLDJHQUEyRyxpSEFBaUg7QUFDNU47QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsd0ZBQTJCO0FBQ3ZEO0FBQ0EsK0JBQStCLDRFQUFzQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QywwRkFBcUI7QUFDbEU7QUFDQSxrQkFBa0IsNkVBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDViw2RUFBNkUsaUZBQWM7QUFDM0YsaUNBQWlDLFFBQVEsRUFBRSxRQUFRO0FBQ25ELDBCQUEwQix1RUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLE1BQU07QUFDTiw2QkFBNkIsNkZBQWU7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsNEZBQW1CO0FBQ3JEO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDZFQUFZO0FBQzFCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCB7IGFkZFJlcXVlc3RNZXRhLCBnZXRSZXF1ZXN0TWV0YSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QtbWV0YVwiO1xuaW1wb3J0IHsgZ2V0VHJhY2VyLCBTcGFuS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS90cmFjZXJcIjtcbmltcG9ydCB7IHNldFJlZmVyZW5jZU1hbmlmZXN0c1NpbmdsZXRvbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvZW5jcnlwdGlvbi11dGlsc1wiO1xuaW1wb3J0IHsgY3JlYXRlU2VydmVyTW9kdWxlTWFwIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYXBwLXJlbmRlci9hY3Rpb24tdXRpbHNcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZUFwcFBhdGggfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvcm91dGVyL3V0aWxzL2FwcC1wYXRoc1wiO1xuaW1wb3J0IHsgTm9kZU5leHRSZXF1ZXN0LCBOb2RlTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYmFzZS1odHRwL25vZGVcIjtcbmltcG9ydCB7IE5leHRSZXF1ZXN0QWRhcHRlciwgc2lnbmFsRnJvbU5vZGVSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3dlYi9zcGVjLWV4dGVuc2lvbi9hZGFwdGVycy9uZXh0LXJlcXVlc3RcIjtcbmltcG9ydCB7IEJhc2VTZXJ2ZXJTcGFuIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgZ2V0UmV2YWxpZGF0ZVJlYXNvbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2luc3RydW1lbnRhdGlvbi91dGlsc1wiO1xuaW1wb3J0IHsgc2VuZFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvc2VuZC1yZXNwb25zZVwiO1xuaW1wb3J0IHsgZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzLCB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3V0aWxzXCI7XG5pbXBvcnQgeyBnZXRDYWNoZUNvbnRyb2xIZWFkZXIgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvY2FjaGUtY29udHJvbFwiO1xuaW1wb3J0IHsgSU5GSU5JVEVfQ0FDSEUsIE5FWFRfQ0FDSEVfVEFHU19IRUFERVIgfSBmcm9tIFwibmV4dC9kaXN0L2xpYi9jb25zdGFudHNcIjtcbmltcG9ydCB7IE5vRmFsbGJhY2tFcnJvciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9uby1mYWxsYmFjay1lcnJvci5leHRlcm5hbFwiO1xuaW1wb3J0IHsgQ2FjaGVkUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVzcG9uc2UtY2FjaGVcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxNb2hhbWFkSmF2YWRcXFxcT25lRHJpdmVcXFxcRGVza3RvcFxcXFxzYWRlZCAtIENvcHkgKDQpXFxcXGFwcFxcXFxhcGlcXFxcY2hhdFxcXFx1bnJlYWQtY291bnRcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NoYXQvdW5yZWFkLWNvdW50L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2hhdC91bnJlYWQtY291bnRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2NoYXQvdW5yZWFkLWNvdW50L3JvdXRlXCJcbiAgICB9LFxuICAgIGRpc3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9ESVNUX0RJUiB8fCAnJyxcbiAgICByZWxhdGl2ZVByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJyxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXE1vaGFtYWRKYXZhZFxcXFxPbmVEcml2ZVxcXFxEZXNrdG9wXFxcXHNhZGVkIC0gQ29weSAoNClcXFxcYXBwXFxcXGFwaVxcXFxjaGF0XFxcXHVucmVhZC1jb3VudFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzLCBjdHgpIHtcbiAgICBpZiAocm91dGVNb2R1bGUuaXNEZXYpIHtcbiAgICAgICAgYWRkUmVxdWVzdE1ldGEocmVxLCAnZGV2UmVxdWVzdFRpbWluZ0ludGVybmFsc0VuZCcsIHByb2Nlc3MuaHJ0aW1lLmJpZ2ludCgpKTtcbiAgICB9XG4gICAgbGV0IHNyY1BhZ2UgPSBcIi9hcGkvY2hhdC91bnJlYWQtY291bnQvcm91dGVcIjtcbiAgICAvLyB0dXJib3BhY2sgZG9lc24ndCBub3JtYWxpemUgYC9pbmRleGAgaW4gdGhlIHBhZ2UgbmFtZVxuICAgIC8vIHNvIHdlIG5lZWQgdG8gdG8gcHJvY2VzcyBkeW5hbWljIHJvdXRlcyBwcm9wZXJseVxuICAgIC8vIFRPRE86IGZpeCB0dXJib3BhY2sgcHJvdmlkaW5nIGRpZmZlcmluZyB2YWx1ZSBmcm9tIHdlYnBhY2tcbiAgICBpZiAocHJvY2Vzcy5lbnYuVFVSQk9QQUNLKSB7XG4gICAgICAgIHNyY1BhZ2UgPSBzcmNQYWdlLnJlcGxhY2UoL1xcL2luZGV4JC8sICcnKSB8fCAnLyc7XG4gICAgfSBlbHNlIGlmIChzcmNQYWdlID09PSAnL2luZGV4Jykge1xuICAgICAgICAvLyB3ZSBhbHdheXMgbm9ybWFsaXplIC9pbmRleCBzcGVjaWZpY2FsbHlcbiAgICAgICAgc3JjUGFnZSA9ICcvJztcbiAgICB9XG4gICAgY29uc3QgbXVsdGlab25lRHJhZnRNb2RlID0gcHJvY2Vzcy5lbnYuX19ORVhUX01VTFRJX1pPTkVfRFJBRlRfTU9ERTtcbiAgICBjb25zdCBwcmVwYXJlUmVzdWx0ID0gYXdhaXQgcm91dGVNb2R1bGUucHJlcGFyZShyZXEsIHJlcywge1xuICAgICAgICBzcmNQYWdlLFxuICAgICAgICBtdWx0aVpvbmVEcmFmdE1vZGVcbiAgICB9KTtcbiAgICBpZiAoIXByZXBhcmVSZXN1bHQpIHtcbiAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSA0MDA7XG4gICAgICAgIHJlcy5lbmQoJ0JhZCBSZXF1ZXN0Jyk7XG4gICAgICAgIGN0eC53YWl0VW50aWwgPT0gbnVsbCA/IHZvaWQgMCA6IGN0eC53YWl0VW50aWwuY2FsbChjdHgsIFByb21pc2UucmVzb2x2ZSgpKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHsgYnVpbGRJZCwgcGFyYW1zLCBuZXh0Q29uZmlnLCBwYXJzZWRVcmwsIGlzRHJhZnRNb2RlLCBwcmVyZW5kZXJNYW5pZmVzdCwgcm91dGVyU2VydmVyQ29udGV4dCwgaXNPbkRlbWFuZFJldmFsaWRhdGUsIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkLCByZXNvbHZlZFBhdGhuYW1lLCBjbGllbnRSZWZlcmVuY2VNYW5pZmVzdCwgc2VydmVyQWN0aW9uc01hbmlmZXN0IH0gPSBwcmVwYXJlUmVzdWx0O1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRTcmNQYWdlID0gbm9ybWFsaXplQXBwUGF0aChzcmNQYWdlKTtcbiAgICBsZXQgaXNJc3IgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LmR5bmFtaWNSb3V0ZXNbbm9ybWFsaXplZFNyY1BhZ2VdIHx8IHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgY29uc3QgcmVuZGVyNDA0ID0gYXN5bmMgKCk9PntcbiAgICAgICAgLy8gVE9ETzogc2hvdWxkIHJvdXRlLW1vZHVsZSBpdHNlbGYgaGFuZGxlIHJlbmRlcmluZyB0aGUgNDA0XG4gICAgICAgIGlmIChyb3V0ZXJTZXJ2ZXJDb250ZXh0ID09IG51bGwgPyB2b2lkIDAgOiByb3V0ZXJTZXJ2ZXJDb250ZXh0LnJlbmRlcjQwNCkge1xuICAgICAgICAgICAgYXdhaXQgcm91dGVyU2VydmVyQ29udGV4dC5yZW5kZXI0MDQocmVxLCByZXMsIHBhcnNlZFVybCwgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzLmVuZCgnVGhpcyBwYWdlIGNvdWxkIG5vdCBiZSBmb3VuZCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgaWYgKGlzSXNyICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjb25zdCBpc1ByZXJlbmRlcmVkID0gQm9vbGVhbihwcmVyZW5kZXJNYW5pZmVzdC5yb3V0ZXNbcmVzb2x2ZWRQYXRobmFtZV0pO1xuICAgICAgICBjb25zdCBwcmVyZW5kZXJJbmZvID0gcHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV07XG4gICAgICAgIGlmIChwcmVyZW5kZXJJbmZvKSB7XG4gICAgICAgICAgICBpZiAocHJlcmVuZGVySW5mby5mYWxsYmFjayA9PT0gZmFsc2UgJiYgIWlzUHJlcmVuZGVyZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAobmV4dENvbmZpZy5leHBlcmltZW50YWwuYWRhcHRlclBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHJlbmRlcjQwNCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm9GYWxsYmFja0Vycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IGNhY2hlS2V5ID0gbnVsbDtcbiAgICBpZiAoaXNJc3IgJiYgIXJvdXRlTW9kdWxlLmlzRGV2ICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjYWNoZUtleSA9IHJlc29sdmVkUGF0aG5hbWU7XG4gICAgICAgIC8vIGVuc3VyZSAvaW5kZXggYW5kIC8gaXMgbm9ybWFsaXplZCB0byBvbmUga2V5XG4gICAgICAgIGNhY2hlS2V5ID0gY2FjaGVLZXkgPT09ICcvaW5kZXgnID8gJy8nIDogY2FjaGVLZXk7XG4gICAgfVxuICAgIGNvbnN0IHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlID0gLy8gSWYgd2UncmUgaW4gZGV2ZWxvcG1lbnQsIHdlIGFsd2F5cyBzdXBwb3J0IGR5bmFtaWMgSFRNTFxuICAgIHJvdXRlTW9kdWxlLmlzRGV2ID09PSB0cnVlIHx8IC8vIElmIHRoaXMgaXMgbm90IFNTRyBvciBkb2VzIG5vdCBoYXZlIHN0YXRpYyBwYXRocywgdGhlbiBpdCBzdXBwb3J0c1xuICAgIC8vIGR5bmFtaWMgSFRNTC5cbiAgICAhaXNJc3I7XG4gICAgLy8gVGhpcyBpcyBhIHJldmFsaWRhdGlvbiByZXF1ZXN0IGlmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpY1xuICAgIC8vIHBhZ2UgYW5kIGl0IGlzIG5vdCBiZWluZyByZXN1bWVkIGZyb20gYSBwb3N0cG9uZWQgcmVuZGVyIGFuZFxuICAgIC8vIGl0IGlzIG5vdCBhIGR5bmFtaWMgUlNDIHJlcXVlc3QgdGhlbiBpdCBpcyBhIHJldmFsaWRhdGlvblxuICAgIC8vIHJlcXVlc3QuXG4gICAgY29uc3QgaXNTdGF0aWNHZW5lcmF0aW9uID0gaXNJc3IgJiYgIXN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlO1xuICAgIC8vIEJlZm9yZSByZW5kZXJpbmcgKHdoaWNoIGluaXRpYWxpemVzIGNvbXBvbmVudCB0cmVlIG1vZHVsZXMpLCB3ZSBoYXZlIHRvXG4gICAgLy8gc2V0IHRoZSByZWZlcmVuY2UgbWFuaWZlc3RzIHRvIG91ciBnbG9iYWwgc3RvcmUgc28gU2VydmVyIEFjdGlvbidzXG4gICAgLy8gZW5jcnlwdGlvbiB1dGlsIGNhbiBhY2Nlc3MgdG8gdGhlbSBhdCB0aGUgdG9wIGxldmVsIG9mIHRoZSBwYWdlIG1vZHVsZS5cbiAgICBpZiAoc2VydmVyQWN0aW9uc01hbmlmZXN0ICYmIGNsaWVudFJlZmVyZW5jZU1hbmlmZXN0KSB7XG4gICAgICAgIHNldFJlZmVyZW5jZU1hbmlmZXN0c1NpbmdsZXRvbih7XG4gICAgICAgICAgICBwYWdlOiBzcmNQYWdlLFxuICAgICAgICAgICAgY2xpZW50UmVmZXJlbmNlTWFuaWZlc3QsXG4gICAgICAgICAgICBzZXJ2ZXJBY3Rpb25zTWFuaWZlc3QsXG4gICAgICAgICAgICBzZXJ2ZXJNb2R1bGVNYXA6IGNyZWF0ZVNlcnZlck1vZHVsZU1hcCh7XG4gICAgICAgICAgICAgICAgc2VydmVyQWN0aW9uc01hbmlmZXN0XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZCB8fCAnR0VUJztcbiAgICBjb25zdCB0cmFjZXIgPSBnZXRUcmFjZXIoKTtcbiAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICAgIHJlbmRlck9wdHM6IHtcbiAgICAgICAgICAgIGV4cGVyaW1lbnRhbDoge1xuICAgICAgICAgICAgICAgIGF1dGhJbnRlcnJ1cHRzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmF1dGhJbnRlcnJ1cHRzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhY2hlQ29tcG9uZW50czogQm9vbGVhbihuZXh0Q29uZmlnLmNhY2hlQ29tcG9uZW50cyksXG4gICAgICAgICAgICBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSxcbiAgICAgICAgICAgIGluY3JlbWVudGFsQ2FjaGU6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2luY3JlbWVudGFsQ2FjaGUnKSxcbiAgICAgICAgICAgIGNhY2hlTGlmZVByb2ZpbGVzOiBuZXh0Q29uZmlnLmNhY2hlTGlmZSxcbiAgICAgICAgICAgIHdhaXRVbnRpbDogY3R4LndhaXRVbnRpbCxcbiAgICAgICAgICAgIG9uQ2xvc2U6IChjYik9PntcbiAgICAgICAgICAgICAgICByZXMub24oJ2Nsb3NlJywgY2IpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uQWZ0ZXJUYXNrRXJyb3I6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG9uSW5zdHJ1bWVudGF0aW9uUmVxdWVzdEVycm9yOiAoZXJyb3IsIF9yZXF1ZXN0LCBlcnJvckNvbnRleHQpPT5yb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVycm9yLCBlcnJvckNvbnRleHQsIHJvdXRlclNlcnZlckNvbnRleHQpXG4gICAgICAgIH0sXG4gICAgICAgIHNoYXJlZENvbnRleHQ6IHtcbiAgICAgICAgICAgIGJ1aWxkSWRcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgbm9kZU5leHRSZXEgPSBuZXcgTm9kZU5leHRSZXF1ZXN0KHJlcSk7XG4gICAgY29uc3Qgbm9kZU5leHRSZXMgPSBuZXcgTm9kZU5leHRSZXNwb25zZShyZXMpO1xuICAgIGNvbnN0IG5leHRSZXEgPSBOZXh0UmVxdWVzdEFkYXB0ZXIuZnJvbU5vZGVOZXh0UmVxdWVzdChub2RlTmV4dFJlcSwgc2lnbmFsRnJvbU5vZGVSZXNwb25zZShyZXMpKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBpbnZva2VSb3V0ZU1vZHVsZSA9IGFzeW5jIChzcGFuKT0+e1xuICAgICAgICAgICAgcmV0dXJuIHJvdXRlTW9kdWxlLmhhbmRsZShuZXh0UmVxLCBjb250ZXh0KS5maW5hbGx5KCgpPT57XG4gICAgICAgICAgICAgICAgaWYgKCFzcGFuKSByZXR1cm47XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHAuc3RhdHVzX2NvZGUnOiByZXMuc3RhdHVzQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgJ25leHQucnNjJzogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByb290U3BhbkF0dHJpYnV0ZXMgPSB0cmFjZXIuZ2V0Um9vdFNwYW5BdHRyaWJ1dGVzKCk7XG4gICAgICAgICAgICAgICAgLy8gV2Ugd2VyZSB1bmFibGUgdG8gZ2V0IGF0dHJpYnV0ZXMsIHByb2JhYmx5IE9URUwgaXMgbm90IGVuYWJsZWRcbiAgICAgICAgICAgICAgICBpZiAoIXJvb3RTcGFuQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpICE9PSBCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVW5leHBlY3RlZCByb290IHNwYW4gdHlwZSAnJHtyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpfScuIFBsZWFzZSByZXBvcnQgdGhpcyBOZXh0LmpzIGlzc3VlIGh0dHBzOi8vZ2l0aHViLmNvbS92ZXJjZWwvbmV4dC5qc2ApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJvdXRlID0gcm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5yb3V0ZScpO1xuICAgICAgICAgICAgICAgIGlmIChyb3V0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gYCR7bWV0aG9kfSAke3JvdXRlfWA7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnNwYW5fbmFtZSc6IG5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShuYW1lKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUoYCR7bWV0aG9kfSAke3NyY1BhZ2V9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGlzTWluaW1hbE1vZGUgPSBCb29sZWFuKHByb2Nlc3MuZW52Lk1JTklNQUxfTU9ERSB8fCBnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpKTtcbiAgICAgICAgY29uc3QgaGFuZGxlUmVzcG9uc2UgPSBhc3luYyAoY3VycmVudFNwYW4pPT57XG4gICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWU7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZUdlbmVyYXRvciA9IGFzeW5jICh7IHByZXZpb3VzQ2FjaGVFbnRyeSB9KT0+e1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNNaW5pbWFsTW9kZSAmJiBpc09uRGVtYW5kUmV2YWxpZGF0ZSAmJiByZXZhbGlkYXRlT25seUdlbmVyYXRlZCAmJiAhcHJldmlvdXNDYWNoZUVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uLWRlbWFuZCByZXZhbGlkYXRlIGFsd2F5cyBzZXRzIHRoaXMgaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsICdSRVZBTElEQVRFRCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmVuZCgnVGhpcyBwYWdlIGNvdWxkIG5vdCBiZSBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBpbnZva2VSb3V0ZU1vZHVsZShjdXJyZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5mZXRjaE1ldHJpY3MgPSBjb250ZXh0LnJlbmRlck9wdHMuZmV0Y2hNZXRyaWNzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGVuZGluZ1dhaXRVbnRpbCA9IGNvbnRleHQucmVuZGVyT3B0cy5wZW5kaW5nV2FpdFVudGlsO1xuICAgICAgICAgICAgICAgICAgICAvLyBBdHRlbXB0IHVzaW5nIHByb3ZpZGVkIHdhaXRVbnRpbCBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQncyBub3Qgd2UgZmFsbGJhY2sgdG8gc2VuZFJlc3BvbnNlJ3MgaGFuZGxpbmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdXYWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHgud2FpdFVudGlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LndhaXRVbnRpbChwZW5kaW5nV2FpdFVudGlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV2FpdFVudGlsID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlVGFncyA9IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRUYWdzO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBpcyBmb3IgYSBzdGF0aWMgcmVzcG9uc2UsIHdlIGNhbiBjYWNoZSBpdCBzbyBsb25nXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzIGl0J3Mgbm90IGVkZ2UuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0lzcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvcHkgdGhlIGhlYWRlcnMgZnJvbSB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZVRhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW05FWFRfQ0FDSEVfVEFHU19IRUFERVJdID0gY2FjaGVUYWdzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoZWFkZXJzWydjb250ZW50LXR5cGUnXSAmJiBibG9iLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzWydjb250ZW50LXR5cGUnXSA9IGJsb2IudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldmFsaWRhdGUgPSB0eXBlb2YgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlID49IElORklOSVRFX0NBQ0hFID8gZmFsc2UgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID09PSAndW5kZWZpbmVkJyB8fCBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID49IElORklOSVRFX0NBQ0hFID8gdW5kZWZpbmVkIDogY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY2FjaGUgZW50cnkgZm9yIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZDogQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEJ1ZmZlci5mcm9tKGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlRW50cnk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZW5kIHJlc3BvbnNlIHdpdGhvdXQgY2FjaGluZyBpZiBub3QgSVNSXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCByZXNwb25zZSwgY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGJhY2tncm91bmQgcmV2YWxpZGF0ZSB3ZSBuZWVkIHRvIHJlcG9ydFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcmVxdWVzdCBlcnJvciBoZXJlIGFzIGl0IHdvbid0IGJlIGJ1YmJsZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzQ2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogcHJldmlvdXNDYWNoZUVudHJ5LmlzU3RhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVyS2luZDogJ0FwcCBSb3V0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlUGF0aDogc3JjUGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU3RhdGljR2VuZXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcm91dGVyU2VydmVyQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0gYXdhaXQgcm91dGVNb2R1bGUuaGFuZGxlUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICBuZXh0Q29uZmlnLFxuICAgICAgICAgICAgICAgIGNhY2hlS2V5LFxuICAgICAgICAgICAgICAgIHJvdXRlS2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICBpc0ZhbGxiYWNrOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICBpc1JvdXRlUFBSRW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VHZW5lcmF0b3IsXG4gICAgICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsLFxuICAgICAgICAgICAgICAgIGlzTWluaW1hbE1vZGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgY3JlYXRlIGEgY2FjaGVFbnRyeSBmb3IgSVNSXG4gICAgICAgICAgICBpZiAoIWlzSXNyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGNhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZS5raW5kKSAhPT0gQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSkge1xuICAgICAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTE7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgSW52YXJpYW50OiBhcHAtcm91dGUgcmVjZWl2ZWQgaW52YWxpZCBjYWNoZSBlbnRyeSAke2NhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZTEgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUxLmtpbmR9YCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNzAxXCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNNaW5pbWFsTW9kZSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgaXNPbkRlbWFuZFJldmFsaWRhdGUgPyAnUkVWQUxJREFURUQnIDogY2FjaGVFbnRyeS5pc01pc3MgPyAnTUlTUycgOiBjYWNoZUVudHJ5LmlzU3RhbGUgPyAnU1RBTEUnIDogJ0hJVCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRHJhZnQgbW9kZSBzaG91bGQgbmV2ZXIgYmUgY2FjaGVkXG4gICAgICAgICAgICBpZiAoaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ3ByaXZhdGUsIG5vLWNhY2hlLCBuby1zdG9yZSwgbWF4LWFnZT0wLCBtdXN0LXJldmFsaWRhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMoY2FjaGVFbnRyeS52YWx1ZS5oZWFkZXJzKTtcbiAgICAgICAgICAgIGlmICghKGlzTWluaW1hbE1vZGUgJiYgaXNJc3IpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5kZWxldGUoTkVYVF9DQUNIRV9UQUdTX0hFQURFUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiBjYWNoZSBjb250cm9sIGlzIGFscmVhZHkgc2V0IG9uIHRoZSByZXNwb25zZSB3ZSBkb24ndFxuICAgICAgICAgICAgLy8gb3ZlcnJpZGUgaXQgdG8gYWxsb3cgdXNlcnMgdG8gY3VzdG9taXplIGl0IHZpYSBuZXh0LmNvbmZpZ1xuICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkuY2FjaGVDb250cm9sICYmICFyZXMuZ2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJykgJiYgIWhlYWRlcnMuZ2V0KCdDYWNoZS1Db250cm9sJykpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsIGdldENhY2hlQ29udHJvbEhlYWRlcihjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgLy8gQHRzLWV4cGVjdC1lcnJvciAtIEFyZ3VtZW50IG9mIHR5cGUgJ0J1ZmZlcjxBcnJheUJ1ZmZlckxpa2U+JyBpcyBub3QgYXNzaWduYWJsZSB0byBwYXJhbWV0ZXIgb2YgdHlwZSAnQm9keUluaXQgfCBudWxsIHwgdW5kZWZpbmVkJy5cbiAgICAgICAgICAgIG5ldyBSZXNwb25zZShjYWNoZUVudHJ5LnZhbHVlLmJvZHksIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIHN0YXR1czogY2FjaGVFbnRyeS52YWx1ZS5zdGF0dXMgfHwgMjAwXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZVJlc3BvbnNlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7c3JjUGFnZX1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGhhbmRsZVJlc3BvbnNlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKCEoZXJyIGluc3RhbmNlb2YgTm9GYWxsYmFja0Vycm9yKSkge1xuICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgcm91dGVQYXRoOiBub3JtYWxpemVkU3JjUGFnZSxcbiAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgIGlzU3RhdGljR2VuZXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0aHJvdyBzbyB0aGF0IHdlIGNhbiBoYW5kbGUgc2VydmluZyBlcnJvciBwYWdlXG4gICAgICAgIC8vIElmIHRoaXMgaXMgZHVyaW5nIHN0YXRpYyBnZW5lcmF0aW9uLCB0aHJvdyB0aGUgZXJyb3IgYWdhaW4uXG4gICAgICAgIGlmIChpc0lzcikgdGhyb3cgZXJyO1xuICAgICAgICAvLyBPdGhlcndpc2UsIHNlbmQgYSA1MDAgcmVzcG9uc2UuXG4gICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShudWxsLCB7XG4gICAgICAgICAgICBzdGF0dXM6IDUwMFxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Funread-count%2Froute&page=%2Fapi%2Fchat%2Funread-count%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Funread-count%2Froute.ts&appDir=C%3A%5CUsers%5CMohamadJavad%5COneDrive%5CDesktop%5Csaded%20-%20Copy%20(4)%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CMohamadJavad%5COneDrive%5CDesktop%5Csaded%20-%20Copy%20(4)&isDev=true&tsconfigPath=&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!**************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \**************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!**************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \**************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = import("pg");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@16.0.3_@babel+core@7.2_a6e7fe7b2107bfd5c9e45031e322c5c3/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Funread-count%2Froute&page=%2Fapi%2Fchat%2Funread-count%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Funread-count%2Froute.ts&appDir=C%3A%5CUsers%5CMohamadJavad%5COneDrive%5CDesktop%5Csaded%20-%20Copy%20(4)%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CMohamadJavad%5COneDrive%5CDesktop%5Csaded%20-%20Copy%20(4)&isDev=true&tsconfigPath=&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();